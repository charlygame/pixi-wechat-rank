!function(t){var e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=94)}([function(t,e,i){"use strict";e.__esModule=!0;e.VERSION="4.8.6",e.PI_2=2*Math.PI,e.RAD_TO_DEG=180/Math.PI,e.DEG_TO_RAD=Math.PI/180,e.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2},e.BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,NORMAL_NPM:17,ADD_NPM:18,SCREEN_NPM:19},e.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},e.SCALE_MODES={LINEAR:0,NEAREST:1},e.WRAP_MODES={CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2},e.GC_MODES={AUTO:0,MANUAL:1},e.URL_FILE_EXTENSION=/\.(\w{3,4})(?:$|\?|#)/i,e.DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i,e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e.SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},e.PRECISION={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"},e.TRANSFORM_MODE={STATIC:0,DYNAMIC:1},e.TEXT_GRADIENT={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1},e.UPDATE_PRIORITY={INTERACTION:50,HIGH:25,NORMAL:0,LOW:-25,UTILITY:-50}},function(t,e,i){"use strict";e.__esModule=!0,e.autoDetectRenderer=e.Application=e.Filter=e.SpriteMaskFilter=e.Quad=e.RenderTarget=e.ObjectRenderer=e.WebGLManager=e.Shader=e.CanvasRenderTarget=e.TextureUvs=e.VideoBaseTexture=e.BaseRenderTexture=e.RenderTexture=e.BaseTexture=e.TextureMatrix=e.Texture=e.Spritesheet=e.CanvasGraphicsRenderer=e.GraphicsRenderer=e.GraphicsData=e.Graphics=e.TextMetrics=e.TextStyle=e.Text=e.SpriteRenderer=e.CanvasTinter=e.CanvasSpriteRenderer=e.Sprite=e.TransformBase=e.TransformStatic=e.Transform=e.Container=e.DisplayObject=e.Bounds=e.glCore=e.WebGLRenderer=e.CanvasRenderer=e.ticker=e.utils=e.settings=void 0;var r=i(0);Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}})});var n=i(4);Object.keys(n).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})});var o=i(5);Object.defineProperty(e,"glCore",{enumerable:!0,get:function(){return V(o).default}});var s=i(27);Object.defineProperty(e,"Bounds",{enumerable:!0,get:function(){return V(s).default}});var a=i(50);Object.defineProperty(e,"DisplayObject",{enumerable:!0,get:function(){return V(a).default}});var h=i(11);Object.defineProperty(e,"Container",{enumerable:!0,get:function(){return V(h).default}});var l=i(52);Object.defineProperty(e,"Transform",{enumerable:!0,get:function(){return V(l).default}});var u=i(51);Object.defineProperty(e,"TransformStatic",{enumerable:!0,get:function(){return V(u).default}});var c=i(29);Object.defineProperty(e,"TransformBase",{enumerable:!0,get:function(){return V(c).default}});var d=i(31);Object.defineProperty(e,"Sprite",{enumerable:!0,get:function(){return V(d).default}});var p=i(126);Object.defineProperty(e,"CanvasSpriteRenderer",{enumerable:!0,get:function(){return V(p).default}});var f=i(17);Object.defineProperty(e,"CanvasTinter",{enumerable:!0,get:function(){return V(f).default}});var g=i(129);Object.defineProperty(e,"SpriteRenderer",{enumerable:!0,get:function(){return V(g).default}});var y=i(145);Object.defineProperty(e,"Text",{enumerable:!0,get:function(){return V(y).default}});var v=i(65);Object.defineProperty(e,"TextStyle",{enumerable:!0,get:function(){return V(v).default}});var m=i(66);Object.defineProperty(e,"TextMetrics",{enumerable:!0,get:function(){return V(m).default}});var b=i(147);Object.defineProperty(e,"Graphics",{enumerable:!0,get:function(){return V(b).default}});var $=i(67);Object.defineProperty(e,"GraphicsData",{enumerable:!0,get:function(){return V($).default}});var w=i(149);Object.defineProperty(e,"GraphicsRenderer",{enumerable:!0,get:function(){return V(w).default}});var x=i(156);Object.defineProperty(e,"CanvasGraphicsRenderer",{enumerable:!0,get:function(){return V(x).default}});var _=i(157);Object.defineProperty(e,"Spritesheet",{enumerable:!0,get:function(){return V(_).default}});var T=i(7);Object.defineProperty(e,"Texture",{enumerable:!0,get:function(){return V(T).default}});var E=i(63);Object.defineProperty(e,"TextureMatrix",{enumerable:!0,get:function(){return V(E).default}});var O=i(10);Object.defineProperty(e,"BaseTexture",{enumerable:!0,get:function(){return V(O).default}});var S=i(34);Object.defineProperty(e,"RenderTexture",{enumerable:!0,get:function(){return V(S).default}});var C=i(58);Object.defineProperty(e,"BaseRenderTexture",{enumerable:!0,get:function(){return V(C).default}});var P=i(55);Object.defineProperty(e,"VideoBaseTexture",{enumerable:!0,get:function(){return V(P).default}});var I=i(56);Object.defineProperty(e,"TextureUvs",{enumerable:!0,get:function(){return V(I).default}});var M=i(59);Object.defineProperty(e,"CanvasRenderTarget",{enumerable:!0,get:function(){return V(M).default}});var A=i(14);Object.defineProperty(e,"Shader",{enumerable:!0,get:function(){return V(A).default}});var R=i(13);Object.defineProperty(e,"WebGLManager",{enumerable:!0,get:function(){return V(R).default}});var D=i(18);Object.defineProperty(e,"ObjectRenderer",{enumerable:!0,get:function(){return V(D).default}});var k=i(20);Object.defineProperty(e,"RenderTarget",{enumerable:!0,get:function(){return V(k).default}});var L=i(64);Object.defineProperty(e,"Quad",{enumerable:!0,get:function(){return V(L).default}});var j=i(61);Object.defineProperty(e,"SpriteMaskFilter",{enumerable:!0,get:function(){return V(j).default}});var N=i(62);Object.defineProperty(e,"Filter",{enumerable:!0,get:function(){return V(N).default}});var F=i(68);Object.defineProperty(e,"Application",{enumerable:!0,get:function(){return V(F).default}});var B=i(69);Object.defineProperty(e,"autoDetectRenderer",{enumerable:!0,get:function(){return B.autoDetectRenderer}});var U=z(i(2)),G=z(i(33)),H=V(i(3)),W=V(i(12)),X=V(i(19));function z(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function V(t){return t&&t.__esModule?t:{default:t}}e.settings=H.default,e.utils=U,e.ticker=G,e.CanvasRenderer=W.default,e.WebGLRenderer=X.default},function(t,e,i){"use strict";e.__esModule=!0,e.premultiplyBlendMode=e.BaseTextureCache=e.TextureCache=e.earcut=e.mixins=e.pluginTarget=e.EventEmitter=e.removeItems=e.isMobile=void 0,e.uid=function(){return++f},e.hex2rgb=function(t,e){return(e=e||[])[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e},e.hex2string=function(t){return t=t.toString(16),"#"+(t="000000".substr(0,6-t.length)+t)},e.rgb2hex=function(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)},e.getResolutionOfUrl=function(t,e){var i=n.default.RETINA_PREFIX.exec(t);if(i)return parseFloat(i[1]);return void 0!==e?e:1},e.decomposeDataUri=function(t){var e=r.DATA_URI.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]};return},e.getUrlFileExtension=function(t){var e=r.URL_FILE_EXTENSION.exec(t);if(e)return e[1].toLowerCase();return},e.getSvgSize=function(t){var e=r.SVG_SIZE.exec(t),i={};e&&(i[e[1]]=Math.round(parseFloat(e[3])),i[e[5]]=Math.round(parseFloat(e[7])));return i},e.skipHello=function(){g=!0},e.sayHello=function(t){if(g)return;if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var e=["\n %c %c %c PixiJS "+r.VERSION+" - ✰ "+t+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,e)}else window.console&&window.console.log("PixiJS "+r.VERSION+" - "+t+" - http://www.pixijs.com/");g=!0},e.isWebGLSupported=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),i=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),r=!(!i||!i.getContextAttributes().stencil);if(i){var n=i.getExtension("WEBGL_lose_context");n&&n.loseContext()}return i=null,r}catch(t){return!1}},e.sign=function(t){return 0===t?0:t<0?-1:1},e.destroyTextureCache=function(){var t=void 0;for(t in y)y[t].destroy();for(t in v)v[t].destroy()},e.clearTextureCache=function(){var t=void 0;for(t in y)delete y[t];for(t in v)delete v[t]},e.correctBlendMode=function(t,e){return m[e?1:0][t]},e.premultiplyTint=function(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;var i=t>>16&255,r=t>>8&255,n=255&t;return(255*e<<24)+((i=i*e+.5|0)<<16)+((r=r*e+.5|0)<<8)+(n=n*e+.5|0)},e.premultiplyRgba=function(t,e,i,r){i=i||new Float32Array(4),r||void 0===r?(i[0]=t[0]*e,i[1]=t[1]*e,i[2]=t[2]*e):(i[0]=t[0],i[1]=t[1],i[2]=t[2]);return i[3]=e,i},e.premultiplyTintToRgba=function(t,e,i,r){(i=i||new Float32Array(4))[0]=(t>>16&255)/255,i[1]=(t>>8&255)/255,i[2]=(255&t)/255,(r||void 0===r)&&(i[0]*=e,i[1]*=e,i[2]*=e);return i[3]=e,i};var r=i(0),n=p(i(3)),o=p(i(8)),s=p(i(114)),a=d(i(115)),h=d(i(28)),l=p(i(116)),u=p(i(117)),c=p(i(30));function d(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function p(t){return t&&t.__esModule?t:{default:t}}var f=0,g=!1;e.isMobile=h,e.removeItems=l.default,e.EventEmitter=o.default,e.pluginTarget=s.default,e.mixins=a,e.earcut=c.default;var y=e.TextureCache=Object.create(null),v=e.BaseTextureCache=Object.create(null);var m=e.premultiplyBlendMode=(0,u.default)()},function(t,e,i){"use strict";e.__esModule=!0;var r=o(i(112)),n=o(i(113));function o(t){return t&&t.__esModule?t:{default:t}}e.default={TARGET_FPMS:.06,MIPMAP_TEXTURES:!0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(0,r.default)(32),SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@([0-9\.]+)x/,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1,width:800,height:600,legacy:!1},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:0,SCALE_MODE:0,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:"mediump",CAN_UPLOAD_SAME_BUFFER:(0,n.default)(),MESH_CANVAS_PADDING:0}},function(t,e,i){"use strict";e.__esModule=!0;var r=i(23);Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return d(r).default}});var n=i(39);Object.defineProperty(e,"ObservablePoint",{enumerable:!0,get:function(){return d(n).default}});var o=i(24);Object.defineProperty(e,"Matrix",{enumerable:!0,get:function(){return d(o).default}});var s=i(40);Object.defineProperty(e,"GroupD8",{enumerable:!0,get:function(){return d(s).default}});var a=i(102);Object.defineProperty(e,"Circle",{enumerable:!0,get:function(){return d(a).default}});var h=i(103);Object.defineProperty(e,"Ellipse",{enumerable:!0,get:function(){return d(h).default}});var l=i(104);Object.defineProperty(e,"Polygon",{enumerable:!0,get:function(){return d(l).default}});var u=i(25);Object.defineProperty(e,"Rectangle",{enumerable:!0,get:function(){return d(u).default}});var c=i(105);function d(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"RoundedRectangle",{enumerable:!0,get:function(){return d(c).default}})},function(t,e,i){var r={createContext:i(106),setVertexAttribArrays:i(41),GLBuffer:i(107),GLFramebuffer:i(108),GLShader:i(109),GLTexture:i(42),VertexArrayObject:i(110),shader:i(111)};t.exports&&(t.exports=r),"undefined"!=typeof window&&(window.PIXI=window.PIXI||{},window.PIXI.glCore=r)},function(t,e,i){(function(t){function i(t,e){for(var i=0,r=t.length-1;r>=0;r--){var n=t[r];"."===n?t.splice(r,1):".."===n?(t.splice(r,1),i++):i&&(t.splice(r,1),i--)}if(e)for(;i--;i)t.unshift("..");return t}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,n=function(t){return r.exec(t).slice(1)};function o(t,e){if(t.filter)return t.filter(e);for(var i=[],r=0;r<t.length;r++)e(t[r],r,t)&&i.push(t[r]);return i}e.resolve=function(){for(var e="",r=!1,n=arguments.length-1;n>=-1&&!r;n--){var s=n>=0?arguments[n]:t.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(e=s+"/"+e,r="/"===s.charAt(0))}return(r?"/":"")+(e=i(o(e.split("/"),function(t){return!!t}),!r).join("/"))||"."},e.normalize=function(t){var r=e.isAbsolute(t),n="/"===s(t,-1);return(t=i(o(t.split("/"),function(t){return!!t}),!r).join("/"))||r||(t="."),t&&n&&(t+="/"),(r?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(o(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},e.relative=function(t,i){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var i=t.length-1;i>=0&&""===t[i];i--);return e>i?[]:t.slice(e,i-e+1)}t=e.resolve(t).substr(1),i=e.resolve(i).substr(1);for(var n=r(t.split("/")),o=r(i.split("/")),s=Math.min(n.length,o.length),a=s,h=0;h<s;h++)if(n[h]!==o[h]){a=h;break}var l=[];for(h=a;h<n.length;h++)l.push("..");return(l=l.concat(o.slice(a))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){var e=n(t),i=e[0],r=e[1];return i||r?(r&&(r=r.substr(0,r.length-1)),i+r):"."},e.basename=function(t,e){var i=n(t)[2];return e&&i.substr(-1*e.length)===e&&(i=i.substr(0,i.length-e.length)),i},e.extname=function(t){return n(t)[3]};var s="b"==="ab".substr(-1)?function(t,e,i){return t.substr(e,i)}:function(t,e,i){return e<0&&(e=t.length+e),t.substr(e,i)}}).call(this,i(132))},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=c(i(10)),o=c(i(55)),s=c(i(56)),a=c(i(8)),h=i(4),l=i(2),u=c(i(3));function c(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(i,r,n,o,s,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var l=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));if(l.noFrame=!1,r||(l.noFrame=!0,r=new h.Rectangle(0,0,1,1)),i instanceof e&&(i=i.baseTexture),l.baseTexture=i,l._frame=r,l.trim=o,l.valid=!1,l.requiresUpdate=!1,l._uvs=null,l.orig=n||r,l._rotate=Number(s||0),!0===s)l._rotate=2;else if(l._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return i.hasLoaded?(l.noFrame&&(r=new h.Rectangle(0,0,i.width,i.height),i.on("update",l.onBaseTextureUpdated,l)),l.frame=r):i.once("loaded",l.onBaseTextureLoaded,l),l.defaultAnchor=a?new h.Point(a.x,a.y):new h.Point(0,0),l._updateID=0,l.transform=null,l.textureCacheIds=[],l}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.update=function(){this.baseTexture.update()},e.prototype.onBaseTextureLoaded=function(t){this._updateID++,this.noFrame?this.frame=new h.Rectangle(0,0,t.width,t.height):this.frame=this._frame,this.baseTexture.on("update",this.onBaseTextureUpdated,this),this.emit("update",this)},e.prototype.onBaseTextureUpdated=function(t){this._updateID++,this._frame.width=t.width,this._frame.height=t.height,this.emit("update",this)},e.prototype.destroy=function(t){this.baseTexture&&(t&&(l.TextureCache[this.baseTexture.imageUrl]&&e.removeFromCache(this.baseTexture.imageUrl),this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){return new e(this.baseTexture,this.frame,this.orig,this.trim,this.rotate,this.defaultAnchor)},e.prototype._updateUvs=function(){this._uvs||(this._uvs=new s.default),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.fromImage=function(t,i,r,o){var s=l.TextureCache[t];return s||(s=new e(n.default.fromImage(t,i,r,o)),e.addToCache(s,t)),s},e.fromFrame=function(t){var e=l.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return e},e.fromCanvas=function(t,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";return new e(n.default.fromCanvas(t,i,r))},e.fromVideo=function(t,i,r,n){return"string"==typeof t?e.fromVideoUrl(t,i,r,n):new e(o.default.fromVideo(t,i,n))},e.fromVideoUrl=function(t,i,r,n){return new e(o.default.fromUrl(t,i,r,n))},e.from=function(t){if("string"==typeof t){var i=l.TextureCache[t];return i||(null!==t.match(/\.(mp4|webm|ogg|h264|avi|mov)$/)?e.fromVideoUrl(t):e.fromImage(t))}return t instanceof HTMLImageElement?new e(n.default.from(t)):t instanceof HTMLCanvasElement?e.fromCanvas(t,u.default.SCALE_MODE,"HTMLCanvasElement"):t instanceof HTMLVideoElement?e.fromVideo(t):t instanceof n.default?new e(t):t},e.fromLoader=function(t,i,r){var o=new n.default(t,void 0,(0,l.getResolutionOfUrl)(i)),s=new e(o);return o.imageUrl=i,r||(r=i),n.default.addToCache(s.baseTexture,r),e.addToCache(s,r),r!==i&&(n.default.addToCache(s.baseTexture,i),e.addToCache(s,i)),s},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),l.TextureCache[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),l.TextureCache[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=l.TextureCache[t];if(e){var i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete l.TextureCache[t],e}}else if(t&&t.textureCacheIds){for(var r=0;r<t.textureCacheIds.length;++r)l.TextureCache[t.textureCacheIds[r]]===t&&delete l.TextureCache[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null},r(e,[{key:"frame",get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,i=t.y,r=t.width,n=t.height,o=e+r>this.baseTexture.width,s=i+n>this.baseTexture.height;if(o||s){var a=o&&s?"and":"or",h="X: "+e+" + "+r+" = "+(e+r)+" > "+this.baseTexture.width,l="Y: "+i+" + "+n+" = "+(i+n)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+h+" "+a+" "+l)}this.valid=r&&n&&this.baseTexture.hasLoaded,this.trim||this.rotate||(this.orig=t),this.valid&&this._updateUvs()}},{key:"rotate",get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this._updateUvs()}},{key:"width",get:function(){return this.orig.width}},{key:"height",get:function(){return this.orig.height}}]),e}(a.default);function p(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}e.default=d,d.EMPTY=new d(new n.default),p(d.EMPTY),p(d.EMPTY.baseTexture),d.WHITE=function(){var t=document.createElement("canvas");t.width=10,t.height=10;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,10,10),new d(new n.default(t))}(),p(d.WHITE),p(d.WHITE.baseTexture)},function(t,e,i){"use strict";var r=Object.prototype.hasOwnProperty,n="~";function o(){}function s(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function a(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(n=!1)),a.prototype.eventNames=function(){var t,e,i=[];if(0===this._eventsCount)return i;for(e in t=this._events)r.call(t,e)&&i.push(n?e.slice(1):e);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},a.prototype.listeners=function(t,e){var i=n?n+t:t,r=this._events[i];if(e)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var o=0,s=r.length,a=new Array(s);o<s;o++)a[o]=r[o].fn;return a},a.prototype.emit=function(t,e,i,r,o,s){var a=n?n+t:t;if(!this._events[a])return!1;var h,l,u=this._events[a],c=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,i),!0;case 4:return u.fn.call(u.context,e,i,r),!0;case 5:return u.fn.call(u.context,e,i,r,o),!0;case 6:return u.fn.call(u.context,e,i,r,o,s),!0}for(l=1,h=new Array(c-1);l<c;l++)h[l-1]=arguments[l];u.fn.apply(u.context,h)}else{var d,p=u.length;for(l=0;l<p;l++)switch(u[l].once&&this.removeListener(t,u[l].fn,void 0,!0),c){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,e);break;case 3:u[l].fn.call(u[l].context,e,i);break;case 4:u[l].fn.call(u[l].context,e,i,r);break;default:if(!h)for(d=1,h=new Array(c-1);d<c;d++)h[d-1]=arguments[d];u[l].fn.apply(u[l].context,h)}}return!0},a.prototype.on=function(t,e,i){var r=new s(e,i||this),o=n?n+t:t;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],r]:this._events[o].push(r):(this._events[o]=r,this._eventsCount++),this},a.prototype.once=function(t,e,i){var r=new s(e,i||this,!0),o=n?n+t:t;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],r]:this._events[o].push(r):(this._events[o]=r,this._eventsCount++),this},a.prototype.removeListener=function(t,e,i,r){var s=n?n+t:t;if(!this._events[s])return this;if(!e)return 0==--this._eventsCount?this._events=new o:delete this._events[s],this;var a=this._events[s];if(a.fn)a.fn!==e||r&&!a.once||i&&a.context!==i||(0==--this._eventsCount?this._events=new o:delete this._events[s]);else{for(var h=0,l=[],u=a.length;h<u;h++)(a[h].fn!==e||r&&!a[h].once||i&&a[h].context!==i)&&l.push(a[h]);l.length?this._events[s]=1===l.length?l[0]:l:0==--this._eventsCount?this._events=new o:delete this._events[s]}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&(0==--this._eventsCount?this._events=new o:delete this._events[e])):(this._events=new o,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prototype.setMaxListeners=function(){return this},a.prefixed=n,a.EventEmitter=a,t.exports=a},function(t,e,i){"use strict";var r,n=i(38),o={};
/*!
* TweenJS
* Visit http://createjs.com/ for documentation, updates and examples.
*
* Copyright (c) 2010 gskinner.com, inc.
*
* Permission is hereby granted, free of charge, to any person
* obtaining a copy of this software and associated documentation
* files (the "Software"), to deal in the Software without
* restriction, including without limitation the rights to use,
* copy, modify, merge, publish, distribute, sublicense, and/or sell
* copies of the Software, and to permit persons to whom the
* Software is furnished to do so, subject to the following
* conditions:
*
* The above copyright notice and this permission notice shall be
* included in all copies or substantial portions of the Software.
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
* OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
* NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
* HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
* WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
* FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
* OTHER DEALINGS IN THE SOFTWARE.
*/o.extend=function(t,e){function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i},o.promote=function(t,e){var i=t.prototype,r=Object.getPrototypeOf&&Object.getPrototypeOf(i)||i.__proto__;if(r)for(var n in i[(e+="_")+"constructor"]=r.constructor,r)i.hasOwnProperty(n)&&"function"==typeof r[n]&&(i[e+n]=r[n]);return t},o.deprecate=function(t,e){return function(){var i="Deprecated property or method '"+e+"'. See docs for info.";return console&&(console.warn?console.warn(i):console.log(i)),t&&t.apply(this,arguments)}},function(){function t(t,e,i){this.type=t,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!e,this.cancelable=!!i,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var e=t.prototype;e.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},e.stopPropagation=function(){this.propagationStopped=!0},e.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},e.remove=function(){this.removed=!0},e.clone=function(){return new t(this.type,this.bubbles,this.cancelable)},e.set=function(t){for(var e in t)this[e]=t[e];return this},e.toString=function(){return"[Event (type="+this.type+")]"},o.Event=t}(),function(){function t(){this._listeners=null,this._captureListeners=null}var e=t.prototype;t.initialize=function(t){t.addEventListener=e.addEventListener,t.on=e.on,t.removeEventListener=t.off=e.removeEventListener,t.removeAllEventListeners=e.removeAllEventListeners,t.hasEventListener=e.hasEventListener,t.dispatchEvent=e.dispatchEvent,t._dispatchEvent=e._dispatchEvent,t.willTrigger=e.willTrigger},e.addEventListener=function(t,e,i){var r,n=(r=i?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{})[t];return n&&this.removeEventListener(t,e,i),(n=r[t])?n.push(e):r[t]=[e],e},e.on=function(t,e,i,r,n,o){return e.handleEvent&&(i=i||e,e=e.handleEvent),i=i||this,this.addEventListener(t,function(t){e.call(i,t,n),r&&t.remove()},o)},e.removeEventListener=function(t,e,i){var r=i?this._captureListeners:this._listeners;if(r){var n=r[t];if(n)for(var o=0,s=n.length;o<s;o++)if(n[o]==e){1==s?delete r[t]:n.splice(o,1);break}}},e.off=e.removeEventListener,e.removeAllEventListeners=function(t){t?(this._listeners&&delete this._listeners[t],this._captureListeners&&delete this._captureListeners[t]):this._listeners=this._captureListeners=null},e.dispatchEvent=function(t,e,i){if("string"==typeof t){var r=this._listeners;if(!(e||r&&r[t]))return!0;t=new o.Event(t,e,i)}else t.target&&t.clone&&(t=t.clone());try{t.target=this}catch(t){}if(t.bubbles&&this.parent){for(var n=this,s=[n];n.parent;)s.push(n=n.parent);var a,h=s.length;for(a=h-1;a>=0&&!t.propagationStopped;a--)s[a]._dispatchEvent(t,1+(0==a));for(a=1;a<h&&!t.propagationStopped;a++)s[a]._dispatchEvent(t,3)}else this._dispatchEvent(t,2);return!t.defaultPrevented},e.hasEventListener=function(t){var e=this._listeners,i=this._captureListeners;return!!(e&&e[t]||i&&i[t])},e.willTrigger=function(t){for(var e=this;e;){if(e.hasEventListener(t))return!0;e=e.parent}return!1},e.toString=function(){return"[EventDispatcher]"},e._dispatchEvent=function(t,e){var i,r,n=e<=2?this._captureListeners:this._listeners;if(t&&n&&(r=n[t.type])&&(i=r.length)){try{t.currentTarget=this}catch(t){}try{t.eventPhase=0|e}catch(t){}t.removed=!1,r=r.slice();for(var o=0;o<i&&!t.immediatePropagationStopped;o++){var s=r[o];s.handleEvent?s.handleEvent(t):s(t),t.removed&&(this.off(t.type,s,1==e),t.removed=!1)}}2===e&&this._dispatchEvent(t,2.1)},o.EventDispatcher=t}(),function(){function t(){throw"Ticker cannot be instantiated."}t.RAF_SYNCHED="synched",t.RAF="raf",t.TIMEOUT="timeout",t.timingMode=null,t.maxDelta=0,t.paused=!1,t.removeEventListener=null,t.removeAllEventListeners=null,t.dispatchEvent=null,t.hasEventListener=null,t._listeners=null,o.EventDispatcher.initialize(t),t._addEventListener=t.addEventListener,t.addEventListener=function(){return!t._inited&&t.init(),t._addEventListener.apply(t,arguments)},t._inited=!1,t._startTime=0,t._pausedTime=0,t._ticks=0,t._pausedTicks=0,t._interval=50,t._lastTime=0,t._times=null,t._tickTimes=null,t._timerId=null,t._raf=!0,t._setInterval=function(e){t._interval=e,t._inited&&t._setupTick()},t.setInterval=o.deprecate(t._setInterval,"Ticker.setInterval"),t._getInterval=function(){return t._interval},t.getInterval=o.deprecate(t._getInterval,"Ticker.getInterval"),t._setFPS=function(e){t._setInterval(1e3/e)},t.setFPS=o.deprecate(t._setFPS,"Ticker.setFPS"),t._getFPS=function(){return 1e3/t._interval},t.getFPS=o.deprecate(t._getFPS,"Ticker.getFPS");try{Object.defineProperties(t,{interval:{get:t._getInterval,set:t._setInterval},framerate:{get:t._getFPS,set:t._setFPS}})}catch(t){console.log(t)}t.init=function(){t._inited||(t._inited=!0,t._times=[],t._tickTimes=[],t._startTime=t._getTime(),t._times.push(t._lastTime=0),t.interval=t._interval)},t.reset=function(){if(t._raf){var e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame;e&&e(t._timerId)}else clearTimeout(t._timerId);t.removeAllEventListeners("tick"),t._timerId=t._times=t._tickTimes=null,t._startTime=t._lastTime=t._ticks=t._pausedTime=0,t._inited=!1},t.getMeasuredTickTime=function(e){var i=0,r=t._tickTimes;if(!r||r.length<1)return-1;e=Math.min(r.length,e||0|t._getFPS());for(var n=0;n<e;n++)i+=r[n];return i/e},t.getMeasuredFPS=function(e){var i=t._times;return!i||i.length<2?-1:(e=Math.min(i.length-1,e||0|t._getFPS()),1e3/((i[0]-i[e])/e))},t.getTime=function(e){return t._startTime?t._getTime()-(e?t._pausedTime:0):-1},t.getEventTime=function(e){return t._startTime?(t._lastTime||t._startTime)-(e?t._pausedTime:0):-1},t.getTicks=function(e){return t._ticks-(e?t._pausedTicks:0)},t._handleSynch=function(){t._timerId=null,t._setupTick(),t._getTime()-t._lastTime>=.97*(t._interval-1)&&t._tick()},t._handleRAF=function(){t._timerId=null,t._setupTick(),t._tick()},t._handleTimeout=function(){t._timerId=null,t._setupTick(),t._tick()},t._setupTick=function(){if(null==t._timerId){var e=t.timingMode;if(e==t.RAF_SYNCHED||e==t.RAF){var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(i)return t._timerId=i(e==t.RAF?t._handleRAF:t._handleSynch),void(t._raf=!0)}t._raf=!1,t._timerId=setTimeout(t._handleTimeout,t._interval)}},t._tick=function(){var e=t.paused,i=t._getTime(),r=i-t._lastTime;if(t._lastTime=i,t._ticks++,e&&(t._pausedTicks++,t._pausedTime+=r),t.hasEventListener("tick")){var n=new o.Event("tick"),s=t.maxDelta;n.delta=s&&r>s?s:r,n.paused=e,n.time=i,n.runTime=i-t._pausedTime,t.dispatchEvent(n)}for(t._tickTimes.unshift(t._getTime()-i);t._tickTimes.length>100;)t._tickTimes.pop();for(t._times.unshift(i);t._times.length>100;)t._times.pop()};var e=window,i=e.performance.now||e.performance.mozNow||e.performance.msNow||e.performance.oNow||e.performance.webkitNow;t._getTime=function(){return(i&&i.call(e.performance)||(new Date).getTime())-t._startTime},o.Ticker=t}(),function(){function t(t){this.EventDispatcher_constructor(),this.ignoreGlobalPause=!1,this.loop=0,this.useTicks=!1,this.reversed=!1,this.bounce=!1,this.timeScale=1,this.duration=0,this.position=0,this.rawPosition=-1,this._paused=!0,this._next=null,this._prev=null,this._parent=null,this._labels=null,this._labelList=null,t&&(this.useTicks=!!t.useTicks,this.ignoreGlobalPause=!!t.ignoreGlobalPause,this.loop=!0===t.loop?-1:t.loop||0,this.reversed=!!t.reversed,this.bounce=!!t.bounce,this.timeScale=t.timeScale||1,t.onChange&&this.addEventListener("change",t.onChange),t.onComplete&&this.addEventListener("complete",t.onComplete))}var e=o.extend(t,o.EventDispatcher);e._setPaused=function(t){return o.Tween._register(this,t),this},e.setPaused=o.deprecate(e._setPaused,"AbstractTween.setPaused"),e._getPaused=function(){return this._paused},e.getPaused=o.deprecate(e._getPaused,"AbstactTween.getPaused"),e._getCurrentLabel=function(t){var e=this.getLabels();null==t&&(t=this.position);for(var i=0,r=e.length;i<r&&!(t<e[i].position);i++);return 0===i?null:e[i-1].label},e.getCurrentLabel=o.deprecate(e._getCurrentLabel,"AbstractTween.getCurrentLabel");try{Object.defineProperties(e,{paused:{set:e._setPaused,get:e._getPaused},currentLabel:{get:e._getCurrentLabel}})}catch(t){}e.advance=function(t,e){this.setPosition(this.rawPosition+t*this.timeScale,e)},e.setPosition=function(t,e,i,r){var n=this.duration,o=this.loop,s=this.rawPosition,a=0,h=0,l=!1;if(t<0&&(t=0),0===n){if(l=!0,-1!==s)return l}else{if(h=t-(a=t/n|0)*n,(l=-1!==o&&t>=o*n+n)&&(t=(h=n)*(a=o)+n),t===s)return l;!this.reversed!=!(this.bounce&&a%2)&&(h=n-h)}this.position=h,this.rawPosition=t,this._updatePosition(i,l),l&&(this.paused=!0),r&&r(this),e||this._runActions(s,t,i,!i&&-1===s),this.dispatchEvent("change"),l&&this.dispatchEvent("complete")},e.calculatePosition=function(t){var e=this.duration,i=this.loop,r=0,n=0;return 0===e?0:(-1!==i&&t>=i*e+e?(n=e,r=i):n=t<0?0:t-(r=t/e|0)*e,!this.reversed!=!(this.bounce&&r%2)?e-n:n)},e.getLabels=function(){var t=this._labelList;if(!t){t=this._labelList=[];var e=this._labels;for(var i in e)t.push({label:i,position:e[i]});t.sort(function(t,e){return t.position-e.position})}return t},e.setLabels=function(t){this._labels=t,this._labelList=null},e.addLabel=function(t,e){this._labels||(this._labels={}),this._labels[t]=e;var i=this._labelList;if(i){for(var r=0,n=i.length;r<n&&!(e<i[r].position);r++);i.splice(r,0,{label:t,position:e})}},e.gotoAndPlay=function(t){this.paused=!1,this._goto(t)},e.gotoAndStop=function(t){this.paused=!0,this._goto(t)},e.resolve=function(t){var e=Number(t);return isNaN(e)&&(e=this._labels&&this._labels[t]),e},e.toString=function(){return"[AbstractTween]"},e.clone=function(){throw"AbstractTween can not be cloned."},e._init=function(t){t&&t.paused||(this.paused=!1),t&&null!=t.position&&this.setPosition(t.position)},e._updatePosition=function(t,e){},e._goto=function(t){var e=this.resolve(t);null!=e&&this.setPosition(e,!1,!0)},e._runActions=function(t,e,i,r){if(this._actionHead||this.tweens){var n,o,s,a,h=this.duration,l=this.reversed,u=this.bounce,c=this.loop;if(0===h?(n=o=s=a=0,l=u=!1):(s=t-(n=t/h|0)*h,a=e-(o=e/h|0)*h),-1!==c&&(o>c&&(a=h,o=c),n>c&&(s=h,n=c)),i)return this._runActionsRange(a,a,i,r);if(n!==o||s!==a||i||r){-1===n&&(n=s=0);var d=t<=e,p=n;do{var f=p===n?s:d?0:h,g=p===o?a:d?h:0;if(!l!=!(u&&p%2)&&(f=h-f,g=h-g),u&&p!==n&&f===g);else if(this._runActionsRange(f,g,i,r||p!==n&&!u))return!0;r=!1}while(d&&++p<=o||!d&&--p>=o)}}},e._runActionsRange=function(t,e,i,r){},o.AbstractTween=o.promote(t,"EventDispatcher")}(),function(){function t(e,r){this.AbstractTween_constructor(r),this.pluginData=null,this.target=e,this.passive=!1,this._stepHead=new i(null,0,0,{},null,!0),this._stepTail=this._stepHead,this._stepPosition=0,this._actionHead=null,this._actionTail=null,this._plugins=null,this._pluginIds=null,this._injected=null,r&&(this.pluginData=r.pluginData,r.override&&t.removeTweens(e)),this.pluginData||(this.pluginData={}),this._init(r)}var e=o.extend(t,o.AbstractTween);function i(t,e,i,r,n,o){this.next=null,this.prev=t,this.t=e,this.d=i,this.props=r,this.ease=n,this.passive=o,this.index=t?t.index+1:0}function r(t,e,i,r,n){this.next=null,this.prev=t,this.t=e,this.d=0,this.scope=i,this.funct=r,this.params=n}t.IGNORE={},t._tweens=[],t._plugins=null,t._tweenHead=null,t._tweenTail=null,t.get=function(e,i){return new t(e,i)},t.tick=function(e,i){for(var r=t._tweenHead;r;){var n=r._next;i&&!r.ignoreGlobalPause||r._paused||r.advance(r.useTicks?1:e),r=n}},t.handleEvent=function(t){"tick"===t.type&&this.tick(t.delta,t.paused)},t.removeTweens=function(e){if(e.tweenjs_count){for(var i=t._tweenHead;i;){var r=i._next;i.target===e&&t._register(i,!0),i=r}e.tweenjs_count=0}},t.removeAllTweens=function(){for(var e=t._tweenHead;e;){var i=e._next;e._paused=!0,e.target&&(e.target.tweenjs_count=0),e._next=e._prev=null,e=i}t._tweenHead=t._tweenTail=null},t.hasActiveTweens=function(e){return e?!!e.tweenjs_count:!!t._tweenHead},t._installPlugin=function(e){for(var i=e.priority=e.priority||0,r=t._plugins=t._plugins||[],n=0,o=r.length;n<o&&!(i<r[n].priority);n++);r.splice(n,0,e)},t._register=function(e,i){var r=e.target;if(!i&&e._paused){r&&(r.tweenjs_count=r.tweenjs_count?r.tweenjs_count+1:1);var n=t._tweenTail;n?(t._tweenTail=n._next=e,e._prev=n):t._tweenHead=t._tweenTail=e,!t._inited&&o.Ticker&&(o.Ticker.addEventListener("tick",t),t._inited=!0)}else if(i&&!e._paused){r&&r.tweenjs_count--;var s=e._next,a=e._prev;s?s._prev=a:t._tweenTail=a,a?a._next=s:t._tweenHead=s,e._next=e._prev=null}e._paused=i},e.wait=function(t,e){return t>0&&this._addStep(+t,this._stepTail.props,null,e),this},e.to=function(t,e,i){(null==e||e<0)&&(e=0);var r=this._addStep(+e,null,i);return this._appendProps(t,r),this},e.label=function(t){return this.addLabel(t,this.duration),this},e.call=function(t,e,i){return this._addAction(i||this.target,t,e||[this])},e.set=function(t,e){return this._addAction(e||this.target,this._set,[t])},e.play=function(t){return this._addAction(t||this,this._set,[{paused:!1}])},e.pause=function(t){return this._addAction(t||this,this._set,[{paused:!0}])},e.w=e.wait,e.t=e.to,e.c=e.call,e.s=e.set,e.toString=function(){return"[Tween]"},e.clone=function(){throw"Tween can not be cloned."},e._addPlugin=function(t){var e=this._pluginIds||(this._pluginIds={}),i=t.ID;if(i&&!e[i]){e[i]=!0;for(var r=this._plugins||(this._plugins=[]),n=t.priority||0,o=0,s=r.length;o<s;o++)if(n<r[o].priority)return void r.splice(o,0,t);r.push(t)}},e._updatePosition=function(t,e){var i=this._stepHead.next,r=this.position,n=this.duration;if(this.target&&i){for(var o=i.next;o&&o.t<=r;)o=(i=i.next).next;var s=e?0===n?1:r/n:(r-i.t)/i.d;this._updateTargetProps(i,s,e)}this._stepPosition=i?r-i.t:0},e._updateTargetProps=function(e,i,r){if(!(this.passive=!!e.passive)){var n,o,s,a,h=e.prev.props,l=e.props;(a=e.ease)&&(i=a(i,0,1,1));var u=this._plugins;t:for(var c in h){if(n=(o=h[c])!==(s=l[c])&&"number"==typeof o?o+(s-o)*i:i>=1?s:o,u)for(var d=0,p=u.length;d<p;d++){var f=u[d].change(this,e,c,n,i,r);if(f===t.IGNORE)continue t;void 0!==f&&(n=f)}this.target[c]=n}}},e._runActionsRange=function(t,e,i,r){var n=t>e,o=n?this._actionTail:this._actionHead,s=e,a=t;n&&(s=t,a=e);for(var h=this.position;o;){var l=o.t;if((l===e||l>a&&l<s||r&&l===t)&&(o.funct.apply(o.scope,o.params),h!==this.position))return!0;o=n?o.prev:o.next}},e._appendProps=function(e,i,r){var n,o,s,a,h,l=this._stepHead.props,u=this.target,c=t._plugins,d=i.prev,p=d.props,f=i.props||(i.props=this._cloneProps(p)),g={};for(n in e)if(e.hasOwnProperty(n)&&(g[n]=f[n]=e[n],void 0===l[n])){if(a=void 0,c)for(o=c.length-1;o>=0;o--)if(void 0!==(s=c[o].init(this,n,a))&&(a=s),a===t.IGNORE){delete f[n],delete g[n];break}a!==t.IGNORE&&(void 0===a&&(a=u[n]),p[n]=void 0===a?null:a)}for(n in g){s=e[n];for(var y,v=d;(y=v)&&(v=y.prev);)if(v.props!==y.props){if(void 0!==v.props[n])break;v.props[n]=p[n]}}if(!1!==r&&(c=this._plugins))for(o=c.length-1;o>=0;o--)c[o].step(this,i,g);(h=this._injected)&&(this._injected=null,this._appendProps(h,i,!1))},e._injectProp=function(t,e){(this._injected||(this._injected={}))[t]=e},e._addStep=function(t,e,r,n){var o=new i(this._stepTail,this.duration,t,e,r,n||!1);return this.duration+=t,this._stepTail=this._stepTail.next=o},e._addAction=function(t,e,i){var n=new r(this._actionTail,this.duration,t,e,i);return this._actionTail?this._actionTail.next=n:this._actionHead=n,this._actionTail=n,this},e._set=function(t){for(var e in t)this[e]=t[e]},e._cloneProps=function(t){var e={};for(var i in t)e[i]=t[i];return e},o.Tween=o.promote(t,"AbstractTween")}(),function(){function t(t){var e,i;t instanceof Array||null==t&&arguments.length>1?(e=t,i=arguments[1],t=arguments[2]):t&&(e=t.tweens,i=t.labels),this.AbstractTween_constructor(t),this.tweens=[],e&&this.addTween.apply(this,e),this.setLabels(i),this._init(t)}var e=o.extend(t,o.AbstractTween);e.addTween=function(t){t._parent&&t._parent.removeTween(t);var e=arguments.length;if(e>1){for(var i=0;i<e;i++)this.addTween(arguments[i]);return arguments[e-1]}if(0===e)return null;this.tweens.push(t),t._parent=this,t.paused=!0;var r=t.duration;return t.loop>0&&(r*=t.loop+1),r>this.duration&&(this.duration=r),this.rawPosition>=0&&t.setPosition(this.rawPosition),t},e.removeTween=function(t){var e=arguments.length;if(e>1){for(var i=!0,r=0;r<e;r++)i=i&&this.removeTween(arguments[r]);return i}if(0===e)return!0;var n=this.tweens;for(r=n.length;r--;)if(n[r]===t)return n.splice(r,1),t._parent=null,t.duration>=this.duration&&this.updateDuration(),!0;return!1},e.updateDuration=function(){this.duration=0;for(var t=0,e=this.tweens.length;t<e;t++){var i=this.tweens[t],r=i.duration;i.loop>0&&(r*=i.loop+1),r>this.duration&&(this.duration=r)}},e.toString=function(){return"[Timeline]"},e.clone=function(){throw"Timeline can not be cloned."},e._updatePosition=function(t,e){for(var i=this.position,r=0,n=this.tweens.length;r<n;r++)this.tweens[r].setPosition(i,!0,t)},e._runActionsRange=function(t,e,i,r){for(var n=this.position,o=0,s=this.tweens.length;o<s;o++)if(this.tweens[o]._runActions(t,e,i,r),n!==this.position)return!0},o.Timeline=o.promote(t,"AbstractTween")}(),function(){function t(){throw"Ease cannot be instantiated."}t.linear=function(t){return t},t.none=t.linear,t.get=function(t){return t<-1?t=-1:t>1&&(t=1),function(e){return 0==t?e:t<0?e*(e*-t+1+t):e*((2-e)*t+(1-t))}},t.getPowIn=function(t){return function(e){return Math.pow(e,t)}},t.getPowOut=function(t){return function(e){return 1-Math.pow(1-e,t)}},t.getPowInOut=function(t){return function(e){return(e*=2)<1?.5*Math.pow(e,t):1-.5*Math.abs(Math.pow(2-e,t))}},t.quadIn=t.getPowIn(2),t.quadOut=t.getPowOut(2),t.quadInOut=t.getPowInOut(2),t.cubicIn=t.getPowIn(3),t.cubicOut=t.getPowOut(3),t.cubicInOut=t.getPowInOut(3),t.quartIn=t.getPowIn(4),t.quartOut=t.getPowOut(4),t.quartInOut=t.getPowInOut(4),t.quintIn=t.getPowIn(5),t.quintOut=t.getPowOut(5),t.quintInOut=t.getPowInOut(5),t.sineIn=function(t){return 1-Math.cos(t*Math.PI/2)},t.sineOut=function(t){return Math.sin(t*Math.PI/2)},t.sineInOut=function(t){return-.5*(Math.cos(Math.PI*t)-1)},t.getBackIn=function(t){return function(e){return e*e*((t+1)*e-t)}},t.backIn=t.getBackIn(1.7),t.getBackOut=function(t){return function(e){return--e*e*((t+1)*e+t)+1}},t.backOut=t.getBackOut(1.7),t.getBackInOut=function(t){return t*=1.525,function(e){return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},t.backInOut=t.getBackInOut(1.7),t.circIn=function(t){return-(Math.sqrt(1-t*t)-1)},t.circOut=function(t){return Math.sqrt(1- --t*t)},t.circInOut=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},t.bounceIn=function(e){return 1-t.bounceOut(1-e)},t.bounceOut=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},t.bounceInOut=function(e){return e<.5?.5*t.bounceIn(2*e):.5*t.bounceOut(2*e-1)+.5},t.getElasticIn=function(t,e){var i=2*Math.PI;return function(r){if(0==r||1==r)return r;var n=e/i*Math.asin(1/t);return-t*Math.pow(2,10*(r-=1))*Math.sin((r-n)*i/e)}},t.elasticIn=t.getElasticIn(1,.3),t.getElasticOut=function(t,e){var i=2*Math.PI;return function(r){if(0==r||1==r)return r;var n=e/i*Math.asin(1/t);return t*Math.pow(2,-10*r)*Math.sin((r-n)*i/e)+1}},t.elasticOut=t.getElasticOut(1,.3),t.getElasticInOut=function(t,e){var i=2*Math.PI;return function(r){var n=e/i*Math.asin(1/t);return(r*=2)<1?t*Math.pow(2,10*(r-=1))*Math.sin((r-n)*i/e)*-.5:t*Math.pow(2,-10*(r-=1))*Math.sin((r-n)*i/e)*.5+1}},t.elasticInOut=t.getElasticInOut(1,.3*1.5),o.Ease=t}(),function(){function t(){throw"MotionGuidePlugin cannot be instantiated."}var e=t;e.priority=0,e.ID="MotionGuide",e.install=function(){return o.Tween._installPlugin(t),o.Tween.IGNORE},e.init=function(t,i,r){"guide"==i&&t._addPlugin(e)},e.step=function(t,i,r){for(var n in r)if("guide"===n){var o=i.props.guide,s=e._solveGuideData(r.guide,o);o.valid=!s;var a=o.endData;if(t._injectProp("x",a.x),t._injectProp("y",a.y),s||!o.orient)break;var h=void 0===i.prev.props.rotation?t.target.rotation||0:i.prev.props.rotation;if(o.startOffsetRot=h-o.startData.rotation,"fixed"==o.orient)o.endAbsRot=a.rotation+o.startOffsetRot,o.deltaRotation=0;else{var l=void 0===r.rotation?t.target.rotation||0:r.rotation,u=l-o.endData.rotation-o.startOffsetRot,c=u%360;switch(o.endAbsRot=l,o.orient){case"auto":o.deltaRotation=u;break;case"cw":o.deltaRotation=(c+360)%360+360*Math.abs(u/360|0);break;case"ccw":o.deltaRotation=(c-360)%360+-360*Math.abs(u/360|0)}}t._injectProp("rotation",o.endAbsRot)}},e.change=function(t,i,r,n,s,a){var h=i.props.guide;if(h&&i.props!==i.prev.props&&h!==i.prev.props.guide)return"guide"===r&&!h.valid||"x"==r||"y"==r||"rotation"===r&&h.orient?o.Tween.IGNORE:void e._ratioToPositionData(s,h,t.target)},e.debug=function(t,i,r){t=t.guide||t;var n=e._findPathProblems(t);if(n&&console.error("MotionGuidePlugin Error found: \n"+n),!i)return n;var o=t.path,s=o.length;for(i.save(),i.lineCap="round",i.lineJoin="miter",i.beginPath(),i.moveTo(o[0],o[1]),u=2;u<s;u+=4)i.quadraticCurveTo(o[u],o[u+1],o[u+2],o[u+3]);i.strokeStyle="black",i.lineWidth=4.5,i.stroke(),i.strokeStyle="white",i.lineWidth=3,i.stroke(),i.closePath();var a=r.length;if(r&&a){var h={},l={};e._solveGuideData(t,h);for(var u=0;u<a;u++)h.orient="fixed",e._ratioToPositionData(r[u],h,l),i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(l.x+9*Math.cos(.0174533*l.rotation),l.y+9*Math.sin(.0174533*l.rotation)),i.strokeStyle="black",i.lineWidth=4.5,i.stroke(),i.strokeStyle="red",i.lineWidth=3,i.stroke(),i.closePath()}return i.restore(),n},e._solveGuideData=function(t,i){var r;if(r=e.debug(t))return r;var n=i.path=t.path;i.orient=t.orient;i.subLines=[],i.totalLength=0,i.startOffsetRot=0,i.deltaRotation=0,i.startData={ratio:0},i.endData={ratio:1},i.animSpan=1;var o,s,a,h,l,u,c,d,p,f=n.length,g={};for(o=n[0],s=n[1],c=2;c<f;c+=4){a=n[c],h=n[c+1],l=n[c+2],u=n[c+3];var y={weightings:[],estLength:0,portion:0},v=o,m=s;for(d=1;d<=10;d++){e._getParamsForCurve(o,s,a,h,l,u,d/10,!1,g);var b=g.x-v,$=g.y-m;p=Math.sqrt(b*b+$*$),y.weightings.push(p),y.estLength+=p,v=g.x,m=g.y}for(i.totalLength+=y.estLength,d=0;d<10;d++)p=y.estLength,y.weightings[d]=y.weightings[d]/p;i.subLines.push(y),o=l,s=u}p=i.totalLength;var w=i.subLines.length;for(c=0;c<w;c++)i.subLines[c].portion=i.subLines[c].estLength/p;var x=isNaN(t.start)?0:t.start,_=isNaN(t.end)?1:t.end;e._ratioToPositionData(x,i,i.startData),e._ratioToPositionData(_,i,i.endData),i.startData.ratio=x,i.endData.ratio=_,i.animSpan=i.endData.ratio-i.startData.ratio},e._ratioToPositionData=function(t,i,r){var n,o,s,a,h,l=i.subLines,u=0,c=t*i.animSpan+i.startData.ratio;for(o=l.length,n=0;n<o;n++){if(u+(a=l[n].portion)>=c){h=n;break}u+=a}void 0===h&&(h=o-1,u-=a);var d=l[h].weightings,p=a;for(o=d.length,n=0;n<o&&!(u+(a=d[n]*p)>=c);n++)u+=a;h=4*h+2,s=n/10+(c-u)/a*.1;var f=i.path;return e._getParamsForCurve(f[h-2],f[h-1],f[h],f[h+1],f[h+2],f[h+3],s,i.orient,r),i.orient&&(t>=.99999&&t<=1.00001&&void 0!==i.endAbsRot?r.rotation=i.endAbsRot:r.rotation+=i.startOffsetRot+t*i.deltaRotation),r},e._getParamsForCurve=function(t,e,i,r,n,o,s,a,h){var l=1-s;h.x=l*l*t+2*l*s*i+s*s*n,h.y=l*l*e+2*l*s*r+s*s*o,a&&(h.rotation=57.2957795*Math.atan2((r-e)*l+(o-r)*s,(i-t)*l+(n-i)*s))},e._findPathProblems=function(t){var e=t.path,i=e&&e.length||0;if(i<6||(i-2)%4){var r="\tCannot parse 'path' array due to invalid number of entries in path. ";return r+="There should be an odd number of points, at least 3 points, and 2 entries per point (x & y). ",r+="See 'CanvasRenderingContext2D.quadraticCurveTo' for details as 'path' models a quadratic bezier.\n\n",r+="Only [ "+i+" ] values found. Expected: "+Math.max(4*Math.ceil((i-2)/4)+2,6)}for(var n=0;n<i;n++)if(isNaN(e[n]))return"All data in path array must be numeric";var o=t.start;if(isNaN(o)&&void 0!==o)return"'start' out of bounds. Expected 0 to 1, got: "+o;var s=t.end;if(isNaN(s)&&void 0!==s)return"'end' out of bounds. Expected 0 to 1, got: "+s;var a=t.orient;return a&&"fixed"!=a&&"auto"!=a&&"cw"!=a&&"ccw"!=a?'Invalid orientation value. Expected ["fixed", "auto", "cw", "ccw", undefined], got: '+a:void 0},o.MotionGuidePlugin=t}(),(r=o.TweenJS=o.TweenJS||{}).version="1.0.0",r.buildDate="Thu, 14 Sep 2017 19:47:47 GMT";var s=i(91);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var h,l,u=i(198).DOMParser,c=n,d=o,p=s.Zlib,f={},g=(f.ELEMENT_NODE=1,f.ATTRIBUTE_NODE=2,f.TEXT_NODE=3,f.CDATA_SECTION_NODE=4,f.ENTITY_REFERENCE_NODE=5,f.ENTITY_NODE=6,f.PROCESSING_INSTRUCTION_NODE=7,f.COMMENT_NODE=8,f.DOCUMENT_NODE=9,f.DOCUMENT_TYPE_NODE=10,f.DOCUMENT_FRAGMENT_NODE=11,f.NOTATION_NODE=12,f),y=(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});!function(t){var e=!(!window.PointerEvent&&!window.MSPointerEvent),i="ontouchstart"in window&&c.utils.isMobile.any,r=function(){function t(){}return t.Down=e?"pointerdown":i?"touchstart":"mousedown",t.Cancel=e?"pointercancel":i?"touchcancel":"mousecancel",t.Up=e?"pointerup":i?"touchend":"mouseup",t.Click=e?"pointertap":i?"tap":"click",t.UpOutside=e?"pointerupoutside":i?"touchendoutside":"mouseupoutside",t.Move=e?"pointermove":i?"touchmove":"mousemove",t.Over=e?"pointerover":i?null:"mouseover",t.Out=e?"pointerout":i?null:"mouseout",t.RightDown="rightdown",t.RightUp="rightup",t.RightClick="rightclick",t.RightUpOutside="rightupoutside",t}();t.InteractiveEvents=r,t.GearXMLNodeNameMap={gearDisplay:0,gearXY:1,gearSize:2,gearLook:3,gearColor:4,gearAni:5,gearText:6,gearIcon:7},t.BlendModeMap=["Normal","Add","Multiply","Screen","Overlay","Darken","Lighten","ColorDodge","ColorBurn","HardLight","SoftLight","Difference","Exclusion","Hue","Saturation","Color","Luminosity","NormalNPM","AddNPM","ScreenNPM"],t.ParseOverflowType=function(t){switch(t){case"visible":return 0;case"hidden":return 1;case"scroll":return 2;case"scale":return 3;case"scaleFree":return 4;default:return 0}},t.ParseScrollType=function(t){switch(t){case"horizontal":return 0;case"vertical":return 1;case"both":return 2;default:return 1}},t.ParseLoaderFillType=function(t){switch(t){case"none":return 0;case"scale":return 1;case"scaleMatchHeight":return 2;case"scaleMatchWidth":return 3;case"scaleFree":return 4;default:return 0}},t.ParseListLayoutType=function(t){switch(t){case"column":return 0;case"row":return 1;case"flow_hz":return 2;case"flow_vt":return 3;case"pagination":return 4;default:return 0}},t.ParseListSelectionMode=function(t){switch(t){case"single":return 0;case"multiple":return 1;case"multipleSingleClick":return 2;case"none":return 3;default:return 0}},t.ParsePackageItemType=function(t){switch(t){case"image":return 0;case"movieclip":return 2;case"sound":return 3;case"component":return 4;case"swf":return 1;case"font":return 6;case"atlas":return 7;default:return 5}},t.ParseProgressTitleType=function(t){switch(t){case"percent":return 0;case"valueAndmax":return 1;case"value":return 2;case"max":return 3;default:return 0}},t.ParseScrollBarDisplayType=function(t){switch(t){case"default":return 0;case"visible":return 1;case"auto":return 2;case"hidden":return 3;default:return 0}},t.ParseFlipType=function(t){switch(t){case"hz":return 1;case"vt":return 2;case"both":return 3;default:return 0}},t.ParseButtonMode=function(t){switch(t){case"Common":return 0;case"Check":return 1;case"Radio":return 2;default:return 0}},t.ParseAutoSizeType=function(t){switch(t){case"none":return 0;case"both":return 1;case"height":return 2;case"shrink":return 3;default:return 0}},t.ParseAlignType=function(t){switch(t){case"left":return"left";case"center":return"center";case"right":return"right";default:return"left"}},t.ParseVertAlignType=function(t){switch(t){case"top":return 0;case"middle":return 1;case"bottom":return 2;default:return 0}},t.ParseListChildrenRenderOrder=function(t){switch(t){case"ascent":return 0;case"descent":return 1;case"arch":return 2;default:return 0}};var n={Linear:d.Ease.linear,"Elastic.In":d.Ease.elasticIn,"Elastic.Out":d.Ease.elasticOut,"Elastic.InOut":d.Ease.elasticInOut,"Quad.In":d.Ease.quadIn,"Quad.Out":d.Ease.quadOut,"Quad.InOut":d.Ease.quadInOut,"Cube.In":d.Ease.cubicIn,"Cube.Out":d.Ease.cubicOut,"Cube.InOut":d.Ease.cubicInOut,"Quart.In":d.Ease.quartIn,"Quart.Out":d.Ease.quartOut,"Quart.InOut":d.Ease.quartInOut,"Quint.In":d.Ease.quintIn,"Quint.Out":d.Ease.quintOut,"Quint.InOut":d.Ease.quintInOut,"Sine.In":d.Ease.sineIn,"Sine.Out":d.Ease.sineOut,"Sine.InOut":d.Ease.sineInOut,"Bounce.In":d.Ease.bounceIn,"Bounce.Out":d.Ease.bounceOut,"Bounce.InOut":d.Ease.bounceInOut,"Circ.In":d.Ease.circIn,"Circ.Out":d.Ease.circOut,"Circ.InOut":d.Ease.circInOut,"Expo.In":d.Ease.quartIn,"Expo.Out":d.Ease.quartOut,"Expo.InOut":d.Ease.quartInOut,"Back.In":d.Ease.backIn,"Back.Out":d.Ease.backOut,"Back.InOut":d.Ease.backInOut};t.ParseEaseType=function(t){return n[t]||n.linear}}(l||(l={})),function(t){var e=function(){function e(){this.$x=0,this.$y=0,this.$width=0,this.$height=0,this.$alpha=1,this.$rotation=0,this.$visible=!0,this.$touchable=!0,this.$grayed=!1,this.$draggable=!1,this.$scaleX=1,this.$scaleY=1,this.$skewX=0,this.$skewY=0,this.$pivot=new c.Point,this.$pivotAsAnchor=!1,this.$pivotOffset=new c.Point,this.$sortingOrder=0,this.$internalVisible=!0,this.$focusable=!1,this.$pixelSnapping=!1,this.$handlingController=!1,this.$lastColorComponents=null,this.$rawWidth=0,this.$rawHeight=0,this.$initWidth=0,this.$initHeight=0,this.$sourceWidth=0,this.$sourceHeight=0,this.$id=""+e.gInstanceCounter++,this.$name="",this.createDisplayObject(),this.$relations=new t.Relations(this),this.$gears=[]}return Object.defineProperty(e.prototype,"id",{get:function(){return this.$id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.$name},set:function(t){this.$name=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this.$x},set:function(t){this.setXY(t,this.$y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.$y},set:function(t){this.setXY(this.$x,t)},enumerable:!0,configurable:!0}),e.prototype.setXY=function(t,i){this.$x==t&&this.$y==i||(this.$x=t,this.$y=i,this.handleXYChanged(),this.updateGear(1),this.$parent&&(this.$parent.setBoundsChangedFlag(),this.$displayObject.emit("__xyChanged",this)),e.draggingObject!=this||e.sUpdatingWhileDragging||this.localToGlobalRect(0,0,this.width,this.height,e.sGlobalRect))},Object.defineProperty(e.prototype,"pixelSnapping",{get:function(){return this.$pixelSnapping},set:function(t){this.$pixelSnapping!=t&&(this.$pixelSnapping=t,this.handleXYChanged())},enumerable:!0,configurable:!0}),e.prototype.center=function(t){var e;void 0===t&&(t=!1),e=null!=this.$parent?this.parent:this.root,this.setXY((e.width-this.width)/2,(e.height-this.height)/2),t&&(this.addRelation(e,3),this.addRelation(e,10))},Object.defineProperty(e.prototype,"width",{get:function(){return this.ensureSizeCorrect(),this.$relations.sizeDirty&&this.$relations.ensureRelationsSizeCorrect(),this.$width},set:function(t){this.setSize(t,this.$rawHeight)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.ensureSizeCorrect(),this.$relations.sizeDirty&&this.$relations.ensureRelationsSizeCorrect(),this.$height},set:function(t){this.setSize(this.$rawWidth,t)},enumerable:!0,configurable:!0}),e.prototype.setSize=function(t,e,i){if(void 0===i&&(i=!1),this.$rawWidth!=t||this.$rawHeight!=e){this.$rawWidth=t,this.$rawHeight=e,t=Math.max(0,t),e=Math.max(0,e);var r=t-this.mapPivotWidth(1),n=e-this.mapPivotHeight(1);this.$width=t,this.$height=e,this.handleSizeChanged(),0==this.$pivot.x&&0==this.$pivot.y||(this.$pivotAsAnchor?this.applyPivot():(i||this.setXY(this.x-this.$pivot.x*r,this.y-this.$pivot.y*n),this.updatePivotOffset())),this.updateGear(2),this.$parent&&(this.$relations.onOwnerSizeChanged(r,n),this.$parent.setBoundsChangedFlag()),this.$displayObject.emit("__sizeChanged",this)}},e.prototype.ensureSizeCorrect=function(){},Object.defineProperty(e.prototype,"sourceHeight",{get:function(){return this.$sourceHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sourceWidth",{get:function(){return this.$sourceWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"initHeight",{get:function(){return this.$initHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"initWidth",{get:function(){return this.$initWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"actualWidth",{get:function(){return this.width*Math.abs(this.$scaleX)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"actualHeight",{get:function(){return this.height*Math.abs(this.$scaleY)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleX",{get:function(){return this.$scaleX},set:function(t){this.setScale(t,this.$scaleY)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleY",{get:function(){return this.$scaleY},set:function(t){this.setScale(this.$scaleX,t)},enumerable:!0,configurable:!0}),e.prototype.setScale=function(t,e){this.$scaleX==t&&this.$scaleY==e||(this.$scaleX=t,this.$scaleY=e,this.handleScaleChanged(),this.applyPivot(),this.updateGear(2))},Object.defineProperty(e.prototype,"skewX",{get:function(){return this.$skewX},set:function(t){this.setSkew(t,this.$skewY)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"skewY",{get:function(){return this.$skewY},set:function(t){this.setSkew(this.$skewX,t)},enumerable:!0,configurable:!0}),e.prototype.setSkew=function(e,i){this.$skewX==e&&this.$skewY==i||(this.$skewX=e,this.$skewY=i,this.$displayObject.skew.set(e*-t.utils.NumberUtil.RADIAN,i*t.utils.NumberUtil.RADIAN),this.applyPivot())},e.prototype.mapPivotWidth=function(t){return t*this.$width},e.prototype.mapPivotHeight=function(t){return t*this.$height},Object.defineProperty(e.prototype,"pivotX",{get:function(){return this.$pivot.x},set:function(t){this.setPivot(t,this.pivotY)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pivotY",{get:function(){return this.$pivot.y},set:function(t){this.setPivot(this.pivotX,t)},enumerable:!0,configurable:!0}),e.prototype.setPivot=function(t,e,i){void 0===i&&(i=!1),this.$pivot.x==t&&this.$pivot.y==e&&this.$pivotAsAnchor==i||(this.$pivot.set(t,e),this.$pivotAsAnchor=i,this.updatePivotOffset(),this.handleXYChanged())},e.prototype.internalSetPivot=function(t,e,i){this.$pivot.set(t,e),this.$pivotAsAnchor=i,i&&this.handleXYChanged()},e.prototype.updatePivotOffset=function(){if(0!=this.$pivot.x||0!=this.$pivot.y&&this.$displayObject.transform){var t=this.mapPivotWidth(this.$pivot.x),i=this.mapPivotHeight(this.$pivot.y);e.sHelperPoint.set(t,i),this.$displayObject.transform.updateLocalTransform();var r=this.$displayObject.localTransform,n=r.apply(e.sHelperPoint,e.sHelperPoint);n.x-=r.tx,n.y-=r.ty,this.$pivotOffset.set(this.$pivot.x*this.$width-n.x,this.$pivot.y*this.$height-n.y)}else this.$pivotOffset.set(0,0)},e.prototype.applyPivot=function(){0==this.$pivot.x&&0==this.$pivot.y||(this.updatePivotOffset(),this.handleXYChanged())},Object.defineProperty(e.prototype,"touchable",{get:function(){return this.$touchable},set:function(t){this.$touchable=t,this.$displayObject.interactive=this.$touchable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"grayed",{get:function(){return this.$grayed},set:function(t){this.$grayed!=t&&(this.$grayed=t,this.handleGrayedChanged(),this.updateGear(3))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return!this.$grayed&&this.$touchable},set:function(t){this.grayed=!t,this.touchable=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.$rotation},set:function(e){this.$rotation!=e&&(this.$rotation=e,this.$displayObject&&(this.$displayObject.rotation=t.utils.NumberUtil.angleToRadian(this.normalizeRotation)),this.applyPivot(),this.updateGear(3))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"normalizeRotation",{get:function(){var t=this.$rotation%360;return t>180?t-=360:t<-180&&(t+=360),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.$alpha},set:function(t){this.$alpha!=t&&(this.$alpha=t,this.updateAlpha())},enumerable:!0,configurable:!0}),e.prototype.updateAlpha=function(){this.$displayObject&&(this.$displayObject.alpha=this.$alpha),this.updateGear(3)},Object.defineProperty(e.prototype,"visible",{get:function(){return this.$visible},set:function(t){this.$visible!=t&&(this.$visible=t,this.$displayObject&&(this.$displayObject.visible=this.$visible),this.$parent&&(this.$parent.childStateChanged(this),this.$parent.setBoundsChangedFlag()),this.emit("__visibleChanged",this.$visible,this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"internalVisible",{get:function(){return this.$internalVisible},set:function(t){t!=this.$internalVisible&&(this.$internalVisible=t,this.$parent&&this.$parent.childStateChanged(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"finalVisible",{get:function(){return this.$visible&&this.$internalVisible&&(!this.$group||this.$group.finalVisible)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sortingOrder",{get:function(){return this.$sortingOrder},set:function(t){if(t<0&&(t=0),this.$sortingOrder!=t){var e=this.$sortingOrder;this.$sortingOrder=t,null!=this.$parent&&this.$parent.childSortingOrderChanged(this,e,this.$sortingOrder)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"focusable",{get:function(){return this.$focusable},set:function(t){this.$focusable=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"focused",{get:function(){return this.root.focus==this},enumerable:!0,configurable:!0}),e.prototype.requestFocus=function(){for(var t=this;t&&!t.$focusable;)t=t.parent;null!=t&&(this.root.focus=t)},Object.defineProperty(e.prototype,"tooltips",{get:function(){return this.$tooltips},set:function(t){this.$tooltips=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.$displayObject&&this.$displayObject instanceof c.Sprite?t.BlendModeMap[this.$displayObject.blendMode]||"None":t.BlendModeMap[0]},set:function(e){if(e&&e.length&&this.$displayObject&&this.$displayObject instanceof c.Sprite)for(var i=0;i<t.BlendModeMap.length;i++)if(t.BlendModeMap[i].toLowerCase()===e.toLowerCase())return void(this.$displayObject.blendMode=i)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filters",{get:function(){return this.$displayObject.filters},set:function(t){this.$displayObject.filters=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inContainer",{get:function(){return null!=this.$displayObject.parent},enumerable:!0,configurable:!0}),e.isDisplayObjectOnStage=function(e){if(!e||!e.parent)return!1;for(var i=e;null!=i;){if(i==t.GRoot.inst.nativeStage)return!0;i=i.parent}return!1},Object.defineProperty(e.prototype,"onStage",{get:function(){return e.isDisplayObjectOnStage(this.$displayObject)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resourceURL",{get:function(){return null!=this.packageItem?"{ui://"+this.packageItem.owner.id+this.packageItem.id:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"group",{get:function(){return this.$group},set:function(t){this.$group=t},enumerable:!0,configurable:!0}),e.prototype.getGear=function(e){var i=this.$gears[e];if(null==i){switch(e){case 0:i=new t.GearDisplay(this);break;case 1:i=new t.GearXY(this);break;case 2:i=new t.GearSize(this);break;case 3:i=new t.GearLook(this);break;case 4:if(!t.isColorGear(this))throw new Error("Invalid component type to add GearColor feature, please check the component named "+this.$name+" in the Editor.");i=new t.GearColor(this);break;case 5:if(!t.isAnimationGear(this))throw new Error("Invalid component type to add GearAnimation feature, please check the component named "+this.$name+" in the Editor.");i=new t.GearAnimation(this);break;case 6:i=new t.GearText(this);break;case 7:i=new t.GearIcon(this);break;default:throw new Error("FGUI: invalid gear type")}this.$gears[e]=i}return i},e.prototype.updateGear=function(t){null!=this.$gears[t]&&this.$gears[t].updateState()},e.prototype.updateGearFromRelations=function(t,e,i){null!=this.$gears[t]&&this.$gears[t].updateFromRelations(e,i)},e.prototype.hasGearController=function(t,e){return this.$gears[t]&&this.$gears[t].controller==e},e.prototype.lockGearDisplay=function(){var t=this.$gears[0];if(t&&t.controller){var e=t.lock();return this.checkGearVisible(),e}return 0},e.prototype.releaseGearDisplay=function(t){var e=this.$gears[0];e&&e.controller&&(e.release(t),this.checkGearVisible())},e.prototype.checkGearVisible=function(){if(!this.$handlingController){var t=this.$gears[0],e=!t||t.connected;e!=this.$internalVisible&&(this.$internalVisible=e,this.$parent&&this.$parent.childStateChanged(this))}},Object.defineProperty(e.prototype,"gearXY",{get:function(){return this.getGear(1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gearSize",{get:function(){return this.getGear(2)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gearLook",{get:function(){return this.getGear(3)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relations",{get:function(){return this.$relations},enumerable:!0,configurable:!0}),e.prototype.addRelation=function(t,e,i){void 0===i&&(i=!1),this.$relations.add(t,e,i)},e.prototype.removeRelation=function(t,e){void 0===e&&(e=0),this.$relations.remove(t,e)},Object.defineProperty(e.prototype,"displayObject",{get:function(){return this.$displayObject},enumerable:!0,configurable:!0}),e.prototype.createDisplayObject=function(){},e.prototype.setDisplayObject=function(t){this.$displayObject=t},Object.defineProperty(e.prototype,"parent",{get:function(){return this.$parent},set:function(t){this.$parent=t},enumerable:!0,configurable:!0}),e.prototype.removeFromParent=function(){this.$parent&&this.$parent.removeChild(this)},Object.defineProperty(e.prototype,"root",{get:function(){if(this instanceof t.GRoot)return this;for(var e=this.$parent;e;){if(e instanceof t.GRoot)return e;e=e.parent}return t.GRoot.inst},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return null},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"icon",{get:function(){return null},set:function(t){},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.removeFromParent(),this.$relations.dispose(),this.removeAllListeners(),t.GRoot.inst.nativeStage.off(t.InteractiveEvents.Move,this.$moving,this),t.GRoot.inst.nativeStage.off(t.InteractiveEvents.Up,this.$end,this),t.GRoot.inst.nativeStage.off(t.InteractiveEvents.Move,this.$moving2,this),t.GRoot.inst.nativeStage.off(t.InteractiveEvents.Up,this.$end2,this),this.$displayObject.destroy()},e.prototype.click=function(e,i){return this.on(t.InteractiveEvents.Click,e,i)},e.prototype.removeClick=function(e,i){return this.off(t.InteractiveEvents.Click,e,i)},e.prototype.hasClick=function(e){return this.hasListener(t.InteractiveEvents.Click,e)},e.prototype.on=function(t,e,i){return console.log(">>>>>Gobject on >>>>>>"),console.log(t),console.log(i),null==t?this:(this.$displayObject.on(t,e,i),this)},e.prototype.off=function(t,e,i){return null==t?this:(this.$displayObject.listeners(t,!0)&&this.$displayObject.off(t,e,i),this)},e.prototype.once=function(t,e,i){return null==t?this:(this.$displayObject.once(t,e,i),this)},e.prototype.hasListener=function(t,e){return e?this.$displayObject.listeners(t).indexOf(e)>=0:this.$displayObject.listeners(t,!0)},e.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return!e||e.length<=0?e=[t]:e.unshift(t),this.$displayObject.emit.apply(this.$displayObject,e)},e.prototype.removeAllListeners=function(t){this.$displayObject.removeAllListeners(t)},Object.defineProperty(e.prototype,"draggable",{get:function(){return this.$draggable},set:function(t){this.$draggable!=t&&(this.$draggable=t,this.initDrag())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dragBounds",{get:function(){return this.$dragBounds},set:function(t){this.$dragBounds=t},enumerable:!0,configurable:!0}),e.prototype.startDrag=function(t){void 0===t&&(t=-1),this.onStage&&this.dragBegin()},e.prototype.stopDrag=function(){this.dragEnd()},Object.defineProperty(e.prototype,"dragging",{get:function(){return e.draggingObject==this},enumerable:!0,configurable:!0}),e.prototype.localToGlobal=function(t,i,r){return void 0===t&&(t=0),void 0===i&&(i=0),this.$pivotAsAnchor&&(t+=this.$pivot.x*this.$width,i+=this.$pivot.y*this.$height),r||(r=e.sHelperPoint),r.x=t,r.y=i,this.$displayObject.toGlobal(r,r)},e.prototype.globalToLocal=function(i,r,n){return void 0===i&&(i=0),void 0===r&&(r=0),n||(n=e.sHelperPoint),n.set(i,r),n=this.$displayObject.toLocal(n,t.GRoot.inst.nativeStage),this.$pivotAsAnchor&&(n.x-=this.$pivot.x*this.$width,n.y-=this.$pivot.y*this.$height),n},e.prototype.localToRoot=function(e,i,r){void 0===e&&(e=0),void 0===i&&(i=0);var n=this.localToGlobal(e,i,r);return n.x/=t.GRoot.inst.contentScaleFactor,n.y/=t.GRoot.inst.contentScaleFactor,n},e.prototype.rootToLocal=function(e,i,r){return void 0===e&&(e=0),void 0===i&&(i=0),e*=t.GRoot.inst.contentScaleFactor,i*=t.GRoot.inst.contentScaleFactor,this.globalToLocal(e,i,r)},e.prototype.localToGlobalRect=function(t,i,r,n,o){void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=0),null==o&&(o=e.sDragHelperRect);var s=this.localToGlobal(t,i);return o.x=s.x,o.y=s.y,o.width=r,o.height=n,o},e.prototype.globalToLocalRect=function(t,i,r,n,o){void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=0),null==o&&(o=e.sDragHelperRect);var s=this.globalToLocal(t,i);return o.x=s.x,o.y=s.y,o.width=r,o.height=n,o},e.prototype.handleControllerChanged=function(t){this.$handlingController=!0;for(var e=0;e<8;e++){var i=this.$gears[e];null!=i&&i.controller==t&&i.apply()}this.$handlingController=!1,this.checkGearVisible()},e.prototype.switchDisplayObject=function(t){if(t!=this.$displayObject){var e=this.$displayObject;if(this.inContainer){var i=this.$displayObject.parent.getChildIndex(this.$displayObject);this.$displayObject.parent.addChildAt(t,i),this.$displayObject.parent.removeChild(this.$displayObject)}this.$displayObject=t,this.$displayObject.x=e.x,this.$displayObject.y=e.y,this.$displayObject.rotation=e.rotation,this.$displayObject.alpha=e.alpha,this.$displayObject.visible=e.visible,this.$displayObject.scale.x=e.scale.x,this.$displayObject.scale.y=e.scale.y,this.$displayObject.interactive=e.interactive,this.$displayObject.interactiveChildren=e.interactiveChildren}},e.prototype.handleXYChanged=function(){if(this.$displayObject){var t=this.$x,e=this.$y;this.$pivotAsAnchor&&(t-=this.$pivot.x*this.$width,e-=this.$pivot.y*this.$height),this.$pixelSnapping&&(t=Math.round(t),e=Math.round(e)),this.$displayObject.position.set(t+this.$pivotOffset.x,e+this.$pivotOffset.y)}},e.prototype.handleSizeChanged=function(){},e.prototype.handleScaleChanged=function(){this.$displayObject&&this.$displayObject.scale.set(this.$scaleX,this.$scaleY)},Object.defineProperty(e.prototype,"colorFilter",{get:function(){if(this.$colorFilter)return this.$colorFilter;if(this.$colorFilter=new c.filters.ColorMatrixFilter,this.$displayObject){var t=this.$displayObject.filters||[];t.push(this.$colorFilter),this.$displayObject.filters=t}return this.$colorFilter},enumerable:!0,configurable:!0}),e.prototype.updateColorComponents=function(i,r,n,o){e.$colorHelper||(e.$colorHelper=new t.utils.ColorMatrix);var s=e.$colorHelper;s.setColor(i,100*r,100*n,180*o);var a=this.colorFilter;a.enabled=!0,a.reset(),a.matrix=s.toArray(),this.$lastColorComponents||(this.$lastColorComponents=[]),this.$lastColorComponents.length=0,this.$lastColorComponents.push(s.brightness,s.contrast,s.saturation,s.hue)},e.prototype.handleGrayedChanged=function(){if(this.$displayObject){var t=this.colorFilter;t.enabled=!0,this.$grayed?t.blackAndWhite(!0):this.$lastColorComponents&&this.$lastColorComponents.length>=4?this.updateColorComponents(this.$lastColorComponents[0],this.$lastColorComponents[1],this.$lastColorComponents[2],this.$lastColorComponents[3]):t.enabled=!1}},e.prototype.constructFromResource=function(){},e.prototype.setupBeforeAdd=function(t){var e,i;if(this.$id=t.attributes.id,this.$name=t.attributes.name,i=(e=t.attributes.xy).split(","),this.setXY(parseInt(i[0]),parseInt(i[1])),(e=t.attributes.size)&&(i=e.split(","),this.$initWidth=parseInt(i[0]),this.$initHeight=parseInt(i[1]),this.setSize(this.$initWidth,this.$initHeight,!0)),(e=t.attributes.scale)&&(i=e.split(","),this.setScale(parseFloat(i[0]),parseFloat(i[1]))),(e=t.attributes.rotation)&&(this.rotation=parseInt(e)),(e=t.attributes.skew)&&(i=e.split(","),this.setSkew(parseFloat(i[0]),parseFloat(i[1]))),e=t.attributes.pivot){i=e.split(",");var r=parseFloat(i[0]),n=parseFloat(i[1]);e=t.attributes.anchor,this.setPivot(r,n,"true"==e)}if((e=t.attributes.alpha)&&(this.alpha=parseFloat(e)),"false"==t.attributes.touchable&&(this.touchable=!1),"false"==t.attributes.visible&&(this.visible=!1),"true"==t.attributes.grayed&&(this.grayed=!0),this.tooltips=t.attributes.tooltips,(e=t.attributes.blend)&&(this.blendMode=e),e=t.attributes.filter)switch(e){case"color":i=(e=t.attributes.filterData).split(","),this.updateColorComponents(parseFloat(i[0]),parseFloat(i[1]),parseFloat(i[2]),parseFloat(i[3]))}},e.prototype.setupAfterAdd=function(e){var i=this,r=e.attributes.group;r&&(this.$group=this.$parent.getChildById(r)),e.children.forEach(function(e){var r=t.GearXMLNodeNameMap[e.nodeName];null!=r&&i.getGear(r).setup(e)},this)},e.castFromNativeObject=function(e){return t.isUIObject(e)?e.UIOwner:null},e.prototype.initDrag=function(){this.$draggable?this.on(t.InteractiveEvents.Down,this.$touchBegin,this):this.off(t.InteractiveEvents.Down,this.$touchBegin,this)},e.prototype.dragBegin=function(){null!=e.draggingObject&&e.draggingObject.stopDrag(),e.sGlobalDragStart.x=t.GRoot.statusData.mouseX,e.sGlobalDragStart.y=t.GRoot.statusData.mouseY,this.localToGlobalRect(0,0,this.width,this.height,e.sGlobalRect),e.draggingObject=this,t.GRoot.inst.nativeStage.on(t.InteractiveEvents.Move,this.$moving2,this),t.GRoot.inst.nativeStage.on(t.InteractiveEvents.Up,this.$end2,this)},e.prototype.dragEnd=function(){e.draggingObject==this&&(t.GRoot.inst.nativeStage.off(t.InteractiveEvents.Move,this.$moving2,this),t.GRoot.inst.nativeStage.off(t.InteractiveEvents.Up,this.$end2,this),e.draggingObject=null),e.$dragBeginCancelled=!0},e.prototype.reset=function(){t.GRoot.inst.nativeStage.off(t.InteractiveEvents.Move,this.$moving,this),t.GRoot.inst.nativeStage.off(t.InteractiveEvents.Up,this.$end,this)},e.prototype.$touchBegin=function(e){null==this.$touchDownPoint&&(this.$touchDownPoint=new c.Point),this.$touchDownPoint.x=e.data.global.x,this.$touchDownPoint.y=e.data.global.y,t.GRoot.inst.nativeStage.on(t.InteractiveEvents.Move,this.$moving,this),t.GRoot.inst.nativeStage.on(t.InteractiveEvents.Up,this.$end,this)},e.prototype.$end=function(t){this.reset()},e.prototype.$moving=function(i){var r=t.UIConfig.touchDragSensitivity;null!=this.$touchDownPoint&&Math.abs(this.$touchDownPoint.x-i.data.global.x)<r&&Math.abs(this.$touchDownPoint.y-i.data.global.y)<r||(this.reset(),e.$dragBeginCancelled=!1,i.currentTarget=this.$displayObject,this.$displayObject.emit("__dragStart",i,this),e.$dragBeginCancelled||this.dragBegin())},e.prototype.$moving2=function(i){var r=i.data.global.x-e.sGlobalDragStart.x+e.sGlobalRect.x,n=i.data.global.y-e.sGlobalDragStart.y+e.sGlobalRect.y;if(null!=this.$dragBounds){var o=t.GRoot.inst.localToGlobalRect(this.$dragBounds.x,this.$dragBounds.y,this.$dragBounds.width,this.$dragBounds.height,e.sDragHelperRect);r<o.x?r=o.x:r+e.sGlobalRect.width>o.right&&(r=o.right-e.sGlobalRect.width)<o.x&&(r=o.x),n<o.y?n=o.y:n+e.sGlobalRect.height>o.bottom&&(n=o.bottom-e.sGlobalRect.height)<o.y&&(n=o.y)}e.sUpdatingWhileDragging=!0,e.sHelperPoint.x=r,e.sHelperPoint.y=n;var s=this.parent.globalToLocal(r,n,e.sHelperPoint);this.setXY(Math.round(s.x),Math.round(s.y)),e.sUpdatingWhileDragging=!1,i.currentTarget=this.$displayObject,this.$displayObject.emit("__dragMoving",i,this)},e.prototype.$end2=function(t){e.draggingObject==this&&(this.stopDrag(),t.currentTarget=this.$displayObject,this.$displayObject.emit("__dragEnd",t,this))},e.gInstanceCounter=0,e.sGlobalDragStart=new c.Point,e.sGlobalRect=new c.Rectangle,e.sHelperPoint=new c.Point,e.sDragHelperRect=new c.Rectangle,e}();t.GObject=e}(l||(l={})),function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.$sortingChildCount=0,i.$children=[],i.$controllers=[],i.$transitions=[],i.$margin=new t.utils.Margin,i.$alignOffset=new c.Point,i}return y(i,e),i.prototype.createDisplayObject=function(){this.$rootContainer=new t.UIContainer(this),this.setDisplayObject(this.$rootContainer),this.$container=this.$rootContainer},i.prototype.dispose=function(){t.GTimer.inst.remove(this.$validate,this),this.off("added",this.$added,this),this.off("removed",this.$removed,this),this.$transitions.forEach(function(t){t.dispose()});for(var i=this.$children.length-1;i>=0;--i){var r=this.$children[i];r.parent=null,r.dispose()}this.$boundsChanged=!1,this.$scrollPane&&this.$scrollPane.dispose(),e.prototype.dispose.call(this)},Object.defineProperty(i.prototype,"displayListContainer",{get:function(){return this.$container},enumerable:!0,configurable:!0}),i.prototype.addChild=function(t){return this.addChildAt(t,this.$children.length),t},i.prototype.addChildAt=function(t,e){if(void 0===e&&(e=0),!t)throw new Error("Invalid child");var i=this.$children.length;if(e>=0&&e<=i){if(t.parent==this)this.setChildIndex(t,e);else{t.removeFromParent(),t.parent=this;var r=this.$children.length;0!=t.sortingOrder?(this.$sortingChildCount++,e=this.getInsertPosForSortingChild(t)):this.$sortingChildCount>0&&e>r-this.$sortingChildCount&&(e=r-this.$sortingChildCount),e==r?this.$children.push(t):this.$children.splice(e,0,t),this.childStateChanged(t),this.setBoundsChangedFlag()}return t}throw new Error("Invalid child index")},i.prototype.getInsertPosForSortingChild=function(t){var e=this.$children.length,i=0;for(i=0;i<e;i++){var r=this.$children[i];if(r!=t&&t.sortingOrder<r.sortingOrder)break}return i},i.prototype.removeChild=function(t,e){void 0===e&&(e=!1);var i=this.$children.indexOf(t);return-1!=i&&this.removeChildAt(i,e),t},i.prototype.removeChildAt=function(t,e){if(void 0===e&&(e=!1),t>=0&&t<this.numChildren){var i=this.$children[t];return i.parent=null,0!=i.sortingOrder&&this.$sortingChildCount--,this.$children.splice(t,1),i.inContainer&&this.$container.removeChild(i.displayObject),!0===e&&i.dispose(),this.setBoundsChangedFlag(),i}throw new Error("Invalid child index")},i.prototype.removeChildren=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=-1),void 0===i&&(i=!1),(e<0||e>=this.numChildren)&&(e=this.numChildren-1);for(var r=t;r<=e;++r)this.removeChildAt(t,i)},i.prototype.getChildAt=function(t){if(void 0===t&&(t=0),t>=0&&t<this.numChildren)return this.$children[t];throw new Error("Invalid child index")},i.prototype.getChild=function(t){for(var e=this.$children.length,i=0;i<e;++i)if(this.$children[i].name==t)return this.$children[i];return null},i.prototype.getChildInGroup=function(t,e){for(var i=this.$children.length,r=0;r<i;++r){var n=this.$children[r];if(n.group==e&&n.name==t)return n}return null},i.prototype.getChildById=function(t){for(var e=this.$children.length,i=0;i<e;++i)if(this.$children[i].id==t)return this.$children[i];return null},i.prototype.getChildIndex=function(t){return this.$children.indexOf(t)},i.prototype.setChildIndex=function(t,e){void 0===e&&(e=0);var i=this.$children.indexOf(t);if(-1==i)throw new Error("no such child found");if(0==t.sortingOrder){var r=this.$children.length;this.$sortingChildCount>0&&e>r-this.$sortingChildCount-1&&(e=r-this.$sortingChildCount-1),this.$setChildIndex(t,i,e)}},i.prototype.setChildIndexBefore=function(t,e){var i=this.$children.indexOf(t);if(-1==i)throw new Error("no such child found");if(0!=t.sortingOrder)return i;var r=this.$children.length;return this.$sortingChildCount>0&&e>r-this.$sortingChildCount-1&&(e=r-this.$sortingChildCount-1),i<e?this.$setChildIndex(t,i,e-1):this.$setChildIndex(t,i,e)},i.prototype.$setChildIndex=function(t,e,i){void 0===i&&(i=0);var r=this.$children.length;if(i>r&&(i=r),e==i)return e;if(this.$children.splice(e,1),this.$children.splice(i,0,t),t.inContainer){for(var n=0,o=this.$container.children.length,s=0;s<i;s++){this.$children[s].inContainer&&n++}n==o&&n--,this.$container.setChildIndex(t.displayObject,n),this.setBoundsChangedFlag()}return i},i.prototype.swapChildren=function(t,e){var i=this.$children.indexOf(t),r=this.$children.indexOf(e);if(-1==i||-1==r)throw new Error("no such child found");this.swapChildrenAt(i,r)},i.prototype.swapChildrenAt=function(t,e){void 0===e&&(e=0);var i=this.$children[t],r=this.$children[e];this.setChildIndex(i,e),this.setChildIndex(r,t)},Object.defineProperty(i.prototype,"numChildren",{get:function(){return this.$children.length},enumerable:!0,configurable:!0}),i.prototype.isAncestorOf=function(t){if(null==t)return!1;for(var e=t.parent;e;){if(e==this)return!0;e=e.parent}return!1},i.prototype.addController=function(t){this.$controllers.push(t),t.$parent=this,this.applyController(t)},i.prototype.getControllerAt=function(t){return this.$controllers[t]},i.prototype.getController=function(t){for(var e=this.$controllers.length,i=0;i<e;++i){var r=this.$controllers[i];if(r.name==t)return r}return null},i.prototype.removeController=function(t){var e=this.$controllers.indexOf(t);if(-1==e)throw new Error("controller not exists");t.$parent=null,this.$controllers.splice(e,1),this.$children.forEach(function(e){e.handleControllerChanged(t)})},Object.defineProperty(i.prototype,"controllers",{get:function(){return this.$controllers},enumerable:!0,configurable:!0}),i.prototype.childStateChanged=function(e){var i=this;if(!this.$buildingDisplayList)if(e instanceof t.GGroup)this.$children.forEach(function(t){t.group==e&&i.childStateChanged(t)},this);else if(e.displayObject)if(e.finalVisible){if(!e.displayObject.parent){for(var r=0,n=this.$children.length,o=0;o<n;o++){var s=this.$children[o];if(s==e)break;s.displayObject&&s.displayObject.parent&&r++}this.$container.addChildAt(e.displayObject,r)}}else e.displayObject.parent&&this.$container.removeChild(e.displayObject)},i.prototype.applyController=function(t){this.$applyingController=t,this.$children.forEach(function(e){e.handleControllerChanged(t)}),this.$applyingController=null,t.executeActions()},i.prototype.applyAllControllers=function(){var t=this;this.$controllers.forEach(function(e){t.applyController(e)},this)},i.prototype.adjustRadioGroupDepth=function(e,i){var r=-1,n=-1;this.$children.forEach(function(o,s){o==e?r=s:o instanceof t.GButton&&o.relatedController==i&&s>n&&(n=s)}),r<n&&(null!=this.$applyingController&&this.$children[n].handleControllerChanged(this.$applyingController),this.swapChildrenAt(r,n))},i.prototype.getTransitionAt=function(t){return this.$transitions[t]},i.prototype.getTransition=function(t){for(var e=this.$transitions.length,i=0;i<e;++i){var r=this.$transitions[i];if(r.name==t)return r}return null},i.prototype.isChildInView=function(t){return null!=this.$rootContainer.scrollRect?t.x+t.width>=0&&t.x<=this.width&&t.y+t.height>=0&&t.y<=this.height:null==this.$scrollPane||this.$scrollPane.isChildInView(t)},i.prototype.getFirstChildInView=function(){for(var t=this.$children.length,e=0;e<t;++e){var i=this.$children[e];if(this.isChildInView(i))return e}return-1},Object.defineProperty(i.prototype,"scrollPane",{get:function(){return this.$scrollPane},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"opaque",{get:function(){return this.$opaque},set:function(t){this.$opaque!=t&&(this.$opaque=t,this.$opaque?this.updateOpaque():this.$rootContainer.hitArea&&this.$rootContainer.hitArea instanceof c.Rectangle&&(this.$rootContainer.hitArea.width=this.$rootContainer.hitArea.height=0))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"margin",{get:function(){return this.$margin},set:function(t){this.$margin.copy(t),null!=this.$rootContainer.scrollRect&&(this.$container.x=this.$margin.left+this.$alignOffset.x,this.$container.y=this.$margin.top+this.$alignOffset.y),this.handleSizeChanged()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mask",{get:function(){return this.$rootContainer.mask},set:function(t){t&&(t.interactive=t.interactiveChildren=!1,t instanceof c.Graphics&&(t.isMask=!0),this.$rootContainer.mask=t)},enumerable:!0,configurable:!0}),i.prototype.updateOpaque=function(){this.$rootContainer.hitArea||(this.$rootContainer.hitArea=new c.Rectangle);var t=this.$rootContainer.hitArea;t.x=t.y=0,t.width=this.width,t.height=this.height},i.prototype.updateScrollRect=function(){var t=this.$rootContainer.scrollRect;null==t&&(t=new c.Rectangle);var e=this.width-this.$margin.right,i=this.height-this.$margin.bottom;t.x=t.y=0,t.width=e,t.height=i,this.$rootContainer.scrollRect=t},i.prototype.setupScroll=function(e,i,r,n,o,s){this.$rootContainer==this.$container&&(this.$container=new c.Container,this.$rootContainer.addChild(this.$container)),this.$scrollPane=new t.ScrollPane(this,i,e,r,n,o,s),this.setBoundsChangedFlag()},i.prototype.setupOverflow=function(t){1==t?(this.$rootContainer==this.$container&&(this.$container=new c.Container,this.$rootContainer.addChild(this.$container)),this.updateScrollRect(),this.$container.x=this.$margin.left,this.$container.y=this.$margin.top):0==this.$margin.left&&0==this.$margin.top||(this.$rootContainer==this.$container&&(this.$container=new c.Container,this.$rootContainer.addChild(this.$container)),this.$container.x=this.$margin.left,this.$container.y=this.$margin.top),this.setBoundsChangedFlag()},i.prototype.handleSizeChanged=function(){this.$scrollPane?this.$scrollPane.onOwnerSizeChanged():null!=this.$rootContainer.scrollRect&&this.updateScrollRect(),this.$opaque&&this.updateOpaque()},i.prototype.handleGrayedChanged=function(){var t=this.getController("grayed");if(null==t){var e=this.grayed;this.$children.forEach(function(t){t.grayed=e})}else t.selectedIndex=this.grayed?1:0},i.prototype.setBoundsChangedFlag=function(){(this.$scrollPane||this.$trackBounds)&&(this.$boundsChanged||(this.$boundsChanged=!0,t.GTimer.inst.callLater(this.$validate,this)))},i.prototype.$validate=function(t){this.$boundsChanged&&this.updateBounds()},i.prototype.ensureBoundsCorrect=function(){this.$boundsChanged&&this.updateBounds()},i.prototype.updateBounds=function(){var t=0,e=0,i=0,r=0;if(this.$children.length>0){t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY;var n=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY,s=0;this.$children.forEach(function(i){i.ensureSizeCorrect(),(s=i.x)<t&&(t=s),(s=i.y)<e&&(e=s),(s=i.x+i.actualWidth)>n&&(n=s),(s=i.y+i.actualHeight)>o&&(o=s)}),i=n-t,r=o-e}this.setBounds(t,e,i,r)},i.prototype.setBounds=function(t,e,i,r){void 0===r&&(r=0),this.$boundsChanged=!1,this.$scrollPane&&this.$scrollPane.setContentSize(Math.round(t+i),Math.round(e+r))},Object.defineProperty(i.prototype,"viewWidth",{get:function(){return null!=this.$scrollPane?this.$scrollPane.viewWidth:this.width-this.$margin.left-this.$margin.right},set:function(t){null!=this.$scrollPane?this.$scrollPane.viewWidth=t:this.width=t+this.$margin.left+this.$margin.right},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"viewHeight",{get:function(){return null!=this.$scrollPane?this.$scrollPane.viewHeight:this.height-this.$margin.top-this.$margin.bottom},set:function(t){null!=this.$scrollPane?this.$scrollPane.viewHeight=t:this.height=t+this.$margin.top+this.$margin.bottom},enumerable:!0,configurable:!0}),i.prototype.getSnappingPosition=function(t,e,i){i||(i=new c.Point);var r=this.$children.length;if(r<=0)return i.x=0,i.y=0,i;this.ensureBoundsCorrect();var n=null,o=null,s=0;if(0!=e){for(;s<r;s++)if(e<(n=this.$children[s]).y){if(0==s){e=0;break}e=e<(o=this.$children[s-1]).y+o.actualHeight/2?o.y:n.y;break}s==r&&(e=n.y)}if(0!=t){for(s>0&&s--;s<r;s++)if(t<(n=this.$children[s]).x){if(0==s){t=0;break}t=t<(o=this.$children[s-1]).x+o.actualWidth/2?o.x:n.x;break}s==r&&(t=n.x)}return i.x=t,i.y=e,i},i.prototype.childSortingOrderChanged=function(t,e,i){if(void 0===i&&(i=0),0==i)this.$sortingChildCount--,this.setChildIndex(t,this.$children.length);else{0==e&&this.$sortingChildCount++;var r=this.$children.indexOf(t),n=this.getInsertPosForSortingChild(t);r<n?this.$setChildIndex(t,r,n-1):this.$setChildIndex(t,r,n)}},i.prototype.constructFromResource=function(){this.constructInternal(null,0)},i.prototype.constructInternal=function(e,i){var r,n,o,s=this,a=this.packageItem.owner.getItemAsset(this.packageItem);if(this.$inProgressBuilding=!0,n=(r=a.attributes.size).split(","),this.$sourceWidth=parseInt(n[0]),this.$sourceHeight=parseInt(n[1]),this.$initWidth=this.$sourceWidth,this.$initHeight=this.$sourceHeight,this.setSize(this.$sourceWidth,this.$sourceHeight),(r=a.attributes.pivot)&&(n=r.split(","),r=a.attributes.anchor,this.internalSetPivot(parseFloat(n[0]),parseFloat(n[1]),"true"==r)),r=a.attributes.opaque,this.opaque="false"!=r,o=(r=a.attributes.overflow)?t.ParseOverflowType(r):0,(r=a.attributes.margin)&&this.$margin.parse(r),2==o){var h;h=(r=a.attributes.scroll)?t.ParseScrollType(r):1;var l=void 0;l=(r=a.attributes.scrollBar)?t.ParseScrollBarDisplayType(r):0;var u=void 0;u=(r=a.attributes.scrollBarFlags)?parseInt(r):0;var d=new t.utils.Margin;(r=a.attributes.scrollBarMargin)&&d.parse(r);var p=void 0,f=void 0;(r=a.attributes.scrollBarRes)&&(p=(n=r.split(","))[0],f=n[1]),this.setupScroll(d,h,l,u,p,f)}else this.setupOverflow(o);this.$buildingDisplayList=!0;var g=a.children;g.forEach(function(e){if("controller"==e.nodeName){var i=new t.controller.Controller;s.$controllers.push(i),i.$parent=s,i.setup(e)}});var y=this.packageItem.displayList;if(y.forEach(function(r,n){var o;null!=e?o=e[i+n]:r.packageItem?((o=t.UIObjectFactory.newObject(r.packageItem)).packageItem=r.packageItem,o.constructFromResource()):o=t.UIObjectFactory.newObjectDirectly(r.type),o.$inProgressBuilding=!0,o.setupBeforeAdd(r.desc),o.parent=s,s.$children.push(o)},this),this.relations.setup(a),this.$children.forEach(function(t,e){t.relations.setup(y[e].desc),t.setupAfterAdd(y[e].desc),t.$inProgressBuilding=!1}),r=a.attributes.mask){var v=this.getChildById(r).displayObject;if(!(v instanceof c.Graphics||v instanceof c.Sprite))throw new Error("only PIXI.Sprite or PIXI.Graphics can be applied as mask object");this.mask=v}g.forEach(function(e){if("transition"==e.nodeName){var i=new t.Transition(s);s.$transitions.push(i),i.setup(e)}},this),this.$transitions.length>0&&(this.on("added",this.$added,this),this.on("removed",this.$removed,this)),this.applyAllControllers(),this.$buildingDisplayList=!1,this.$inProgressBuilding=!1,this.appendChildrenList(),this.setBoundsChangedFlag(),this.constructFromXML(a)},i.prototype.appendChildrenList=function(){var t=this;this.$children.forEach(function(e){null!=e.displayObject&&e.finalVisible&&t.$container.addChild(e.displayObject)},this)},i.prototype.constructFromXML=function(t){},i.prototype.$added=function(t){this.$transitions.forEach(function(t){t.autoPlay&&t.play({times:t.autoPlayRepeat,delay:t.autoPlayDelay})})},i.prototype.$removed=function(t){this.$transitions.forEach(function(t){t.stop(!1,!1)})},i}(t.GObject);t.GComponent=e}(l||(l={})),function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.$mode=0,i.$title="",i.$icon="",i.$pageOption=new t.controller.PageOption,i.$changeStateOnClick=!0,i.$downEffect=0,i.$downEffectValue=.8,i}return y(i,e),i.prototype.setDisplayObject=function(t){e.prototype.setDisplayObject.call(this,t),this.$displayObject.buttonMode=!0},Object.defineProperty(i.prototype,"icon",{get:function(){return this.$icon},set:function(t){this.$icon=t,t=this.$selected&&this.$selectedIcon?this.$selectedIcon:this.$icon,null!=this.$iconObject&&(this.$iconObject.icon=t),this.updateGear(7)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectedIcon",{get:function(){return this.$selectedIcon},set:function(t){this.$selectedIcon=t,t=this.$selected&&this.$selectedIcon?this.$selectedIcon:this.$icon,null!=this.$iconObject&&(this.$iconObject.icon=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"title",{get:function(){return this.$title},set:function(t){this.$title=t,this.$titleObject&&(this.$titleObject.text=this.$selected&&this.$selectedTitle?this.$selectedTitle:this.$title),this.updateGear(6)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"text",{get:function(){return this.title},set:function(t){this.title=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectedTitle",{get:function(){return this.$selectedTitle},set:function(t){this.$selectedTitle=t,this.$titleObject&&(this.$titleObject.text=this.$selected&&this.$selectedTitle?this.$selectedTitle:this.$title)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"titleColor",{get:function(){return t.isColorableTitle(this.$titleObject)?this.$titleObject.titleColor:0},set:function(e){t.isColorableTitle(this.$titleObject)&&(this.$titleObject.titleColor=e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fontSize",{get:function(){return t.isColorableTitle(this.$titleObject)?this.$titleObject.fontSize:0},set:function(e){t.isColorableTitle(this.$titleObject)&&(this.$titleObject.fontSize=e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selected",{get:function(){return this.$selected},set:function(t){if(0!=this.$mode&&this.$selected!=t){if(this.$selected=t,this.grayed&&this.$buttonController&&this.$buttonController.hasPage(i.DISABLED)?this.$selected?this.setState(i.SELECTED_DISABLED):this.setState(i.DISABLED):this.$selected?this.setState(this.$over?i.SELECTED_OVER:i.DOWN):this.setState(this.$over?i.OVER:i.UP),this.$selectedTitle&&this.$titleObject&&(this.$titleObject.text=this.$selected?this.$selectedTitle:this.$title),this.$selectedIcon){var e=this.$selected?this.$selectedIcon:this.$icon;null!=this.$iconObject&&(this.$iconObject.icon=e)}this.$relatedController&&this.$parent&&!this.$parent.$buildingDisplayList&&(this.$selected?(this.$relatedController.selectedPageId=this.$pageOption.id,this.$relatedController.$autoRadioGroupDepth&&this.$parent.adjustRadioGroupDepth(this,this.$relatedController)):1==this.$mode&&this.$relatedController.selectedPageId==this.$pageOption.id&&(this.$relatedController.oppositePageId=this.$pageOption.id))}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mode",{get:function(){return this.$mode},set:function(t){this.$mode!=t&&(0==t&&(this.selected=!1),this.$mode=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"relatedController",{get:function(){return this.$relatedController},set:function(t){t!=this.$relatedController&&(this.$relatedController=t,this.$pageOption.controller=t,this.$pageOption.clear())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pageOption",{get:function(){return this.$pageOption},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"changeStateOnClick",{get:function(){return this.$changeStateOnClick},set:function(t){this.$changeStateOnClick=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"linkedPopup",{get:function(){return this.$linkedPopup},set:function(t){this.$linkedPopup=t},enumerable:!0,configurable:!0}),i.prototype.addStateListener=function(t,e){this.on("__stateChanged",t,e)},i.prototype.removeStateListener=function(t,e){this.off("__stateChanged",t,e)},i.prototype.fireClick=function(e){void 0===e&&(e=!0),e&&0==this.$mode&&(this.setState(i.OVER),t.GTimer.inst.add(100,1,this.setState,this,i.DOWN),t.GTimer.inst.add(200,1,this.setState,this,i.UP)),this.$click(null)},i.prototype.setState=function(e){if(this.$buttonController&&(this.$buttonController.selectedPage=e),1==this.$downEffect)if(e==i.DOWN||e==i.SELECTED_OVER||e==i.SELECTED_DISABLED){var r=255*this.$downEffectValue,n=(r<<16)+(r<<8)+r;this.$children.forEach(function(e){t.isColorGear(e)&&(e.color=n)})}else this.$children.forEach(function(e){t.isColorGear(e)&&(e.color=16777215)});else 2==this.$downEffect&&(e==i.DOWN||e==i.SELECTED_OVER||e==i.SELECTED_DISABLED?this.setScale(this.$downEffectValue,this.$downEffectValue):this.setScale(1,1))},i.prototype.handleControllerChanged=function(t){e.prototype.handleControllerChanged.call(this,t),this.$relatedController==t&&(this.selected=this.$pageOption.id==t.selectedPageId)},i.prototype.handleGrayedChanged=function(){this.$buttonController&&this.$buttonController.hasPage(i.DISABLED)?this.grayed?this.$selected&&this.$buttonController.hasPage(i.SELECTED_DISABLED)?this.setState(i.SELECTED_DISABLED):this.setState(i.DISABLED):this.$selected?this.setState(i.DOWN):this.setState(i.UP):e.prototype.handleGrayedChanged.call(this)},i.prototype.constructFromXML=function(r){var n;e.prototype.constructFromXML.call(this,r),(n=(r=t.utils.XmlParser.getChildNodes(r,"Button")[0]).attributes.mode)&&(this.$mode=t.ParseButtonMode(n)),(n=r.attributes.downEffect)&&(this.$downEffect="dark"==n?1:"scale"==n?2:0,n=r.attributes.downEffectValue,this.$downEffectValue=parseFloat(n),2==this.$downEffect&&this.setPivot(.5,.5)),this.$buttonController=this.getController("button"),this.$titleObject=this.getChild("title"),this.$iconObject=this.getChild("icon"),null!=this.$titleObject&&(this.$title=this.$titleObject.text),null!=this.$iconObject&&(this.$icon=this.$iconObject.icon),0==this.$mode&&this.setState(i.UP),this.on(t.InteractiveEvents.Over,this.$rollover,this),this.on(t.InteractiveEvents.Out,this.$rollout,this),this.on(t.InteractiveEvents.Down,this.$mousedown,this),this.on(t.InteractiveEvents.Click,this.$click,this)},i.prototype.setupAfterAdd=function(i){if(e.prototype.setupAfterAdd.call(this,i),i=t.utils.XmlParser.getChildNodes(i,"Button")[0]){var r=void 0;(r=i.attributes.title)&&(this.title=r),(r=i.attributes.icon)&&(this.icon=r),(r=i.attributes.selectedTitle)&&(this.selectedTitle=r),(r=i.attributes.selectedIcon)&&(this.selectedIcon=r),(r=i.attributes.titleColor)&&(this.titleColor=t.utils.StringUtil.convertFromHtmlColor(r)),(r=i.attributes.titleFontSize)&&(this.fontSize=parseInt(r)),r=i.attributes.controller,this.$relatedController=r?this.$parent.getController(r):null,this.$pageOption.id=i.attributes.page,this.selected="true"==i.attributes.checked}},i.prototype.$rollover=function(t){this.$buttonController&&this.$buttonController.hasPage(i.OVER)&&(this.$over=!0,this.$down||this.setState(this.$selected?i.SELECTED_OVER:i.OVER))},i.prototype.$rollout=function(t){this.$buttonController&&this.$buttonController.hasPage(i.OVER)&&(this.$over=!1,this.$down||this.setState(this.$selected?i.DOWN:i.UP))},i.prototype.$mousedown=function(e){this.$down=!0,t.GRoot.inst.on(t.InteractiveEvents.Up,this.$mouseup,this),0==this.$mode&&(this.grayed&&this.$buttonController&&this.$buttonController.hasPage(i.DISABLED)?this.setState(i.SELECTED_DISABLED):this.setState(i.DOWN)),null!=this.$linkedPopup&&(this.$linkedPopup instanceof t.Window?this.$linkedPopup.toggleVisible():this.root.togglePopup(this.$linkedPopup,this))},i.prototype.$mouseup=function(e){this.$down&&(t.GRoot.inst.off(t.InteractiveEvents.Up,this.$mouseup,this),this.$down=!1,0==this.$mode&&(this.grayed&&this.$buttonController&&this.$buttonController.hasPage(i.DISABLED)?this.setState(i.DISABLED):this.$over?this.setState(i.OVER):this.setState(i.UP)))},i.prototype.$click=function(t){this.$changeStateOnClick&&(1==this.$mode?(this.selected=!this.$selected,this.emit("__stateChanged",this)):2==this.$mode&&(this.$selected||(this.selected=!0,this.emit("__stateChanged",this))))},i.prototype.dispose=function(){t.GTimer.inst.remove(this.setState,this),t.GTimer.inst.remove(this.setState,this),t.GRoot.inst.off(t.InteractiveEvents.Up,this.$mouseup,this),e.prototype.dispose.call(this)},i.UP="up",i.DOWN="down",i.OVER="over",i.SELECTED_OVER="selectedOver",i.DISABLED="disabled",i.SELECTED_DISABLED="selectedDisabled",i}(t.GComponent);t.GButton=e}(l||(l={})),function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.$visibleItemCount=0,i.$selectedIndex=0,i.$popupDir=1,i.$visibleItemCount=t.UIConfig.defaultComboBoxVisibleItemCount,i.$itemsUpdated=!0,i.$selectedIndex=-1,i.$items=[],i.$values=[],i}return y(i,e),Object.defineProperty(i.prototype,"text",{get:function(){return this.$titleObject?this.$titleObject.text:null},set:function(t){this.$titleObject&&(this.$titleObject.text=t),this.updateGear(6)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"icon",{get:function(){return this.$iconObject?this.$iconObject.icon:null},set:function(t){this.$iconObject&&(this.$iconObject.icon=t),this.updateGear(7)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"titleColor",{get:function(){return t.isColorableTitle(this.$titleObject)?this.$titleObject.titleColor:0},set:function(e){t.isColorableTitle(this.$titleObject)&&(this.$titleObject.titleColor=e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"visibleItemCount",{get:function(){return this.$visibleItemCount},set:function(t){this.$visibleItemCount=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"popupDirection",{get:function(){return this.$popupDir},set:function(t){this.$popupDir=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"items",{get:function(){return this.$items},set:function(t){t?this.$items=t.concat():this.$items.length=0,this.$items.length>0?(this.$selectedIndex>=this.$items.length?this.$selectedIndex=this.$items.length-1:-1==this.$selectedIndex&&(this.$selectedIndex=0),this.text=this.$items[this.$selectedIndex],null!=this.$icons&&this.$selectedIndex<this.$icons.length&&(this.icon=this.$icons[this.$selectedIndex])):(this.text="",null!=this.$icons&&(this.icon=null),this.$selectedIndex=-1),this.$itemsUpdated=!0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"icons",{get:function(){return this.$icons},set:function(t){this.$icons=t,null!=this.$icons&&-1!=this.$selectedIndex&&this.$selectedIndex<this.$icons.length&&(this.icon=this.$icons[this.$selectedIndex])},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"values",{get:function(){return this.$values},set:function(t){t?this.$values=t.concat():this.$values.length=0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectedIndex",{get:function(){return this.$selectedIndex},set:function(t){this.$selectedIndex!=t&&(this.$selectedIndex=t,this.selectedIndex>=0&&this.selectedIndex<this.$items.length?(this.text=this.$items[this.$selectedIndex],null!=this.$icons&&this.$selectedIndex<this.$icons.length&&(this.icon=this.$icons[this.$selectedIndex])):(this.text="",null!=this.$icons&&(this.icon=null)))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){return this.$values[this.$selectedIndex]},set:function(t){this.selectedIndex=this.$values.indexOf(t)},enumerable:!0,configurable:!0}),i.prototype.setState=function(t){this.$buttonController&&(this.$buttonController.selectedPage=t)},i.prototype.constructFromXML=function(i){var r;if(e.prototype.constructFromXML.call(this,i),i=t.utils.XmlParser.getChildNodes(i,"ComboBox")[0],this.$buttonController=this.getController("button"),this.$titleObject=this.getChild("title"),this.$iconObject=this.getChild("icon"),r=i.attributes.dropdown){if(this.$dropdown=t.UIPackage.createObjectFromURL(r),!this.$dropdown)throw new Error("the 'dropdown' is not specified, it must be a component definied in the package pool");if(this.$dropdown.name="this.dropdown",this.$list=this.$dropdown.getChild("list"),null==this.$list)throw new Error(this.resourceURL+": the dropdown component must have a GList child and named 'list'.");this.$list.on("__itemClick",this.$clickItem,this),this.$list.addRelation(this.$dropdown,14),this.$list.removeRelation(this.$dropdown,15),this.$dropdown.addRelation(this.$list,15),this.$dropdown.removeRelation(this.$list,14),this.$dropdown.on("removed",this.$popupWinClosed,this)}c.utils.isMobile.any||(this.on(t.InteractiveEvents.Over,this.$rollover,this),this.on(t.InteractiveEvents.Out,this.$rollout,this)),this.on(t.InteractiveEvents.Down,this.$mousedown,this)},i.prototype.dispose=function(){t.GTimer.inst.remove(this.delayedClickItem,this),this.$list.off("__itemClick",this.$clickItem,this),this.$dropdown.off("removed",this.$popupWinClosed,this),t.GRoot.inst.nativeStage.off(t.InteractiveEvents.Up,this.$mouseup,this),this.$popupWinClosed(null),this.$dropdown&&(this.$dropdown.dispose(),this.$dropdown=null),e.prototype.dispose.call(this)},i.prototype.setupAfterAdd=function(i){var r=this;if(e.prototype.setupAfterAdd.call(this,i),i=t.utils.XmlParser.getChildNodes(i,"ComboBox")[0]){var n;(n=i.attributes.titleColor)&&(this.titleColor=t.utils.StringUtil.convertFromHtmlColor(n)),(n=i.attributes.visibleItemCount)&&(this.$visibleItemCount=parseInt(n));var o=i.children;o&&o.forEach(function(t,e){"item"==t.nodeName&&(r.$items.push(t.attributes.title),r.$values.push(t.attributes.value),(n=t.attributes.icon)&&(r.$icons||(r.$icons=new Array(length)),r.$icons[e]=n))}),(n=i.attributes.title)?(this.text=n,this.$selectedIndex=this.$items.indexOf(n)):this.$items.length>0?(this.$selectedIndex=0,this.text=this.$items[0]):this.$selectedIndex=-1,(n=i.attributes.icon)&&(this.icon=n),(n=i.attributes.direction)&&("up"==n?this.$popupDir=2:"auto"==n&&(this.$popupDir=0))}},i.prototype.showDropdown=function(){var e=this;this.$itemsUpdated&&(this.$itemsUpdated=!1,this.$list.removeChildrenToPool(),this.$items.forEach(function(t,i){var r=e.$list.addItemFromPool();r.name=i<e.$values.length?e.$values[i]:"",r.text=e.$items[i],r.icon=null!=e.$icons&&i<e.$icons.length?e.$icons[i]:null},this),this.$list.resizeToFit(this.$visibleItemCount)),this.$list.selectedIndex=-1,this.$dropdown.width=this.width,this.root.togglePopup(this.$dropdown,this,this.$popupDir),this.$dropdown.parent&&this.setState(t.GButton.DOWN)},i.prototype.$popupWinClosed=function(e){this.$over?this.setState(t.GButton.OVER):this.setState(t.GButton.UP)},i.prototype.$clickItem=function(e,i){t.GTimer.inst.add(100,1,this.delayedClickItem,this,this.$list.getChildIndex(i))},i.prototype.delayedClickItem=function(e){this.$dropdown.parent instanceof t.GRoot&&this.$dropdown.parent.hidePopup(),this.$selectedIndex=e,this.$selectedIndex>=0?this.text=this.$items[this.$selectedIndex]:this.text="",this.emit("__stateChanged",this)},i.prototype.$rollover=function(e){this.$over=!0,this.$down||this.$dropdown&&this.$dropdown.parent||this.setState(t.GButton.OVER)},i.prototype.$rollout=function(e){this.$over=!1,this.$down||this.$dropdown&&this.$dropdown.parent||this.setState(t.GButton.UP)},i.prototype.$mousedown=function(e){e.stopPropagation(),t.GRoot.inst.checkPopups(e.target),this.$down=!0,t.GRoot.inst.nativeStage.on(t.InteractiveEvents.Up,this.$mouseup,this),this.$dropdown&&this.showDropdown()},i.prototype.$mouseup=function(e){this.$down&&(this.$down=!1,t.GRoot.inst.nativeStage.off(t.InteractiveEvents.Up,this.$mouseup,this),this.$dropdown&&!this.$dropdown.parent&&(this.$over?this.setState(t.GButton.OVER):this.setState(t.GButton.UP)))},i}(t.GComponent);t.GComboBox=e}(l||(l={})),function(t){var e=function(){function e(e){this.$lockToken=0,this.$owner=e,this.$easeType=t.ParseEaseType("Quad.Out"),this.$tweenTime=.3,this.$tweenDelay=0}return Object.defineProperty(e.prototype,"controller",{get:function(){return this.$controller},set:function(t){t!=this.$controller&&(this.$controller=t,this.$controller&&this.init())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tween",{get:function(){return this.$tween},set:function(t){this.$tween=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tweenDelay",{get:function(){return this.$tweenDelay},set:function(t){this.$tweenDelay=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tweenTime",{get:function(){return this.$tweenTime},set:function(t){this.$tweenTime=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"easeType",{get:function(){return this.$easeType},set:function(t){this.$easeType=t},enumerable:!0,configurable:!0}),e.prototype.setup=function(e){var i,r=this;if(this.$controller=this.$owner.parent.getController(e.attributes.controller),null!=this.$controller)if(this.init(),(i=e.attributes.tween)&&(this.$tween=!0),(i=e.attributes.ease)&&(this.$easeType=t.ParseEaseType(i)),(i=e.attributes.duration)&&(this.$tweenTime=parseFloat(i)),(i=e.attributes.delay)&&(this.$tweenDelay=parseFloat(i)),this instanceof t.GearDisplay)(i=e.attributes.pages)&&(this.pages=i.split(","));else{var n,o=void 0;(i=e.attributes.pages)&&(n=i.split(",")),(i=e.attributes.values)&&(o=i.split("|")),n&&o&&o.forEach(function(t,e){r.addStatus(n[e],t)}),(i=e.attributes.default)&&this.addStatus(null,i)}},e.prototype.updateFromRelations=function(t,e){},e.prototype.addStatus=function(t,e){},e.prototype.init=function(){},e.prototype.apply=function(){},e.prototype.updateState=function(){},e.disableAllTweenEffect=!1,e}();t.GearBase=e}(l||(l={})),function(t){var e=function(t){function e(e){return t.call(this,e)||this}return y(e,t),e.prototype.init=function(){this.$default=new i(this.$owner.playing,this.$owner.frame),this.$storage={}},e.prototype.addStatus=function(t,e){if("-"!=e){var r;null==t?r=this.$default:(r=new i,this.$storage[t]=r);var n=e.split(",");r.frame=parseInt(n[0]),r.playing="p"==n[1]}},e.prototype.apply=function(){this.$owner.$gearLocked=!0;var t=this.$storage[this.$controller.selectedPageId];t||(t=this.$default),this.$owner.frame=t.frame,this.$owner.playing=t.playing,this.$owner.$gearLocked=!1},e.prototype.updateState=function(){if(null!=this.$controller&&!this.$owner.$gearLocked&&!this.$owner.$inProgressBuilding){var t=this.$storage[this.$controller.selectedPageId];t||(t=new i,this.$storage[this.$controller.selectedPageId]=t),t.frame=this.$owner.frame,t.playing=this.$owner.playing}},e}(t.GearBase);t.GearAnimation=e;var i=function(){return function(t,e){void 0===t&&(t=!0),void 0===e&&(e=0),this.playing=t,this.frame=e}}()}(l||(l={})),function(t){var e=function(e){function i(t){var i=e.call(this,t)||this;return i.$default=0,i}return y(i,e),i.prototype.init=function(){this.$default=this.$owner.color,this.$storage={}},i.prototype.addStatus=function(e,i){if("-"!=i){var r=t.utils.StringUtil.convertFromHtmlColor(i);null==e?this.$default=r:this.$storage[e]=r}},i.prototype.apply=function(){this.$owner.$gearLocked=!0;var t=this.$storage[this.$controller.selectedPageId];this.$owner.color=null!=t?Math.floor(t):Math.floor(this.$default),this.$owner.$gearLocked=!1},i.prototype.updateState=function(){null==this.$controller||this.$owner.$gearLocked||this.$owner.$inProgressBuilding||(this.$storage[this.$controller.selectedPageId]=this.$owner.color)},i}(t.GearBase);t.GearColor=e}(l||(l={})),function(t){var e=function(t){function e(e){var i=t.call(this,e)||this;return i.$vid=0,i.$lockToken=1,i}return y(e,t),e.prototype.init=function(){this.pages=null},e.prototype.lock=function(){return this.$vid++,this.$lockToken},e.prototype.release=function(t){t==this.$lockToken&&this.$vid--},Object.defineProperty(e.prototype,"connected",{get:function(){return null==this.controller||this.$vid>0},enumerable:!0,configurable:!0}),e.prototype.apply=function(){this.$lockToken++,this.$lockToken<=0&&(this.$lockToken=1),null==this.pages||0==this.pages.length||-1!=this.pages.indexOf(this.$controller.selectedPageId)?this.$vid=1:this.$vid=0},e}(t.GearBase);t.GearDisplay=e}(l||(l={})),function(t){var e=function(t){function e(e){return t.call(this,e)||this}return y(e,t),e.prototype.init=function(){this.$default=this.$owner.icon,this.$storage={}},e.prototype.addStatus=function(t,e){null==t?this.$default=e:this.$storage[t]=e},e.prototype.apply=function(){this.$owner.$gearLocked=!0;var t=this.$storage[this.$controller.selectedPageId];this.$owner.icon=null!=t?t:this.$default,this.$owner.$gearLocked=!1},e.prototype.updateState=function(){null==this.$controller||this.$owner.$gearLocked||this.$owner.$inProgressBuilding||(this.$storage[this.$controller.selectedPageId]=this.$owner.icon)},e}(t.GearBase);t.GearIcon=e}(l||(l={})),function(t){var e=function(e){function r(t){return e.call(this,t)||this}return y(r,e),r.prototype.init=function(){this.$default=new i(this.$owner.alpha,this.$owner.rotation,this.$owner.grayed),this.$storage={}},r.prototype.addStatus=function(t,e){if("-"!=e){var r,n=e.split(",");null==t?r=this.$default:(r=new i,this.$storage[t]=r),r.alpha=parseFloat(n[0]),r.rotation=parseInt(n[1]),r.grayed="1"==n[2]}},r.prototype.apply=function(){var e=this,i=this.$storage[this.$controller.selectedPageId];if(i||(i=this.$default),!this.$tween||t.UIPackage.$constructingObjects||t.GearBase.disableAllTweenEffect)this.$owner.$gearLocked=!0,this.$owner.grayed=i.grayed,this.$owner.alpha=i.alpha,this.$owner.rotation=i.rotation,this.$owner.$gearLocked=!1;else{if(this.$owner.$gearLocked=!0,this.$owner.grayed=i.grayed,this.$owner.$gearLocked=!1,this.$tweener){if(this.$tweenTarget.alpha===i.alpha&&this.$tweenTarget.rotation===i.rotation)return;this.$tweener.gotoAndStop(this.$tweener.duration),this.$tweener=null}var r=i.alpha!=this.$owner.alpha,n=i.rotation!=this.$owner.rotation;if(r||n){this.$owner.hasGearController(0,this.$controller)&&(this.$lockToken=this.$owner.lockGearDisplay()),this.$tweenTarget=i;var o={onChange:function(){e.$owner.$gearLocked=!0,r&&(e.$owner.alpha=e.$tweenValue.x),n&&(e.$owner.rotation=e.$tweenValue.y),e.$owner.$gearLocked=!1}};null==this.$tweenValue&&(this.$tweenValue=new c.Point),this.$tweenValue.x=this.$owner.alpha,this.$tweenValue.y=this.$owner.rotation,this.$tweener=d.Tween.get(this.$tweenValue,o).wait(1e3*this.$tweenDelay).to({x:i.alpha,y:i.rotation},1e3*this.$tweenTime,this.$easeType).call(this.tweenComplete,null,this)}}},r.prototype.tweenComplete=function(){0!=this.$lockToken&&(this.$owner.releaseGearDisplay(this.$lockToken),this.$lockToken=0),this.$tweener=null,this.$owner.emit("__gearStop",this)},r.prototype.updateState=function(){if(null!=this.$controller&&!this.$owner.$gearLocked&&!this.$owner.$inProgressBuilding){var t=this.$storage[this.$controller.selectedPageId];t||(t=new i,this.$storage[this.$controller.selectedPageId]=t),t.alpha=this.$owner.alpha,t.rotation=this.$owner.rotation,t.grayed=this.$owner.grayed}},r}(t.GearBase);t.GearLook=e;var i=function(){return function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=!1),this.alpha=t,this.rotation=e,this.grayed=i}}()}(l||(l={})),function(t){var e=function(e){function r(t){return e.call(this,t)||this}return y(r,e),r.prototype.init=function(){this.$default=new i(this.$owner.width,this.$owner.height,this.$owner.scaleX,this.$owner.scaleY),this.$storage={}},r.prototype.addStatus=function(t,e){if("-"!=e){var r,n=e.split(",");null==t?r=this.$default:(r=new i,this.$storage[t]=r),r.width=parseInt(n[0]),r.height=parseInt(n[1]),n.length>2&&(r.scaleX=parseFloat(n[2]),r.scaleY=parseFloat(n[3]))}},r.prototype.apply=function(){var e=this,r=this.$storage[this.$controller.selectedPageId];if(r||(r=this.$default),!this.$tween||t.UIPackage.$constructingObjects||t.GearBase.disableAllTweenEffect)this.$owner.$gearLocked=!0,this.$owner.setSize(r.width,r.height,this.$owner.gearXY.controller==this.$controller),this.$owner.setScale(r.scaleX,r.scaleY),this.$owner.$gearLocked=!1;else{if(this.$tweener){if(this.$tweenTarget.width==r.width&&this.$tweenTarget.height==r.height&&this.$tweenTarget.scaleX==r.scaleX&&this.$tweenTarget.scaleY==r.scaleY)return;this.$tweener.gotoAndStop(this.$tweener.duration),this.$tweener=null}var n=r.width!=this.$owner.width||r.height!=this.$owner.height,o=r.scaleX!=this.$owner.scaleX||r.scaleY!=this.$owner.scaleY;if(n||o){this.$owner.hasGearController(0,this.$controller)&&(this.$lockToken=this.$owner.lockGearDisplay()),this.$tweenTarget=r;var s={onChange:function(){e.$owner.$gearLocked=!0,n&&e.$owner.setSize(e.$tweenValue.width,e.$tweenValue.height,e.$owner.gearXY.controller==e.$controller),o&&e.$owner.setScale(e.$tweenValue.scaleX,e.$tweenValue.scaleY),e.$owner.$gearLocked=!1}};null==this.$tweenValue&&(this.$tweenValue=new i),this.$tweenValue.width=this.$owner.width,this.$tweenValue.height=this.$owner.height,this.$tweenValue.scaleX=this.$owner.scaleX,this.$tweenValue.scaleY=this.$owner.scaleY,this.$tweener=d.Tween.get(this.$tweenValue,s).wait(1e3*this.$tweenDelay).to({width:r.width,height:r.height,scaleX:r.scaleX,scaleY:r.scaleY},1e3*this.$tweenTime,this.$easeType).call(this.tweenComplete,null,this)}}},r.prototype.tweenComplete=function(){0!=this.$lockToken&&(this.$owner.releaseGearDisplay(this.$lockToken),this.$lockToken=0),this.$tweener=null,this.$owner.emit("__gearStop",this)},r.prototype.updateState=function(){if(null!=this.$controller&&!this.$owner.$gearLocked&&!this.$owner.$inProgressBuilding){var t=this.$storage[this.$controller.selectedPageId];t||(t=new i,this.$storage[this.$controller.selectedPageId]=t),t.width=this.$owner.width,t.height=this.$owner.height,t.scaleX=this.$owner.scaleX,t.scaleY=this.$owner.scaleY}},r.prototype.updateFromRelations=function(t,e){if(null!=this.$controller&&null!=this.$storage){for(var i in this.$storage){var r=this.$storage[i];r.width+=t,r.height+=e}this.$default.width+=t,this.$default.height+=e,this.updateState()}},r}(t.GearBase);t.GearSize=e;var i=function(){return function(t,e,i,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),this.width=t,this.height=e,this.scaleX=i,this.scaleY=r}}()}(l||(l={})),function(t){var e=function(t){function e(e){return t.call(this,e)||this}return y(e,t),e.prototype.init=function(){this.$default=this.$owner.text,this.$storage={}},e.prototype.addStatus=function(t,e){null==t?this.$default=e:this.$storage[t]=e},e.prototype.apply=function(){this.$owner.$gearLocked=!0;var t=this.$storage[this.$controller.selectedPageId];this.$owner.text=null!=t?t:this.$default,this.$owner.$gearLocked=!1},e.prototype.updateState=function(){null==this.$controller||this.$owner.$gearLocked||this.$owner.$inProgressBuilding||(this.$storage[this.$controller.selectedPageId]=this.$owner.text)},e}(t.GearBase);t.GearText=e}(l||(l={})),function(t){var e=function(e){function i(t){return e.call(this,t)||this}return y(i,e),i.prototype.init=function(){this.$default=new c.Point(this.$owner.x,this.$owner.y),this.$storage={}},i.prototype.addStatus=function(t,e){if("-"!=e){var i,r=e.split(",");null==t?i=this.$default:(i=new c.Point,this.$storage[t]=i),i.x=parseInt(r[0]),i.y=parseInt(r[1])}},i.prototype.apply=function(){var e=this,i=this.$storage[this.$controller.selectedPageId];if(i||(i=this.$default),!this.$tween||t.UIPackage.$constructingObjects||t.GearBase.disableAllTweenEffect)this.$owner.$gearLocked=!0,this.$owner.setXY(i.x,i.y),this.$owner.$gearLocked=!1;else{if(this.$tweener){if(this.$tweenTarget.x===i.x&&this.$tweenTarget.y===i.y)return;this.$tweener.gotoAndStop(this.$tweener.duration),this.$tweener=null}if(this.$owner.x!=i.x||this.$owner.y!=i.y){this.$owner.hasGearController(0,this.$controller),this.$lockToken=this.$owner.lockGearDisplay(),this.$tweenTarget=i;var r={onChange:function(){e.$owner.$gearLocked=!0,e.$owner.setXY(e.$tweenValue.x,e.$tweenValue.y),e.$owner.$gearLocked=!1}};null==this.$tweenValue&&(this.$tweenValue=new c.Point),this.$tweenValue.x=this.$owner.x,this.$tweenValue.y=this.$owner.y,this.$tweener=d.Tween.get(this.$tweenValue,r).wait(1e3*this.$tweenDelay).to({x:i.x,y:i.y},1e3*this.$tweenTime,this.$easeType).call(this.tweenComplete,null,this)}}},i.prototype.tweenComplete=function(){0!=this.$lockToken&&(this.$owner.releaseGearDisplay(this.$lockToken),this.$lockToken=0),this.$tweener=null,this.$owner.emit("__gearStop",this)},i.prototype.updateState=function(){if(null!=this.$controller&&!this.$owner.$gearLocked&&!this.$owner.$inProgressBuilding){var t=this.$storage[this.$controller.selectedPageId];t||(t=new c.Point,this.$storage[this.$controller.selectedPageId]=t),t.x=this.$owner.x,t.y=this.$owner.y}},i.prototype.updateFromRelations=function(t,e){if(null!=this.$controller&&null!=this.$storage){for(var i in this.$storage){var r=this.$storage[i];r.x+=t,r.y+=e}this.$default.x+=t,this.$default.y+=e,this.updateState()}},i}(t.GearBase);t.GearXY=e}(l||(l={})),function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.$type=0,t.$lineSize=0,t.$lineColor=0,t.$fillColor=0,t.$lineSize=1,t.$lineAlpha=1,t.$fillAlpha=1,t.$fillColor=16777215,t}return y(i,e),i.prototype.drawRect=function(t,e,i,r,n,o){void 0===o&&(o=null),this.$type=1,this.$lineSize=t,this.$lineColor=e,this.$lineAlpha=i,this.$fillColor=r,this.$fillAlpha=n,this.$corner=o,this.drawGraph()},i.prototype.drawEllipse=function(t,e,i,r,n){this.$type=2,this.$lineSize=t,this.$lineColor=e,this.$lineAlpha=i,this.$fillColor=r,this.$fillAlpha=n,this.$corner=null,this.drawGraph()},Object.defineProperty(i.prototype,"color",{get:function(){return this.$fillColor},set:function(t){this.$fillColor=t,0!=this.$type&&this.drawGraph()},enumerable:!0,configurable:!0}),i.prototype.drawGraph=function(){var t=this.$displayObject;t.interactive=this.touchable,t.clear();var e=this.width,i=this.height;if(0!=e&&0!=i){if(0==this.$lineSize?t.lineStyle(0,0,0):t.lineStyle(this.$lineSize,this.$lineColor,this.$lineAlpha),t.beginFill(this.$fillColor,this.$fillAlpha),1==this.$type)this.$corner&&this.$corner.length>=1?t.drawRoundedRect(0,0,e,i,this.$corner[0]):t.drawRect(0,0,e,i);else{var r=.5*e,n=.5*i;e==i?t.drawCircle(r,r,r):t.drawEllipse(r,n,r,n)}t.endFill()}},i.prototype.replaceMe=function(t){if(!this.$parent)throw new Error("parent not set");t.name=this.name,t.alpha=this.alpha,t.rotation=this.rotation,t.visible=this.visible,t.touchable=this.touchable,t.grayed=this.grayed,t.setXY(this.x,this.y),t.setSize(this.width,this.height);var e=this.$parent.getChildIndex(this);this.$parent.addChildAt(t,e),t.relations.copyFrom(this.relations),this.$parent.removeChild(this,!0)},i.prototype.addBeforeMe=function(t){if(null==this.$parent)throw new Error("parent not set");var e=this.$parent.getChildIndex(this);this.$parent.addChildAt(t,e)},i.prototype.addAfterMe=function(t){if(null==this.$parent)throw new Error("parent not set");var e=this.$parent.getChildIndex(this);e++,this.$parent.addChildAt(t,e)},i.prototype.setNativeObject=function(t){this.$type=0;var e=this.$displayObject;e.interactive=this.touchable,e.clear(),e.removeChildren(),e.addChild(t)},i.prototype.createDisplayObject=function(){this.$displayObject=new t.UISprite(this)},i.prototype.handleSizeChanged=function(){0!=this.$type&&this.drawGraph()},i.prototype.setupBeforeAdd=function(i){e.prototype.setupBeforeAdd.call(this,i);var r=i.attributes.type;if(r&&"empty"!=r){var n=void 0;(n=i.attributes.lineSize)&&(this.$lineSize=parseInt(n));var o=void 0;(n=i.attributes.lineColor)&&(o=t.utils.StringUtil.convertFromHtmlColor(n,!0),this.$lineColor=16777215&o,this.$lineAlpha=(o>>24&255)/255),(n=i.attributes.fillColor)&&(o=t.utils.StringUtil.convertFromHtmlColor(n,!0),this.$fillColor=16777215&o,this.$fillAlpha=(o>>24&255)/255);var s=void 0;(n=i.attributes.corner)&&((s=n.split(",")).length>1?this.$corner=[parseInt(s[0]),parseInt(s[1]),parseInt(s[2]),parseInt(s[3])]:this.$corner=[parseInt(s[0])]),this.$type="rect"==r?1:2,this.drawGraph()}},i}(t.GObject);t.GGraph=e}(l||(l={})),function(t){var e=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return y(i,e),i.prototype.createDisplayObject=function(){var e=new t.UIContainer(this);e.interactive=!1,this.setDisplayObject(e)},i.prototype.updateBounds=function(){if(!this.$updating&&this.parent){var t,e=this.$parent.numChildren,i=0,r=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,s=Number.NEGATIVE_INFINITY;this.$empty=!0;var a=0;for(i=0;i<e;i++)(t=this.$parent.getChildAt(i)).group==this&&((a=t.x)<r&&(r=a),(a=t.y)<n&&(n=a),(a=t.x+t.width)>o&&(o=a),(a=t.y+t.height)>s&&(s=a),this.$empty=!1);this.$updating=!0,this.$empty?this.setSize(0,0):(this.setXY(r,n),this.setSize(o-r,s-n)),this.$updating=!1}},i.prototype.setXY=function(t,i){if(this.$x!=t||this.$y!=i){var r=t-this.$x,n=i-this.$y;e.prototype.setXY.call(this,t,i),this.moveChildren(r,n)}},i.prototype.moveChildren=function(t,e){if(!this.$updating&&this.$parent){this.$updating=!0;var i,r=this.$parent.numChildren,n=0;for(n=0;n<r;n++)(i=this.$parent.getChildAt(n)).group==this&&i.setXY(i.x+t,i.y+e);this.$updating=!1}},i.prototype.updateAlpha=function(){if(e.prototype.updateAlpha.call(this),!this.$inProgressBuilding){var t,i,r=this.$parent.numChildren;for(t=0;t<r;t++)(i=this.$parent.getChildAt(t)).group==this&&(i.alpha=this.alpha)}},i}(t.GObject);t.GGroup=e}(l||(l={})),function(t){var e=function(e){function i(){return e.call(this)||this}return y(i,e),Object.defineProperty(i.prototype,"touchable",{get:function(){return!1},set:function(t){this.$touchable=!1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"color",{get:function(){return this.$content.tint},set:function(t){this.color!=t&&(this.updateGear(4),this.$content.tint=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"flip",{get:function(){return this.$flip},set:function(t){if(this.$flip!=t){this.$flip=t;var e=1,i=1;1!=this.$flip&&3!=this.$flip||(e=-1),2!=this.$flip&&3!=this.$flip||(i=-1),this.$content.scale.set(e,i),this.handleXYChanged()}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"texture",{get:function(){return this.$content.texture},set:function(t){null!=t?(this.$sourceWidth=t.orig.width,this.$sourceHeight=t.orig.height):this.$sourceWidth=this.$sourceHeight=0,this.$initWidth=this.$sourceWidth,this.$initHeight=this.$sourceHeight,this.$content.texture=t},enumerable:!0,configurable:!0}),i.prototype.createDisplayObject=function(){this.$content=new t.UIImage(this),this.setDisplayObject(this.$content)},i.prototype.dispose=function(){this.$content.destroy(),e.prototype.dispose.call(this)},i.prototype.constructFromResource=function(){this.$sourceWidth=this.packageItem.width,this.$sourceHeight=this.packageItem.height,this.$initWidth=this.$sourceWidth,this.$initHeight=this.$sourceHeight,this.$content.$initDisp(this.packageItem),this.setSize(this.$sourceWidth,this.$sourceHeight)},i.prototype.handleXYChanged=function(){e.prototype.handleXYChanged.call(this),0!=this.$flip&&(-1==this.$content.scale.x&&(this.$content.x+=this.width),-1==this.$content.scale.y&&(this.$content.y+=this.height))},i.prototype.handleSizeChanged=function(){this.$content.width=this.width,this.$content.height=this.height},i.prototype.setupBeforeAdd=function(i){var r;e.prototype.setupBeforeAdd.call(this,i),(r=i.attributes.color)&&(this.color=t.utils.StringUtil.convertFromHtmlColor(r)),(r=i.attributes.flip)&&(this.flip=t.ParseFlipType(r))},i}(t.GObject);t.GImage=e}(l||(l={})),function(t){var e=function(e){function i(){return e.call(this)||this}return y(i,e),Object.defineProperty(i.prototype,"icon",{get:function(){return null!=this.$iconObject?this.$iconObject.icon:null},set:function(t){null!=this.$iconObject&&(this.$iconObject.icon=t),this.updateGear(7)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"title",{get:function(){return this.$titleObject?this.$titleObject.text:null},set:function(t){this.$titleObject&&(this.$titleObject.text=t),this.updateGear(6)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"text",{get:function(){return this.title},set:function(t){this.title=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"titleColor",{get:function(){return t.isColorableTitle(this.$titleObject)?this.$titleObject.titleColor:0},set:function(e){t.isColorableTitle(this.$titleObject)&&(this.$titleObject.titleColor=e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fontSize",{get:function(){return t.isColorableTitle(this.$titleObject)?this.$titleObject.fontSize:0},set:function(e){t.isColorableTitle(this.$titleObject)&&(this.$titleObject.fontSize=e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"editable",{get:function(){return!!(this.$titleObject&&this.$titleObject instanceof t.GTextInput)&&this.$titleObject.editable},set:function(t){this.$titleObject&&(this.$titleObject.editable=t)},enumerable:!0,configurable:!0}),i.prototype.constructFromXML=function(t){e.prototype.constructFromXML.call(this,t),this.$titleObject=this.getChild("title"),this.$iconObject=this.getChild("icon")},i.prototype.setupAfterAdd=function(i){e.prototype.setupAfterAdd.call(this,i);var r=t.utils.XmlParser.getChildNodes(i,"Label");if(r&&r.length>0){var n=void 0;if((n=(i=r[0]).attributes.title)&&(this.text=n),(n=i.attributes.icon)&&(this.icon=n),(n=i.attributes.titleColor)&&(this.titleColor=t.utils.StringUtil.convertFromHtmlColor(n)),this.$titleObject instanceof t.GTextInput){n=i.attributes.prompt;var o=this.$titleObject;n&&(o.promptText=n),(n=i.attributes.maxLength)&&(o.maxLength=parseInt(n)),(n=i.attributes.restrict)&&(o.restrict=n),(n=i.attributes.password)&&(o.password="true"==n)}}},i}(t.GComponent);t.GLabel=e}(l||(l={})),function(t){var e=function(){return function(){this.width=0,this.height=0}}(),i=function(i){function r(){var e=i.call(this)||this;return e.scrollItemToViewOnClick=!0,e.foldInvisibleItems=!1,e.$lineCount=0,e.$columnCount=0,e.$lineGap=0,e.$columnGap=0,e.$numItems=0,e.$realNumItems=0,e.$firstIndex=0,e.$curLineItemCount=0,e.$curLineItemCount2=0,e.$virtualListChanged=0,e.$apexIndex=0,e.$childrenRenderOrder=0,e.$trackBounds=!0,e.$pool=new t.utils.GObjectRecycler,e.$layout=0,e.$autoResizeItem=!0,e.$selectionMode=0,e.opaque=!0,e.$align="left",e.$verticalAlign=0,e.$container=new c.Container,e.$rootContainer.addChild(e.$container),e}return y(r,i),Object.defineProperty(r.prototype,"childrenRenderOrder",{get:function(){return this.$childrenRenderOrder},set:function(t){this.$childrenRenderOrder!=t&&(this.$childrenRenderOrder=t,this.appendChildrenList())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"apexIndex",{get:function(){return this.$apexIndex},set:function(t){this.$apexIndex!=t&&(this.$apexIndex=t,2==this.$childrenRenderOrder&&this.appendChildrenList())},enumerable:!0,configurable:!0}),r.prototype.appendChildrenList=function(){var t,e,i=this.$children.length;if(0!=i)switch(this.$childrenRenderOrder){case 0:for(t=0;t<i;t++)null!=(e=this.$children[t]).displayObject&&e.finalVisible&&this.$container.addChild(e.displayObject);break;case 1:for(t=i-1;t>=0;t--)null!=(e=this.$children[t]).displayObject&&e.finalVisible&&this.$container.addChild(e.displayObject);break;case 2:for(t=0;t<this.$apexIndex;t++)null!=(e=this.$children[t]).displayObject&&e.finalVisible&&this.$container.addChild(e.displayObject);for(t=i-1;t>=this.$apexIndex;t--)null!=(e=this.$children[t]).displayObject&&e.finalVisible&&this.$container.addChild(e.displayObject)}},r.prototype.setXY=function(e,i){this.$x==e&&this.$y==i||(this.$x=e,this.$y=i,this.handleXYChanged(),this.updateGear(1),t.GObject.draggingObject!=this||t.GObject.sUpdatingWhileDragging||this.localToGlobalRect(0,0,this.width,this.height,t.GObject.sGlobalRect))},r.prototype.$setChildIndex=function(e,i,r){void 0===r&&(r=0);var n=this.$children.length;if(r>n&&(r=n),i==r)return i;if(this.$children.splice(i,1),this.$children.splice(r,0,e),e.inContainer){var o=0,s=void 0;if(0==this.$childrenRenderOrder){for(s=0;s<r;s++)this.$children[s].inContainer&&o++;o==this.$container.children.length&&o--,this.$container.setChildIndex(e.displayObject,o)}else if(1==this.$childrenRenderOrder){for(s=n-1;s>r;s--)this.$children[s].inContainer&&o++;o==this.$container.children.length&&o--,this.$container.setChildIndex(e.displayObject,o)}else t.GTimer.inst.callLater(this.appendChildrenList,this);this.setBoundsChangedFlag()}return r},r.prototype.childStateChanged=function(e){var i=this;if(!this.$buildingDisplayList)if(e instanceof t.GGroup)this.$children.forEach(function(t){t.group==e&&i.childStateChanged(t)},this);else if(e.displayObject)if(e.finalVisible){var r=void 0,n=void 0,o=this.$children.length;if(!e.displayObject.parent){var s=0;if(0==this.$childrenRenderOrder){for(var a=0;a<o&&(n=this.$children[a])!=e;a++)null!=n.displayObject&&null!=n.displayObject.parent&&s++;this.$container.addChildAt(e.displayObject,s)}else if(1==this.$childrenRenderOrder){for(r=o-1;r>=0&&(n=this.$children[r])!=e;r--)null!=n.displayObject&&null!=n.displayObject.parent&&s++;this.$container.addChildAt(e.displayObject,s)}else this.$container.addChild(e.displayObject),t.GTimer.inst.callLater(this.appendChildrenList,this)}}else e.displayObject.parent&&this.$container.removeChild(e.displayObject)},r.prototype.dispose=function(){t.GTimer.inst.remove(this._refreshVirtualList,this),this.$pool.clear(),this.$scrollPane&&(this.$scrollPane.off("__scroll",this.$scrolled,this),this.$scrollPane.dispose()),i.prototype.dispose.call(this)},Object.defineProperty(r.prototype,"layout",{get:function(){return this.$layout},set:function(t){this.$layout!=t&&(this.$layout=t,this.setBoundsChangedFlag(),this.$virtual&&this.setVirtualListChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"lineCount",{get:function(){return this.$lineCount},set:function(t){this.$lineCount!=t&&(this.$lineCount=t,this.setBoundsChangedFlag(),this.$virtual&&this.setVirtualListChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"columnCount",{get:function(){return this.$columnCount},set:function(t){this.$columnCount!=t&&(this.$columnCount=t,this.setBoundsChangedFlag(),this.$virtual&&this.setVirtualListChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"lineGap",{get:function(){return this.$lineGap},set:function(t){this.$lineGap!=t&&(this.$lineGap=t,this.setBoundsChangedFlag(),this.$virtual&&this.setVirtualListChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"columnGap",{get:function(){return this.$columnGap},set:function(t){this.$columnGap!=t&&(this.$columnGap=t,this.setBoundsChangedFlag(),this.$virtual&&this.setVirtualListChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"align",{get:function(){return this.$align},set:function(t){this.$align!=t&&(this.$align=t,this.setBoundsChangedFlag(),this.$virtual&&this.setVirtualListChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"verticalAlign",{get:function(){return this.$verticalAlign},set:function(t){this.$verticalAlign!=t&&(this.$verticalAlign=t,this.setBoundsChangedFlag(),this.$virtual&&this.setVirtualListChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"virtualItemSize",{get:function(){return this.$itemSize},set:function(t){this.$virtual&&(null==this.$itemSize&&(this.$itemSize=new c.Point),this.$itemSize.copy(t),this.setVirtualListChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"defaultItem",{get:function(){return this.$defaultItem},set:function(t){this.$defaultItem=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"autoResizeItem",{get:function(){return this.$autoResizeItem},set:function(t){this.$autoResizeItem!=t&&(this.$autoResizeItem=t,this.setBoundsChangedFlag(),this.$virtual&&this.setVirtualListChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"selectionMode",{get:function(){return this.$selectionMode},set:function(t){this.$selectionMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"selectionController",{get:function(){return this.$selectionController},set:function(t){this.$selectionController=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"itemPool",{get:function(){return this.$pool},enumerable:!0,configurable:!0}),r.prototype.getFromPool=function(t){void 0===t&&(t=null),t||(t=this.$defaultItem);var e=this.$pool.get(t);return null!=e&&(e.visible=!0),e},r.prototype.returnToPool=function(t){t.displayObject.cacheAsBitmap=!1,this.$pool.recycle(t.resourceURL,t)},r.prototype.addChildAt=function(e,r){if(void 0===r&&(r=0),i.prototype.addChildAt.call(this,e,r),e instanceof t.GButton){var n=e;n.selected=!1,n.changeStateOnClick=!1}return e.click(this.$clickItem,this),e},r.prototype.addItem=function(e){return void 0===e&&(e=null),e||(e=this.$defaultItem),this.addChild(t.UIPackage.createObjectFromURL(e))},r.prototype.addItemFromPool=function(t){return void 0===t&&(t=null),this.addChild(this.getFromPool(t))},r.prototype.removeChildAt=function(e,i){if(void 0===i&&(i=!1),e>=0&&e<this.numChildren){var r=this.$children[e];return r.parent=null,0!=r.sortingOrder&&this.$sortingChildCount--,this.$children.splice(e,1),r.inContainer&&(this.$container.removeChild(r.displayObject),2==this.$childrenRenderOrder&&t.GTimer.inst.callLater(this.appendChildrenList,this)),!0===i&&r.dispose(),this.setBoundsChangedFlag(),r.removeClick(this.$clickItem,this),r}throw new Error("Invalid child index")},r.prototype.removeChildToPoolAt=function(t){void 0===t&&(t=0);var e=i.prototype.removeChildAt.call(this,t);this.returnToPool(e)},r.prototype.removeChildToPool=function(t){i.prototype.removeChild.call(this,t),this.returnToPool(t)},r.prototype.removeChildrenToPool=function(t,e){void 0===t&&(t=0),void 0===e&&(e=-1),(e<0||e>=this.$children.length)&&(e=this.$children.length-1);for(var i=t;i<=e;++i)this.removeChildToPoolAt(t)},Object.defineProperty(r.prototype,"selectedIndex",{get:function(){for(var t=this.$children.length,e=0;e<t;e++){var i=this.$children[e];if(null!=i&&i.selected)return this.childIndexToItemIndex(e)}return-1},set:function(t){this.clearSelection(),t>=0&&t<this.numItems&&this.addSelection(t)},enumerable:!0,configurable:!0}),r.prototype.getSelection=function(){var t=this,e=[];return this.$children.forEach(function(i,r){null!=i&&i.selected&&e.push(t.childIndexToItemIndex(r))},this),e},r.prototype.addSelection=function(t,e){if(void 0===e&&(e=!1),3!=this.$selectionMode&&(this.checkVirtualList(),0==this.$selectionMode&&this.clearSelection(),e&&this.scrollToView(t),!((t=this.itemIndexToChildIndex(t))<0||t>=this.$children.length))){var i=this.getChildAt(t);null==i||i.selected||(i.selected=!0,this.updateSelectionController(t))}},r.prototype.removeSelection=function(t){if(void 0===t&&(t=0),3!=this.$selectionMode&&!((t=this.itemIndexToChildIndex(t))>=this.$children.length)){var e=this.getChildAt(t);null!=e&&e.selected&&(e.selected=!1)}},r.prototype.clearSelection=function(){this.$children.forEach(function(t){null!=t&&(t.selected=!1)},this)},r.prototype.selectAll=function(){this.checkVirtualList();var t=-1;this.$children.forEach(function(e,i){e&&(e.selected=!0,t=i)},this),-1!=t&&this.updateSelectionController(t)},r.prototype.selectNone=function(){this.$children.forEach(function(e){e&&e instanceof t.GButton&&(e.selected=!1)},this)},r.prototype.selectReverse=function(){this.checkVirtualList();var e=-1;this.$children.forEach(function(i,r){i&&i instanceof t.GButton&&(i.selected=!i.selected,i.selected&&(e=r))},this),-1!=e&&this.updateSelectionController(e)},r.prototype.handleArrowKey=function(t){void 0===t&&(t=0);var e,i,r,n,o,s=this.selectedIndex;if(-1!=s)switch(t){case 1:if(0==this.$layout||3==this.$layout)--s>=0&&(this.clearSelection(),this.addSelection(s,!0));else if(2==this.$layout||4==this.$layout){i=this.$children[s],n=0;for(var a=s-1;a>=0;a--){if((e=this.$children[a]).y!=i.y){i=e;break}n++}for(;r>=0;r--)if((e=this.$children[r]).y!=i.y){this.clearSelection(),this.addSelection(r+n+1,!0);break}}break;case 3:if(1==this.$layout||2==this.$layout||4==this.$layout)++s<this.$children.length&&(this.clearSelection(),this.addSelection(s,!0));else if(3==this.$layout){for(i=this.$children[s],n=0,o=this.$children.length,r=s+1;r<o;r++){if((e=this.$children[r]).x!=i.x){i=e;break}n++}for(;r<o;r++)if((e=this.$children[r]).x!=i.x){this.clearSelection(),this.addSelection(r-n-1,!0);break}}break;case 5:if(0==this.$layout||3==this.$layout)++s<this.$children.length&&(this.clearSelection(),this.addSelection(s,!0));else if(2==this.$layout||4==this.$layout){for(i=this.$children[s],n=0,o=this.$children.length,r=s+1;r<o;r++){if((e=this.$children[r]).y!=i.y){i=e;break}n++}for(;r<o;r++)if((e=this.$children[r]).y!=i.y){this.clearSelection(),this.addSelection(r-n-1,!0);break}}break;case 7:if(1==this.$layout||2==this.$layout||4==this.$layout)--s>=0&&(this.clearSelection(),this.addSelection(s,!0));else if(3==this.$layout){for(i=this.$children[s],n=0,r=s-1;r>=0;r--){if((e=this.$children[r]).x!=i.x){i=e;break}n++}for(;r>=0;r--)if((e=this.$children[r]).x!=i.x){this.clearSelection(),this.addSelection(r+n+1,!0);break}}}},r.prototype.$clickItem=function(e){if(null==this.$scrollPane||!this.$scrollPane.$isDragged){var i=t.GObject.castFromNativeObject(e.currentTarget);i&&(this.setSelectionOnEvent(i),this.$scrollPane&&this.scrollItemToViewOnClick&&this.$scrollPane.scrollToView(i,!0),this.emit("__itemClick",e,i))}},r.prototype.setSelectionOnEvent=function(e){if(e instanceof t.GButton&&3!=this.$selectionMode){var i=this.getChildIndex(e);0==this.$selectionMode?e.selected||(this.clearSelectionExcept(e),e.selected=!0):e.selected?this.clearSelectionExcept(e):(this.clearSelectionExcept(e),e.selected=!0),e.selected&&this.updateSelectionController(i)}},r.prototype.clearSelectionExcept=function(e){this.$children.forEach(function(e){e&&e instanceof t.GButton&&e.selected&&(e.selected=!1)},this)},r.prototype.resizeToFit=function(t,e){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===e&&(e=0),this.ensureBoundsCorrect();var i=this.numItems;if(t>i&&(t=i),this.$virtual){var r=Math.ceil(t/this.$curLineItemCount);0==this.$layout||2==this.$layout?this.viewHeight=r*this.$itemSize.y+Math.max(0,r-1)*this.$lineGap:this.viewWidth=r*this.$itemSize.x+Math.max(0,r-1)*this.$columnGap}else if(0==t)0==this.$layout||2==this.$layout?this.viewHeight=e:this.viewWidth=e;else{for(var n=t-1,o=null;n>=0&&(o=this.getChildAt(n),this.foldInvisibleItems&&!o.visible);)n--;if(n<0)0==this.$layout||2==this.$layout?this.viewHeight=e:this.viewWidth=e;else{var s=0;0==this.$layout||2==this.$layout?((s=o.y+o.height)<e&&(s=e),this.viewHeight=s):((s=o.x+o.width)<e&&(s=e),this.viewWidth=s)}}},r.prototype.getMaxItemWidth=function(){var t=0;return this.$children.forEach(function(e){e&&e.width>t&&(t=e.width)},this),t},r.prototype.handleSizeChanged=function(){i.prototype.handleSizeChanged.call(this),this.setBoundsChangedFlag(),this.$virtual&&this.setVirtualListChangedFlag(!0)},r.prototype.handleControllerChanged=function(t){i.prototype.handleControllerChanged.call(this,t),this.$selectionController==t&&(this.selectedIndex=t.selectedIndex)},r.prototype.updateSelectionController=function(t){if(null!=this.$selectionController&&!this.$selectionController.$updating&&t<this.$selectionController.pageCount){var e=this.$selectionController;this.$selectionController=null,e.selectedIndex=t,this.$selectionController=e}},r.prototype.getSnappingPosition=function(t,e,n){if(this.$virtual){n||(n=new c.Point);var o=void 0,s=void 0;return 0==this.$layout||2==this.$layout?(o=e,r.posHelper=e,s=this.getIndexOnPos1(!1),e=r.posHelper,s<this.$virtualItems.length&&o-e>this.$virtualItems[s].height/2&&s<this.$realNumItems&&(e+=this.$virtualItems[s].height+this.$lineGap)):1==this.$layout||3==this.$layout?(o=t,r.posHelper=t,s=this.getIndexOnPos2(!1),t=r.posHelper,s<this.$virtualItems.length&&o-t>this.$virtualItems[s].width/2&&s<this.$realNumItems&&(t+=this.$virtualItems[s].width+this.$columnGap)):(o=t,r.posHelper=t,s=this.getIndexOnPos3(!1),t=r.posHelper,s<this.$virtualItems.length&&o-t>this.$virtualItems[s].width/2&&s<this.$realNumItems&&(t+=this.$virtualItems[s].width+this.$columnGap)),n.x=t,n.y=e,n}return i.prototype.getSnappingPosition.call(this,t,e,n)},r.prototype.scrollToView=function(t,e,i){if(void 0===e&&(e=!1),void 0===i&&(i=!1),this.$virtual){if(0==this.$numItems)return;if(this.checkVirtualList(),t>=this.$virtualItems.length)throw new Error("Invalid child index: "+t+" is larger than max length: "+this.$virtualItems.length);this.$loop&&(t=Math.floor(this.$firstIndex/this.$numItems)*this.$numItems+t);var r=void 0,n=this.$virtualItems[t],o=0,s=void 0;if(0==this.$layout||2==this.$layout){for(s=0;s<t;s+=this.$curLineItemCount)o+=this.$virtualItems[s].height+this.$lineGap;r=new c.Rectangle(0,o,this.$itemSize.x,n.height)}else if(1==this.$layout||3==this.$layout){for(s=0;s<t;s+=this.$curLineItemCount)o+=this.$virtualItems[s].width+this.$columnGap;r=new c.Rectangle(o,0,n.width,this.$itemSize.y)}else{var a=t/(this.$curLineItemCount*this.$curLineItemCount2);r=new c.Rectangle(a*this.viewWidth+t%this.$curLineItemCount*(n.width+this.$columnGap),t/this.$curLineItemCount%this.$curLineItemCount2*(n.height+this.$lineGap),n.width,n.height)}i=!0,null!=this.$scrollPane&&this.$scrollPane.scrollToView(r,e,i)}else{var h=this.getChildAt(t);null!=h&&(null!=this.$scrollPane?this.$scrollPane.scrollToView(h,e,i):null!=this.parent&&null!=this.parent.scrollPane&&this.parent.scrollPane.scrollToView(h,e,i))}},r.prototype.getFirstChildInView=function(){return this.childIndexToItemIndex(i.prototype.getFirstChildInView.call(this))},r.prototype.childIndexToItemIndex=function(t){if(!this.$virtual)return t;if(4==this.$layout){for(var e=this.$firstIndex;e<this.$realNumItems;e++)if(null!=this.$virtualItems[e].obj&&--t<0)return e;return t}return t+=this.$firstIndex,this.$loop&&this.$numItems>0&&(t%=this.$numItems),t},r.prototype.itemIndexToChildIndex=function(t){if(!this.$virtual)return t;if(4==this.$layout)return this.getChildIndex(this.$virtualItems[t].obj);if(this.$loop&&this.$numItems>0){var e=this.$firstIndex%this.$numItems;t=t>=e?this.$firstIndex+(t-e):this.$firstIndex+this.$numItems+(e-t)}else t-=this.$firstIndex;return t},r.prototype.setVirtual=function(){this.$setVirtual(!1)},r.prototype.setVirtualAndLoop=function(){this.$setVirtual(!0)},r.prototype.$setVirtual=function(t){if(!this.$virtual){if(null==this.$scrollPane)throw new Error("Virtual list must be scrollable");if(t){if(2==this.$layout||3==this.$layout)throw new Error("Virtual list with loop mode is not supported for both FlowHorizontal and FlowVertical layout");this.$scrollPane.bouncebackEffect=!1}if(this.$virtual=!0,this.$loop=t,this.$virtualItems=[],this.removeChildrenToPool(),null==this.$itemSize){this.$itemSize=new c.Point;var e=this.getFromPool(null);if(null==e)throw new Error("Virtual list must have a default list item resource specified.");this.$itemSize.x=e.width,this.$itemSize.y=e.height,this.returnToPool(e)}0==this.$layout||2==this.$layout?this.$scrollPane.scrollSpeed=this.$itemSize.y:this.$scrollPane.scrollSpeed=this.$itemSize.x,this.$scrollPane.on("__scroll",this.$scrolled,this),this.setVirtualListChangedFlag(!0)}},Object.defineProperty(r.prototype,"numItems",{get:function(){return this.$virtual?this.$numItems:this.$children.length},set:function(i){if(this.$virtual){if(null==this.itemRenderer)throw new Error("list.itemRenderer is required");this.$numItems=i,this.$loop?this.$realNumItems=5*this.$numItems:this.$realNumItems=this.$numItems;var r=this.$virtualItems.length;if(this.$realNumItems>r)for(var n=r;n<this.$realNumItems;n++){var o=new e;o.width=this.$itemSize.x,o.height=this.$itemSize.y,this.$virtualItems.push(o)}0!=this.$virtualListChanged&&t.GTimer.inst.remove(this._refreshVirtualList,this),this._refreshVirtualList()}else{var s=this.$children.length;if(i>s)for(n=s;n<i;n++)null==this.itemProvider?this.addItemFromPool():this.addItemFromPool(this.itemProvider(n));else this.removeChildrenToPool(i,s);if(null!=this.itemRenderer)for(n=0;n<i;n++)this.itemRenderer(n,this.getChildAt(n))}},enumerable:!0,configurable:!0}),r.prototype.refreshVirtualList=function(){this.setVirtualListChangedFlag(!1)},r.prototype.checkVirtualList=function(){0!=this.$virtualListChanged&&(this._refreshVirtualList(),t.GTimer.inst.remove(this._refreshVirtualList,this))},r.prototype.setVirtualListChangedFlag=function(e){void 0===e&&(e=!1),e?this.$virtualListChanged=2:0==this.$virtualListChanged&&(this.$virtualListChanged=1),t.GTimer.inst.callLater(this._refreshVirtualList,this)},r.prototype._refreshVirtualList=function(){var t=2==this.$virtualListChanged;this.$virtualListChanged=0,this.$eventLocked=!0,t&&(0==this.$layout||1==this.$layout?this.$curLineItemCount=1:2==this.$layout?this.$columnCount>0?this.$curLineItemCount=this.$columnCount:(this.$curLineItemCount=Math.floor((this.$scrollPane.viewWidth+this.$columnGap)/(this.$itemSize.x+this.$columnGap)),this.$curLineItemCount<=0&&(this.$curLineItemCount=1)):3==this.$layout?this.$lineCount>0?this.$curLineItemCount=this.$lineCount:(this.$curLineItemCount=Math.floor((this.$scrollPane.viewHeight+this.$lineGap)/(this.$itemSize.y+this.$lineGap)),this.$curLineItemCount<=0&&(this.$curLineItemCount=1)):(this.$columnCount>0?this.$curLineItemCount=this.$columnCount:(this.$curLineItemCount=Math.floor((this.$scrollPane.viewWidth+this.$columnGap)/(this.$itemSize.x+this.$columnGap)),this.$curLineItemCount<=0&&(this.$curLineItemCount=1)),this.$lineCount>0?this.$curLineItemCount2=this.$lineCount:(this.$curLineItemCount2=Math.floor((this.$scrollPane.viewHeight+this.$lineGap)/(this.$itemSize.y+this.$lineGap)),this.$curLineItemCount2<=0&&(this.$curLineItemCount2=1))));var e=0,i=0;if(this.$realNumItems>0){var r=void 0,n=Math.ceil(this.$realNumItems/this.$curLineItemCount)*this.$curLineItemCount,o=Math.min(this.$curLineItemCount,this.$realNumItems);if(0==this.$layout||2==this.$layout){for(r=0;r<n;r+=this.$curLineItemCount)e+=this.$virtualItems[r].height+this.$lineGap;if(e>0&&(e-=this.$lineGap),this.$autoResizeItem)i=this.$scrollPane.viewWidth;else{for(r=0;r<o;r++)i+=this.$virtualItems[r].width+this.$columnGap;i>0&&(i-=this.$columnGap)}}else if(1==this.$layout||3==this.$layout){for(r=0;r<n;r+=this.$curLineItemCount)i+=this.$virtualItems[r].width+this.$columnGap;if(i>0&&(i-=this.$columnGap),this.$autoResizeItem)e=this.scrollPane.viewHeight;else{for(r=0;r<o;r++)e+=this.$virtualItems[r].height+this.$lineGap;e>0&&(e-=this.$lineGap)}}else{i=Math.ceil(n/(this.$curLineItemCount*this.$curLineItemCount2))*this.viewWidth,e=this.viewHeight}}this.handleAlign(i,e),this.$scrollPane.setContentSize(i,e),this.$eventLocked=!1,this.handleScroll(!0)},r.prototype.$scrolled=function(t){this.handleScroll(!1)},r.prototype.getIndexOnPos1=function(t){if(this.$realNumItems<this.$curLineItemCount)return r.posHelper=0,0;var e,i,n;if(this.numChildren>0&&!t){if((i=this.getChildAt(0).y)>r.posHelper){for(e=this.$firstIndex-this.$curLineItemCount;e>=0;e-=this.$curLineItemCount)if((i-=this.$virtualItems[e].height+this.$lineGap)<=r.posHelper)return r.posHelper=i,e;return r.posHelper=0,0}for(e=this.$firstIndex;e<this.$realNumItems;e+=this.$curLineItemCount){if((n=i+this.$virtualItems[e].height+this.$lineGap)>r.posHelper)return r.posHelper=i,e;i=n}return r.posHelper=i,this.$realNumItems-this.$curLineItemCount}for(i=0,e=0;e<this.$realNumItems;e+=this.$curLineItemCount){if((n=i+this.$virtualItems[e].height+this.$lineGap)>r.posHelper)return r.posHelper=i,e;i=n}return r.posHelper=i,this.$realNumItems-this.$curLineItemCount},r.prototype.getIndexOnPos2=function(t){if(this.$realNumItems<this.$curLineItemCount)return r.posHelper=0,0;var e,i,n;if(this.numChildren>0&&!t){if((i=this.getChildAt(0).x)>r.posHelper){for(e=this.$firstIndex-this.$curLineItemCount;e>=0;e-=this.$curLineItemCount)if((i-=this.$virtualItems[e].width+this.$columnGap)<=r.posHelper)return r.posHelper=i,e;return r.posHelper=0,0}for(e=this.$firstIndex;e<this.$realNumItems;e+=this.$curLineItemCount){if((n=i+this.$virtualItems[e].width+this.$columnGap)>r.posHelper)return r.posHelper=i,e;i=n}return r.posHelper=i,this.$realNumItems-this.$curLineItemCount}for(i=0,e=0;e<this.$realNumItems;e+=this.$curLineItemCount){if((n=i+this.$virtualItems[e].width+this.$columnGap)>r.posHelper)return r.posHelper=i,e;i=n}return r.posHelper=i,this.$realNumItems-this.$curLineItemCount},r.prototype.getIndexOnPos3=function(t){if(this.$realNumItems<this.$curLineItemCount)return r.posHelper=0,0;var e,i,n=this.viewWidth,o=Math.floor(r.posHelper/n),s=o*(this.$curLineItemCount*this.$curLineItemCount2),a=o*n;for(i=0;i<this.$curLineItemCount;i++){if((e=a+this.$virtualItems[s+i].width+this.$columnGap)>r.posHelper)return r.posHelper=a,s+i;a=e}return r.posHelper=a,s+this.$curLineItemCount-1},r.prototype.handleScroll=function(t){var e,i;this.$eventLocked||(0==this.$layout||2==this.$layout?(this.$loop&&(e=this.$scrollPane.scrollingPosY,i=this.$numItems*(this.$itemSize.y+this.$lineGap),0==e?this.$scrollPane.posY=i:e==this.$scrollPane.contentHeight-this.$scrollPane.viewHeight&&(this.$scrollPane.posY=this.$scrollPane.contentHeight-i-this.viewHeight)),this.handleScroll1(t)):1==this.$layout||3==this.$layout?(this.$loop&&(e=this.$scrollPane.scrollingPosX,i=this.$numItems*(this.$itemSize.x+this.$columnGap),0==e?this.$scrollPane.posX=i:e==this.$scrollPane.contentWidth-this.$scrollPane.viewWidth&&(this.$scrollPane.posX=this.$scrollPane.contentWidth-i-this.viewWidth)),this.handleScroll2(t)):(this.$loop&&(e=this.$scrollPane.scrollingPosX,i=Math.floor(this.$numItems/(this.$curLineItemCount*this.$curLineItemCount2))*this.viewWidth,0==e?this.$scrollPane.posX=i:e==this.$scrollPane.contentWidth-this.$scrollPane.viewWidth&&(this.$scrollPane.posX=this.$scrollPane.contentWidth-i-this.viewWidth)),this.handleScroll3(t)),this.$boundsChanged=!1)},r.prototype.handleScroll1=function(e){if(r.scrollEnterCounter++,!(r.scrollEnterCounter>3)){var i=this.$scrollPane.scrollingPosY,n=i+this.$scrollPane.viewHeight,o=n==this.$scrollPane.contentHeight;r.posHelper=i;var s=this.getIndexOnPos1(e);if(i=r.posHelper,s!=this.$firstIndex||e){var a=this.$firstIndex;this.$firstIndex=s;var h,l,u,c,d,p=s,f=a>s,g=this.numChildren,y=a+g-1,v=f?y:a,m=0,b=i,$=0,w=0,x=this.defaultItem,_=(this.$scrollPane.viewWidth-this.$columnGap*(this.$curLineItemCount-1))/this.$curLineItemCount;for(r.posHelper++;p<this.$realNumItems&&(o||b<n);){if((null==(l=this.$virtualItems[p]).obj||e)&&(null!=this.itemProvider&&(null==(x=this.itemProvider(p%this.$numItems))&&(x=this.$defaultItem),x=t.UIPackage.normalizeURL(x)),null!=l.obj&&l.obj.resourceURL!=x&&(this.removeChildToPool(l.obj),l.obj=null)),null==l.obj){if(f){for(d=v;d>=a;d--)if(null!=(u=this.$virtualItems[d]).obj&&u.updateFlag!=r.itemInfoReuseFlag&&u.obj.resourceURL==x){l.obj=u.obj,u.obj=null,d==v&&v--;break}}else for(d=v;d<=y;d++)if(null!=(u=this.$virtualItems[d]).obj&&u.updateFlag!=r.itemInfoReuseFlag&&u.obj.resourceURL==x){l.obj=u.obj,u.obj=null,d==v&&v++;break}null!=l.obj?this.setChildIndex(l.obj,f?p-s:this.numChildren):(l.obj=this.$pool.get(x),f?this.addChildAt(l.obj,p-s):this.addChild(l.obj)),l.obj instanceof t.GButton&&(l.obj.selected=!1),h=!0}else h=e;h&&(this.$autoResizeItem&&(0==this.$layout||this.$columnCount>0)&&l.obj.setSize(_,l.obj.height,!0),this.itemRenderer(p%this.$numItems,l.obj),p%this.$curLineItemCount==0&&($+=Math.ceil(l.obj.height)-l.height,p==s&&a>s&&(w=Math.ceil(l.obj.height)-l.height)),l.width=Math.ceil(l.obj.width),l.height=Math.ceil(l.obj.height)),l.updateFlag=r.itemInfoReuseFlag,l.obj.setXY(m,b),p==s&&(n+=l.height),m+=l.width+this.$columnGap,p%this.$curLineItemCount==this.$curLineItemCount-1&&(m=0,b+=l.height+this.$lineGap),p++}for(c=0;c<g;c++)(l=this.$virtualItems[a+c]).updateFlag!=r.itemInfoReuseFlag&&null!=l.obj&&(this.removeChildToPool(l.obj),l.obj=null);0==$&&0==w||this.$scrollPane.changeContentSizeOnScrolling(0,$,0,w),p>0&&this.numChildren>0&&this.$container.y<0&&this.getChildAt(0).y>-this.$container.y&&this.handleScroll1(!1),r.scrollEnterCounter--}else r.scrollEnterCounter--}},r.prototype.handleScroll2=function(e){if(r.scrollEnterCounter++,!(r.scrollEnterCounter>3)){var i=this.$scrollPane.scrollingPosX,n=i+this.$scrollPane.viewWidth,o=i==this.$scrollPane.contentWidth;r.posHelper=i;var s=this.getIndexOnPos2(e);if(i=r.posHelper,s!=this.$firstIndex||e){var a=this.$firstIndex;this.$firstIndex=s;var h,l,u,c,d,p=s,f=a>s,g=this.numChildren,y=a+g-1,v=f?y:a,m=i,b=0,$=0,w=0,x=this.defaultItem,_=(this.$scrollPane.viewHeight-this.$lineGap*(this.$curLineItemCount-1))/this.$curLineItemCount;for(r.itemInfoReuseFlag++;p<this.$realNumItems&&(o||m<n);){if((null==(l=this.$virtualItems[p]).obj||e)&&(null!=this.itemProvider&&(null==(x=this.itemProvider(p%this.$numItems))&&(x=this.$defaultItem),x=t.UIPackage.normalizeURL(x)),null!=l.obj&&l.obj.resourceURL!=x&&(this.removeChildToPool(l.obj),l.obj=null)),null==l.obj){if(f){for(d=v;d>=a;d--)if(null!=(u=this.$virtualItems[d]).obj&&u.updateFlag!=r.itemInfoReuseFlag&&u.obj.resourceURL==x){l.obj=u.obj,u.obj=null,d==v&&v--;break}}else for(d=v;d<=y;d++)if(null!=(u=this.$virtualItems[d]).obj&&u.updateFlag!=r.itemInfoReuseFlag&&u.obj.resourceURL==x){l.obj=u.obj,u.obj=null,d==v&&v++;break}null!=l.obj?this.setChildIndex(l.obj,f?p-s:this.numChildren):(l.obj=this.$pool.get(x),f?this.addChildAt(l.obj,p-s):this.addChild(l.obj)),l.obj instanceof t.GButton&&(l.obj.selected=!1),h=!0}else h=e;h&&(this.$autoResizeItem&&(1==this.$layout||this.$lineCount>0)&&l.obj.setSize(l.obj.width,_,!0),this.itemRenderer(p%this.$numItems,l.obj),p%this.$curLineItemCount==0&&($+=Math.ceil(l.obj.width)-l.width,p==s&&a>s&&(w=Math.ceil(l.obj.width)-l.width)),l.width=Math.ceil(l.obj.width),l.height=Math.ceil(l.obj.height)),l.updateFlag=r.itemInfoReuseFlag,l.obj.setXY(m,b),p==s&&(n+=l.width),b+=l.height+this.$lineGap,p%this.$curLineItemCount==this.$curLineItemCount-1&&(b=0,m+=l.width+this.$columnGap),p++}for(c=0;c<g;c++)(l=this.$virtualItems[a+c]).updateFlag!=r.itemInfoReuseFlag&&null!=l.obj&&(this.removeChildToPool(l.obj),l.obj=null);0==$&&0==w||this.$scrollPane.changeContentSizeOnScrolling($,0,w,0),p>0&&this.numChildren>0&&this.$container.x<0&&this.getChildAt(0).x>-this.$container.x&&this.handleScroll2(!1),r.scrollEnterCounter--}else r.scrollEnterCounter--}},r.prototype.handleScroll3=function(e){var i=this.$scrollPane.scrollingPosX;r.posHelper=i;var n=this.getIndexOnPos3(e);if(i=r.posHelper,n!=this.$firstIndex||e){var o=this.$firstIndex;this.$firstIndex=n;var s,a,h,l,u,c=o,d=this.$virtualItems.length,p=this.$curLineItemCount*this.$curLineItemCount2,f=n%this.$curLineItemCount,g=this.viewWidth,y=Math.floor(n/p)*p,v=y+2*p,m=this.$defaultItem,b=(this.$scrollPane.viewWidth-this.$columnGap*(this.$curLineItemCount-1))/this.$curLineItemCount,$=(this.$scrollPane.viewHeight-this.$lineGap*(this.$curLineItemCount2-1))/this.$curLineItemCount2;for(r.itemInfoReuseFlag++,a=y;a<v;a++)if(!(a>=this.$realNumItems)){if(u=a%this.$curLineItemCount,a-y<p){if(u<f)continue}else if(u>f)continue;(h=this.$virtualItems[a]).updateFlag=r.itemInfoReuseFlag}var w=null,x=0;for(a=y;a<v;a++)if(!(a>=this.$realNumItems)&&(h=this.$virtualItems[a]).updateFlag==r.itemInfoReuseFlag){if(null==h.obj){for(;c<d;){if(null!=(l=this.$virtualItems[c]).obj&&l.updateFlag!=r.itemInfoReuseFlag){h.obj=l.obj,l.obj=null;break}c++}-1==x&&(x=this.getChildIndex(w)+1),null==h.obj?(null!=this.itemProvider&&(null==(m=this.itemProvider(a%this.$numItems))&&(m=this.$defaultItem),m=t.UIPackage.normalizeURL(m)),h.obj=this.$pool.get(m),this.addChildAt(h.obj,x)):x=this.setChildIndexBefore(h.obj,x),x++,h.obj instanceof t.GButton&&(h.obj.selected=!1),s=!0}else s=e,x=-1,w=h.obj;s&&(this.$autoResizeItem&&(this.$curLineItemCount==this.$columnCount&&this.$curLineItemCount2==this.$lineCount?h.obj.setSize(b,$,!0):this.$curLineItemCount==this.$columnCount?h.obj.setSize(b,h.obj.height,!0):this.$curLineItemCount2==this.$lineCount&&h.obj.setSize(h.obj.width,$,!0)),this.itemRenderer(a%this.$numItems,h.obj),h.width=Math.ceil(h.obj.width),h.height=Math.ceil(h.obj.height))}var _=y/p*g,T=_,E=0,O=0;for(a=y;a<v;a++)a>=this.$realNumItems||((h=this.$virtualItems[a]).updateFlag==r.itemInfoReuseFlag&&h.obj.setXY(T,E),h.height>O&&(O=h.height),a%this.$curLineItemCount==this.$curLineItemCount-1?(T=_,E+=O+this.$lineGap,O=0,a==y+p-1&&(T=_+=g,E=0)):T+=h.width+this.$columnGap);for(a=c;a<d;a++)(h=this.$virtualItems[a]).updateFlag!=r.itemInfoReuseFlag&&null!=h.obj&&(this.removeChildToPool(h.obj),h.obj=null)}},r.prototype.handleAlign=function(t,e){var i=0,r=0;e<this.viewHeight&&(1==this.$verticalAlign?r=Math.floor((this.viewHeight-e)/2):2==this.$verticalAlign&&(r=this.viewHeight-e)),t<this.viewWidth&&("center"==this.$align?i=Math.floor((this.viewWidth-t)/2):"right"==this.$align&&(i=this.viewWidth-t)),i==this.$alignOffset.x&&r==this.$alignOffset.y||(this.$alignOffset.set(i,r),null!=this.$scrollPane?this.$scrollPane.adjustMaskContainer():(this.$container.x=this.$margin.left+this.$alignOffset.x,this.$container.y=this.$margin.top+this.$alignOffset.y))},r.prototype.updateBounds=function(){if(!this.$virtual){var t,e,i=0,r=0,n=0,o=0,s=0,a=0,h=0,l=0,u=0,c=this.$children.length,d=this.viewWidth,p=this.viewHeight,f=0,g=0,y=0;if(0==this.$layout){for(t=0;t<c;t++)e=this.getChildAt(t),this.foldInvisibleItems&&!e.visible||(0!=r&&(r+=this.$lineGap),e.y=r,this.$autoResizeItem&&e.setSize(d,e.height,!0),r+=Math.ceil(e.height),e.width>n&&(n=e.width));s=Math.ceil(n),a=r}else if(1==this.$layout){for(t=0;t<c;t++)e=this.getChildAt(t),this.foldInvisibleItems&&!e.visible||(0!=i&&(i+=this.$columnGap),e.x=i,this.$autoResizeItem&&e.setSize(e.width,p,!0),i+=Math.ceil(e.width),e.height>o&&(o=e.height));s=i,a=Math.ceil(o)}else if(2==this.$layout)if(this.$autoResizeItem&&this.$columnCount>0){for(t=0;t<c;t++)if(e=this.getChildAt(t),(!this.foldInvisibleItems||e.visible)&&(f+=e.sourceWidth,++h==this.$columnCount||t==c-1)){for(y=(d-f-(h-1)*this.$columnGap)/f,i=0,h=g;h<=t;h++)e=this.getChildAt(h),this.foldInvisibleItems&&!e.visible||(e.setXY(i,r),h<t?(e.setSize(e.sourceWidth+Math.round(e.sourceWidth*y),e.height,!0),i+=Math.ceil(e.width)+this.$columnGap):e.setSize(d-i,e.height,!0),e.height>o&&(o=e.height));r+=Math.ceil(o)+this.$lineGap,o=0,h=0,g=t+1,f=0}a=r+Math.ceil(o),s=d}else{for(t=0;t<c;t++)e=this.getChildAt(t),this.foldInvisibleItems&&!e.visible||(0!=i&&(i+=this.$columnGap),(0!=this.$columnCount&&h>=this.$columnCount||0==this.$columnCount&&i+e.width>d&&0!=o)&&(i=0,r+=Math.ceil(o)+this.$lineGap,o=0,h=0),e.setXY(i,r),(i+=Math.ceil(e.width))>n&&(n=i),e.height>o&&(o=e.height),h++);a=r+Math.ceil(o),s=Math.ceil(n)}else if(3==this.$layout)if(this.$autoResizeItem&&this.$lineCount>0){for(t=0;t<c;t++)if(e=this.getChildAt(t),(!this.foldInvisibleItems||e.visible)&&(f+=e.sourceHeight,++h==this.$lineCount||t==c-1)){for(y=(p-f-(h-1)*this.$lineGap)/f,r=0,h=g;h<=t;h++)e=this.getChildAt(h),this.foldInvisibleItems&&!e.visible||(e.setXY(i,r),h<t?(e.setSize(e.width,e.sourceHeight+Math.round(e.sourceHeight*y),!0),r+=Math.ceil(e.height)+this.$lineGap):e.setSize(e.width,p-r,!0),e.width>n&&(n=e.width));i+=Math.ceil(n)+this.$columnGap,n=0,h=0,g=t+1,f=0}s=i+Math.ceil(n),a=p}else{for(t=0;t<c;t++)e=this.getChildAt(t),this.foldInvisibleItems&&!e.visible||(0!=r&&(r+=this.$lineGap),(0!=this.$lineCount&&h>=this.$lineCount||0==this.$lineCount&&r+e.height>p&&0!=n)&&(r=0,i+=Math.ceil(n)+this.$columnGap,n=0,h=0),e.setXY(i,r),(r+=Math.ceil(e.height))>o&&(o=r),e.width>n&&(n=e.width),h++);s=i+Math.ceil(n),a=Math.ceil(o)}else{var v=void 0;if(this.$autoResizeItem&&this.$lineCount>0&&(v=Math.floor((p-(this.$lineCount-1)*this.$lineGap)/this.$lineCount)),this.$autoResizeItem&&this.$columnCount>0){for(t=0;t<c;t++)if(e=this.getChildAt(t),(!this.foldInvisibleItems||e.visible)&&(f+=e.sourceWidth,++h==this.$columnCount||t==c-1)){for(y=(d-f-(h-1)*this.$columnGap)/f,i=0,h=g;h<=t;h++)e=this.getChildAt(h),this.foldInvisibleItems&&!e.visible||(e.setXY(l*d+i,r),h<t?(e.setSize(e.sourceWidth+Math.round(e.sourceWidth*y),this.$lineCount>0?v:e.height,!0),i+=Math.ceil(e.width)+this.$columnGap):e.setSize(d-i,this.$lineCount>0?v:e.height,!0),e.height>o&&(o=e.height));r+=Math.ceil(o)+this.$lineGap,o=0,h=0,g=t+1,f=0,u++,(0!=this.$lineCount&&u>=this.$lineCount||0==this.$lineCount&&r+e.height>p)&&(l++,r=0,u=0)}}else for(t=0;t<c;t++)e=this.getChildAt(t),this.foldInvisibleItems&&!e.visible||(0!=i&&(i+=this.$columnGap),this.$autoResizeItem&&this.$lineCount>0&&e.setSize(e.width,v,!0),(0!=this.$columnCount&&h>=this.$columnCount||0==this.$columnCount&&i+e.width>d&&0!=o)&&(i=0,r+=Math.ceil(o)+this.$lineGap,o=0,h=0,u++,(0!=this.$lineCount&&u>=this.$lineCount||0==this.$lineCount&&r+e.height>p&&0!=n)&&(l++,r=0,u=0)),e.setXY(l*d+i,r),(i+=Math.ceil(e.width))>n&&(n=i),e.height>o&&(o=e.height),h++);a=l>0?p:r+Math.ceil(o),s=(l+1)*d}this.handleAlign(s,a),this.setBounds(0,0,s,a)}},r.prototype.setupBeforeAdd=function(e){var r,n,o,s=this;if(i.prototype.setupBeforeAdd.call(this,e),(r=e.attributes.layout)&&(this.$layout=t.ParseListLayoutType(r)),o=(r=e.attributes.overflow)?t.ParseOverflowType(r):0,(r=e.attributes.margin)&&this.$margin.parse(r),(r=e.attributes.align)&&(this.$align=t.ParseAlignType(r)),(r=e.attributes.vAlign)&&(this.$verticalAlign=t.ParseVertAlignType(r)),2==o){var a;a=(r=e.attributes.scroll)?t.ParseScrollType(r):1;var h=void 0;h=(r=e.attributes.scrollBar)?t.ParseScrollBarDisplayType(r):0;var l=void 0;l=(r=e.attributes.scrollBarFlags)?parseInt(r):0;var u=new t.utils.Margin;(r=e.attributes.scrollBarMargin)&&u.parse(r);var c=void 0,d=void 0;(r=e.attributes.scrollBarRes)&&(c=(n=r.split(","))[0],d=n[1]),this.setupScroll(u,a,h,l,c,d)}else this.setupOverflow(o);(r=e.attributes.lineGap)&&(this.$lineGap=parseInt(r)),(r=e.attributes.colGap)&&(this.$columnGap=parseInt(r)),(r=e.attributes.lineItemCount)&&(2==this.$layout||4==this.$layout?this.$columnCount=parseInt(r):3==this.$layout&&(this.$lineCount=parseInt(r))),(r=e.attributes.lineItemCount2)&&(this.$lineCount=parseInt(r)),(r=e.attributes.selectionMode)&&(this.$selectionMode=t.ParseListSelectionMode(r)),(r=e.attributes.defaultItem)&&(this.$defaultItem=r),r=e.attributes.autoItemSize,1==this.$layout||0==this.$layout?this.$autoResizeItem="false"!=r:this.$autoResizeItem="true"==r,(r=e.attributes.renderOrder)&&(this.$childrenRenderOrder=t.ParseListChildrenRenderOrder(r),2==this.$childrenRenderOrder&&(r=e.attributes.apex)&&(this.$apexIndex=parseInt(r))),e.children.forEach(function(t){if("item"==t.nodeName){var e=t.attributes.url;if(e||(e=s.$defaultItem),e){var i=s.getFromPool(e);null!=i&&(s.addChild(i),(r=t.attributes.title)&&(i.text=r),(r=t.attributes.icon)&&(i.icon=r),(r=t.attributes.name)&&(i.name=r))}}},this)},r.prototype.setupAfterAdd=function(t){var e;i.prototype.setupAfterAdd.call(this,t),(e=t.attributes.selectionController)&&(this.$selectionController=this.parent.getController(e))},r.itemInfoReuseFlag=0,r.scrollEnterCounter=0,r}(t.GComponent);t.GList=i}(l||(l={})),function(t){!function(t){var e=function(){function t(){this.$count=0,this.$pool={}}return Object.defineProperty(t.prototype,"count",{get:function(){return this.$count},enumerable:!0,configurable:!0}),t.prototype.clear=function(){for(var t in this.$pool){var e=this.$pool[t];e&&(e.length=0,e=null)}this.$pool={},this.$count=0},t.prototype.get=function(t){var e=this.$pool[t];return null==e&&(e=[],this.$pool[t]=e),e.length?(this.$count--,e.shift()):this.createObject(t)},t.prototype.recycle=function(t,e){if(t){var i=this.$pool[t];null==i&&(i=[],this.$pool[t]=i),this.$count++,i.push(e)}},t}();t.Recycler=e}(t.utils||(t.utils={}))}(l||(l={})),function(t){!function(e){var i=function(e){function i(){return e.call(this)||this}return y(i,e),i.prototype.clear=function(){for(var t in this.$pool){var i=this.$pool[t];i&&i.forEach(function(t){t.dispose()})}e.prototype.clear.call(this)},i.prototype.createObject=function(e){return t.UIPackage.createObjectFromURL(e)},i}(e.Recycler);e.GObjectRecycler=i}(t.utils||(t.utils={}))}(l||(l={})),function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.$frame=0,t.$color=0,t.$contentSourceWidth=0,t.$contentSourceHeight=0,t.$contentWidth=0,t.$contentHeight=0,t.$playing=!0,t.$url="",t.$fill=0,t.$align="left",t.$verticalAlign=0,t.$showErrorSign=!0,t.$color=16777215,t}return y(i,e),i.prototype.createDisplayObject=function(){this.$container=new t.UIContainer(this),this.$container.hitArea=new c.Rectangle,this.setDisplayObject(this.$container),this.$container.interactiveChildren=!1},i.prototype.dispose=function(){this.clearContent(),e.prototype.dispose.call(this)},Object.defineProperty(i.prototype,"url",{get:function(){return this.$url},set:function(t){this.$url!=t&&(this.$url=t,this.loadContent(),this.updateGear(7))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"icon",{get:function(){return this.$url},set:function(t){this.url=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"align",{get:function(){return this.$align},set:function(t){this.$align!=t&&(this.$align=t,this.updateLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"verticalAlign",{get:function(){return this.$verticalAlign},set:function(t){this.$verticalAlign!=t&&(this.$verticalAlign=t,this.updateLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fill",{get:function(){return this.$fill},set:function(t){this.$fill!=t&&(this.$fill=t,this.updateLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"autoSize",{get:function(){return this.$autoSize},set:function(t){this.$autoSize!=t&&(this.$autoSize=t,this.updateLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"playing",{get:function(){return this.$playing},set:function(e){this.$playing!=e&&(this.$playing=e,this.$content instanceof t.MovieClip&&(this.$content.playing=e),this.updateGear(5))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"frame",{get:function(){return this.$frame},set:function(e){this.$frame!=e&&(this.$frame=e,this.$content instanceof t.MovieClip&&(this.$content.currentFrame=e),this.updateGear(5))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"color",{get:function(){return this.$color},set:function(t){this.$color!=t&&(this.$color=t,this.updateGear(4),this.applyColor())},enumerable:!0,configurable:!0}),i.prototype.applyColor=function(){this.$content&&(this.$content.tint=this.$color)},Object.defineProperty(i.prototype,"showErrorSign",{get:function(){return this.$showErrorSign},set:function(t){this.$showErrorSign=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"content",{get:function(){return this.$content},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"texture",{get:function(){return this.$content instanceof t.UIImage?this.$content.texture:null},set:function(e){this.url=null,this.switchToMovieMode(!1),this.$content instanceof t.UIImage&&(this.$content.texture=e),e?(this.$contentSourceWidth=e.orig.width,this.$contentSourceHeight=e.orig.height):this.$contentSourceWidth=this.$contentHeight=0,this.updateLayout()},enumerable:!0,configurable:!0}),i.prototype.loadContent=function(){this.clearContent(),this.$url&&(t.utils.StringUtil.startsWith(this.$url,"ui://")?this.loadFromPackage(this.$url):this.loadExternal())},i.prototype.loadFromPackage=function(e){if(this.$contentItem=t.UIPackage.getItemByURL(e),this.$contentItem)if(this.$contentItem.load(),0==this.$contentItem.type)null==this.$contentItem.texture?this.setErrorState():(this.switchToMovieMode(!1),this.$content.$initDisp(this.$contentItem),this.$contentSourceWidth=this.$contentItem.width,this.$contentSourceHeight=this.$contentItem.height,this.updateLayout());else if(2==this.$contentItem.type){this.switchToMovieMode(!0),this.$contentSourceWidth=this.$contentItem.width,this.$contentSourceHeight=this.$contentItem.height;var i=this.$content;i.interval=this.$contentItem.interval,i.swing=this.$contentItem.swing,i.repeatDelay=this.$contentItem.repeatDelay,i.frames=this.$contentItem.frames,i.boundsRect=new c.Rectangle(0,0,this.$contentSourceWidth,this.$contentSourceHeight),this.updateLayout()}else this.setErrorState();else this.setErrorState()},i.prototype.switchToMovieMode=function(e){this.$container.removeChildren(),e?this.$content instanceof t.MovieClip||(this.$content=new t.MovieClip(this)):this.$content instanceof t.UIImage||(this.$content=new t.UIImage(null)),this.$container.addChild(this.$content)},i.prototype.loadExternal=function(){var t=c.utils.TextureCache[this.$url];t||(t=new c.Texture(c.BaseTexture.fromImage(this.$url)),c.Texture.addToCache(t,this.$url)),this.$loadResCompleted(t)},i.prototype.freeExternal=function(t){c.Texture.removeFromCache(t),t.destroy(!0)},i.prototype.$loadResCompleted=function(t){t?this.onExternalLoadSuccess(t):this.onExternalLoadFailed()},i.prototype.onExternalLoadSuccess=function(e){this.$container.removeChildren(),this.$content&&this.$content instanceof t.UIImage?this.$container.addChild(this.$content):(this.$content=new t.UIImage(null),this.$content.$initDisp(),this.$container.addChild(this.$content)),this.$content.texture=e,this.$contentSourceWidth=e.orig.width,this.$contentSourceHeight=e.orig.height,this.updateLayout()},i.prototype.onExternalLoadFailed=function(){this.setErrorState()},i.prototype.setErrorState=function(){this.$showErrorSign&&(null==this.$errorSign&&t.UIConfig.loaderErrorSign&&(this.$errorSign=i.$errorSignPool.get(t.UIConfig.loaderErrorSign)),this.$errorSign&&(this.$errorSign.width=this.width,this.$errorSign.height=this.height,this.$container.addChild(this.$errorSign.displayObject)))},i.prototype.clearErrorState=function(){this.$errorSign&&(this.$container.removeChild(this.$errorSign.displayObject),i.$errorSignPool.recycle(this.$errorSign.resourceURL,this.$errorSign),this.$errorSign=null)},i.prototype.updateLayout=function(){if(null!=this.$content)if(this.$content.position.set(0,0),this.$content.scale.set(1,1),this.$contentWidth=this.$contentSourceWidth,this.$contentHeight=this.$contentSourceHeight,this.$autoSize)this.$updatingLayout=!0,0==this.$contentWidth&&(this.$contentWidth=50),0==this.$contentHeight&&(this.$contentHeight=30),this.setSize(this.$contentWidth,this.$contentHeight),this.$updatingLayout=!1;else{var e=1,i=1;0!=this.$fill&&(e=this.width/this.$contentSourceWidth,i=this.height/this.$contentSourceHeight,1==e&&1==i||(2==this.$fill?e=i:3==this.$fill?i=e:1==this.$fill&&(e>i?e=i:i=e),this.$contentWidth=this.$contentSourceWidth*e,this.$contentHeight=this.$contentSourceHeight*i)),this.$content instanceof t.UIImage?(this.$content.width=this.$contentWidth,this.$content.height=this.$contentHeight):this.$content.scale.set(e,i),"center"==this.$align?this.$content.x=Math.floor((this.width-this.$contentWidth)/2):"right"==this.$align&&(this.$content.x=this.width-this.$contentWidth),1==this.$verticalAlign?this.$content.y=Math.floor((this.height-this.$contentHeight)/2):2==this.$verticalAlign&&(this.$content.y=this.height-this.$contentHeight)}else this.$autoSize&&(this.$updatingLayout=!0,this.setSize(50,30),this.$updatingLayout=!1)},i.prototype.clearContent=function(){this.clearErrorState(),this.$content&&this.$content.parent&&this.$container.removeChild(this.$content),null==this.$contentItem&&this.$content instanceof t.UIImage&&this.freeExternal(this.$content.texture),this.$content&&this.$content.destroy(),this.$content=null,this.$contentItem=null},i.prototype.handleSizeChanged=function(){this.$updatingLayout||this.updateLayout();var t=this.$container.hitArea;t.x=t.y=0,t.width=this.width,t.height=this.height},i.prototype.setupBeforeAdd=function(i){var r;e.prototype.setupBeforeAdd.call(this,i),(r=i.attributes.url)&&(this.$url=r),(r=i.attributes.align)&&(this.$align=t.ParseAlignType(r)),(r=i.attributes.vAlign)&&(this.$verticalAlign=t.ParseVertAlignType(r)),(r=i.attributes.fill)&&(this.$fill=t.ParseLoaderFillType(r)),this.$autoSize="true"==i.attributes.autoSize,(r=i.attributes.errorSign)&&(this.$showErrorSign="true"==r),this.$playing="false"!=i.attributes.playing,(r=i.attributes.color)&&(this.color=t.utils.StringUtil.convertFromHtmlColor(r)),this.$url&&this.loadContent()},i.$errorSignPool=new t.utils.GObjectRecycler,i}(t.GObject);t.GLoader=e}(l||(l={})),function(t){var e=function(e){function i(){return e.call(this)||this}return y(i,e),i.prototype.mapPivotWidth=function(t){return t*this.$sourceWidth},i.prototype.mapPivotHeight=function(t){return t*this.$sourceHeight},i.prototype.handleSizeChanged=function(){null!=this.$displayObject&&0!=this.$sourceWidth&&0!=this.$sourceHeight&&this.$displayObject.scale.set(this.$width/this.$sourceWidth*this.$scaleX,this.$height/this.$sourceHeight*this.$scaleY)},i.prototype.handleScaleChanged=function(){null!=this.$displayObject&&this.$displayObject.scale.set(this.$width/this.$sourceWidth*this.$scaleX,this.$height/this.$sourceHeight*this.$scaleY)},Object.defineProperty(i.prototype,"touchable",{get:function(){return!1},set:function(t){this.$touchable=!1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"color",{get:function(){return this.$movieClip.tint},set:function(t){this.$movieClip.tint=t},enumerable:!0,configurable:!0}),i.prototype.createDisplayObject=function(){this.$movieClip=new t.MovieClip(this),this.setDisplayObject(this.$movieClip)},Object.defineProperty(i.prototype,"playing",{get:function(){return this.$movieClip.playing},set:function(t){this.$movieClip.playing!=t&&(this.$movieClip.playing=t,this.updateGear(5))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"frame",{get:function(){return this.$movieClip.currentFrame},set:function(t){this.$movieClip.currentFrame!=t&&(this.$movieClip.currentFrame=t,this.updateGear(5))},enumerable:!0,configurable:!0}),i.prototype.setPlaySettings=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.$movieClip.setPlaySettings.apply(this.$movieClip,t)},i.prototype.constructFromResource=function(){this.$sourceWidth=this.packageItem.width,this.$sourceHeight=this.packageItem.height,this.$initWidth=this.$sourceWidth,this.$initHeight=this.$sourceHeight,this.setSize(this.$sourceWidth,this.$sourceHeight),this.packageItem.load(),this.$movieClip.interval=this.packageItem.interval,this.$movieClip.swing=this.packageItem.swing,this.$movieClip.repeatDelay=this.packageItem.repeatDelay,this.$movieClip.frames=this.packageItem.frames,this.$movieClip.boundsRect=new c.Rectangle(0,0,this.$sourceWidth,this.$sourceHeight)},i.prototype.setupBeforeAdd=function(i){var r;e.prototype.setupBeforeAdd.call(this,i),(r=i.attributes.frame)&&(this.$movieClip.currentFrame=parseInt(r)),r=i.attributes.playing,this.$movieClip.playing="false"!=r,(r=i.attributes.color)&&(this.color=t.utils.StringUtil.convertFromHtmlColor(r))},i}(t.GObject);t.GMovieClip=e}(l||(l={})),function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.$max=0,t.$value=0,t.$barMaxWidth=0,t.$barMaxHeight=0,t.$barMaxWidthDelta=0,t.$barMaxHeightDelta=0,t.$barStartX=0,t.$barStartY=0,t.$tweenValue=0,t.$titleType=0,t.$value=50,t.$max=100,t}return y(i,e),Object.defineProperty(i.prototype,"titleType",{get:function(){return this.$titleType},set:function(t){this.$titleType!=t&&(this.$titleType=t,this.update(this.$value))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"max",{get:function(){return this.$max},set:function(t){this.$max!=t&&(this.$max=t,this.update(this.$value))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){return this.$value},set:function(t){null!=this.$tweener&&(this.$tweener.paused=!0,this.$tweener=null),this.$value!=t&&(this.$value=t,this.update(this.$value))},enumerable:!0,configurable:!0}),i.prototype.tweenValue=function(e,r){return this.$value!=e?(this.$tweener&&(this.$tweener.paused=!0),this.$tweenValue=this.$value,this.$value=e,this.$tweener=d.Tween.get(this,{onChange:t.utils.Binder.create(this.onUpdateTween,this)}).to({$tweenValue:e},1e3*r,i.easeLinear),this.$tweener):null},i.prototype.onUpdateTween=function(){this.update(this.$tweenValue)},i.prototype.update=function(e){var i=Math.min(e/this.$max,1);if(this.$titleObject)switch(this.$titleType){case 0:this.$titleObject.text=Math.round(100*i)+"%";break;case 1:this.$titleObject.text=Math.round(e)+"/"+Math.round(this.$max);break;case 2:this.$titleObject.text=""+Math.round(e);break;case 3:this.$titleObject.text=""+Math.round(this.$max)}var r=this.width-this.$barMaxWidthDelta,n=this.height-this.$barMaxHeightDelta;this.$reverse?(this.$barObjectH&&(this.$barObjectH.width=r*i,this.$barObjectH.x=this.$barStartX+(r-this.$barObjectH.width)),this.$barObjectV&&(this.$barObjectV.height=n*i,this.$barObjectV.y=this.$barStartY+(n-this.$barObjectV.height))):(this.$barObjectH&&(this.$barObjectH.width=r*i),this.$barObjectV&&(this.$barObjectV.height=n*i)),this.$aniObject instanceof t.GMovieClip&&(this.$aniObject.frame=Math.round(100*i))},i.prototype.constructFromXML=function(i){var r;e.prototype.constructFromXML.call(this,i),(r=(i=t.utils.XmlParser.getChildNodes(i,"ProgressBar")[0]).attributes.titleType)&&(this.$titleType=t.ParseProgressTitleType(r)),this.$reverse="true"==i.attributes.reverse,this.$titleObject=this.getChild("title"),this.$barObjectH=this.getChild("bar"),this.$barObjectV=this.getChild("bar_v"),this.$aniObject=this.getChild("ani"),this.$barObjectH&&(this.$barMaxWidth=this.$barObjectH.width,this.$barMaxWidthDelta=this.width-this.$barMaxWidth,this.$barStartX=this.$barObjectH.x),this.$barObjectV&&(this.$barMaxHeight=this.$barObjectV.height,this.$barMaxHeightDelta=this.height-this.$barMaxHeight,this.$barStartY=this.$barObjectV.y)},i.prototype.handleSizeChanged=function(){e.prototype.handleSizeChanged.call(this),this.$barObjectH&&(this.$barMaxWidth=this.width-this.$barMaxWidthDelta),this.$barObjectV&&(this.$barMaxHeight=this.height-this.$barMaxHeightDelta),this.$inProgressBuilding||this.update(this.$value)},i.prototype.setupAfterAdd=function(i){e.prototype.setupAfterAdd.call(this,i),(i=t.utils.XmlParser.getChildNodes(i,"ProgressBar")[0])&&(this.$value=parseInt(i.attributes.value)||0,this.$max=parseInt(i.attributes.max)||0),this.update(this.$value)},i.prototype.dispose=function(){this.$tweener&&(this.$tweener.paused=!0,this.$tweener.removeAllEventListeners()),d.Tween.removeTweens(this),this.$tweener=null,e.prototype.dispose.call(this)},i.easeLinear=t.ParseEaseType("linear"),i}(t.GComponent);t.GProgressBar=e}(l||(l={})),function(t){var e=function(){function t(){this.width=0,this.height=0,this.textHeight=0,this.y=0}return t.get=function(){if(t.pool.length){var e=t.pool.pop();return e.width=0,e.height=0,e.textHeight=0,e.text=null,e.y=0,e}return new t},t.recycle=function(e){t.pool.push(e)},t.recycleMany=function(e){e&&e.length&&e.forEach(function(e){t.pool.push(e)},this),e.length=0},t.pool=[],t}();t.LineInfo=e;var i=function(i){function r(){var e=i.call(this)||this;return e.$verticalAlign=0,e.$offset=new c.Point,e.$singleLine=!0,e.$text="",e.$textWidth=0,e.$textHeight=0,e.$style=new c.TextStyle({fontSize:12,fontFamily:t.UIConfig.defaultFont,align:"left",leading:3,fill:0}),e.$verticalAlign=0,e.$text="",e.$autoSize=1,e.$widthAutoSize=!0,e.$heightAutoSize=!0,e.$bitmapPool=[],e.touchable=!1,e}return y(r,i),r.prototype.createDisplayObject=function(){this.$textField=new t.UITextField(this),this.setDisplayObject(this.$textField)},r.prototype.switchBitmapMode=function(e){e&&this.displayObject==this.$textField?(null==this.$btContainer&&(this.$btContainer=new t.UIContainer(this)),this.switchDisplayObject(this.$btContainer)):e||this.displayObject!=this.$btContainer||this.switchDisplayObject(this.$textField)},r.prototype.dispose=function(){t.GTimer.inst.remove(this.$render,this),this.$bitmapFont=null,this.$bitmapPool.length=0,this.$bitmapPool=null,this.$style=null,i.prototype.dispose.call(this)},Object.defineProperty(r.prototype,"text",{get:function(){return this.getText()},set:function(t){this.setText(t)},enumerable:!0,configurable:!0}),r.prototype.setText=function(t){null==t&&(t=""),this.$text!=t&&(this.$text=t,this.updateGear(6),this.parent&&this.parent.$inProgressBuilding?this.renderNow():this.render())},r.prototype.getText=function(){return this.$text},Object.defineProperty(r.prototype,"color",{get:function(){return this.getColor()},set:function(t){this.setColor(t)},enumerable:!0,configurable:!0}),r.prototype.getColor=function(){return this.$color},r.prototype.setColor=function(t){this.$color!=t&&(this.$color=t,this.updateGear(4),this.$style.fill=this.$color,this.render())},Object.defineProperty(r.prototype,"titleColor",{get:function(){return this.color},set:function(t){this.color=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"lineHeight",{get:function(){return this.$style.lineHeight>0?this.$style.lineHeight:this.$fontProperties?this.$fontProperties.fontSize+this.$style.strokeThickness+this.$style.leading:+this.$style.fontSize+this.$style.strokeThickness},set:function(t){this.$style.lineHeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"font",{get:function(){return this.$font||t.UIConfig.defaultFont},set:function(e){this.$font!=e&&(this.$font=e,this.$font&&t.utils.StringUtil.startsWith(this.$font,"ui://")?this.$bitmapFont=t.UIPackage.getBitmapFontByURL(this.$font):this.$style.fontFamily=this.$font||t.UIConfig.defaultFont,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"fontSize",{get:function(){return+this.$style.fontSize},set:function(t){t<=0||this.$style.fontSize!=t&&(this.$style.fontSize=t,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"align",{get:function(){return this.$style.align},set:function(t){this.$style.align!=t&&(this.$style.align=t,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"verticalAlign",{get:function(){return this.$verticalAlign},set:function(t){this.$verticalAlign!=t&&(this.$verticalAlign=t,this.$inProgressBuilding||this.layoutAlign())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"leading",{get:function(){return this.$style.leading},set:function(t){this.$style.leading!=t&&(this.$style.leading=t,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"letterSpacing",{get:function(){return this.$style.letterSpacing},set:function(t){this.$style.letterSpacing!=t&&(this.$style.letterSpacing=t,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"underline",{get:function(){return!1},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bold",{get:function(){return"bold"==this.$style.fontWeight},set:function(t){var e=!0===t?"bold":"normal";this.$style.fontWeight!=e&&(this.$style.fontWeight=e,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"weight",{get:function(){return this.$style.fontWeight},set:function(t){this.$style.fontWeight!=t&&(this.$style.fontWeight=t,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"variant",{get:function(){return this.$style.fontVariant},set:function(t){this.$style.fontVariant!=t&&(this.$style.fontVariant=t,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"italic",{get:function(){return"italic"==this.$style.fontStyle},set:function(t){var e=!0===t?"italic":"normal";this.$style.fontStyle!=e&&(this.$style.fontStyle=e,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"multipleLine",{get:function(){return!this.$singleLine},set:function(t){t=!t,this.$singleLine!=t&&(this.$singleLine=t,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"stroke",{get:function(){return+this.$style.strokeThickness},set:function(t){this.$style.strokeThickness!=t&&(this.$style.strokeThickness=t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"strokeColor",{get:function(){return this.$style.stroke},set:function(t){this.$style.stroke!=t&&(this.$style.stroke=t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"autoSize",{get:function(){return this.$autoSize},set:function(t){this.$autoSize!=t&&(this.$autoSize=t,this.$widthAutoSize=1==t||3==t,this.$heightAutoSize=1==t||2==t,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"textWidth",{get:function(){return this.$requireRender&&this.renderNow(),this.$textWidth},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"textHeight",{get:function(){return this.$requireRender&&this.renderNow(),this.$textHeight},enumerable:!0,configurable:!0}),r.prototype.ensureSizeCorrect=function(){this.$sizeDirty&&this.$requireRender&&this.renderNow()},r.prototype.render=function(){this.$requireRender||(this.$requireRender=!0,t.GTimer.inst.callLater(this.$render,this)),this.$sizeDirty||!this.$widthAutoSize&&!this.$heightAutoSize||(this.$sizeDirty=!0,this.emit("__sizeDelayChange",this))},r.prototype.applyStyle=function(){this.$textField.style.stroke=this.$style.stroke,this.$textField.style.strokeThickness=this.$style.strokeThickness,this.$textField.style.fontStyle=this.$style.fontStyle,this.$textField.style.fontVariant=this.$style.fontVariant,this.$textField.style.fontWeight=this.$style.fontWeight,this.$textField.style.letterSpacing=this.$style.letterSpacing,this.$textField.style.align=this.$style.align,this.$textField.style.fontSize=this.$style.fontSize,this.$textField.style.fontFamily=this.$style.fontFamily,this.$textField.style.fill=this.$style.fill,this.$textField.style.leading=this.$style.leading},r.prototype.$render=function(){this.$requireRender&&this.renderNow()},r.prototype.renderNow=function(t){if(void 0===t&&(t=!0),this.$requireRender=!1,this.$sizeDirty=!1,null==this.$bitmapFont){this.switchBitmapMode(!1),this.applyStyle(),this.$textField.$updateMinHeight();var e=!this.$widthAutoSize&&this.multipleLine;this.$textField.width=this.$textField.style.wordWrapWidth=e||0==this.autoSize?Math.ceil(this.width):1e4,this.$textField.style.wordWrap=e,this.$textField.style.breakWords=e,this.$textField.text=this.$text,this.$fontProperties=c.TextMetrics.measureFont(this.$style.toFontString()),this.$textWidth=Math.ceil(this.$textField.textWidth),this.$textWidth>0&&(this.$textWidth+=2*r.GUTTER_X),this.$textHeight=Math.ceil(this.$textField.textHeight),this.$textHeight>0&&(this.$textHeight+=2*r.GUTTER_Y);var i=this.width,n=this.height;3==this.autoSize?this.shrinkTextField():(this.$textField.scale.set(1,1),this.$widthAutoSize?(i=this.$textWidth,this.$textField.width=i):(i=this.width,this.$heightAutoSize?(n=this.$textHeight,this.$textField.height!=this.$textHeight&&(this.$textField.height=this.$textHeight)):(n=this.height,this.$textHeight>n&&(this.$textHeight=n)))),t&&(this.$updatingSize=!0,this.setSize(i,n),this.$updatingSize=!1),this.layoutAlign()}else this.renderWithBitmapFont(t)},r.prototype.renderWithBitmapFont=function(i){var n=this;this.switchBitmapMode(!0),this.$btContainer.children.forEach(function(t,e){n.$bitmapPool.push(n.$btContainer.getChildAt(e))},this),this.$btContainer.removeChildren(),this.$lines?e.recycleMany(this.$lines):this.$lines=[];var o,s,a=this.letterSpacing,h=this.leading-1,l=this.width-2*r.GUTTER_X,u=0,d=0,p=0,f=0,g=0,y=0,v=0,m=0,b=0,$="",w=r.GUTTER_Y,x=!this.$widthAutoSize&&this.multipleLine,_=this.$bitmapFont.resizable?this.fontSize/this.$bitmapFont.size:1;this.$textWidth=0,this.$textHeight=0;for(var T=this.text.length,E=0;E<T;++E){var O=this.$text.charAt(E),S=O.charCodeAt(E);if("\n"!=O)if(S>256||S<=32?(y>0&&(m=u),y=0):(0==y&&(v=u),y++)," "==O?(f=Math.ceil(this.fontSize/2),g=Math.ceil(this.fontSize)):(s=this.$bitmapFont.glyphs[O])?(f=Math.ceil(s.advance*_),g=Math.ceil(s.lineHeight*_)):" "==O?(f=Math.ceil(this.$bitmapFont.size*_/2),g=Math.ceil(this.$bitmapFont.size*_)):(f=0,g=0),g>p&&(p=g),g>d&&(d=g),0!=u&&(u+=a),u+=f,!x||u<=l)$+=O;else{if((o=e.get()).height=d,o.textHeight=p,0==$.length)o.text=O;else if(y>0&&m>0){var C=($+=O).length-y;o.text=t.utils.StringUtil.trimRight($.substr(0,C)),o.width=m,$=$.substr(C+1),u-=v}else o.text=$,o.width=u-(f+a),$=O,u=f,d=g,p=g;o.y=w,w+=o.height+h,o.width>this.$textWidth&&(this.$textWidth=o.width),y=0,v=0,m=0,this.$lines.push(o)}else $+=O,(o=e.get()).width=u,0==p&&(0==b&&(b=Math.ceil(this.fontSize*_)),0==d&&(d=b),p=d),o.height=d,b=d,o.textHeight=p,o.text=$,o.y=w,w+=o.height+h,o.width>this.$textWidth&&(this.$textWidth=o.width),this.$lines.push(o),$="",u=0,d=0,p=0,y=0,v=0,m=0}($.length>0||this.$lines.length>0&&t.utils.StringUtil.endsWith(this.$lines[this.$lines.length-1].text,"\n"))&&((o=e.get()).width=u,0==d&&(d=b),0==p&&(p=d),o.height=d,o.textHeight=p,o.text=$,o.y=w,o.width>this.$textWidth&&(this.$textWidth=o.width),this.$lines.push(o)),this.$textWidth>0&&(this.$textWidth+=2*r.GUTTER_X),0==this.$lines.length?this.$textHeight=0:(o=this.$lines[this.$lines.length-1],this.$textHeight=o.y+o.height+r.GUTTER_Y);var P,I=0;P=this.$widthAutoSize?0==this.$textWidth?0:this.$textWidth:this.width,I=this.$heightAutoSize?0==this.$textHeight?0:this.$textHeight:this.height,i&&(this.$updatingSize=!0,this.setSize(P,I),this.$updatingSize=!1),0!=P&&0!=I&&(l=this.width-2*r.GUTTER_X,this.$lines.forEach(function(t){var e=r.GUTTER_X,i=0,o=0;i="center"==n.align?(l-t.width)/2:"right"==n.align?l-t.width:0,T=t.text.length;for(var h=0;h<T;h++){var u=t.text.charAt(h);if(null!=(s=n.$bitmapFont.glyphs[u])){o=(t.height+t.textHeight)/2-Math.ceil(s.lineHeight*_);var d=void 0;(d=n.$bitmapPool.length?n.$bitmapPool.pop():new c.Sprite).x=e+i+Math.ceil(s.offsetX*_),d.y=t.y+o+Math.ceil(s.offsetY*_),d.texture=s.texture,d.scale.set(_,_),d.tint=!0===n.$bitmapFont.colorable?n.$color:16777215,n.$btContainer.addChild(d),e+=a+Math.ceil(s.advance*_)}else e+=" "==u?a+Math.ceil(n.$bitmapFont.size*_/2):a}}))},r.prototype.localToGlobal=function(t,e,r){return void 0===t&&(t=0),void 0===e&&(e=0),t-=this.$offset.x,e-=this.$offset.y,i.prototype.localToGlobal.call(this,t,e,r)},r.prototype.globalToLocal=function(t,e,r){void 0===t&&(t=0),void 0===e&&(e=0);var n=i.prototype.globalToLocal.call(this,t,e,r);return n.x-=this.$offset.x,n.y-=this.$offset.y,n},r.prototype.handleSizeChanged=function(){this.$updatingSize||(null!=this.$bitmapFont?this.$widthAutoSize||this.render():this.$inProgressBuilding?(this.$textField.width=this.width,this.$textField.height=this.height):3==this.$autoSize?this.shrinkTextField():this.$widthAutoSize||(this.$heightAutoSize?this.$textField.width=this.width:(this.$textField.width=this.width,this.$textField.height=this.height)),this.layoutAlign())},r.prototype.shrinkTextField=function(){var t=Math.min(1,this.width/this.$textWidth);this.$textField.scale.set(t,t)},r.prototype.layoutAlign=function(){var t=this.$textWidth,e=this.$textHeight;if(3==this.autoSize&&(t*=this.displayObject.scale.x,e*=this.displayObject.scale.y),0==this.$verticalAlign||0==e)this.$offset.y=r.GUTTER_Y;else{var i=Math.max(0,this.height-e);1==this.$verticalAlign?this.$offset.y=.5*i:2==this.$verticalAlign&&(this.$offset.y=i)}var n=0;switch(this.$style.align){case"center":n=.5*(this.width-t);break;case"right":n=this.width-t}this.$offset.x=n,this.updatePosition()},r.prototype.updatePosition=function(){this.displayObject.position.set(Math.floor(this.x+this.$offset.x),Math.floor(this.y+this.$offset.y))},r.prototype.handleXYChanged=function(){i.prototype.handleXYChanged.call(this),this.$displayObject&&this.updatePosition()},r.prototype.setupBeforeAdd=function(e){i.prototype.setupBeforeAdd.call(this,e);var r=e.attributes.font;r&&(this.font=r),(r=e.attributes.vAlign)&&(this.verticalAlign=t.ParseVertAlignType(r)),(r=e.attributes.leading)&&(this.$style.leading=parseInt(r)),(r=e.attributes.letterSpacing)&&(this.$style.letterSpacing=parseInt(r)),(r=e.attributes.fontSize)&&(this.$style.fontSize=parseInt(r)),(r=e.attributes.color)&&(this.color=t.utils.StringUtil.convertFromHtmlColor(r)),(r=e.attributes.align)&&(this.align=t.ParseAlignType(r)),(r=e.attributes.autoSize)&&(this.autoSize=t.ParseAutoSizeType(r),this.$widthAutoSize=1==this.$autoSize||3==this.$autoSize,this.$heightAutoSize=1==this.$autoSize||2==this.$autoSize),this.underline="true"==e.attributes.underline,this.italic="true"==e.attributes.italic,this.bold="true"==e.attributes.bold,this.multipleLine="true"!=e.attributes.singleLine,(r=e.attributes.strokeColor)&&(this.strokeColor=t.utils.StringUtil.convertFromHtmlColor(r),r=e.attributes.strokeSize,this.stroke=r?parseInt(r)+1:2)},r.prototype.setupAfterAdd=function(t){i.prototype.setupAfterAdd.call(this,t);var e=t.attributes.text;null!=e&&e.length>0&&(this.text=e),this.$sizeDirty=!1},r.GUTTER_X=2,r.GUTTER_Y=2,r}(t.GObject);t.GTextField=i}(l||(l={})),function(t){var e=function(){return function(){}}();t.TextBlock=e;var i=function(t){function e(){var e=t.call(this)||this;return e.$textField.interactive=!0,e.$textField.interactiveChildren=!1,e.on("__linkClick",e.$clickLink,e),e}return y(e,t),Object.defineProperty(e.prototype,"ubbEnabled",{get:function(){return this.$ubbEnabled},set:function(t){this.$ubbEnabled!=t&&(this.$ubbEnabled=t,this.render())},enumerable:!0,configurable:!0}),e.prototype.setupBeforeAdd=function(e){t.prototype.setupBeforeAdd.call(this,e),this.$ubbEnabled="true"==e.attributes.ubb},Object.defineProperty(e.prototype,"textFlow",{set:function(t){this.$textFlow=t,this.render()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{set:function(t){this.$text=t,null==this.$text&&(this.$text=""),this.$textField.width=this.width,this.updateGear(6),this.render()},enumerable:!0,configurable:!0}),e.prototype.$clickLink=function(t){this.emit("__linkClick",t.text,this)},e.prototype.dispose=function(){this.off("__linkClick",this.$clickLink,this),t.prototype.dispose.call(this)},e}(t.GTextField);t.GRichTextField=i}(l||(l={})),function(t){var e=function(){return function(){this.touchDown=!1,this.mouseX=0,this.mouseY=0}}();t.GRootPointerStatus=e;var i=function(i){function r(){var t=i.call(this)||this;return null==r.$inst&&(r.$inst=t),t.opaque=!1,t.$popupStack=[],t.$justClosedPopups=[],t.$uid=r.uniqueID++,t}return y(r,i),Object.defineProperty(r,"inst",{get:function(){return null==r.$inst&&new r,r.$inst},enumerable:!0,configurable:!0}),Object.defineProperty(r,"statusData",{get:function(){return r.$retStatus},enumerable:!0,configurable:!0}),Object.defineProperty(r,"pointerStatusData",{get:function(){return r.$retStatus},enumerable:!0,configurable:!0}),r.prototype.getObjectUnderPoint=function(e,i){var n=this.$uiStage.applicationContext.renderer.plugins.interaction.hitTest(r.sHelperPoint,this.nativeStage);return t.GObject.castFromNativeObject(n)},r.prototype.attachTo=function(e,i){d.Ticker=null,t.GTimer.inst.setTicker(e.ticker),this.$uiStage&&(this.$uiStage.off("__sizeChanged",this.$winResize,this),this.$uiStage.nativeStage.off(t.InteractiveEvents.Down,this.$stageDown,this),this.$uiStage.nativeStage.off(t.InteractiveEvents.Up,this.$stageUp,this),this.$uiStage.nativeStage.off(t.InteractiveEvents.Move,this.$stageMove,this),this.$uiStage.nativeStage.removeChild(this.$displayObject),this.$uiStage.dispose()),this.$uiStage=new t.UIStage(e,i),this.$uiStage.on("__sizeChanged",this.$winResize,this),this.$uiStage.nativeStage.on(t.InteractiveEvents.Down,this.$stageDown,this),this.$uiStage.nativeStage.on(t.InteractiveEvents.Up,this.$stageUp,this),this.$uiStage.nativeStage.on(t.InteractiveEvents.Move,this.$stageMove,this),this.$uiStage.nativeStage.addChild(this.$displayObject),this.$winResize(this.$uiStage),this.$modalLayer||(this.$modalLayer=new t.GGraph,this.$modalLayer.setSize(this.width,this.height),this.$modalLayer.drawRect(0,0,0,t.UIConfig.modalLayerColor,t.UIConfig.modalLayerAlpha),this.$modalLayer.addRelation(this,24))},Object.defineProperty(r.prototype,"uniqueID",{get:function(){return this.$uid},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"stageWidth",{get:function(){return this.$uiStage.stageWidth},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"stageHeight",{get:function(){return this.$uiStage.stageHeight},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"contentScaleFactor",{get:function(){return this.$uiStage.resolution},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"applicationContext",{get:function(){return this.$uiStage.applicationContext},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"nativeStage",{get:function(){return this.$uiStage.nativeStage},enumerable:!0,configurable:!0}),r.prototype.showWindow=function(t){this.addChild(t),t.requestFocus(),t.x>this.width?t.x=this.width-t.width:t.x+t.width<0&&(t.x=0),t.y>this.height?t.y=this.height-t.height:t.y+t.height<0&&(t.y=0),this.adjustModalLayer()},r.prototype.hideWindow=function(t){t.hide()},r.prototype.hideWindowImmediately=function(t){t.parent==this&&this.removeChild(t),this.adjustModalLayer()},r.prototype.bringToFront=function(e){var i;for(i=null==this.$modalLayer.parent||e.modal?this.numChildren-1:this.getChildIndex(this.$modalLayer)-1;i>=0;i--){var r=this.getChildAt(i);if(r==e)return;if(r instanceof t.Window)break}i>=0&&this.setChildIndex(e,i)},r.prototype.showModalWait=function(e){void 0===e&&(e=null),null!=t.UIConfig.globalModalWaiting&&(null==this.$modalWaitPane&&(this.$modalWaitPane=t.UIPackage.createObjectFromURL(t.UIConfig.globalModalWaiting),this.$modalWaitPane.addRelation(this,24)),this.$modalWaitPane.setSize(this.width,this.height),this.addChild(this.$modalWaitPane),this.$modalWaitPane.text=e)},r.prototype.closeModalWait=function(){null!=this.$modalWaitPane&&null!=this.$modalWaitPane.parent&&this.removeChild(this.$modalWaitPane)},r.prototype.closeAllExceptModals=function(){this.$children.slice().forEach(function(e){e instanceof t.Window&&!e.modal&&e.hide()},this)},r.prototype.closeAllWindows=function(){this.$children.slice().forEach(function(e){e instanceof t.Window&&e.hide()},this)},r.prototype.getTopWindow=function(){for(var e=this.numChildren-1;e>=0;e--){var i=this.getChildAt(e);if(i instanceof t.Window)return i}return null},Object.defineProperty(r.prototype,"hasModalWindow",{get:function(){return null!=this.$modalLayer.parent},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"modalWaiting",{get:function(){return this.$modalWaitPane&&this.$modalWaitPane.inContainer},enumerable:!0,configurable:!0}),r.prototype.showPopup=function(t,e,i){if(void 0===e&&(e=null),void 0===i&&(i=0),this.$popupStack.length>0){var n=this.$popupStack.indexOf(t);if(-1!=n)for(var o=this.$popupStack.length-1;o>=n;o--)this.removeChild(this.$popupStack.pop())}var s;this.$popupStack.push(t),this.addChild(t),this.adjustModalLayer();var a,h,l=0,u=0;e?(s=e.localToRoot(),l=e.width,u=e.height):s=this.globalToLocal(r.$retStatus.mouseX,r.$retStatus.mouseY),(a=s.x)+t.width>this.width&&(a=a+l-t.width),h=s.y+u,(0==i&&h+t.height>this.height||2==i)&&(h=s.y-t.height-1)<0&&(h=0,a+=.5*l),t.x=a,t.y=h},r.prototype.togglePopup=function(t,e,i){void 0===e&&(e=null),-1==this.$justClosedPopups.indexOf(t)&&this.showPopup(t,e,i)},r.prototype.hidePopup=function(t){var e;if(void 0===t&&(t=null),null!=t){var i=this.$popupStack.indexOf(t);if(-1!=i)for(e=this.$popupStack.length-1;e>=i;e--)this.closePopup(this.$popupStack.pop())}else{for(e=this.$popupStack.length-1;e>=0;e--)this.closePopup(this.$popupStack[e]);this.$popupStack.length=0}},Object.defineProperty(r.prototype,"hasAnyPopup",{get:function(){return 0!=this.$popupStack.length},enumerable:!0,configurable:!0}),r.prototype.closePopup=function(e){null!=e.parent&&(e instanceof t.Window?e.hide():this.removeChild(e))},r.prototype.showTooltips=function(e){if(null==this.$defaultTooltipWin){var i=t.UIConfig.tooltipsWin;if(!i)return void console.error("UIConfig.tooltipsWin not defined");this.$defaultTooltipWin=t.UIPackage.createObjectFromURL(i)}this.$defaultTooltipWin.text=e,this.showTooltipsWin(this.$defaultTooltipWin)},r.prototype.showTooltipsWin=function(t,e){void 0===e&&(e=null),this.hideTooltips(),this.$tooltipWin=t;var i=0,n=0;null==e?(i=r.$retStatus.mouseX+10,n=r.$retStatus.mouseY+20):(i=e.x,n=e.y);var o=this.globalToLocal(i,n);i=o.x,n=o.y,i+this.$tooltipWin.width>this.width&&(i=i-this.$tooltipWin.width-1)<0&&(i=10),n+this.$tooltipWin.height>this.height&&(n=n-this.$tooltipWin.height-1,i-this.$tooltipWin.width-1>0&&(i=i-this.$tooltipWin.width-1),n<0&&(n=10)),this.$tooltipWin.x=i,this.$tooltipWin.y=n,this.addChild(this.$tooltipWin)},r.prototype.hideTooltips=function(){null!=this.$tooltipWin&&(this.$tooltipWin.parent&&this.removeChild(this.$tooltipWin),this.$tooltipWin=null)},Object.defineProperty(r.prototype,"focus",{get:function(){return this.$focusedObject&&!this.$focusedObject.onStage&&(this.$focusedObject=null),this.$focusedObject},set:function(t){if(t&&(!t.focusable||!t.onStage))throw new Error("Invalid target to focus");this.setFocus(t)},enumerable:!0,configurable:!0}),r.prototype.setFocus=function(t){this.$focusedObject!=t&&(this.$focusedObject=t,this.emit("__focusChanged",this))},r.prototype.adjustModalLayer=function(){var e=this.numChildren;null!=this.$modalWaitPane&&null!=this.$modalWaitPane.parent&&this.setChildIndex(this.$modalWaitPane,e-1);for(var i=e-1;i>=0;i--){var r=this.getChildAt(i);if(r instanceof t.Window&&r.modal)return void(null==this.$modalLayer.parent?this.addChildAt(this.$modalLayer,i):this.setChildIndexBefore(this.$modalLayer,i))}null!=this.$modalLayer.parent&&this.removeChild(this.$modalLayer)},r.prototype.$stageDown=function(e){r.$retStatus.mouseX=e.data.global.x,r.$retStatus.mouseY=e.data.global.y,r.$retStatus.touchDown=!0;for(var i=e.target;i&&i!=this.nativeStage;){if(t.isUIObject(i)){var n=i.UIOwner;if(n.touchable&&n.focusable){this.setFocus(n);break}}i=i.parent}null!=this.$tooltipWin&&this.hideTooltips(),this.checkPopups(e.target)},r.prototype.checkPopups=function(e){if(!this.$checkingPopups&&(this.$checkingPopups=!0,this.$justClosedPopups.length=0,this.$popupStack.length>0)){for(var i=e;i&&i!=this.nativeStage;){if(t.isUIObject(i)){var r=this.$popupStack.indexOf(i.UIOwner);if(-1!=r){for(var n=void 0,o=this.$popupStack.length-1;o>r;o--)n=this.$popupStack.pop(),this.closePopup(n),this.$justClosedPopups.push(n);return}}i=i.parent}var s=void 0;for(o=this.$popupStack.length-1;o>=0;o--)s=this.$popupStack[o],this.closePopup(s),this.$justClosedPopups.push(s);this.$popupStack.length=0}},r.prototype.$stageMove=function(t){r.$retStatus.mouseX=t.data.global.x,r.$retStatus.mouseY=t.data.global.y},r.prototype.$stageUp=function(t){r.$retStatus.touchDown=!1,this.$checkingPopups=!1},r.prototype.$winResize=function(t){this.setSize(t.stageWidth,t.stageHeight)},r.uniqueID=0,r.$retStatus=new e,r}(t.GComponent);t.GRoot=i}(l||(l={})),function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.$dragOffset=new c.Point,t.$scrollPerc=0,t}return y(i,e),i.prototype.setScrollPane=function(t,e){this.$target=t,this.$vertical=e},Object.defineProperty(i.prototype,"displayPerc",{set:function(t){this.$vertical?(this.$fixedGripSize||(this.$grip.height=t*this.$bar.height),this.$grip.y=this.$bar.y+(this.$bar.height-this.$grip.height)*this.$scrollPerc):(this.$fixedGripSize||(this.$grip.width=t*this.$bar.width),this.$grip.x=this.$bar.x+(this.$bar.width-this.$grip.width)*this.$scrollPerc)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scrollPerc",{set:function(t){this.$scrollPerc=t,this.$vertical?this.$grip.y=this.$bar.y+(this.$bar.height-this.$grip.height)*this.$scrollPerc:this.$grip.x=this.$bar.x+(this.$bar.width-this.$grip.width)*this.$scrollPerc},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"minSize",{get:function(){return this.$vertical?(null!=this.$arrowButton1?this.$arrowButton1.height:0)+(null!=this.$arrowButton2?this.$arrowButton2.height:0):(null!=this.$arrowButton1?this.$arrowButton1.width:0)+(null!=this.$arrowButton2?this.$arrowButton2.width:0)},enumerable:!0,configurable:!0}),i.prototype.constructFromXML=function(i){e.prototype.constructFromXML.call(this,i),null!=(i=t.utils.XmlParser.getChildNodes(i,"ScrollBar")[0])&&(this.$fixedGripSize="true"==i.attributes.fixedGripSize),this.$grip=this.getChild("grip"),this.$grip?(this.$bar=this.getChild("bar"),this.$bar?(this.$arrowButton1=this.getChild("arrow1"),this.$arrowButton2=this.getChild("arrow2"),this.$grip.on(t.InteractiveEvents.Down,this.$gripMouseDown,this),this.$arrowButton1&&this.$arrowButton1.on(t.InteractiveEvents.Down,this.$arrowButton1Click,this),this.$arrowButton2&&this.$arrowButton2.on(t.InteractiveEvents.Down,this.$arrowButton2Click,this),this.on(t.InteractiveEvents.Down,this.$barMouseDown,this)):console.error("please create and define 'bar' in the Editor for the scrollbar")):console.error("please create and define 'grip' in the Editor for the scrollbar")},i.prototype.$gripMouseDown=function(e){if(this.$bar){e.stopPropagation(),this.$dragOffset=e.data.getLocalPosition(this.displayObject,this.$dragOffset),this.$dragOffset.x-=this.$grip.x,this.$dragOffset.y-=this.$grip.y;var i=t.GRoot.inst.nativeStage;i.on(t.InteractiveEvents.Move,this.$gripDragging,this),i.on(t.InteractiveEvents.Up,this.$gripDraggingEnd,this)}},i.prototype.$gripDragging=function(t){var e=t.data.getLocalPosition(this.displayObject,i.sScrollbarHelperPoint);if(this.$vertical){var r=e.y-this.$dragOffset.y;this.$target.setPercY((r-this.$bar.y)/(this.$bar.height-this.$grip.height),!1)}else{var n=e.x-this.$dragOffset.x;this.$target.setPercX((n-this.$bar.x)/(this.$bar.width-this.$grip.width),!1)}},i.prototype.$gripDraggingEnd=function(e){var i=t.GRoot.inst.nativeStage;i.off(t.InteractiveEvents.Move,this.$gripDragging,this),i.off(t.InteractiveEvents.Up,this.$gripDraggingEnd,this)},i.prototype.$arrowButton1Click=function(t){t.stopPropagation(),this.$vertical?this.$target.scrollUp():this.$target.scrollLeft()},i.prototype.$arrowButton2Click=function(t){t.stopPropagation(),this.$vertical?this.$target.scrollDown():this.$target.scrollRight()},i.prototype.$barMouseDown=function(t){var e=t.data.getLocalPosition(this.$grip.displayObject,i.sScrollbarHelperPoint);this.$vertical?e.y<0?this.$target.scrollUp(4):this.$target.scrollDown(4):e.x<0?this.$target.scrollLeft(4):this.$target.scrollRight(4)},i.prototype.dispose=function(){this.off(t.InteractiveEvents.Down,this.$barMouseDown,this),this.$arrowButton1&&this.$arrowButton1.off(t.InteractiveEvents.Down,this.$arrowButton1Click,this),this.$arrowButton2&&this.$arrowButton2.off(t.InteractiveEvents.Down,this.$arrowButton2Click,this),this.$grip.off(t.InteractiveEvents.Down,this.$gripMouseDown,this),this.$gripDraggingEnd(null),e.prototype.dispose.call(this)},i.sScrollbarHelperPoint=new c.Point,i}(t.GComponent);t.GScrollBar=e}(l||(l={})),function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.$max=0,t.$value=0,t.$barMaxWidth=0,t.$barMaxHeight=0,t.$barMaxWidthDelta=0,t.$barMaxHeightDelta=0,t.$titleType=0,t.$value=50,t.$max=100,t.$clickPos=new c.Point,t}return y(i,e),Object.defineProperty(i.prototype,"titleType",{get:function(){return this.$titleType},set:function(t){this.$titleType=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"max",{get:function(){return this.$max},set:function(t){this.$max!=t&&(this.$max=t,this.update())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){return this.$value},set:function(t){this.$value!=t&&(this.$value=t,this.update())},enumerable:!0,configurable:!0}),i.prototype.update=function(){var t=Math.min(this.$value/this.$max,1);this.updateWidthPercent(t)},i.prototype.updateWidthPercent=function(e){if(this.$titleObject)switch(this.$titleType){case 0:this.$titleObject.text=Math.round(100*e)+"%";break;case 1:this.$titleObject.text=this.$value+"/"+this.$max;break;case 2:this.$titleObject.text=""+this.$value;break;case 3:this.$titleObject.text=""+this.$max}this.$barObjectH&&(this.$barObjectH.width=(this.width-this.$barMaxWidthDelta)*e),this.$barObjectV&&(this.$barObjectV.height=(this.height-this.$barMaxHeightDelta)*e),this.$aniObject instanceof t.GMovieClip&&(this.$aniObject.frame=Math.round(100*e))},i.prototype.handleSizeChanged=function(){e.prototype.handleSizeChanged.call(this),this.$barObjectH&&(this.$barMaxWidth=this.width-this.$barMaxWidthDelta),this.$barObjectV&&(this.$barMaxHeight=this.height-this.$barMaxHeightDelta),this.$inProgressBuilding||this.update()},i.prototype.setupAfterAdd=function(i){e.prototype.setupAfterAdd.call(this,i),(i=t.utils.XmlParser.getChildNodes(i,"Slider")[0])&&(this.$value=parseInt(i.attributes.value),this.$max=parseInt(i.attributes.max)),this.update()},i.prototype.constructFromXML=function(i){var r;e.prototype.constructFromXML.call(this,i),(i=t.utils.XmlParser.getChildNodes(i,"Slider")[0])&&(r=i.attributes.titleType)&&(this.$titleType=t.ParseProgressTitleType(r)),this.$titleObject=this.getChild("title"),this.$barObjectH=this.getChild("bar"),this.$barObjectV=this.getChild("bar_v"),this.$aniObject=this.getChild("ani"),this.$gripObject=this.getChild("grip"),this.$barObjectH&&(this.$barMaxWidth=this.$barObjectH.width,this.$barMaxWidthDelta=this.width-this.$barMaxWidth),this.$barObjectV&&(this.$barMaxHeight=this.$barObjectV.height,this.$barMaxHeightDelta=this.height-this.$barMaxHeight),this.$gripObject&&this.$gripObject.on(t.InteractiveEvents.Down,this.$gripMouseDown,this)},i.prototype.$gripMouseDown=function(e){this.$clickPos=this.globalToLocal(e.data.global.x,e.data.global.y),this.$clickPercent=this.$value/this.$max,t.GRoot.inst.nativeStage.on(t.InteractiveEvents.Move,this.$gripMouseMove,this),t.GRoot.inst.nativeStage.on(t.InteractiveEvents.Up,this.$gripMouseUp,this)},i.prototype.$gripMouseMove=function(t){var e,r=this.globalToLocal(t.data.global.x,t.data.global.y,i.sSilderHelperPoint),n=r.x-this.$clickPos.x,o=r.y-this.$clickPos.y;(e=this.$barObjectH?this.$clickPercent+n/this.$barMaxWidth:this.$clickPercent+o/this.$barMaxHeight)>1?e=1:e<0&&(e=0);var s=Math.round(this.$max*e);s!=this.$value&&(this.$value=s,this.emit("__stateChanged",this)),this.updateWidthPercent(e)},i.prototype.$gripMouseUp=function(e){var i=this.$value/this.$max;this.updateWidthPercent(i),t.GRoot.inst.nativeStage.off(t.InteractiveEvents.Move,this.$gripMouseMove,this),t.GRoot.inst.nativeStage.off(t.InteractiveEvents.Up,this.$gripMouseUp,this)},i.prototype.dispose=function(){this.$gripObject&&this.$gripObject.off(t.InteractiveEvents.Down,this.$gripMouseDown,this),t.GRoot.inst.nativeStage.off(t.InteractiveEvents.Move,this.$gripMouseMove,this),t.GRoot.inst.nativeStage.off(t.InteractiveEvents.Up,this.$gripMouseUp,this),e.prototype.dispose.call(this)},i.sSilderHelperPoint=new c.Point,i}(t.GComponent);t.GSlider=e}(l||(l={})),function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.$util=null,t.$isTyping=!1,t.focusable=!0,t.editable=!0,t.type="text",t.on("removed",t.removed,t),t.$util.initialize(),t}return y(i,e),i.prototype.createDisplayObject=function(){e.prototype.createDisplayObject.call(this),this.$displayObject.hitArea=new c.Rectangle},i.prototype.handleSizeChanged=function(){e.prototype.handleSizeChanged.call(this);var t=this.$displayObject.hitArea;t.x=t.y=0,t.width=this.width,t.height=this.height},i.prototype.removed=function(t){this.$util&&this.$util.destroy()},i.prototype.requestFocus=function(){this.root.focus=this,this.$util.$onFocus()},Object.defineProperty(i.prototype,"editable",{get:function(){return this.$editable},set:function(e){e!=this.$editable&&(this.$editable=e,this.$editable?(this.$util||(this.$util=new t.utils.InputDelegate(this)),this.$util.initialize()):this.$util&&this.$util.destroy(),this.touchable=this.$editable)},enumerable:!0,configurable:!0}),i.prototype.changeToPassText=function(t){for(var e="",i=0,r=t.length;i<r;i++)switch(t.charAt(i)){case"\n":e+="\n";break;case"\r":break;default:e+="*"}return e},i.prototype.getText=function(){return this.$util.text},i.prototype.setText=function(t){null==t&&(t=""),this.$text!=t&&(this.$util.text=t,e.prototype.setText.call(this,t))},i.prototype.setColor=function(t){e.prototype.setColor.call(this,t),this.$util.setColor(t)},Object.defineProperty(i.prototype,"promptText",{get:function(){return this.$util.$getProperty("placeholder")},set:function(t){null==t&&(t=""),this.$util.$setProperty("placeholder",t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"maxLength",{get:function(){return parseInt(this.$util.$getProperty("maxlength"))||0},set:function(t){this.$util.$setProperty("maxlength",String(t))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"restrict",{get:function(){return this.$util.$restrict},set:function(t){this.$util.$restrict=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"password",{get:function(){return"password"==this.type},set:function(t){this.type="password"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return this.$util.type},set:function(t){this.$util.type=t},enumerable:!0,configurable:!0}),i.prototype.dispose=function(){e.prototype.dispose.call(this),this.off("removed",this.removed,this),this.$util.destroy(),this.$util=null},i.prototype.renderNow=function(t){void 0===t&&(t=!0),this.$requireRender=!1,this.$sizeDirty=!1,this.$util.$updateProperties(),this.$isTyping&&this.decorateInputbox();var i=this.$text;"password"==this.type&&(this.$text=this.changeToPassText(this.$text)),e.prototype.renderNow.call(this,t),this.$text=i},i.prototype.decorateInputbox=function(){},i.prototype.setupBeforeAdd=function(t){e.prototype.setupBeforeAdd.call(this,t);var i=t.attributes.maxLength;null!=i&&(this.maxLength=parseInt(i)),null!=(i=t.attributes.restrict)&&(this.restrict=i),"true"==(i=t.attributes.password)?this.password=!0:"4"==(i=t.attributes.keyboardType)?this.type="number":"3"==i?this.type="url":"5"==i?this.type="tel":"6"==i&&(this.type="email")},i}(t.GTextField);t.GTextInput=e}(l||(l={})),function(t){var e=function(){function t(){this.$enumIdx=0,this.$enumCount=0,this.$items=[],this.$itemPool=[]}return t.prototype.getItem=function(){return this.$itemPool.length?this.$itemPool.pop():new i},t.prototype.findItem=function(t,e){for(var i=this.$items.length,r=0;r<i;r++){var n=this.$items[r];if(n.callback==t&&n.thisObj==e)return n}return null},t.prototype.add=function(t,e,i,r,n){var o=this.findItem(i,r);o||((o=this.getItem()).callback=i,o.thisObj=r,this.$items.push(o)),o.delay=t,o.counter=0,o.repeat=e,o.param=n,o.end=!1},t.prototype.callLater=function(t,e,i){this.add(1,1,t,e,i)},t.prototype.callDelay=function(t,e,i,r){this.add(t,1,e,i,r)},t.prototype.exists=function(t,e){return null!=this.findItem(t,e)},t.prototype.remove=function(t,e){var i=this.findItem(t,e);if(i){var r=this.$items.indexOf(i);this.$items.splice(r,1),r<this.$enumIdx&&this.$enumIdx--,this.$enumCount--,i.callback=null,i.param=null,this.$itemPool.push(i)}},t.prototype.advance=function(){for(this.$enumIdx=0,this.$enumCount=this.$items.length;this.$enumIdx<this.$enumCount;){var t=this.$items[this.$enumIdx];this.$enumIdx++;var e=this.$ticker.elapsedMS;if(t.advance(e)){if(t.end&&(this.$enumIdx--,this.$enumCount--,this.$items.splice(this.$enumIdx,1),this.$itemPool.push(t)),t.callback){var i=[e];t.param&&t.param instanceof Array?i=t.param.concat(i):void 0!==t.param&&i.unshift(t.param),t.callback.apply(t.thisObj,i)}t.end&&(t.callback=t.thisObj=t.param=null)}}},t.prototype.tickTween=function(){d.Tween.tick(this.$ticker.elapsedMS,!this.$ticker.started)},t.prototype.setTicker=function(t){this.$ticker&&(this.$ticker.remove(this.advance,this,c.UPDATE_PRIORITY.NORMAL),this.$ticker.remove(this.tickTween,this,c.UPDATE_PRIORITY.HIGH)),this.$ticker=t,this.$ticker.add(this.advance,this,c.UPDATE_PRIORITY.NORMAL),this.$ticker.add(this.tickTween,this,c.UPDATE_PRIORITY.HIGH),this.$ticker.started||this.$ticker.start()},t.inst=new t,t}();t.GTimer=e;var i=function(){function t(){this.delay=0,this.counter=0,this.repeat=0}return t.prototype.advance=function(t){return void 0===t&&(t=0),this.counter+=t,this.counter>=this.delay&&(this.counter-=this.delay,this.counter>this.delay&&(this.counter=this.delay),this.repeat>0&&(this.repeat--,0==this.repeat&&(this.end=!0)),!0)},t}()}(l||(l={})),function(t){t.isAnimationGear=function(t){return t&&"playing"in t&&"frame"in t}}(l||(l={})),function(t){t.isColorableTitle=function(t){return t&&"titleColor"in t&&"fontSize"in t}}(l||(l={})),function(t){t.isColorGear=function(t){return t&&"color"in t}}(l||(l={})),function(t){var e=function(){function e(e){if(void 0===e&&(e=null),!e&&!(e=t.UIConfig.popupMenu))throw new Error("UIConfig.popupMenu not defined");this.$contentPane=t.UIPackage.createObjectFromURL(e),this.$contentPane.on("added",this.$addedToStage,this),this.$list=this.$contentPane.getChild("list"),this.$list.removeChildrenToPool(),this.$list.addRelation(this.$contentPane,14),this.$list.removeRelation(this.$contentPane,15),this.$contentPane.addRelation(this.$list,15),this.$list.on("__itemClick",this.$clickItem,this)}return e.prototype.dispose=function(){t.GTimer.inst.remove(this.$delayClickItem,this),this.$list.off("__itemClick",this.$clickItem,this),this.$contentPane.off("added",this.$addedToStage,this),this.$contentPane.dispose()},e.prototype.addItem=function(t,e){var i=this.$list.addItemFromPool();i.title=t,i.data=e,i.grayed=!1;var r=i.getController("checked");return null!=r&&(r.selectedIndex=0),i},e.prototype.addItemAt=function(t,e,i){var r=this.$list.getFromPool();this.$list.addChildAt(r,e),r.title=t,r.data=i,r.grayed=!1;var n=r.getController("checked");return null!=n&&(n.selectedIndex=0),r},e.prototype.addSeperator=function(){if(null==t.UIConfig.popupMenuSeperator)throw new Error("UIConfig.popupMenuSeperator not defined");this.$list.addItemFromPool(t.UIConfig.popupMenuSeperator)},e.prototype.getItemName=function(t){return this.$list.getChildAt(t).name},e.prototype.setItemText=function(t,e){this.$list.getChild(t).title=e},e.prototype.setItemVisible=function(t,e){var i=this.$list.getChild(t);i.visible!=e&&(i.visible=e,this.$list.setBoundsChangedFlag())},e.prototype.setItemGrayed=function(t,e){this.$list.getChild(t).grayed=e},e.prototype.setItemCheckable=function(t,e){var i=this.$list.getChild(t).getController("checked");null!=i&&(e?0==i.selectedIndex&&(i.selectedIndex=1):i.selectedIndex=0)},e.prototype.setItemChecked=function(t,e){var i=this.$list.getChild(t).getController("checked");null!=i&&(i.selectedIndex=e?2:1)},e.prototype.isItemChecked=function(t){var e=this.$list.getChild(t).getController("checked");return null!=e&&2==e.selectedIndex},e.prototype.removeItem=function(t){var e=this.$list.getChild(t);if(null!=e){var i=this.$list.getChildIndex(e);return this.$list.removeChildToPoolAt(i),!0}return!1},e.prototype.clearItems=function(){this.$list.removeChildrenToPool()},Object.defineProperty(e.prototype,"itemCount",{get:function(){return this.$list.numChildren},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentPane",{get:function(){return this.$contentPane},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"list",{get:function(){return this.$list},enumerable:!0,configurable:!0}),e.prototype.show=function(e,i){void 0===e&&(e=null),(null!=e?e.root:t.GRoot.inst).showPopup(this.contentPane,e instanceof t.GRoot?null:e,i)},e.prototype.$clickItem=function(e,i){t.GTimer.inst.add(100,1,this.$delayClickItem,this,i)},e.prototype.$delayClickItem=function(e){if(e instanceof t.GButton)if(e.grayed)this.$list.selectedIndex=-1;else{var i=e.getController("checked");null!=i&&0!=i.selectedIndex&&(1==i.selectedIndex?i.selectedIndex=2:i.selectedIndex=1);var r=this.$contentPane.parent;r&&r.hidePopup(this.contentPane),null!=e.data&&e.data.call(null),t.GTimer.inst.remove(this.$delayClickItem,this)}},e.prototype.$addedToStage=function(){this.$list.selectedIndex=-1,this.$list.resizeToFit(1e5,10)},e}();t.PopupMenu=e}(l||(l={})),function(t){var e=function(){function t(t){this.$owner=t,this.$defs=[]}return Object.defineProperty(t.prototype,"owner",{get:function(){return this.$owner},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){return this.$target},set:function(t){this.$target!=t&&(this.$target&&this.releaseRefTarget(this.$target),this.$target=t,this.$target&&this.addRefTarget(this.$target))},enumerable:!0,configurable:!0}),t.prototype.add=function(t,e){if(24==t)return this.add(14,e),void this.add(15,e);for(var i=this.$defs.length,r=0;r<i;r++){if(this.$defs[r].type==t)return}this.internalAdd(t,e)},t.prototype.internalAdd=function(t,e){if(24==t)return this.internalAdd(14,e),void this.internalAdd(15,e);var r=new i;r.percent=e,r.type=t,this.$defs.push(r),(e||1==t||3==t||5==t||8==t||10==t||12==t)&&(this.$owner.pixelSnapping=!0)},t.prototype.remove=function(t){if(void 0===t&&(t=0),24==t)return this.remove(14),void this.remove(15);for(var e=this.$defs.length-1;e>=0;e--)if(this.$defs[e].type==t){this.$defs.splice(e,1);break}},t.prototype.copyFrom=function(t){var e=this;this.target=t.target,this.$defs.length=0,t.$defs.forEach(function(t){var r=new i;r.copyFrom(t),e.$defs.push(r)},this)},t.prototype.dispose=function(){null!=this.$target&&(this.releaseRefTarget(this.$target),this.$target=null)},Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0==this.$defs.length},enumerable:!0,configurable:!0}),t.prototype.applyOnSelfResized=function(t,e){var i=this,r=this.$owner.x,n=this.$owner.y;this.$defs.forEach(function(r){switch(r.type){case 3:case 5:i.$owner.x-=t/2;break;case 4:case 6:i.$owner.x-=t;break;case 10:case 12:i.$owner.y-=e/2;break;case 11:case 13:i.$owner.y-=e}},this),r==this.$owner.x&&n==this.$owner.y||(r=this.$owner.x-r,n=this.$owner.y-n,this.$owner.updateGearFromRelations(1,r,n),null!=this.$owner.parent&&this.$owner.parent.$transitions.forEach(function(t){t.updateFromRelations(i.$owner.id,r,n)},this))},t.prototype.applyOnXYChanged=function(t,e,i){var r;switch(t.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:this.$owner.x+=e;break;case 7:case 8:case 9:case 10:case 11:case 12:case 13:this.$owner.y+=i;break;case 14:case 15:break;case 16:case 17:r=this.$owner.x,this.$owner.x+=e,this.$owner.width=this.$owner.$rawWidth-(this.$owner.x-r);break;case 18:case 19:this.$owner.width=this.$owner.$rawWidth+e;break;case 20:case 21:r=this.$owner.y,this.$owner.y+=i,this.$owner.height=this.$owner.$rawHeight-(this.$owner.y-r);break;case 22:case 23:this.$owner.height=this.$owner.$rawHeight+i}},t.prototype.applyOnSizeChanged=function(t){var e,i,r,n;switch(this.$target!=this.$owner.parent?(e=this.$target.x,i=this.$target.y):(e=0,i=0),t.type){case 0:break;case 1:r=this.$owner.x-(e+this.$targetWidth/2),t.percent&&(r=r/this.$targetWidth*this.$target.$rawWidth),this.$owner.x=e+this.$target.$rawWidth/2+r;break;case 2:r=this.$owner.x-(e+this.$targetWidth),t.percent&&(r=r/this.$targetWidth*this.$target.$rawWidth),this.$owner.x=e+this.$target.$rawWidth+r;break;case 3:r=this.$owner.x+this.$owner.$rawWidth/2-(e+this.$targetWidth/2),t.percent&&(r=r/this.$targetWidth*this.$target.$rawWidth),this.$owner.x=e+this.$target.$rawWidth/2+r-this.$owner.$rawWidth/2;break;case 4:r=this.$owner.x+this.$owner.$rawWidth-e,t.percent&&(r=r/this.$targetWidth*this.$target.$rawWidth),this.$owner.x=e+r-this.$owner.$rawWidth;break;case 5:r=this.$owner.x+this.$owner.$rawWidth-(e+this.$targetWidth/2),t.percent&&(r=r/this.$targetWidth*this.$target.$rawWidth),this.$owner.x=e+this.$target.$rawWidth/2+r-this.$owner.$rawWidth;break;case 6:r=this.$owner.x+this.$owner.$rawWidth-(e+this.$targetWidth),t.percent&&(r=r/this.$targetWidth*this.$target.$rawWidth),this.$owner.x=e+this.$target.$rawWidth+r-this.$owner.$rawWidth;break;case 7:break;case 8:r=this.$owner.y-(i+this.$targetHeight/2),t.percent&&(r=r/this.$targetHeight*this.$target.$rawHeight),this.$owner.y=i+this.$target.$rawHeight/2+r;break;case 9:r=this.$owner.y-(i+this.$targetHeight),t.percent&&(r=r/this.$targetHeight*this.$target.$rawHeight),this.$owner.y=i+this.$target.$rawHeight+r;break;case 10:r=this.$owner.y+this.$owner.$rawHeight/2-(i+this.$targetHeight/2),t.percent&&(r=r/this.$targetHeight*this.$target.$rawHeight),this.$owner.y=i+this.$target.$rawHeight/2+r-this.$owner.$rawHeight/2;break;case 11:r=this.$owner.y+this.$owner.$rawHeight-i,t.percent&&(r=r/this.$targetHeight*this.$target.$rawHeight),this.$owner.y=i+r-this.$owner.$rawHeight;break;case 12:r=this.$owner.y+this.$owner.$rawHeight-(i+this.$targetHeight/2),t.percent&&(r=r/this.$targetHeight*this.$target.$rawHeight),this.$owner.y=i+this.$target.$rawHeight/2+r-this.$owner.$rawHeight;break;case 13:r=this.$owner.y+this.$owner.$rawHeight-(i+this.$targetHeight),t.percent&&(r=r/this.$targetHeight*this.$target.$rawHeight),this.$owner.y=i+this.$target.$rawHeight+r-this.$owner.$rawHeight;break;case 14:r=this.$owner.$inProgressBuilding&&this.$owner==this.$target.parent?this.$owner.sourceWidth-this.$target.$initWidth:this.$owner.$rawWidth-this.$targetWidth,t.percent&&(r=r/this.$targetWidth*this.$target.$rawWidth),this.$target==this.$owner.parent?this.$owner.setSize(this.$target.$rawWidth+r,this.$owner.$rawHeight,!0):this.$owner.width=this.$target.$rawWidth+r;break;case 15:r=this.$owner.$inProgressBuilding&&this.$owner==this.$target.parent?this.$owner.sourceHeight-this.$target.$initHeight:this.$owner.$rawHeight-this.$targetHeight,t.percent&&(r=r/this.$targetHeight*this.$target.$rawHeight),this.$target==this.$owner.parent?this.$owner.setSize(this.$owner.$rawWidth,this.$target.$rawHeight+r,!0):this.$owner.height=this.$target.$rawHeight+r;break;case 16:break;case 17:r=this.$owner.x-(e+this.$targetWidth),t.percent&&(r=r/this.$targetWidth*this.$target.$rawWidth),n=this.$owner.x,this.$owner.x=e+this.$target.$rawWidth+r,this.$owner.width=this.$owner.$rawWidth-(this.$owner.x-n);break;case 18:break;case 19:r=this.$owner.$inProgressBuilding&&this.$owner==this.$target.parent?this.$owner.sourceWidth-(e+this.$target.$initWidth):this.$owner.width-(e+this.$targetWidth),this.$owner!=this.$target.parent&&(r+=this.$owner.x),t.percent&&(r=r/this.$targetWidth*this.$target.$rawWidth),this.$owner!=this.$target.parent?this.$owner.width=e+this.$target.$rawWidth+r-this.$owner.x:this.$owner.width=e+this.$target.$rawWidth+r;break;case 20:break;case 21:r=this.$owner.y-(i+this.$targetHeight),t.percent&&(r=r/this.$targetHeight*this.$target.$rawHeight),n=this.$owner.y,this.$owner.y=i+this.$target.$rawHeight+r,this.$owner.height=this.$owner.$rawHeight-(this.$owner.y-n);break;case 22:break;case 23:r=this.$owner.$inProgressBuilding&&this.$owner==this.$target.parent?this.$owner.sourceHeight-(i+this.$target.$initHeight):this.$owner.$rawHeight-(i+this.$targetHeight),this.$owner!=this.$target.parent&&(r+=this.$owner.y),t.percent&&(r=r/this.$targetHeight*this.$target.$rawHeight),this.$owner!=this.$target.parent?this.$owner.height=i+this.$target.$rawHeight+r-this.$owner.y:this.$owner.height=i+this.$target.$rawHeight+r}},t.prototype.addRefTarget=function(t){t!=this.$owner.parent&&t.on("__xyChanged",this.$targetXYChanged,this),t.on("__sizeChanged",this.$targetSizeChanged,this),t.on("__sizeDelayChange",this.$targetSizeWillChange,this),this.$targetX=this.$target.x,this.$targetY=this.$target.y,this.$targetWidth=this.$target.$rawWidth,this.$targetHeight=this.$target.$rawHeight},t.prototype.releaseRefTarget=function(t){t.off("__xyChanged",this.$targetXYChanged,this),t.off("__sizeChanged",this.$targetSizeChanged,this),t.off("__sizeDelayChange",this.$targetSizeWillChange,this)},t.prototype.$targetXYChanged=function(t){var e=this;if(null!=this.$owner.relations.$dealing||null!=this.$owner.group&&this.$owner.group.$updating)return this.$targetX=this.$target.x,void(this.$targetY=this.$target.y);this.$owner.relations.$dealing=this.$target;var i=this.$owner.x,r=this.$owner.y,n=this.$target.x-this.$targetX,o=this.$target.y-this.$targetY;this.$defs.forEach(function(t){e.applyOnXYChanged(t,n,o)},this),this.$targetX=this.$target.x,this.$targetY=this.$target.y,i==this.$owner.x&&r==this.$owner.y||(i=this.$owner.x-i,r=this.$owner.y-r,this.$owner.updateGearFromRelations(1,i,r),null!=this.$owner.parent&&this.$owner.parent.$transitions.forEach(function(t){t.updateFromRelations(e.$owner.id,i,r)},this)),this.$owner.relations.$dealing=null},t.prototype.$targetSizeChanged=function(t){var e=this;if(null==this.$owner.relations.$dealing){this.$owner.relations.$dealing=this.$target;var i=this.$owner.x,r=this.$owner.y,n=this.$owner.$rawWidth,o=this.$owner.$rawHeight;this.$defs.forEach(function(t){e.applyOnSizeChanged(t)},this),this.$targetWidth=this.$target.$rawWidth,this.$targetHeight=this.$target.$rawHeight,i==this.$owner.x&&r==this.$owner.y||(i=this.$owner.x-i,r=this.$owner.y-r,this.$owner.updateGearFromRelations(1,i,r),null!=this.$owner.parent&&this.$owner.parent.$transitions.forEach(function(t){t.updateFromRelations(e.$owner.id,i,r)},this)),n==this.$owner.$rawWidth&&o==this.$owner.$rawHeight||(n=this.$owner.$rawWidth-n,o=this.$owner.$rawHeight-o,this.$owner.updateGearFromRelations(2,n,o)),this.$owner.relations.$dealing=null}},t.prototype.$targetSizeWillChange=function(t){this.$owner.relations.sizeDirty=!0},t}();t.RelationItem=e;var i=function(){function t(){}return t.prototype.copyFrom=function(t){this.percent=t.percent,this.type=t.type},t}();t.RelationDef=i}(l||(l={})),function(t){var e=function(){function e(t){this.sizeDirty=!1,this.$owner=t,this.$items=[]}return e.prototype.add=function(e,i,r){void 0===r&&(r=!1);for(var n=this.$items.length,o=0;o<n;o++){var s=this.$items[o];if(s.target==e)return void s.add(i,r)}var a=new t.RelationItem(this.$owner);a.target=e,a.add(i,r),this.$items.push(a)},e.prototype.addItems=function(t,i){for(var r,n,o=i.split(","),s=0;s<2;s++)if(r=o[s]){"%"==r.charAt(r.length-1)?(r=r.substr(0,r.length-1),n=!0):n=!1,-1==r.indexOf("-")&&(r=r+"-"+r);var a=e.RELATION_NAMES.indexOf(r);if(-1==a)throw new Error("Invalid relation type");this.add(t,a,n)}},e.prototype.remove=function(t,e){void 0===e&&(e=0);for(var i=this.$items.length,r=0;r<i;){var n=this.$items[r];n.target==t?(n.remove(e),n.isEmpty?(n.dispose(),this.$items.splice(r,1),i--):r++):r++}},e.prototype.contains=function(t){for(var e=this.$items.length,i=0;i<e;i++)if(this.$items[i].target==t)return!0;return!1},e.prototype.clearFor=function(t){for(var e=this.$items.length,i=0;i<e;){var r=this.$items[i];r.target==t?(r.dispose(),this.$items.splice(i,1),e--):i++}},e.prototype.clearAll=function(){this.$items.forEach(function(t){t.dispose()},this),this.$items.length=0},e.prototype.copyFrom=function(e){var i=this;this.clearAll(),e.$items.forEach(function(e){var r=new t.RelationItem(i.$owner);r.copyFrom(e),i.$items.push(r)},this)},e.prototype.dispose=function(){this.clearAll()},e.prototype.onOwnerSizeChanged=function(t,e){this.$items.length<=0||this.$items.forEach(function(i){i.applyOnSelfResized(t,e)},this)},e.prototype.ensureRelationsSizeCorrect=function(){0!=this.$items.length&&(this.sizeDirty=!1,this.$items.forEach(function(t){t.target.ensureSizeCorrect()},this))},Object.defineProperty(e.prototype,"empty",{get:function(){return 0==this.$items.length},enumerable:!0,configurable:!0}),e.prototype.setup=function(t){var e=this;t.children.forEach(function(t){var i,r;"relation"==t.nodeName&&(i=t.attributes.target,(r=e.$owner.parent?i?e.$owner.parent.getChildById(i):e.$owner.parent:e.$owner.getChildById(i))&&e.addItems(r,t.attributes.sidePair))},this)},e.RELATION_NAMES=["left-left","left-center","left-right","center-center","right-left","right-center","right-right","top-top","top-middle","top-bottom","middle-middle","bottom-top","bottom-middle","bottom-bottom","width-width","height-height","leftext-left","leftext-right","rightext-left","rightext-right","topext-top","topext-bottom","bottomext-top","bottomext-bottom"],e}();t.Relations=e}(l||(l={})),function(t){var e=function(e){function r(n,o,s,a,h,l,u){var d=e.call(this)||this;if(d.$viewWidth=0,d.$viewHeight=0,d.$contentWidth=0,d.$contentHeight=0,d.$scrollType=0,d.$scrollSpeed=0,d.$onStage=!1,null==r.$easeTypeFunc&&(r.$easeTypeFunc=t.ParseEaseType("cubeOut")),d.$throwTween=new i,d.$owner=n,d.$maskContainer=new t.UIContainer(null),d.$owner.$rootContainer.addChild(d.$maskContainer),d.$container=d.$owner.$container,d.$container.x=0,d.$container.y=0,d.$maskContainer.addChild(d.$container),d.$scrollType=o,d.$scrollBarMargin=s,d.$bouncebackEffect=t.UIConfig.defaultScrollBounceEffect,d.$touchEffect=t.UIConfig.defaultScrollTouchEffect,d.$scrollSpeed=t.UIConfig.defaultScrollSpeed,d.$displayOnLeft=0!=(1&h),d.$snapToItem=0!=(2&h),d.$displayOnDemand=0!=(4&h),d.$pageMode=0!=(8&h),d.$touchEffect=!!(16&h)||!(32&h)&&t.UIConfig.defaultScrollTouchEffect,d.$bouncebackEffect=!!(64&h)||!(128&h)&&t.UIConfig.defaultScrollBounceEffect,d.$inertiaDisabled=0!=(256&h),0==(512&h)&&(d.$maskContainer.scrollRect=new c.Rectangle),d.$xPerc=0,d.$yPerc=0,d.$xPos=0,d.$yPos=0,d.$xOverlap=0,d.$yOverlap=0,d.$aniFlag=0,d.$scrollBarVisible=!0,d.$holdAreaPoint=new c.Point,0==a&&(a=t.UIConfig.defaultScrollBarDisplay),3!=a){var p;if(2==d.$scrollType||1==d.$scrollType)if(p=l||t.UIConfig.verticalScrollBar){if(d.$vtScrollBar=t.UIPackage.createObjectFromURL(p),!d.$vtScrollBar)throw new Error("Cannot create scrollbar from "+p);d.$vtScrollBar.setScrollPane(d,!0),d.$owner.$rootContainer.addChild(d.$vtScrollBar.displayObject)}if(2==d.$scrollType||0==d.$scrollType)if(p=u||t.UIConfig.horizontalScrollBar){if(d.$hzScrollBar=t.UIPackage.createObjectFromURL(p),!d.$hzScrollBar)throw new Error("Cannot create scrollbar from "+p);d.$hzScrollBar.setScrollPane(d,!1),d.$owner.$rootContainer.addChild(d.$hzScrollBar.displayObject)}d.$scrollBarDisplayAuto=2==a,d.$scrollBarDisplayAuto&&(d.$scrollBarVisible=!1,d.$vtScrollBar&&(d.$vtScrollBar.displayObject.visible=!1),d.$hzScrollBar&&(d.$hzScrollBar.displayObject.visible=!1))}return d.$contentWidth=0,d.$contentHeight=0,d.setSize(n.width,n.height),console.log(d.$owner),d.$owner.on(t.InteractiveEvents.Over,d.$rollOver,d),d.$owner.on(t.InteractiveEvents.Out,d.$rollOut,d),console.log(t.InteractiveEvents.Down),d.$owner.on(t.InteractiveEvents.Down,d.$mouseDown,d),d.$owner.$rootContainer.on("added",d.$ownerAdded,d),d.$owner.$rootContainer.on("removed",d.$ownerRemoved,d),d}return y(r,e),r.prototype.$ownerAdded=function(t){this.$onStage=!0},r.prototype.$ownerRemoved=function(t){this.$onStage=!1},Object.defineProperty(r.prototype,"owner",{get:function(){return this.$owner},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bouncebackEffect",{get:function(){return this.$bouncebackEffect},set:function(t){this.$bouncebackEffect=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"touchEffect",{get:function(){return this.$touchEffect},set:function(t){this.$touchEffect=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"scrollSpeed",{get:function(){return this.$scrollSpeed},set:function(e){this.$scrollSpeed=this.scrollSpeed,0==this.$scrollSpeed&&(this.$scrollSpeed=t.UIConfig.defaultScrollSpeed)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"snapToItem",{get:function(){return this.$snapToItem},set:function(t){this.$snapToItem=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"percX",{get:function(){return this.$xPerc},set:function(t){this.setPercX(t,!1)},enumerable:!0,configurable:!0}),r.prototype.setPercX=function(e,i){void 0===i&&(i=!1),this.$owner.ensureBoundsCorrect(),(e=t.utils.NumberUtil.clamp01(e))!=this.$xPerc&&(this.$xPerc=e,this.$xPos=this.$xPerc*this.$xOverlap,this.posChanged(i))},Object.defineProperty(r.prototype,"percY",{get:function(){return this.$yPerc},set:function(t){this.setPercY(t,!1)},enumerable:!0,configurable:!0}),r.prototype.setPercY=function(e,i){void 0===i&&(i=!1),this.$owner.ensureBoundsCorrect(),(e=t.utils.NumberUtil.clamp01(e))!=this.$yPerc&&(this.$yPerc=e,this.$yPos=this.$yPerc*this.$yOverlap,this.posChanged(i))},Object.defineProperty(r.prototype,"posX",{get:function(){return this.$xPos},set:function(t){this.setPosX(t,!1)},enumerable:!0,configurable:!0}),r.prototype.setPosX=function(e,i){void 0===i&&(i=!1),this.$owner.ensureBoundsCorrect(),(e=t.utils.NumberUtil.clamp(e,0,this.$xOverlap))!=this.$xPos&&(this.$xPos=e,this.$xPerc=0==this.$xOverlap?0:this.$xPos/this.$xOverlap,this.posChanged(i))},Object.defineProperty(r.prototype,"posY",{get:function(){return this.$yPos},set:function(t){this.setPosY(t,!1)},enumerable:!0,configurable:!0}),r.prototype.setPosY=function(e,i){void 0===i&&(i=!1),this.$owner.ensureBoundsCorrect(),(e=t.utils.NumberUtil.clamp(e,0,this.$yOverlap))!=this.$yPos&&(this.$yPos=e,this.$yPerc=0==this.$yOverlap?0:this.$yPos/this.$yOverlap,this.posChanged(i))},Object.defineProperty(r.prototype,"isBottomMost",{get:function(){return 1==this.$yPerc||0==this.$yOverlap},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isRightMost",{get:function(){return 1==this.$xPerc||0==this.$xOverlap},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"currentPageX",{get:function(){return this.$pageMode?Math.floor(this.posX/this.$pageSizeH):0},set:function(t){this.$pageMode&&this.$xOverlap>0&&this.setPosX(t*this.$pageSizeH,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"currentPageY",{get:function(){return this.$pageMode?Math.floor(this.posY/this.$pageSizeV):0},set:function(t){this.$pageMode&&this.$yOverlap>0&&this.setPosY(t*this.$pageSizeV,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"scrollingPosX",{get:function(){return t.utils.NumberUtil.clamp(-this.$container.x,0,this.$xOverlap)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"scrollingPosY",{get:function(){return t.utils.NumberUtil.clamp(-this.$container.y,0,this.$yOverlap)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"contentWidth",{get:function(){return this.$contentWidth},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"contentHeight",{get:function(){return this.$contentHeight},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"viewWidth",{get:function(){return this.$viewWidth},set:function(t){t=t+this.$owner.margin.left+this.$owner.margin.right,null!=this.$vtScrollBar&&(t+=this.$vtScrollBar.width),this.$owner.width=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"viewHeight",{get:function(){return this.$viewHeight},set:function(t){t=t+this.$owner.margin.top+this.$owner.margin.bottom,null!=this.$hzScrollBar&&(t+=this.$hzScrollBar.height),this.$owner.height=t},enumerable:!0,configurable:!0}),r.prototype.getDeltaX=function(t){return t/(this.$contentWidth-this.$viewWidth)},r.prototype.getDeltaY=function(t){return t/(this.$contentHeight-this.$viewHeight)},r.prototype.scrollTop=function(t){void 0===t&&(t=!1),this.setPercY(0,t)},r.prototype.scrollBottom=function(t){void 0===t&&(t=!1),this.setPercY(1,t)},r.prototype.scrollUp=function(t,e){void 0===t&&(t=1),void 0===e&&(e=!1),this.setPercY(this.$yPerc-this.getDeltaY(this.$scrollSpeed*t),e)},r.prototype.scrollDown=function(t,e){void 0===t&&(t=1),void 0===e&&(e=!1),this.setPercY(this.$yPerc+this.getDeltaY(this.$scrollSpeed*t),e)},r.prototype.scrollLeft=function(t,e){void 0===t&&(t=1),void 0===e&&(e=!1),this.setPercX(this.$xPerc-this.getDeltaX(this.$scrollSpeed*t),e)},r.prototype.scrollRight=function(t,e){void 0===t&&(t=1),void 0===e&&(e=!1),this.setPercX(this.$xPerc+this.getDeltaX(this.$scrollSpeed*t),e)},r.prototype.scrollToView=function(e,i,n){var o;if(void 0===i&&(i=!1),void 0===n&&(n=!1),this.$owner.ensureBoundsCorrect(),this.$needRefresh&&this.refresh(),e instanceof t.GObject?e.parent!=this.$owner?(e.parent.localToGlobalRect(e.x,e.y,e.width,e.height,r.sHelperRect),o=this.$owner.globalToLocalRect(r.sHelperRect.x,r.sHelperRect.y,r.sHelperRect.width,r.sHelperRect.height,r.sHelperRect)):((o=r.sHelperRect).x=e.x,o.y=e.y,o.width=e.width,o.height=e.height):o=e,this.$yOverlap>0){var s=this.posY,a=s+this.$viewHeight;n||o.y<s||o.height>=this.$viewHeight?this.$pageMode?this.setPosY(Math.floor(o.y/this.$pageSizeV)*this.$pageSizeV,i):this.setPosY(o.y,i):o.y+o.height>a&&(this.$pageMode?this.setPosY(Math.floor(o.y/this.$pageSizeV)*this.$pageSizeV,i):o.height<=this.$viewHeight/2?this.setPosY(o.y+2*o.height-this.$viewHeight,i):this.setPosY(o.y+o.height-this.$viewHeight,i))}if(this.$xOverlap>0){var h=this.posX,l=h+this.$viewWidth;n||o.x<h||o.width>=this.$viewWidth?this.$pageMode?this.setPosX(Math.floor(o.x/this.$pageSizeH)*this.$pageSizeH,i):this.setPosX(o.x,i):o.x+o.width>l&&(this.$pageMode?this.setPosX(Math.floor(o.x/this.$pageSizeH)*this.$pageSizeH,i):o.width<=this.$viewWidth/2?this.setPosX(o.x+2*o.width-this.$viewWidth,i):this.setPosX(o.x+o.width-this.$viewWidth,i))}!i&&this.$needRefresh&&this.refresh()},r.prototype.isChildInView=function(t){var e;return!(this.$yOverlap>0&&((e=t.y+this.$container.y)<-t.height-20||e>this.$viewHeight+20))&&!(this.$xOverlap>0&&((e=t.x+this.$container.x)<-t.width-20||e>this.$viewWidth+20))},r.prototype.cancelDragging=function(){var e=t.GRoot.inst.nativeStage;e.off(t.InteractiveEvents.Move,this.$touchMove,this),e.off(t.InteractiveEvents.Up,this.$touchEnd,this),e.off(t.InteractiveEvents.Click,this.$touchTap,this),r.draggingPane==this&&(r.draggingPane=null),r.$gestureFlag=0,this.$isDragged=!1,this.$maskContainer.interactiveChildren=!0},r.prototype.onOwnerSizeChanged=function(){this.setSize(this.$owner.width,this.$owner.height),this.posChanged(!1)},r.prototype.adjustMaskContainer=function(){var t,e;t=this.$displayOnLeft&&null!=this.$vtScrollBar?Math.floor(this.$owner.margin.left+this.$vtScrollBar.width):Math.floor(this.$owner.margin.left),e=Math.floor(this.$owner.margin.top),t+=this.$owner.$alignOffset.x,e+=this.$owner.$alignOffset.y,this.$maskContainer.x=t,this.$maskContainer.y=e},r.prototype.setSize=function(t,e){this.adjustMaskContainer(),this.$hzScrollBar&&(this.$hzScrollBar.y=e-this.$hzScrollBar.height,this.$vtScrollBar&&!this.$vScrollNone?(this.$hzScrollBar.width=t-this.$vtScrollBar.width-this.$scrollBarMargin.left-this.$scrollBarMargin.right,this.$displayOnLeft?this.$hzScrollBar.x=this.$scrollBarMargin.left+this.$vtScrollBar.width:this.$hzScrollBar.x=this.$scrollBarMargin.left):(this.$hzScrollBar.width=t-this.$scrollBarMargin.left-this.$scrollBarMargin.right,this.$hzScrollBar.x=this.$scrollBarMargin.left)),this.$vtScrollBar&&(this.$displayOnLeft||(this.$vtScrollBar.x=t-this.$vtScrollBar.width),this.$hzScrollBar?this.$vtScrollBar.height=e-this.$hzScrollBar.height-this.$scrollBarMargin.top-this.$scrollBarMargin.bottom:this.$vtScrollBar.height=e-this.$scrollBarMargin.top-this.$scrollBarMargin.bottom,this.$vtScrollBar.y=this.$scrollBarMargin.top),this.$viewWidth=t,this.$viewHeight=e,this.$hzScrollBar&&!this.$hScrollNone&&(this.$viewHeight-=this.$hzScrollBar.height),this.$vtScrollBar&&!this.$vScrollNone&&(this.$viewWidth-=this.$vtScrollBar.width),this.$viewWidth-=this.$owner.margin.left+this.$owner.margin.right,this.$viewHeight-=this.$owner.margin.top+this.$owner.margin.bottom,this.$viewWidth=Math.max(1,this.$viewWidth),this.$viewHeight=Math.max(1,this.$viewHeight),this.$pageSizeH=this.$viewWidth,this.$pageSizeV=this.$viewHeight,this.handleSizeChanged()},r.prototype.setContentSize=function(t,e){this.$contentWidth==t&&this.$contentHeight==e||(this.$contentWidth=t,this.$contentHeight=e,this.handleSizeChanged())},r.prototype.changeContentSizeOnScrolling=function(t,e,i,r){if(this.$contentWidth+=t,this.$contentHeight+=e,this.$isDragged){0!=i&&(this.$container.x-=i),0!=r&&(this.$container.y-=r),this.validateHolderPos(),this.$xOffset+=i,this.$yOffset+=r;var n=this.$y2-this.$y1;this.$y1=this.$container.y,this.$y2=this.$y1+n,n=this.$x2-this.$x1,this.$x1=this.$container.x,this.$x2=this.$x1+n,this.$yPos=-this.$container.y,this.$xPos=-this.$container.x}else 2==this.$tweening&&(0!=i&&(this.$container.x-=i,this.$throwTween.start.x-=i),0!=r&&(this.$container.y-=r,this.$throwTween.start.y-=r));this.handleSizeChanged(!0)},r.prototype.handleSizeChanged=function(e){void 0===e&&(e=!1),this.$displayOnDemand&&(this.$vtScrollBar&&(this.$contentHeight<=this.$viewHeight?this.$vScrollNone||(this.$vScrollNone=!0,this.$viewWidth+=this.$vtScrollBar.width):this.$vScrollNone&&(this.$vScrollNone=!1,this.$viewWidth-=this.$vtScrollBar.width)),this.$hzScrollBar&&(this.$contentWidth<=this.$viewWidth?this.$hScrollNone||(this.$hScrollNone=!0,this.$viewHeight+=this.$hzScrollBar.height):this.$hScrollNone&&(this.$hScrollNone=!1,this.$viewHeight-=this.$hzScrollBar.height))),this.$vtScrollBar&&(this.$viewHeight<this.$vtScrollBar.minSize?this.$vtScrollBar.displayObject.visible=!1:(this.$vtScrollBar.displayObject.visible=this.$scrollBarVisible&&!this.$vScrollNone,0==this.$contentHeight?this.$vtScrollBar.displayPerc=0:this.$vtScrollBar.displayPerc=Math.min(1,this.$viewHeight/this.$contentHeight))),this.$hzScrollBar&&(this.$viewWidth<this.$hzScrollBar.minSize?this.$hzScrollBar.displayObject.visible=!1:(this.$hzScrollBar.displayObject.visible=this.$scrollBarVisible&&!this.$hScrollNone,0==this.$contentWidth?this.$hzScrollBar.displayPerc=0:this.$hzScrollBar.displayPerc=Math.min(1,this.$viewWidth/this.$contentWidth)));var i=this.$maskContainer.scrollRect;null!=i&&(i.x=i.y=0,i.width=this.$viewWidth,i.height=this.$viewHeight,this.$maskContainer.scrollRect=i),0==this.$scrollType||2==this.$scrollType?this.$xOverlap=Math.ceil(Math.max(0,this.$contentWidth-this.$viewWidth)):this.$xOverlap=0,1==this.$scrollType||2==this.$scrollType?this.$yOverlap=Math.ceil(Math.max(0,this.$contentHeight-this.$viewHeight)):this.$yOverlap=0,0==this.$tweening&&e?(0!=this.$xPerc&&1!=this.$xPerc||(this.$xPos=this.$xPerc*this.$xOverlap,this.$container.x=-this.$xPos),0!=this.$yPerc&&1!=this.$yPerc||(this.$yPos=this.$yPerc*this.$yOverlap,this.$container.y=-this.$yPos)):(this.$xPos=t.utils.NumberUtil.clamp(this.$xPos,0,this.$xOverlap),this.$xPerc=this.$xOverlap>0?this.$xPos/this.$xOverlap:0,this.$yPos=t.utils.NumberUtil.clamp(this.$yPos,0,this.$yOverlap),this.$yPerc=this.$yOverlap>0?this.$yPos/this.$yOverlap:0),this.validateHolderPos(),null!=this.$vtScrollBar&&(this.$vtScrollBar.scrollPerc=this.$yPerc),null!=this.$hzScrollBar&&(this.$hzScrollBar.scrollPerc=this.$xPerc)},r.prototype.validateHolderPos=function(){this.$container.x=t.utils.NumberUtil.clamp(this.$container.x,-this.$xOverlap,0),this.$container.y=t.utils.NumberUtil.clamp(this.$container.y,-this.$yOverlap,0)},r.prototype.posChanged=function(e){0==this.$aniFlag?this.$aniFlag=e?1:-1:1!=this.$aniFlag||e||(this.$aniFlag=-1),this.$needRefresh=!0,t.GTimer.inst.callLater(this.refresh,this),2==this.$tweening&&this.killTween()},r.prototype.killTween=function(){1==this.$tweening?(this.$tweener.paused=!0,this.$tweening=0,this.$tweener=null,this.syncScrollBar(!0)):2==this.$tweening&&(this.$tweener.paused=!0,this.$tweener=null,this.$tweening=0,this.validateHolderPos(),this.syncScrollBar(!0),this.emit("__scrollEnd",this))},r.prototype.refresh=function(){if(this.$needRefresh=!1,t.GTimer.inst.remove(this.refresh,this),this.$pageMode){var e=void 0;this.$yOverlap>0&&1!=this.$yPerc&&0!=this.$yPerc&&(e=Math.floor(this.$yPos/this.$pageSizeV),this.$yPos-e*this.$pageSizeV>this.$pageSizeV/2&&e++,this.$yPos=e*this.$pageSizeV,this.$yPos>this.$yOverlap?(this.$yPos=this.$yOverlap,this.$yPerc=1):this.$yPerc=this.$yPos/this.$yOverlap),this.$xOverlap>0&&1!=this.$xPerc&&0!=this.$xPerc&&(e=Math.floor(this.$xPos/this.$pageSizeH),this.$xPos-e*this.$pageSizeH>this.$pageSizeH/2&&e++,this.$xPos=e*this.$pageSizeH,this.$xPos>this.$xOverlap?(this.$xPos=this.$xOverlap,this.$xPerc=1):this.$xPerc=this.$xPos/this.$xOverlap)}else if(this.$snapToItem){var i=this.$owner.getSnappingPosition(1==this.$xPerc?0:this.$xPos,1==this.$yPerc?0:this.$yPos,r.sHelperPoint);1!=this.$xPerc&&i.x!=this.$xPos&&(this.$xPos=i.x,this.$xPerc=this.$xPos/this.$xOverlap,this.$xPerc>1&&(this.$xPerc=1,this.$xPos=this.$xOverlap)),1!=this.$yPerc&&i.y!=this.$yPos&&(this.$yPos=i.y,this.$yPerc=this.$yPos/this.$yOverlap,this.$yPerc>1&&(this.$yPerc=1,this.$yPos=this.$yOverlap))}this.refresh2(),this.emit("__scroll",this),this.$needRefresh&&(this.$needRefresh=!1,t.GTimer.inst.remove(this.refresh,this),this.refresh2()),this.$aniFlag=0},r.prototype.refresh2=function(){var e=Math.floor(this.$xPos),i=Math.floor(this.$yPos);if(1!=this.$aniFlag||this.$isDragged)null!=this.$tweener&&this.killTween(),this.$isDragged&&(this.$xOffset+=this.$container.x- -e,this.$yOffset+=this.$container.y- -i),this.$container.y=-i,this.$container.x=-e,this.$isDragged&&(this.$y1=this.$y2=this.$container.y,this.$x1=this.$x2=this.$container.x),this.$vtScrollBar&&(this.$vtScrollBar.scrollPerc=this.$yPerc),this.$hzScrollBar&&(this.$hzScrollBar.scrollPerc=this.$xPerc);else{var n=this.$container.x,o=this.$container.y;this.$yOverlap>0?o=-i:0!=this.$container.y&&(this.$container.y=0),this.$xOverlap>0?n=-e:0!=this.$container.x&&(this.$container.x=0),n==this.$container.x&&o==this.$container.y||(null!=this.$tweener&&this.killTween(),this.$tweening=1,this.$maskContainer.interactiveChildren=!1,this.$tweener=d.Tween.get(this.$container,{onChange:t.utils.Binder.create(this.$tweenUpdate,this)}).to({x:n,y:o},500,r.$easeTypeFunc).call(this.$tweenComplete,null,this))}},r.prototype.syncPos=function(){this.$xOverlap>0&&(this.$xPos=t.utils.NumberUtil.clamp(-this.$container.x,0,this.$xOverlap),this.$xPerc=this.$xPos/this.$xOverlap),this.$yOverlap>0&&(this.$yPos=t.utils.NumberUtil.clamp(-this.$container.y,0,this.$yOverlap),this.$yPerc=this.$yPos/this.$yOverlap)},r.prototype.syncScrollBar=function(e){void 0===e&&(e=!1),e?(this.$vtScrollBar&&this.$scrollBarDisplayAuto&&this.showScrollBar(!1),this.$hzScrollBar&&this.$scrollBarDisplayAuto&&this.showScrollBar(!1),this.$maskContainer.interactiveChildren=!0):(this.$vtScrollBar&&(this.$vtScrollBar.scrollPerc=0==this.$yOverlap?0:t.utils.NumberUtil.clamp(-this.$container.y,0,this.$yOverlap)/this.$yOverlap,this.$scrollBarDisplayAuto&&this.showScrollBar(!0)),this.$hzScrollBar&&(this.$hzScrollBar.scrollPerc=0==this.$xOverlap?0:t.utils.NumberUtil.clamp(-this.$container.x,0,this.$xOverlap)/this.$xOverlap,this.$scrollBarDisplayAuto&&this.showScrollBar(!0)))},r.prototype.$mouseDown=function(e){if(console.log(">>>>> mouseDown >>>>>"),this.$touchEffect){null!=this.$tweener&&this.killTween(),r.sHelperPoint=e.data.getLocalPosition(this.$maskContainer,r.sHelperPoint),this.$x1=this.$x2=this.$container.x,this.$y1=this.$y2=this.$container.y,this.$xOffset=r.sHelperPoint.x-this.$container.x,this.$yOffset=r.sHelperPoint.y-this.$container.y,this.$time1=this.$time2=Date.now(),this.$holdAreaPoint.x=r.sHelperPoint.x,this.$holdAreaPoint.y=r.sHelperPoint.y,this.$isHoldAreaDone=!1,this.$isDragged=!1;var i=t.GRoot.inst.nativeStage;i.on(t.InteractiveEvents.Move,this.$touchMove,this),i.on(t.InteractiveEvents.Up,this.$touchEnd,this),i.on(t.InteractiveEvents.Click,this.$touchTap,this)}},r.prototype.$touchMove=function(e){if(this.$onStage&&this.$owner.finalVisible&&this.$touchEffect&&(null==r.draggingPane||r.draggingPane==this)&&null==t.GObject.draggingObject){var i,n,o,s,a=t.UIConfig.touchScrollSensitivity,h=e.data.getLocalPosition(this.$maskContainer,r.sHelperPoint);if(1==this.$scrollType){if(!this.$isHoldAreaDone){if(r.$gestureFlag|=1,(i=Math.abs(this.$holdAreaPoint.y-h.y))<a)return;if(0!=(2&r.$gestureFlag)&&i<Math.abs(this.$holdAreaPoint.x-h.x))return}n=!0}else if(0==this.$scrollType){if(!this.$isHoldAreaDone){if(r.$gestureFlag|=2,(i=Math.abs(this.$holdAreaPoint.x-h.x))<a)return;if(0!=(1&r.$gestureFlag)&&i<Math.abs(this.$holdAreaPoint.y-h.y))return}o=!0}else{if(r.$gestureFlag=3,!this.$isHoldAreaDone&&(i=Math.abs(this.$holdAreaPoint.y-h.y))<a&&(i=Math.abs(this.$holdAreaPoint.x-h.x))<a)return;n=o=!0}var l=Date.now();if(l-this.$time2>50&&(this.$time2=this.$time1,this.$time1=l,s=!0),n){var u=Math.floor(r.sHelperPoint.y-this.$yOffset);u>0?!this.$bouncebackEffect||this.$inertiaDisabled?this.$container.y=0:this.$container.y=Math.floor(.5*u):u<-this.$yOverlap||this.$inertiaDisabled?this.$bouncebackEffect?this.$container.y=Math.floor(.5*(u-this.$yOverlap)):this.$container.y=-Math.floor(this.$yOverlap):this.$container.y=u,s&&(this.$y2=this.$y1,this.$y1=this.$container.y)}if(o){var c=Math.floor(r.sHelperPoint.x-this.$xOffset);c>0?!this.$bouncebackEffect||this.$inertiaDisabled?this.$container.x=0:this.$container.x=Math.floor(.5*c):c<0-this.$xOverlap||this.$inertiaDisabled?this.$bouncebackEffect?this.$container.x=Math.floor(.5*(c-this.$xOverlap)):this.$container.x=-Math.floor(this.$xOverlap):this.$container.x=c,s&&(this.$x2=this.$x1,this.$x1=this.$container.x)}r.draggingPane=this,this.$maskContainer.interactiveChildren=!1,this.$isHoldAreaDone=!0,this.$isDragged=!0,this.syncPos(),this.syncScrollBar(),this.emit("__scroll",this)}},r.prototype.$touchEnd=function(e){var n=t.GRoot.inst.nativeStage;if(n.off(t.InteractiveEvents.Move,this.$touchMove,this),n.off(t.InteractiveEvents.Up,this.$touchEnd,this),n.off(t.InteractiveEvents.Click,this.$touchTap,this),r.draggingPane==this&&(r.draggingPane=null),r.$gestureFlag=0,this.$isDragged&&this.$touchEffect&&!this.$inertiaDisabled&&this.$owner.onStage){var o=(Date.now()-this.$time2)/1e3;0==o&&(o=.001);var s=(this.$container.y-this.$y2)/o*2*t.UIConfig.defaultTouchScrollSpeedRatio,a=(this.$container.x-this.$x2)/o*2*t.UIConfig.defaultTouchScrollSpeedRatio;this.$throwTween.start.x=this.$container.x,this.$throwTween.start.y=this.$container.y;var h,l=this.$throwTween.change1,u=this.$throwTween.change2,c=0,p=0,f=0,g=0,y=0;if(2==this.$scrollType||0==this.$scrollType?(this.$container.x>t.UIConfig.touchDragSensitivity?y=1:this.$container.x<-this.$xOverlap-t.UIConfig.touchDragSensitivity&&(y=2),l.x=i.calculateChange(a,.3),u.x=0,c=this.$container.x+l.x,this.$pageMode&&c<0&&c>-this.$xOverlap&&(f=Math.floor(-c/this.$pageSizeH),h=Math.min(this.$pageSizeH,this.$contentWidth-(f+1)*this.$pageSizeH),g=-c-f*this.$pageSizeH,Math.abs(l.x)>this.$pageSizeH?g>.5*h&&f++:g>h*(l.x<0?.3:.7)&&f++,(c=-f*this.$pageSizeH)<-this.$xOverlap&&(c=-this.$xOverlap),l.x=c-this.$container.x)):l.x=u.x=0,2==this.$scrollType||1==this.$scrollType?(this.$container.y>t.UIConfig.touchDragSensitivity?y=1:this.$container.y<-this.$yOverlap-t.UIConfig.touchDragSensitivity&&(y=2),l.y=i.calculateChange(s,.3),u.y=0,p=this.$container.y+l.y,this.$pageMode&&p<0&&p>-this.$yOverlap&&(f=Math.floor(-p/this.$pageSizeV),h=Math.min(this.$pageSizeV,this.$contentHeight-(f+1)*this.$pageSizeV),g=-p-f*this.$pageSizeV,Math.abs(l.y)>this.$pageSizeV?g>.5*h&&f++:g>h*(l.y<0?.3:.7)&&f++,(p=-f*this.$pageSizeV)<-this.$yOverlap&&(p=-this.$yOverlap),l.y=p-this.$container.y)):l.y=u.y=0,this.$snapToItem&&!this.$pageMode){c=-c,p=-p;var v=this.$owner.getSnappingPosition(c,p,r.sHelperPoint);c=-v.x,p=-v.y,l.x=c-this.$container.x,l.y=p-this.$container.y}this.$bouncebackEffect?(c>0?u.x=0-this.$container.x-l.x:c<-this.$xOverlap&&(u.x=-this.$xOverlap-this.$container.x-l.x),p>0?u.y=0-this.$container.y-l.y:p<-this.$yOverlap&&(u.y=-this.$yOverlap-this.$container.y-l.y)):(c>0?l.x=0-this.$container.x:c<-this.$xOverlap&&(l.x=-this.$xOverlap-this.$container.x),p>0?l.y=0-this.$container.y:p<-this.$yOverlap&&(l.y=-this.$yOverlap-this.$container.y)),this.$throwTween.value=0,this.$throwTween.change1=l,this.$throwTween.change2=u,null!=this.$tweener&&this.killTween(),this.$tweening=2,this.$tweener=d.Tween.get(this.$throwTween,{onChange:t.utils.Binder.create(this.$tweenUpdate2,this)}).to({value:1},300,r.$easeTypeFunc).call(this.$tweenComplete2,null,this),1==y?this.emit("__pullDownRelease",this):2==y&&this.emit("__pullUpRelease",this)}},r.prototype.$touchTap=function(t){this.$isDragged=!1},r.prototype.$rollOver=function(t){this.showScrollBar(!0)},r.prototype.$rollOut=function(t){this.showScrollBar(!1)},r.prototype.dispose=function(){t.GTimer.inst.remove(this.refresh,this),t.GTimer.inst.remove(this.setScrollBarVisible,this),d.Tween.removeTweens(this.$throwTween),d.Tween.removeTweens(this.$container),this.$tweener&&(this.$tweener.removeAllEventListeners(),this.$tweener=null),this.$owner.$rootContainer.off("added",this.$ownerAdded,this),this.$owner.$rootContainer.off("removed",this.$ownerRemoved,this),this.$owner.off(t.InteractiveEvents.Over,this.$rollOver,this),this.$owner.off(t.InteractiveEvents.Out,this.$rollOut,this),this.$owner.off(t.InteractiveEvents.Down,this.$mouseDown,this);var e=t.GRoot.inst.nativeStage;e.off(t.InteractiveEvents.Move,this.$touchMove,this),e.off(t.InteractiveEvents.Up,this.$touchEnd,this),e.off(t.InteractiveEvents.Click,this.$touchTap,this)},r.prototype.showScrollBar=function(e){e?(this.setScrollBarVisible(!0),t.GTimer.inst.remove(this.setScrollBarVisible,this)):t.GTimer.inst.add(500,1,this.setScrollBarVisible,this,e)},r.prototype.setScrollBarVisible=function(t){this.$scrollBarVisible=t&&this.$viewWidth>0&&this.$viewHeight>0,this.$vtScrollBar&&(this.$vtScrollBar.displayObject.visible=this.$scrollBarVisible&&!this.$vScrollNone),this.$hzScrollBar&&(this.$hzScrollBar.displayObject.visible=this.$scrollBarVisible&&!this.$hScrollNone)},r.prototype.$tweenUpdate=function(){this.syncScrollBar(),this.emit("__scroll",this)},r.prototype.$tweenComplete=function(){this.$tweening=0,this.$tweener=null,this.validateHolderPos(),this.syncScrollBar(!0),this.emit("__scroll",this)},r.prototype.$tweenUpdate2=function(){this.$throwTween.update(this.$container),this.syncPos(),this.syncScrollBar(),this.emit("__scroll",this)},r.prototype.$tweenComplete2=function(){this.$tweening=0,this.$tweener=null,this.validateHolderPos(),this.syncPos(),this.syncScrollBar(!0),this.emit("__scroll",this),this.emit("__scrollEnd",this)},r.$gestureFlag=0,r.sHelperRect=new c.Rectangle,r.sHelperPoint=new c.Point,r}(c.utils.EventEmitter);t.ScrollPane=e;var i=function(){function t(){this.start=new c.Point,this.change1=new c.Point,this.change2=new c.Point}return t.prototype.update=function(t){t.x=Math.floor(this.start.x+this.change1.x*this.value+this.change2.x*this.value*this.value),t.y=Math.floor(this.start.y+this.change1.y*this.value+this.change2.y*this.value*this.value)},t.calculateChange=function(e,i){return i*t.checkpoint*e/t.easeOutCubic(t.checkpoint,0,1,1)},t.easeOutCubic=function(t,e,i,r){return i*((t=t/r-1)*t*t+1)+e},t.checkpoint=.05,t}()}(l||(l={})),function(t){var e=function(){function e(t){this.autoPlayRepeat=1,this.autoPlayDelay=0,this.$ownerBaseX=0,this.$ownerBaseY=0,this.$totalTimes=0,this.$totalTasks=0,this.$playing=!1,this.$options=0,this.$maxTime=0,this.$owner=t,this.$items=[],this.$owner.on("__visibleChanged",this.$ownerVisibleChanged,this)}return e.prototype.$ownerVisibleChanged=function(t,i){0==(this.$options&e.OPTION_AUTO_STOP_DISABLED)&&!1===t&&this.stop(0!=(this.$options&e.OPTION_AUTO_STOP_AT_END),!1)},Object.defineProperty(e.prototype,"autoPlay",{get:function(){return this.$autoPlay},set:function(t){this.$autoPlay!=t&&(this.$autoPlay=t,this.$autoPlay?this.$owner.onStage&&this.play({times:this.autoPlayRepeat,delay:this.autoPlayDelay}):this.$owner.onStage||this.stop(!1,!0))},enumerable:!0,configurable:!0}),e.prototype.changeRepeat=function(t){this.$totalTimes=0|t},e.prototype.play=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t.length&&"object"==a(t[0])){var i=t[0];this.$play(i.onComplete,i.onCompleteObj,i.onCompleteParam,i.times||1,i.delay||0,!1)}else this.$play(t[0],t[1],t[2],t[3]||1,t[4]||0,!1)},e.prototype.playReverse=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t.length&&"object"==a(t[0])){var i=t[0];this.$play(i.onComplete,i.onCompleteObj,i.onCompleteParam,i.times||1,i.delay||0,!0)}else this.$play(t[0],t[1],t[2],t[3]||1,t[4]||0,!0)},e.prototype.$play=function(t,i,r,n,o,s){var a=this;void 0===s&&(s=!1),this.stop(),0==n?n=1:-1==n&&(n=Number.MAX_VALUE),this.$totalTimes=n,this.$reversed=s,this.internalPlay(o),this.$playing=this.$totalTasks>0,this.$playing?(this.$onComplete=t,this.$onCompleteParam=r,this.$onCompleteObj=i,0!=(this.$options&e.OPTION_IGNORE_DISPLAY_CONTROLLER)&&this.$items.forEach(function(t){null!=t.target&&t.target!=a.$owner&&(t.lockToken=t.target.lockGearDisplay())},this)):null!=t&&(r&&r.length?t.apply(i,r):t.call(i,r))},e.prototype.stop=function(t,e){if(void 0===t&&(t=!0),void 0===e&&(e=!1),this.$playing){this.$playing=!1,this.$totalTasks=0,this.$totalTimes=0;var i=this.$onComplete,r=this.$onCompleteParam,n=this.$onCompleteObj;this.$onComplete=null,this.$onCompleteParam=null,this.$onCompleteObj=null;var o=this.$items.length,s=void 0;if(this.$reversed)for(var a=o-1;a>=0;a--)null!=(s=this.$items[a]).target&&this.stopItem(s,t);else for(a=0;a<o;a++)null!=(s=this.$items[a]).target&&this.stopItem(s,t);e&&null!=i&&(r&&r.length>0?i.apply(n,r):i.call(n,r))}},e.prototype.stopItem=function(e,i){if(0!=e.lockToken&&(e.target.releaseGearDisplay(e.lockToken),e.lockToken=0),12==e.type&&e.filterCreated&&(e.target.filters=null),!e.completed)if(this.disposeTween(e),10==e.type){var r=e.target.getTransition(e.value.s);null!=r&&r.stop(i,!1)}else 11==e.type?(t.GTimer.inst.remove(e.$shake,e),e.target.$gearLocked=!0,e.target.setXY(e.target.x-e.startValue.f1,e.target.y-e.startValue.f2),e.target.$gearLocked=!1):i&&(e.tween?e.yoyo&&e.repeat%2!=0?this.applyValue(e,this.$reversed?e.endValue:e.startValue):this.applyValue(e,this.$reversed?e.startValue:e.endValue):9!=e.type&&this.applyValue(e,e.value))},e.prototype.dispose=function(){var e=this;t.GTimer.inst.remove(this.internalPlay,this),this.$owner.off("__visibleChanged",this.$ownerVisibleChanged,this),this.$playing=!1,this.$items.forEach(function(i){if(null!=i.target&&!i.completed)if(e.disposeTween(i),10==i.type){var r=i.target.getTransition(i.value.s);null!=r&&r.dispose()}else 11==i.type&&t.GTimer.inst.remove(i.$shake,i)},this)},Object.defineProperty(e.prototype,"playing",{get:function(){return this.$playing},enumerable:!0,configurable:!0}),e.prototype.setValue=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this.$items.forEach(function(i){if(null!=i.label||null!=i.label2){var r;if(i.label==t)r=i.tween?i.startValue:i.value;else{if(i.label2!=t)return;r=i.endValue}switch(i.type){case 0:case 1:case 3:case 2:case 13:r.b1=!0,r.b2=!0,r.f1=parseFloat(e[0]),r.f2=parseFloat(e[1]);break;case 4:r.f1=parseFloat(e[0]);break;case 5:r.i=parseInt(e[0]);break;case 6:r.c=parseFloat(e[0]);break;case 7:r.i=parseInt(e[0]),e.length>1&&(r.b=e[1]);break;case 8:r.b=e[0];break;case 9:r.s=e[0],e.length>1&&(r.f1=parseFloat(e[1]));break;case 10:r.s=e[0],e.length>1&&(r.i=parseInt(e[1]));break;case 11:r.f1=parseFloat(e[0]),e.length>1&&(r.f2=parseFloat(e[1]));break;case 12:r.f1=parseFloat(e[0]),r.f2=parseFloat(e[1]),r.f3=parseFloat(e[2]),r.f4=parseFloat(e[3])}}},this)},e.prototype.setHook=function(t,e,i){for(var r=this.$items.length,n=0;n<r;n++){var o=this.$items[n];if(o.label==t){o.hook=e,o.hookObj=i;break}if(o.label2==t){o.hook2=e,o.hook2Obj=i;break}}},e.prototype.clearHooks=function(){this.$items.forEach(function(t){t.hook=null,t.hookObj=null,t.hook2=null,t.hook2Obj=null},this)},e.prototype.setTarget=function(t,e){this.$items.forEach(function(i){i.label==t&&(i.targetId=e.id)},this)},e.prototype.setDuration=function(t,e){this.$items.forEach(function(i){i.tween&&i.label==t&&(i.duration=e)},this)},e.prototype.updateFromRelations=function(t,e,i){this.$items.forEach(function(r){0==r.type&&r.targetId==t&&(r.tween?(r.startValue.f1+=e,r.startValue.f2+=i,r.endValue.f1+=e,r.endValue.f2+=i):(r.value.f1+=e,r.value.f2+=i))},this)},e.prototype.internalPlay=function(t){var e=this;void 0===t&&(t=0),this.$ownerBaseX=this.$owner.x,this.$ownerBaseY=this.$owner.y,this.$totalTasks=0,this.$items.forEach(function(i){var r;(i.targetId?i.target=e.$owner.getChildById(i.targetId):i.target=e.$owner,null!=i.target)&&(e.disposeTween(i),i.tween?(r=e.$reversed?t+e.$maxTime-i.time-i.duration:t+i.time)>0?(e.$totalTasks++,i.completed=!1,i.tweener=d.Tween.get(i.value).wait(1e3*r).call(e.$delayCall,[i],e)):e.startTween(i):(r=e.$reversed?t+e.$maxTime-i.time:t+i.time)<=0?e.applyValue(i,i.value):(e.$totalTasks++,i.completed=!1,i.tweener=d.Tween.get(i.value).wait(1e3*r).call(e.$delayCall2,[i],e)))},this)},e.prototype.prepareValue=function(t,e,i){var r,n;switch(void 0===i&&(i=!1),i?(r=t.endValue,n=t.startValue):(r=t.startValue,n=t.endValue),t.type){case 0:case 1:0==t.type?t.target==this.$owner?(r.b1||(r.f1=0),r.b2||(r.f2=0)):(r.b1||(r.f1=t.target.x),r.b2||(r.f2=t.target.y)):(r.b1||(r.f1=t.target.width),r.b2||(r.f2=t.target.height)),t.value.f1=r.f1,t.value.f2=r.f2,n.b1||(n.f1=t.value.f1),n.b2||(n.f2=t.value.f2),t.value.b1=r.b1||n.b1,t.value.b2=r.b2||n.b2,e.f1=n.f1,e.f2=n.f2;break;case 2:case 13:t.value.f1=r.f1,t.value.f2=r.f2,e.f1=n.f1,e.f2=n.f2;break;case 4:t.value.f1=r.f1,e.f1=n.f1;break;case 5:t.value.i=r.i,e.i=n.i;break;case 12:t.value.f1=r.f1,t.value.f2=r.f2,t.value.f3=r.f3,t.value.f4=r.f4,e.f1=n.f1,e.f2=n.f2,e.f3=n.f3,e.f4=n.f4}},e.prototype.startTween=function(e){var i,n=new r;this.prepareValue(e,n,this.$reversed),this.applyValue(e,e.value),0!=e.repeat?(e.tweenTimes=0,i=t.utils.Binder.create(this.$tweenRepeatComplete,this,e)):i=t.utils.Binder.create(this.$tweenComplete,this,e),this.$totalTasks++,e.completed=!1,this.prepareValue(e,n,this.$reversed),e.tweener=d.Tween.get(e.value,{onChange:t.utils.Binder.create(this.$tweenUpdate,this,e)}).to(n,1e3*e.duration,e.easeType).call(i),null!=e.hook&&e.hook.call(e.hookObj)},e.prototype.$delayCall=function(t){this.disposeTween(t),this.$totalTasks--,this.startTween(t)},e.prototype.$delayCall2=function(t){this.disposeTween(t),this.$totalTasks--,t.completed=!0,this.applyValue(t,t.value),null!=t.hook&&t.hook.call(t.hookObj),this.checkAllComplete()},e.prototype.$tweenUpdate=function(t,e){this.applyValue(e,e.value)},e.prototype.$tweenComplete=function(t,e){this.disposeTween(e),this.$totalTasks--,e.completed=!0,null!=e.hook2&&e.hook2.call(e.hook2Obj),this.checkAllComplete()},e.prototype.$tweenRepeatComplete=function(e,i){if(i.tweenTimes++,-1==i.repeat||i.tweenTimes<i.repeat+1){var n=new r,o=void 0;o=i.yoyo?this.$reversed?i.tweenTimes%2==0:i.tweenTimes%2==1:this.$reversed,this.prepareValue(i,n,o),this.disposeTween(i),i.tweener=d.Tween.get(i.value,{onChange:t.utils.Binder.create(this.$tweenUpdate,this,i)}).to(n,1e3*i.duration,i.easeType).call(this.$tweenRepeatComplete,[null,i],this)}else this.$tweenComplete(null,i)},e.prototype.disposeTween=function(t){t&&t.tweener&&(t.tweener.paused=!0,t.tweener.removeAllEventListeners(),d.Tween.removeTweens(t.value),t.tweener=null)},e.prototype.$playTransComplete=function(t){this.disposeTween(t),this.$totalTasks--,t.completed=!0,this.checkAllComplete()},e.prototype.checkAllComplete=function(){var e=this;if(this.$playing&&0==this.$totalTasks)if(this.$totalTimes<0)t.GTimer.inst.callLater(this.internalPlay,this,0);else if(this.$totalTimes--,this.$totalTimes>0)t.GTimer.inst.callLater(this.internalPlay,this,0);else if(this.$playing=!1,this.$items.forEach(function(t){null!=t.target&&(0!=t.lockToken&&(t.target.releaseGearDisplay(t.lockToken),t.lockToken=0),t.filterCreated&&(t.filterCreated=!1,t.target.filters=null),e.disposeTween(t))}),null!=this.$onComplete){var i=this.$onComplete,r=this.$onCompleteParam,n=this.$onCompleteObj;this.$onComplete=null,this.$onCompleteParam=null,this.$onCompleteObj=null,r&&r.length?i.apply(n,r):i.call(n,r)}},e.prototype.applyValue=function(e,i){switch(e.target.$gearLocked=!0,e.type){case 0:if(e.target==this.$owner){var r=0,n=0;r=i.b1?i.f1+this.$ownerBaseX:e.target.x,n=i.b2?i.f2+this.$ownerBaseY:e.target.y,e.target.setXY(r,n)}else i.b1||(i.f1=e.target.x),i.b2||(i.f2=e.target.y),e.target.setXY(i.f1,i.f2);break;case 1:i.b1||(i.f1=e.target.width),i.b2||(i.f2=e.target.height),e.target.setSize(i.f1,i.f2);break;case 3:e.target.setPivot(i.f1,i.f2);break;case 4:e.target.alpha=i.f1;break;case 5:e.target.rotation=i.i;break;case 2:e.target.setScale(i.f1,i.f2);break;case 13:e.target.setSkew(i.f1,i.f2);break;case 6:t.isColorGear(e.target)&&(e.target.color=i.c);break;case 7:t.isAnimationGear(e.target)&&(i.b1||(i.i=e.target.frame),e.target.frame=i.i,e.target.playing=i.b);break;case 8:e.target.visible=i.b;break;case 10:var o=e.target.getTransition(i.s);null!=o&&(0==i.i?o.stop(!1,!0):o.playing?o.$totalTimes=-1==i.i?Number.MAX_VALUE:i.i:(e.completed=!1,this.$totalTasks++,this.$reversed?o.playReverse(this.$playTransComplete,this,e,e.value.i):o.play(this.$playTransComplete,this,e,e.value.i)));break;case 9:break;case 11:e.startValue.f1=0,e.startValue.f2=0,e.startValue.f3=e.value.f2,t.GTimer.inst.add(1,0,e.$shake,e,[this]),this.$totalTasks++,e.completed=!1;break;case 12:e.target.updateColorComponents(i.f1,i.f2,i.f3,i.f4)}e.target.$gearLocked=!1},e.prototype.$shakeItem=function(e,i){var r=Math.ceil(e.value.f1*e.startValue.f3/e.value.f2),n=(2*Math.random()-1)*r,o=(2*Math.random()-1)*r;n=n>0?Math.ceil(n):Math.floor(n),o=o>0?Math.ceil(o):Math.floor(o),e.target.$gearLocked=!0,e.target.setXY(e.target.x-e.startValue.f1+n,e.target.y-e.startValue.f2+o),e.target.$gearLocked=!1,e.startValue.f1=n,e.startValue.f2=o,e.startValue.f3-=i/1e3,e.startValue.f3<=0&&(e.target.$gearLocked=!0,e.target.setXY(e.target.x-e.startValue.f1,e.target.y-e.startValue.f2),e.target.$gearLocked=!1,e.completed=!0,this.$totalTasks--,t.GTimer.inst.remove(e.$shake,e),this.checkAllComplete())},e.prototype.setup=function(r){var n=this;this.name=r.attributes.name;var o=r.attributes.options;o&&(this.$options=parseInt(o)),this.$autoPlay="true"==r.attributes.autoPlay,this.$autoPlay&&((o=r.attributes.autoPlayRepeat)&&(this.autoPlayRepeat=parseInt(o)),(o=r.attributes.autoPlayDelay)&&(this.autoPlayDelay=parseFloat(o))),r.children.forEach(function(r){if("item"==r.nodeName){var s=new i;switch(n.$items.push(s),s.time=parseInt(r.attributes.time)/e.FRAME_RATE,s.targetId=r.attributes.target,o=r.attributes.type){case"XY":s.type=0;break;case"Size":s.type=1;break;case"Scale":s.type=2;break;case"Pivot":s.type=3;break;case"Alpha":s.type=4;break;case"Rotation":s.type=5;break;case"Color":s.type=6;break;case"Animation":s.type=7;break;case"Visible":s.type=8;break;case"Sound":s.type=9;break;case"Transition":s.type=10;break;case"Shake":s.type=11;break;case"ColorFilter":s.type=12;break;case"Skew":s.type=13;break;default:s.type=14}if(s.tween="true"==r.attributes.tween,s.label=r.attributes.label,s.tween){s.duration=parseInt(r.attributes.duration)/e.FRAME_RATE,s.time+s.duration>n.$maxTime&&(n.$maxTime=s.time+s.duration),(o=r.attributes.ease)&&(s.easeType=t.ParseEaseType(o)),(o=r.attributes.repeat)&&(s.repeat=parseInt(o)),s.yoyo="true"==r.attributes.yoyo,s.label2=r.attributes.label2;var a=r.attributes.endValue;a?(n.decodeValue(s.type,r.attributes.startValue,s.startValue),n.decodeValue(s.type,a,s.endValue)):(s.tween=!1,n.decodeValue(s.type,r.attributes.startValue,s.value))}else s.time>n.$maxTime&&(n.$maxTime=s.time),n.decodeValue(s.type,r.attributes.value,s.value)}},this)},e.prototype.decodeValue=function(e,i,r){var n;switch(e){case 0:case 1:case 3:case 13:"-"==(n=i.split(","))[0]?r.b1=!1:(r.f1=parseFloat(n[0]),r.b1=!0),"-"==n[1]?r.b2=!1:(r.f2=parseFloat(n[1]),r.b2=!0);break;case 4:r.f1=parseFloat(i);break;case 5:r.i=parseInt(i);break;case 2:n=i.split(","),r.f1=parseFloat(n[0]),r.f2=parseFloat(n[1]);break;case 6:r.c=t.utils.StringUtil.convertFromHtmlColor(i);break;case 7:"-"==(n=i.split(","))[0]?r.b1=!1:(r.i=parseInt(n[0]),r.b1=!0),r.b="p"==n[1];break;case 8:r.b="true"==i;break;case 9:if(n=i.split(","),r.s=n[0],n.length>1){var o=parseInt(n[1]);r.f1=0==o||100==o?1:o/100}else r.f1=1;break;case 10:n=i.split(","),r.s=n[0],n.length>1?r.i=parseInt(n[1]):r.i=1;break;case 11:n=i.split(","),r.f1=parseFloat(n[0]),r.f2=parseFloat(n[1]);break;case 12:n=i.split(","),r.f1=parseFloat(n[0]),r.f2=parseFloat(n[1]),r.f3=parseFloat(n[2]),r.f4=parseFloat(n[3])}},e.OPTION_IGNORE_DISPLAY_CONTROLLER=1,e.OPTION_AUTO_STOP_DISABLED=0,e.OPTION_AUTO_STOP_AT_END=0,e.FRAME_RATE=24,e}();t.Transition=e;var i=function(){function e(){this.time=0,this.type=0,this.duration=0,this.repeat=0,this.yoyo=!1,this.tween=!1,this.tweenTimes=0,this.completed=!1,this.lockToken=0,this.easeType=t.ParseEaseType("Quad.Out"),this.value=new r,this.startValue=new r,this.endValue=new r}return e.prototype.$shake=function(t,e){t.$shakeItem(this,e)},e}(),r=function(){return function(){this.f1=0,this.f2=0,this.f3=0,this.f4=0,this.i=0,this.c=0,this.b=!1,this.b1=!0,this.b2=!0}}()}(l||(l={})),function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.$requestingCmd=0,i.focusable=!0,i.$uiSources=[],i.bringToFrontOnClick=t.UIConfig.bringWindowToFrontOnClick,i.on("added",i.$onShown,i),i.on("removed",i.$onHidden,i),i.on(t.InteractiveEvents.Down,i.$mouseDown,i),i}return y(i,e),i.prototype.addUISource=function(t){this.$uiSources.push(t)},Object.defineProperty(i.prototype,"contentPane",{get:function(){return this.$contentPane},set:function(t){this.$contentPane!=t&&(null!=this.$contentPane&&this.removeChild(this.$contentPane),this.$contentPane=t,null!=this.$contentPane&&(this.addChild(this.$contentPane),this.setSize(this.$contentPane.width,this.$contentPane.height),this.$contentPane.addRelation(this,24),this.$frame=this.$contentPane.getChild("frame"),null!=this.$frame&&(this.closeButton=this.$frame.getChild("closeButton"),this.dragArea=this.$frame.getChild("dragArea"),this.contentArea=this.$frame.getChild("contentArea"))))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"frame",{get:function(){return this.$frame},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"closeButton",{get:function(){return this.$closeButton},set:function(t){null!=this.$closeButton&&this.$closeButton.removeClick(this.closeEventHandler,this),this.$closeButton=t,null!=this.$closeButton&&this.$closeButton.click(this.closeEventHandler,this)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dragArea",{get:function(){return this.$dragArea},set:function(e){this.$dragArea!=e&&(null!=this.$dragArea&&(this.$dragArea.draggable=!1,this.$dragArea.off("__dragStart",this.$dragStart,this)),this.$dragArea=e,null!=this.$dragArea&&(this.$dragArea instanceof t.GGraph&&this.$dragArea.drawRect(0,0,0,0,0),this.$dragArea.draggable=!0,this.$dragArea.on("__dragStart",this.$dragStart,this)))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"contentArea",{get:function(){return this.$contentArea},set:function(t){this.$contentArea=t},enumerable:!0,configurable:!0}),i.prototype.show=function(){t.GRoot.inst.showWindow(this)},i.prototype.showOn=function(t){t.showWindow(this)},i.prototype.hide=function(){this.isShowing&&this.doHideAnimation()},i.prototype.hideImmediately=function(){(this.parent&&this.parent instanceof t.GRoot?this.parent:t.GRoot.inst).hideWindowImmediately(this)},i.prototype.centerOn=function(t,e){void 0===e&&(e=!1),this.setXY(Math.round(.5*(t.width-this.width)),Math.round(.5*(t.height-this.height))),e&&(this.addRelation(t,3),this.addRelation(t,10))},i.prototype.toggleVisible=function(){this.isTop?this.hide():this.show()},Object.defineProperty(i.prototype,"isShowing",{get:function(){return null!=this.parent},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isTop",{get:function(){return null!=this.parent&&this.parent.getChildIndex(this)==this.parent.numChildren-1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"modal",{get:function(){return this.$modal},set:function(t){this.$modal=t},enumerable:!0,configurable:!0}),i.prototype.bringToFront=function(){this.root.bringToFront(this)},i.prototype.showModalWait=function(e,i){void 0===i&&(i=0),0!=i&&(this.$requestingCmd=i),t.UIConfig.windowModalWaiting&&(this.$modalWaitPane||(this.$modalWaitPane=t.UIPackage.createObjectFromURL(t.UIConfig.windowModalWaiting)),this.layoutModalWaitPane(e),this.addChild(this.$modalWaitPane))},i.prototype.layoutModalWaitPane=function(t){if(null!=this.$contentArea){var e=this.$frame.localToGlobal();e=this.globalToLocal(e.x,e.y,e),this.$modalWaitPane.setXY(e.x+this.$contentArea.x,e.y+this.$contentArea.y),this.$modalWaitPane.setSize(this.$contentArea.width,this.$contentArea.height),t&&t.length&&(this.$modalWaitPane.text=t)}else this.$modalWaitPane.setSize(this.width,this.height)},i.prototype.closeModalWait=function(t){return void 0===t&&(t=0),(0==t||this.$requestingCmd==t)&&(this.$requestingCmd=0,this.$modalWaitPane&&null!=this.$modalWaitPane.parent&&this.removeChild(this.$modalWaitPane),!0)},Object.defineProperty(i.prototype,"modalWaiting",{get:function(){return this.$modalWaitPane&&null!=this.$modalWaitPane.parent},enumerable:!0,configurable:!0}),i.prototype.init=function(){var t=this;this.$inited||this.$loading||(this.$uiSources.length>0?(this.$loading=!1,this.$uiSources.forEach(function(e){e.loaded||(e.load(t.$uiLoadComplete,t),t.$loading=!0)},this),this.$loading||this.$init()):this.$init())},i.prototype.onInit=function(){},i.prototype.onShown=function(){},i.prototype.onHide=function(){},i.prototype.doShowAnimation=function(){this.onShown()},i.prototype.doHideAnimation=function(){this.hideImmediately()},i.prototype.$uiLoadComplete=function(){for(var t=this.$uiSources.length,e=0;e<t;e++)if(!this.$uiSources[e].loaded)return;this.$loading=!1,this.$init()},i.prototype.$init=function(){this.$inited=!0,this.onInit(),this.isShowing&&this.doShowAnimation()},i.prototype.dispose=function(){this.off("added",this.$onShown,this),this.off("removed",this.$onHidden,this),this.off(t.InteractiveEvents.Down,this.$mouseDown,this),this.$dragArea&&this.$dragArea.off("__dragStart",this.$dragStart,this),null!=this.parent&&this.hideImmediately(),this.$modalWaitPane&&this.$modalWaitPane.dispose(),this.$contentPane&&this.$contentPane.dispose(),e.prototype.dispose.call(this)},i.prototype.closeEventHandler=function(t){this.hide()},i.prototype.$onShown=function(t){this.$inited?this.doShowAnimation():this.init()},i.prototype.$onHidden=function(t){this.closeModalWait(),this.onHide()},i.prototype.$mouseDown=function(t){this.isShowing&&this.bringToFrontOnClick&&this.bringToFront()},i.prototype.$dragStart=function(e){t.GObject.castFromNativeObject(e.currentTarget).stopDrag(),this.startDrag(e.data.pointerID)},i}(t.GComponent);t.Window=e}(l||(l={})),function(t){var e=function(){function t(){}return t.defaultFont="Arial",t.modalLayerColor=3355443,t.modalLayerAlpha=.2,t.defaultScrollSpeed=25,t.defaultTouchScrollSpeedRatio=1,t.defaultScrollBarDisplay=1,t.defaultScrollTouchEffect=!0,t.defaultScrollBounceEffect=!0,t.defaultComboBoxVisibleItemCount=10,t.touchScrollSensitivity=20,t.touchDragSensitivity=10,t.bringWindowToFrontOnClick=!0,t}();t.UIConfig=e}(l||(l={})),function(t){var e,i;e=t.controller||(t.controller={}),i=function(){function t(){}return t.create=function(t){switch(t){case"play_transition":return new e.PlayTransitionAction;case"change_page":return new e.ChangePageAction}return null},t.prototype.execute=function(t,e,i){this.fromPage&&0!=this.fromPage.length&&-1==this.fromPage.indexOf(e)||this.toPage&&0!=this.toPage.length&&-1==this.toPage.indexOf(i)?this.leave(t):this.enter(t)},t.prototype.enter=function(t){},t.prototype.leave=function(t){},t.prototype.setup=function(t){var e;(e=t.attributes.fromPage)&&(this.fromPage=e.split(",")),(e=t.attributes.toPage)&&(this.toPage=e.split(","))},t}(),e.Action=i}(l||(l={})),function(t){var e,i;e=t.controller||(t.controller={}),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.enter=function(t){var e;if(this.controllerName&&(e=this.objectId?t.parent.getChildById(this.objectId):t.parent)){var i=e.getController(this.controllerName);i&&i!=t&&!i.$updating&&(i.selectedPageId=this.targetPage)}},e.prototype.setup=function(e){t.prototype.setup.call(this,e),this.objectId=e.attributes.objectId,this.controllerName=e.attributes.controller,this.targetPage=e.attributes.targetPage},e}(e.Action),e.ChangePageAction=i}(l||(l={})),function(t){!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.$selectedIndex=0,t.$previousIndex=0,t.$pageIds=[],t.$pageNames=[],t.$selectedIndex=-1,t.$previousIndex=-1,t}return y(i,e),Object.defineProperty(i.prototype,"name",{get:function(){return this.$name},set:function(t){this.$name=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"parent",{get:function(){return this.$parent},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectedIndex",{get:function(){return this.$selectedIndex},set:function(t){if(this.$selectedIndex!=t){if(t>this.$pageIds.length-1)throw new Error("index out of range: "+t);this.$updating=!0,this.$previousIndex=this.$selectedIndex,this.$selectedIndex=t,this.$parent.applyController(this),this.emit("__stateChanged",this),this.$updating=!1}},enumerable:!0,configurable:!0}),i.prototype.setSelectedIndex=function(t){if(void 0===t&&(t=0),this.$selectedIndex!=t){if(t>this.$pageIds.length-1)throw new Error("index out of range: "+t);this.$updating=!0,this.$previousIndex=this.$selectedIndex,this.$selectedIndex=t,this.$parent.applyController(this),this.$updating=!1}},Object.defineProperty(i.prototype,"previsousIndex",{get:function(){return this.$previousIndex},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectedPage",{get:function(){return-1==this.$selectedIndex?null:this.$pageNames[this.$selectedIndex]},set:function(t){this.selectedIndex=Math.max(0,this.$pageNames.indexOf(t))},enumerable:!0,configurable:!0}),i.prototype.setSelectedPage=function(t){this.setSelectedIndex(Math.max(0,this.$pageNames.indexOf(t)))},Object.defineProperty(i.prototype,"previousPage",{get:function(){return-1==this.$previousIndex?null:this.$pageNames[this.$previousIndex]},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pageCount",{get:function(){return this.$pageIds.length},enumerable:!0,configurable:!0}),i.prototype.getPageName=function(t){return void 0===t&&(t=0),this.$pageNames[t]},i.prototype.addPage=function(t){void 0===t&&(t=""),this.addPageAt(t,this.$pageIds.length)},i.prototype.addPageAt=function(t,e){void 0===e&&(e=0);var r=""+i.$nextPageId++;e==this.$pageIds.length?(this.$pageIds.push(r),this.$pageNames.push(t)):(this.$pageIds.splice(e,0,r),this.$pageNames.splice(e,0,t))},i.prototype.removePage=function(t){var e=this.$pageNames.indexOf(t);-1!=e&&(this.$pageIds.splice(e,1),this.$pageNames.splice(e,1),this.$selectedIndex>=this.$pageIds.length?this.selectedIndex=this.$selectedIndex-1:this.$parent.applyController(this))},i.prototype.removePageAt=function(t){void 0===t&&(t=0),this.$pageIds.splice(t,1),this.$pageNames.splice(t,1),this.$selectedIndex>=this.$pageIds.length?this.selectedIndex=this.$selectedIndex-1:this.$parent.applyController(this)},i.prototype.clearPages=function(){this.$pageIds.length=0,this.$pageNames.length=0,-1!=this.$selectedIndex?this.selectedIndex=-1:this.$parent.applyController(this)},i.prototype.hasPage=function(t){return this.$pageNames.indexOf(t)>=0},i.prototype.getPageIndexById=function(t){return this.$pageIds.indexOf(t)},i.prototype.getPageIdByName=function(t){var e=this.$pageNames.indexOf(t);return-1!=e?this.$pageIds[e]:null},i.prototype.getPageNameById=function(t){var e=this.$pageIds.indexOf(t);return-1!=e?this.$pageNames[e]:null},i.prototype.getPageId=function(t){return void 0===t&&(t=0),this.$pageIds[t]},Object.defineProperty(i.prototype,"selectedPageId",{get:function(){return-1==this.$selectedIndex?null:this.$pageIds[this.$selectedIndex]},set:function(t){this.selectedIndex=this.$pageIds.indexOf(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"oppositePageId",{set:function(t){this.$pageIds.indexOf(t)>0?this.selectedIndex=0:this.$pageIds.length>1&&(this.selectedIndex=1)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"previousPageId",{get:function(){return-1==this.$previousIndex?null:this.$pageIds[this.$previousIndex]},enumerable:!0,configurable:!0}),i.prototype.executeActions=function(){var t=this;this.$actions&&this.$actions.length>0&&this.$actions.forEach(function(e){e.execute(t,t.previousPageId,t.selectedPageId)})},i.prototype.setup=function(e){var i=this;this.$name=e.attributes.name,this.$autoRadioGroupDepth="true"==e.attributes.autoRadioGroupDepth;var r=e.attributes.pages;if(r)for(var n=r.split(","),o=n.length,s=0;s<o;s+=2)this.$pageIds.push(n[s]),this.$pageNames.push(n[s+1]);var a,h,l=e.children;(l.length>0&&(this.$actions=this.$actions||[],l.forEach(function(e){var r=t.Action.create(e.attributes.type);r.setup(e),i.$actions.push(r)})),r=e.attributes.transitions)&&(this.$actions=this.$actions||[],r.split(",").forEach(function(e){if(e&&e.length){var r=new t.PlayTransitionAction;a=e.indexOf("="),r.transitionName=e.substr(a+1),e=e.substring(0,a),a=e.indexOf("-"),(h=parseInt(e.substring(a+1)))<i.$pageIds.length&&(r.toPage=[i.$pageIds[h]]),"*"!=(e=e.substring(0,a))&&(h=parseInt(e))<i.$pageIds.length&&(r.fromPage=[i.$pageIds[h]]),r.stopOnExit=!0,i.$actions.push(r)}}));this.$parent&&this.$pageIds.length>0?this.$selectedIndex=0:this.$selectedIndex=-1},i.$nextPageId=0,i}(c.utils.EventEmitter);t.Controller=e}(t.controller||(t.controller={}))}(l||(l={})),function(t){!function(t){var e=function(){function t(){}return Object.defineProperty(t.prototype,"controller",{set:function(t){this.$controller=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.$id?this.$controller.getPageNameById(this.$id):null},set:function(t){this.$id=this.$controller.getPageIdByName(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"index",{get:function(){return this.$id?this.$controller.getPageIndexById(this.$id):-1},set:function(t){this.$id=this.$controller.getPageId(t)},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this.$id=null},Object.defineProperty(t.prototype,"id",{get:function(){return this.$id},set:function(t){this.$id=t},enumerable:!0,configurable:!0}),t}();t.PageOption=e}(t.controller||(t.controller={}))}(l||(l={})),function(t){var e,i;e=t.controller||(t.controller={}),i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.repeat=1,e.delay=0,e.stopOnExit=!1,e}return y(e,t),e.prototype.enter=function(t){var e=t.parent.getTransition(this.transitionName);e&&(this.$currentTransition&&this.$currentTransition.playing?e.changeRepeat(this.repeat):e.play({times:this.repeat,delay:this.delay}),this.$currentTransition=e)},e.prototype.leave=function(t){this.stopOnExit&&this.$currentTransition&&(this.$currentTransition.stop(),this.$currentTransition=null)},e.prototype.setup=function(e){var i;t.prototype.setup.call(this,e),this.transitionName=e.attributes.transition,(i=e.attributes.repeat)&&(this.repeat=parseInt(i)),(i=e.attributes.delay)&&(this.delay=parseFloat(i)),this.stopOnExit="true"==e.attributes.stopOnExit},e}(e.Action),e.PlayTransitionAction=i}(l||(l={})),function(t){var e=function(){return function(){this.size=0,this.glyphs={}}}();t.BitmapFont=e}(l||(l={})),function(t){var e=function(){return function(){this.x=0,this.y=0,this.offsetX=0,this.offsetY=0,this.width=0,this.height=0,this.advance=0,this.lineHeight=0,this.channel=0}}();t.BMGlyph=e}(l||(l={})),function(t){var e=function(t){function e(e){var i=t.call(this,e)||this;return i._fillDir=0,i._flip=0,i._percent=0,i}return y(e,t),Object.defineProperty(e.prototype,"flip",{get:function(){return this._flip},set:function(t){t!=this._flip&&(this._flip=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillAmount",{get:function(){return"number"==typeof this._fillAmount?this._fillAmount:100},set:function(t){t!=this._fillAmount&&(this._fillAmount=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillBegin",{get:function(){return this._fillBegin},set:function(t){t!=this._fillBegin&&(this._fillBegin=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillMode",{get:function(){return this._fillMode},set:function(t){t!=this._fillMode&&(this._fillMode=t,this.checkAndFixFillBegin())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillDirection",{get:function(){return this._fillDir},set:function(t){t!=this._fillDir&&(this._fillDir=t,this.checkAndFixFillBegin())},enumerable:!0,configurable:!0}),e.prototype.checkAndFixFillBegin=function(){switch(this._fillMode){case 1:0!=this._fillBegin&&1!=this._fillBegin&&(this._fillBegin=0);break;case 2:2!=this._fillBegin&&3!=this._fillBegin&&(this._fillBegin=2);break;case 3:4!=this._fillBegin&&6!=this._fillBegin&&5!=this._fillBegin&&7!=this._fillBegin&&(this._fillBegin=4);break;case 4:case 5:0!=this._fillBegin&&1!=this._fillBegin&&2!=this._fillBegin&&3!=this._fillBegin&&(this._fillBegin=2)}},Object.defineProperty(e.prototype,"amount",{get:function(){return this._percent},set:function(t){this._percent=t},enumerable:!0,configurable:!0}),e}(c.Sprite);t.FillSprite=e}(l||(l={})),function(t){var e=function(){return function(){this.addDelay=0}}();t.Frame=e}(l||(l={})),function(t){var e=function(){function e(){this.$requestToShow=!1,this.$scaleX=1,this.$scaleY=1}return Object.defineProperty(e,"inst",{get:function(){return e.$instance||(e.$instance=new e),e.$instance},enumerable:!0,configurable:!0}),e.prototype.initialize=function(e,i){var r;this.$canvas=i,this.$delegateDiv||(r=document.createElement("div"),this.$delegateDiv=r,r.id="__delegateDiv",e.appendChild(r),this.initDomPos(r),this.$wrapper=document.createElement("div"),this.initDomPos(this.$wrapper),this.$wrapper.style.width="0px",this.$wrapper.style.height="0px",this.$wrapper.style.left="0px",this.$wrapper.style.top="-100px",this.setTransform(this.$wrapper,"0% 0% 0px"),r.appendChild(this.$wrapper),t.GRoot.inst.on(t.InteractiveEvents.Click,this.canvasClickHandler,this),this.initInputElement(!0),this.initInputElement(!1))},e.prototype.isInputOn=function(){return null!=this.$input},e.prototype.canvasClickHandler=function(t){this.$requestToShow?(this.$requestToShow=!1,this.$input.onClickHandler(t),this.show()):this.$curEle&&(this.clearInputElement(),this.$curEle.blur(),this.$curEle=null)},e.prototype.isInputShown=function(){return null!=this.$input},e.prototype.isCurrentInput=function(t){return this.$input==t},e.prototype.initDomPos=function(t){t.style.position="absolute",t.style.left="0px",t.style.top="0px",t.style.border="none",t.style.padding="0"},e.prototype.setTransform=function(t,e,i){var r=t.style;r.transformOrigin=r.webkitTransformOrigin=r.msTransformOrigin=r.mozTransformOrigin=r.oTransformOrigin=e,i&&i.length>0&&(r.transform=r.webkitTransform=r.msTransform=r.mozTransform=r.oTransform=i)},e.prototype.$updateSize=function(t,e){if(this.$canvas){this.$scaleX=t,this.$scaleY=e,this.$delegateDiv.style.left=this.$canvas.style.left,this.$delegateDiv.style.top=this.$canvas.style.top;var i=this.$canvas.style;this.setTransform(this.$delegateDiv,"0% 0% 0px",i.transform||i.webkitTransform||i.msTransform||i.mozTransform||i.oTransform)}},e.prototype.initInputElement=function(t){var e,i=this;t?((e=document.createElement("textarea")).style.resize="none",this.$multiLine=e,e.id="stageTextAreaEle"):(e=document.createElement("input"),this.$singleLine=e,e.type="text",e.id="stageInputEle"),this.$wrapper.appendChild(e),e.setAttribute("tabindex","-1"),e.style.width="1px",e.style.height="12px",this.initDomPos(e);var r=e.style;r.outline="thin",r.background="none",r.overflow="hidden",r.wordBreak="break-all",r.opacity=0,e.oninput=function(t){i.$input&&i.$input.onInputHandler()}},e.prototype.show=function(){var e=this;t.GTimer.inst.callLater(function(){e.$curEle.style.opacity="1"},this)},e.prototype.disconnect=function(t){null!=this.$input&&this.$input!=t||(this.clearInputElement(),this.$curEle&&this.$curEle.blur())},e.prototype.clearAttributes=function(t){if(this.$curEle)for(var e in t)this.$curEle.removeAttribute(e)},e.prototype.clearInputElement=function(){if(this.$curEle){this.$curEle.value="",this.$curEle.onblur=null;var t=this.$curEle.style;t.width="1px",t.height="12px",t.left="0px",t.top="0px",t.opacity="0";(this.$singleLine==this.$curEle?this.$multiLine:this.$singleLine).style.display="block",this.$wrapper.style.left="0px",this.$wrapper.style.top="-100px",this.$wrapper.style.height="0px",this.$wrapper.style.width="0px"}this.$input&&(this.$input.onDisconnect(),this.$input=null,e.isTyping=!1)},e.prototype.requestInput=function(t){var i;return this.clearInputElement(),this.$input=t,e.isTyping=!0,this.$input.textField.multipleLine?(this.$curEle=this.$multiLine,i=this.$singleLine):(this.$curEle=this.$singleLine,i=this.$multiLine),i.style.display="none",this.$curEle},e.isTyping=!1,e}();t.HTMLInput=e}(l||(l={})),function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i.$requestToShow=!1,i.inputElement=null,i.inputDiv=null,i.$scaleX=0,i.$scaleY=0,i.textValue="",i.colorValue=16777215,i.$attrsCache={},i.$textfield=t,i}return y(i,e),i.prototype.$addToStage=function(){this.htmlInput=t.HTMLInput.inst},i.prototype.initElement=function(){var t=this.$textfield.localToGlobal(0,0),e=t.x,i=t.y,r=this.htmlInput.$scaleX,n=this.htmlInput.$scaleY;this.$textfield.multipleLine||(this.inputElement.style.top=-this.$textfield.leading*n+"px"),this.inputDiv.style.top=(i+1)*n+"px",this.inputDiv.style.left=e*r+"px";for(var o=this.$textfield,s=1,a=1,h=0;o.parent;)s*=o.scaleX,a*=o.scaleY,h+=o.rotation,o=o.parent;var l=this.inputDiv.style;l.transform=l.webkitTransform=l.msTransform=l.mozTransform=l.oTransform="rotate("+h+"deg)",this.$scaleX=r*s,this.$scaleY=n*a},Object.defineProperty(i.prototype,"textField",{get:function(){return this.$textfield},enumerable:!0,configurable:!0}),i.prototype.$show=function(){if(this.htmlInput.isCurrentInput(this))this.inputElement.onblur=null;else{for(var t in this.inputElement=this.htmlInput.requestInput(this),this.$textfield.multipleLine||(this.inputElement.type=this.$textfield.type),this.$attrsCache)this.inputElement.setAttribute(t,this.$attrsCache[t]);this.inputDiv=this.htmlInput.$wrapper}this.htmlInput.$requestToShow=!0,this.$requestToShow=!0,this.initElement()},i.prototype.onBlurHandler=function(){this.htmlInput.clearInputElement(),this.htmlInput.clearAttributes(this.$attrsCache),window.scrollTo(0,0)},i.prototype.$hide=function(){},Object.defineProperty(i.prototype,"text",{get:function(){return this.textValue||(this.textValue=""),this.textValue},set:function(t){this.textValue=t,this.inputElement&&(this.inputElement.value=this.textValue)},enumerable:!0,configurable:!0}),i.prototype.setColor=function(e){this.colorValue=e,this.inputElement&&this.setElementStyle("color",t.utils.StringUtil.convertToHtmlColor(this.colorValue))},i.prototype.$onBlur=function(){},i.prototype.onInputHandler=function(){var t=this;window.setTimeout(function(){t.inputElement&&t.inputElement.selectionStart==t.inputElement.selectionEnd&&(t.textValue=t.inputElement.value,t.emit("updateText"))},0)},i.prototype.setAreaHeight=function(){var t=this.$textfield;if(t.multipleLine){var e=t.textHeight;if(t.height<=t.fontSize)this.setElementStyle("height",t.fontSize*this.$scaleY+"px"),this.setElementStyle("padding","0px"),this.setElementStyle("lineHeight",t.lineHeight*this.$scaleY+"px");else if(t.height<e)this.setElementStyle("height",t.height*this.$scaleY+"px"),this.setElementStyle("padding","0px"),this.setElementStyle("lineHeight",t.lineHeight*this.$scaleY+"px");else{this.setElementStyle("height",(e+t.leading)*this.$scaleY+"px");var i=(t.height-e)*this.$scaleY,r=i*this.getVAlignFactor(t),n=i-r;this.setElementStyle("padding",r+"px 0px "+n+"px 0px"),this.setElementStyle("lineHeight",t.lineHeight*this.$scaleY+"px")}}},i.prototype.getVAlignFactor=function(t){var e=0;switch(t.verticalAlign){case 0:break;case 1:e=.5;break;case 2:e=1}return e},i.prototype.onClickHandler=function(e){this.$requestToShow&&(this.$requestToShow=!1,this.inputElement.value=this.text,null==this.inputElement.onblur&&(this.inputElement.onblur=t.utils.Binder.create(this.onBlurHandler,this)),this.resetInput(),this.$textfield.maxLength>0?this.inputElement.setAttribute("maxlength",String(this.$textfield.maxLength)):this.inputElement.removeAttribute("maxlength"),this.inputElement.selectionStart=this.inputElement.value.length,this.inputElement.selectionEnd=this.inputElement.value.length,this.inputElement.focus(),this.emit("__focusChanged","focus",this.inputElement))},i.prototype.onDisconnect=function(){this.inputElement=null,this.emit("__focusChanged","blur",this.inputElement)},i.prototype.setElementStyle=function(t,e){null!=e&&(this.inputElement&&(this.inputElement.style[t]=e))},i.prototype.setAttribute=function(t,e){null!=t&&null!=e&&(this.$attrsCache[t]=e)},i.prototype.getAttribute=function(t){return this.$attrsCache[t]},i.prototype.$removeFromStage=function(){this.inputElement&&this.htmlInput.disconnect(this)},i.prototype.resetInput=function(){if(this.inputElement){var e=this.$textfield;this.setElementStyle("fontFamily",e.font),this.setElementStyle("fontStyle",e.italic?"italic":"normal"),this.setElementStyle("fontWeight",e.bold?"bold":"normal"),this.setElementStyle("textAlign",e.align),this.setElementStyle("fontSize",e.fontSize*this.$scaleY+"px"),this.setElementStyle("color",t.utils.StringUtil.convertToHtmlColor(e.color)),this.setElementStyle("width",e.width*this.$scaleX+"px");var i="middle",r=0;switch(e.verticalAlign){case 0:i="top";break;case 1:i="middle",r=.5;break;case 2:i="bottom",r=1}if(this.setElementStyle("verticalAlign",i),e.multipleLine)this.setAreaHeight();else if(this.setElementStyle("lineHeight",e.lineHeight*this.$scaleY+"px"),e.height<e.fontSize)this.setElementStyle("height",e.fontSize*this.$scaleY+"px"),this.setElementStyle("padding","0px 0px "+.5*e.fontSize*this.$scaleX+"px 0px");else{this.setElementStyle("height",e.fontSize*this.$scaleY+"px");var n=(e.height-e.fontSize)*this.$scaleY,o=n*r,s=n-o,a=.5*e.fontSize*this.$scaleY;s<a&&(s=a),this.setElementStyle("padding",o+"px 0px "+s+"px 0px")}this.inputDiv.style.clip="rect(0px "+e.width*this.$scaleX+"px "+e.height*this.$scaleY+"px 0px)",this.inputDiv.style.height=e.height*this.$scaleY+"px",this.inputDiv.style.width=e.width*this.$scaleX+"px"}},i}(c.utils.EventEmitter);t.InputElement=e}(l||(l={})),function(t){t.isUIObject=function(t){return t&&"UIOwner"in t&&null!=t.UIOwner}}(l||(l={})),function(t){var e=function(e){function i(i){var r=e.call(this)||this;return r.interval=0,r.repeatDelay=0,r.$frameCount=0,r.$currentFrame=0,r.$status=0,r.UIOwner=i,r.data=new t.MovieClipData,r.$playing=!0,r.interactive=r.interactiveChildren=!1,r.$settings=new t.DefaultMovieClipSettings,r.on("added",r.added,r),r.on("removed",r.removed,r),r}return y(i,e),Object.defineProperty(i.prototype,"frames",{get:function(){return this.$frames},set:function(t){this.$frames=t,null!=this.$frames?this.$frameCount=this.$frames.length:this.$frameCount=0,(-1==this.$settings.endFrame||this.$settings.endFrame>this.$frameCount-1)&&(this.$settings.endFrame=this.$frameCount-1),(-1==this.$settings.loopEndAt||this.$settings.loopEndAt>this.$frameCount-1)&&(this.$settings.loopEndAt=this.$frameCount-1),(this.$currentFrame<0||this.$currentFrame>this.$frameCount-1)&&(this.$currentFrame=this.$frameCount-1),this.$frameCount>0?this.setFrame(this.$frames[this.$currentFrame]):this.setFrame(null),this.data.rewind()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"frameCount",{get:function(){return this.$frameCount},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"boundsRect",{get:function(){return this._boundsRect},set:function(t){this._boundsRect=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currentFrame",{get:function(){return this.$currentFrame},set:function(t){this.$currentFrame!=t&&(this.$currentFrame=t,this.data.currentFrame=t,this.setFrame(this.$currentFrame<this.$frameCount?this.$frames[this.$currentFrame]:null))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"playing",{get:function(){return this.$playing},set:function(e){this.$playing=e,e&&t.GObject.isDisplayObjectOnStage(this)?t.GTimer.inst.add(0,0,this.update,this):t.GTimer.inst.remove(this.update,this)},enumerable:!0,configurable:!0}),i.prototype.setPlaySettings=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];if(1==e.length&&"object"==a(e[0]))this.$settings.mix(e[0]);else{var r=e[0],n=e[1],o=e[2],s=e[3],h=e[4],l=e[5],u={};t.utils.NumberUtil.isNumber(r)&&(u.startFrame=r),t.utils.NumberUtil.isNumber(n)&&(u.endFrame=n),t.utils.NumberUtil.isNumber(o)&&(u.repeatCount=o),t.utils.NumberUtil.isNumber(s)&&(u.loopEndAt=s),h&&"function"==typeof h&&(u.endCallback=h),l&&(u.endCallbackContext=l),this.$settings.mix(u)}(-1==this.$settings.endFrame||this.$settings.endFrame>this.$frameCount-1)&&(this.$settings.endFrame=this.$frameCount-1),-1==this.$settings.loopEndAt&&(this.$settings.loopEndAt=this.$settings.endFrame),this.$status=0,this.currentFrame=this.$settings.startFrame},i.prototype.update=function(){this.UIOwner.$inProgressBuilding||this.$playing&&0!=this.$frameCount&&3!=this.$status&&(this.data.update(this),this.$currentFrame!=this.data.currentFrame&&(1==this.$status?(this.$currentFrame=this.$settings.startFrame,this.data.currentFrame=this.$currentFrame,this.$status=0):2==this.$status?(this.$currentFrame=this.$settings.loopEndAt,this.data.currentFrame=this.$currentFrame,this.$status=3,null!=this.$settings.endCallback&&t.GTimer.inst.callLater(this.$playEnd,this)):(this.$currentFrame=this.data.currentFrame,this.$currentFrame==this.$settings.endFrame&&this.$settings.repeatCount>0&&(this.$settings.repeatCount--,0==this.$settings.repeatCount?this.$status=2:this.$status=1)),this.setFrame(this.$frames[this.$currentFrame])))},i.prototype.$playEnd=function(){if(null!=this.$settings.endCallback){var t=this.$settings.endCallback,e=this.$settings.endCallbackContext;this.$settings.endCallback=this.$settings.endCallbackContext=null,this.$settings.endCallbackContext=null,t&&t.call(e,this)}},i.prototype.setFrame=function(t){this._texture=null==t?null:t.texture,this._textureID=-1},i.prototype.added=function(e){this.$playing&&t.GTimer.inst.add(0,0,this.update,this)},i.prototype.removed=function(e){this.$playing&&t.GTimer.inst.remove(this.update,this)},i.prototype.destroy=function(){t.GTimer.inst.remove(this.update,this),this.off("added",this.added,this),this.off("removed",this.removed,this),e.prototype.destroy.call(this)},i}(c.Sprite);t.MovieClip=e}(l||(l={})),function(t){var e=function(){function t(){this.repeatedCount=0,this.$curFrame=0,this.$lastTime=0,this.$curFrameDelay=0,this.$lastTime=Date.now()}return t.prototype.update=function(t){var e=Date.now(),i=e-this.$lastTime;this.$lastTime=e;var r=this.$curFrame;r>=t.frameCount&&(r=t.frameCount-1),this.reachesEnd=!1,this.$curFrameDelay+=i;var n=t.interval+t.frames[r].addDelay+(0==r&&this.repeatedCount>0?t.repeatDelay:0);this.$curFrameDelay<n||(this.$curFrameDelay-=n,this.$curFrameDelay>t.interval&&(this.$curFrameDelay=t.interval),t.swing?this.reversed?(this.$curFrame--,this.$curFrame<0&&(this.$curFrame=Math.min(1,t.frameCount-1),this.repeatedCount++,this.reversed=!this.reversed)):(this.$curFrame++,this.$curFrame>t.frameCount-1&&(this.$curFrame=Math.max(0,t.frameCount-2),this.repeatedCount++,this.reachesEnd=!0,this.reversed=!this.reversed)):(this.$curFrame++,this.$curFrame>t.frameCount-1&&(this.$curFrame=0,this.repeatedCount++,this.reachesEnd=!0)))},Object.defineProperty(t.prototype,"currentFrame",{get:function(){return this.$curFrame},set:function(t){this.$curFrame=t,this.$curFrameDelay=0},enumerable:!0,configurable:!0}),t.prototype.rewind=function(){this.$curFrame=0,this.$curFrameDelay=0,this.reversed=!1,this.reachesEnd=!1},t.prototype.reset=function(){this.$curFrame=0,this.$curFrameDelay=0,this.repeatedCount=0,this.reachesEnd=!1,this.reversed=!1},t.prototype.copy=function(t){this.$curFrame=t.$curFrame,this.$curFrameDelay=t.$curFrameDelay,this.repeatedCount=t.repeatedCount,this.reachesEnd=t.reachesEnd,this.reversed=t.reversed},t}();t.MovieClipData=e}(l||(l={})),function(t){var e=function(){function t(){this.startFrame=0,this.endFrame=-1,this.repeatCount=0,this.loopEndAt=-1,this.endCallback=null,this.endCallbackContext=null}return t.prototype.mix=function(t){for(var e in t)"mix"!=e&&(this[e]=t[e]);return this},t}();t.DefaultMovieClipSettings=e}(l||(l={})),function(t){var e=function(t){function e(e){var i=t.call(this)||this;return i.UIOwner=e,i.interactive=!0,i.interactiveChildren=!0,i}return y(e,t),Object.defineProperty(e.prototype,"scrollRect",{get:function(){return this.$scrollRect},set:function(t){this.$scrollRect=t,null!=t?(this.$rectMask||(this.$rectMask=new c.Graphics,this.$rectMask.isMask=!0,this.addChild(this.$rectMask),this.mask=this.$rectMask),this.$rectMask.clear(),t.width>0&&t.height>0&&(this.$rectMask.beginFill(0,1),this.$rectMask.drawRect(this.$scrollRect.x,this.$scrollRect.y,this.$scrollRect.width,this.$scrollRect.height),this.$rectMask.endFill())):this.mask=null},enumerable:!0,configurable:!0}),e}(c.Container);t.UIContainer=e}(l||(l={})),function(t){var e=function(t){function e(e){var i=t.call(this)||this;return i.UIOwner=e,i.interactive=i.interactiveChildren=!1,i}return y(e,t),e.prototype.$initDisp=function(t){if(!this.$disp){if(t)if(t.load(),t.scaleByTile){var e=new c.extras.TilingSprite(t.texture);this.$disp=e}else t.scale9Grid?(this.$disp=new c.mesh.NineSlicePlane(t.texture),this.scale9Grid=t.scale9Grid,this.tiledSlices=t.tiledSlices):this.$disp=new c.Sprite(t.texture);else this.$disp=new c.Sprite;this.addChild(this.$disp)}},Object.defineProperty(e.prototype,"tint",{get:function(){return this.$disp.tint},set:function(t){this.$disp.tint=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.$disp.height},set:function(t){this.$disp.height=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.$disp.width},set:function(t){this.$disp.width=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this.$disp.texture},set:function(t){this.$disp.texture=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scale9Grid",{get:function(){return this.$disp instanceof c.mesh.NineSlicePlane?this.$scale9Rect:null},set:function(t){this.$disp instanceof c.mesh.NineSlicePlane&&(this.$scale9Rect=t,this.$disp.leftWidth=t.x,this.$disp.topHeight=t.y,this.$disp.rightWidth=Math.max(0,this.$disp.width-t.width-t.x),this.$disp.bottomHeight=Math.max(0,this.$disp.height-t.height-t.y))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tiledSlices",{get:function(){return 0},set:function(t){},enumerable:!0,configurable:!0}),e.prototype.destroy=function(e){this.$scale9Rect=null,this.$disp&&(this.$disp.destroy(e),this.$disp=null),t.prototype.destroy.call(this,e)},e}(c.Container);t.UIImage=e}(l||(l={})),function(t){var e=function(t){function e(e){var i=t.call(this)||this;return i.UIOwner=e,i.interactive=!1,i.interactiveChildren=!1,i}return y(e,t),e}(c.Graphics);t.UISprite=e}(l||(l={})),function(t){var e=function(){return function(){this.scaleMode="showAll",this.orientation="auto",this.resolution=1,this.designWidth=800,this.designHeight=600,this.alignV=4,this.alignH=1,this.fallbackWidth=0,this.fallbackHeight=0}}();t.DefaultUIStageOptions=e;var i=function(){function t(){}return t.prototype.getRect=function(t,e,i){var r={x:0,y:0,width:0,height:0};return r.width=window.innerWidth,r.height=window.innerHeight,r.x=0,r.y=0,(r.width<=0||r.height<=0)&&(console.warn("fetch container size to initialize PIXI in all ways have failed, now use default size (fallbackWidth / fallbackHeight) specified in the options instead."),r.width=e,r.height=i),r},t}(),r=function(r){function o(t,o){var s,a=r.call(this)||this;if(a.$width=0,a.$height=0,a.$scaleX=1,a.$scaleY=1,a.$canvasMatrix=new c.Matrix,a.offsetX=0,a.offsetY=0,a.$sizeCalcer=new i,n.push(a),a.$appContext=t,a.$appContext.renderer.autoResize=!1,a.$appStage=t.stage,a.$appStage.interactive=!0,o instanceof e)s=o;else if(s=new e,null!=o)for(var h in o)s[h]=o[h];if(!s.designWidth||!s.designHeight)throw new Error("Invalid designWidth / designHeight in the parameter 'stageOptions'.");return a.$options=s,a.$updateScreenSize(),a}return y(o,r),Object.defineProperty(o.prototype,"orientation",{get:function(){return this.$options.orientation},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"stageWidth",{get:function(){return this.$width},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"stageHeight",{get:function(){return this.$height},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"applicationContext",{get:function(){return this.$appContext},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"nativeStage",{get:function(){return this.$appStage},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"resolution",{get:function(){return this.$options.resolution},set:function(t){this.$options.resolution=t,this.$updateScreenSize()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"scaleX",{get:function(){return this.$scaleX},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"scaleY",{get:function(){return this.$scaleY},enumerable:!0,configurable:!0}),o.prototype.setDesignSize=function(t,e){var i=this.$options;i.designWidth=t,i.designHeight=e,this.$updateScreenSize()},o.prototype.calculateStageSize=function(t,e,i,r,n){var o=e,s=i,a=r,h=n,l=e/a||0,u=i/h||0;switch(t){case"exactFit":break;case"fixedHeight":a=Math.round(e/u);break;case"fixedWidth":h=Math.round(i/l);break;case"noBorder":l>u?s=Math.round(h*l):o=Math.round(a*u);break;case"showAll":l>u?o=Math.round(a*u):s=Math.round(h*l);break;case"fixedAuto":o/s<a/h?(u=l,h=Math.round(i/l)):(l=u,a=Math.round(e/u));break;default:a=e,h=i}return{stageWidth:a,stageHeight:h,displayWidth:o,displayHeight:s}},o.prototype.$updateScreenSize=function(){if(!t.HTMLInput.isTyping){var e=this.$appContext.view,i=e.style,r=this.$sizeCalcer.getRect(e,this.$options.fallbackWidth,this.$options.fallbackHeight),n=!1,o=this.$options.orientation;"auto"!=o&&(n="portrait"!=o&&r.height>r.width||"portrait"==o&&r.width>r.height);var s=n?r.height:r.width,a=n?r.width:r.height,h=this.calculateStageSize(this.$options.scaleMode,s,a,this.$options.designWidth,this.$options.designHeight),l=h.stageWidth,u=h.stageHeight,c=h.displayWidth,d=h.displayHeight;e.width!==l&&(e.width=l),e.height!==u&&(e.height=u),i.transformOrigin=i.webkitTransformOrigin=i.msTransformOrigin=i.mozTransformOrigin=i.oTransformOrigin="0px 0px 0px",i.width=c+"px",i.height=d+"px";var p,f,g=this.$canvasMatrix.identity(),y=n?d:c,v=n?c:d;p=0==this.$options.alignH?0:2==this.$options.alignH?r.width-y:.5*(r.width-y),f=3==this.$options.alignV?0:5==this.$options.alignV?r.height-v:.5*(r.height-v);var m=0;n?"landscape"==this.$options.orientation?(g.rotate(Math.PI/2),g.translate(a-p,f),m=90):(g.rotate(-Math.PI/2),g.translate(p,s-f),m=-90):g.translate(p,f),n?(g.tx+=this.offsetY,g.ty+=this.offsetX):(g.tx+=this.offsetX,g.ty+=this.offsetY),g.a=this.formatData(g.a),g.d=this.formatData(g.d),g.tx=this.formatData(g.tx),g.ty=this.formatData(g.ty),i.transformOrigin=i.webkitTransformOrigin=i.msTransformOrigin=i.mozTransformOrigin=i.oTransformOrigin="0px 0px 0px",i.transform=i.webkitTransform=i.msTransform=i.mozTransform=i.oTransform="matrix("+g.a+","+g.b+","+g.c+","+g.d+","+g.tx+","+g.ty+")",this.$width=l,this.$height=u,this.$scaleX=l/c,this.$scaleY=u/d;var b=this.$appContext.renderer.plugins.interaction;b.stageRotation=m,b.stageScaleX=this.$scaleX,b.stageScaleY=this.$scaleY,this.$appContext.renderer.resize(l,u),t.HTMLInput.inst.$updateSize(c/l,d/u),this.emit("__sizeChanged",this)}},o.prototype.formatData=function(t){return Math.abs(t)<1e-6?0:Math.abs(1-t)<.001?t>0?1:-1:t},o.prototype.dispose=function(){for(var t=n.length;t-- >=0;)n[t]===this&&n.splice(t,1)},o}(c.utils.EventEmitter);t.UIStage=r;var n=[],o=NaN;function s(){var t=!!window.navigator.userAgent.match(/Version\/\d+\.\d\x20Mobile\/\S+\x20Safari/);o=NaN,n.forEach(function(e){t&&(e.offsetY=(document.body.clientHeight||document.documentElement.clientHeight)-window.innerHeight),e.$updateScreenSize()})}window.addEventListener("resize",function(){isNaN(o)&&(o=window.setTimeout(s,300))})}(l||(l={})),function(t){!function(e){var i=function(e){function i(r,n,o){var s=e.call(this,r,n,o)||this;return t.extras.Text.__init||(t.extras.Text.__init=!0,t.TextMetrics.wordWrap=function(e,r){for(var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.TextMetrics._canvas).getContext("2d"),o="",s=0,a="",h={},l=r.letterSpacing,u=r.wordWrapWidth+r.letterSpacing,c=t.TextMetrics.getFromCache(" ",l,h,n),d=e.split(" "),p=0;p<d.length;p++){var f=d[p],g=t.TextMetrics.getFromCache(f,l,h,n);if(g>u)if(r.breakWords)for(var y=(o.length>0?" "+f:f).split(""),v=0;v<y.length;v++){var m=y[v],b=y[v+1];i.isEmojiChar(m.charCodeAt(0),b?b.charCodeAt(0):0)>=1&&(v++,m+=b);var $=t.TextMetrics.getFromCache(m,l,h,n);$+s>u&&(a+=t.TextMetrics.addLine(o),o="",s=0),o+=m,s+=$}else o.length>0&&(a+=t.TextMetrics.addLine(o),o="",s=0),a+=t.TextMetrics.addLine(f),o="",s=0;else g+s>u&&(a+=t.TextMetrics.addLine(o),o="",s=0),o.length>0?o+=" "+f:o+=f,s+=g+c}return a+=t.TextMetrics.addLine(o,!1)}),s}return y(i,e),i.isEmojiChar=function(t,e){var i=t,r="number"==typeof e&&!isNaN(e)&&e>0;if(i>=55296&&i<=56319){if(r){var n=1024*(i-55296)+(e-56320)+65536;if(n>=118784&&n<=128895)return 2}}else{if(i>=8448&&i<=10239||i>=11013&&i<=11015||i>=10548&&i<=10549||i>=12951&&i<=12953||169===i||174===i||12349===i||12336===i||11093===i||11036===i||11035===i||11088===i||8986===i)return 1;if(r&&(8419===e||65039===e||55356===e))return 2}return 0},i.__init=!1,i}(t.Text);e.Text=i}(t.extras||(t.extras={}))}(c||(c={})),function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i.$minHeightID=-1,i.UIOwner=t,i.interactive=i.interactiveChildren=!1,i._texture.noFrame=!1,i._width=i._texture.frame.width,i._height=i._texture.frame.height,i.$minHeight=-1,i._texture.on("update",i.updateFrame,i),i}return y(i,e),Object.defineProperty(i.prototype,"minHeight",{get:function(){return this.$minHeight},enumerable:!0,configurable:!0}),i.prototype.$updateMinHeight=function(){(this.style.styleID!=this.$minHeightID||this.$minHeight<=0)&&(this.$minHeight=c.TextMetrics.measureText("",this.style,!1).lineHeight,this.$minHeightID=this.style.styleID)},i.prototype.updateFrame=function(){t.GTimer.inst.callLater(this.internalUpdateFrame,this)},i.prototype.internalUpdateFrame=function(){if(this._texture){var t=this._texture.frame;this._height=Math.max(this._height,this.$minHeight);var e=t.x+this._width,i=t.y+this._height;e>this._texture.baseTexture.width&&(e=this._texture.baseTexture.width-t.x),i>this._texture.baseTexture.height&&(i=this._texture.baseTexture.height-t.y),t.width=e/this.resolution,t.height=i/this.resolution,this._texture.trim.width=t.width,this._texture.trim.height=t.height;var r=this._style.trim?0:this._style.padding;this._texture.trim.x=-r,this._texture.trim.y=-r,this._texture.frame=t}},i.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1},Object.defineProperty(i.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this.updateFrame()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this.updateFrame()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textHeight",{get:function(){return this.updateText(!0),this._texture.orig.height},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textWidth",{get:function(){return this.updateText(!0),this._texture.orig.width},set:function(t){t!=this.style.wordWrapWidth&&(this.style.wordWrapWidth=t)},enumerable:!0,configurable:!0}),i}(c.extras.Text);t.UITextField=e}(l||(l={})),function(t){!function(e){var i=function(t){function e(e,i){var r=t.call(this,e,i)||this;return r.stageRotation=0,r.stageScaleX=1,r.stageScaleY=1,r}return y(e,t),e.prototype.mapPositionToPoint=function(t,e,i){var r=void 0,n=this.interactionDOMElement;r=n.parentElement?n.getBoundingClientRect():{x:0,y:0,width:0,height:0};var o=navigator.isCocoonJS?this.resolution:1/this.resolution,s=e,a=i;90==this.stageRotation?(s=i,a=r.width-e):-90==this.stageRotation&&(s=r.height-i,a=e),s=s*this.stageScaleX*o,a=a*this.stageScaleY*o,t.set(s,a)},e}(t.interaction.InteractionManager);e.InteractionManager=i,t.CanvasRenderer.registerPlugin("interaction",t.extras.InteractionManager),t.WebGLRenderer.registerPlugin("interaction",t.extras.InteractionManager)}(t.extras||(t.extras={}))}(c||(c={})),function(t){var e=function(){return function(t,e){this.packageItem=t,this.type=e}}();t.DisplayListItem=e}(l||(l={})),function(t){var e=function(){function t(){this.width=0,this.height=0,this.tiledSlices=0,this.interval=0,this.repeatDelay=0}return t.prototype.load=function(){return this.owner.getItemAsset(this)},t.prototype.toString=function(){return this.name},t}();t.PackageItem=e}(l||(l={})),function(t){var e=function(){function e(){}return e.setPackageItemExtension=function(t,i){e.packageItemExtensions[t.substring(5)]=i},e.setLoaderExtension=function(t){e.loaderExtension=t},e.newObject=function(i){switch(i.type){case 0:return new t.GImage;case 2:return new t.GMovieClip;case 4:var r=e.packageItemExtensions[i.owner.id+i.id];if(r)return new r;var n=i.owner.getItemAsset(i).attributes.extention;if(null==n)return new t.GComponent;switch(n){case"Button":return new t.GButton;case"ProgressBar":return new t.GProgressBar;case"Label":return new t.GLabel;case"Slider":return new t.GSlider;case"ScrollBar":return new t.GScrollBar;case"ComboBox":return new t.GComboBox;default:return new t.GComponent}}return null},e.newObjectDirectly=function(i){switch(i){case"image":return new t.GImage;case"movieclip":return new t.GMovieClip;case"component":return new t.GComponent;case"text":return new t.GTextField;case"list":return new t.GList;case"richtext":return new t.GRichTextField;case"inputtext":return new t.GTextInput;case"group":return new t.GGroup;case"graph":return new t.GGraph;case"loader":return null!=e.loaderExtension?new e.loaderExtension:new t.GLoader}return null},e.packageItemExtensions={},e}();t.UIObjectFactory=e}(l||(l={})),function(t){var e=function(){return function(t,e,i,r,n){this.atlasName=t,this.frame=e,this.orig=i,this.trim=r,this.rotate=n}}(),i=function(){function i(){this.$items=[],this.$atlasConfigs={}}return i.getById=function(t){return i.$packageInstById[t]},i.getByName=function(t){return i.$packageInstByName[t]},i.addPackage=function(t){var e=new i;return e.create(t),i.$packageInstById[e.id]=e,i.$packageInstByName[e.name]=e,e.customId=t,e},i.removePackage=function(t){var e=i.$packageInstById[t];e.dispose(),delete i.$packageInstById[e.id],null!=e.$customId&&delete i.$packageInstById[e.$customId],delete i.$packageInstByName[e.name]},i.createObject=function(t,e,r){var n=i.getByName(t);return n?n.createObject(e,r):null},i.createObjectFromURL=function(t,e){var r=i.getItemByURL(t);return r?r.owner.internalCreateObject(r,e):null},i.getItemURL=function(t,e){var r=i.getByName(t);if(!r)return null;var n=r.$itemsByName[e];return n?"ui://"+r.id+n.id:null},i.getItemByURL=function(t){var e=t.indexOf("//");if(-1==e)return null;var r,n=t.indexOf("/",e+2);if(-1==n){if(t.length>13){var o=t.substr(5,8);if(null!=(r=i.getById(o))){var s=t.substr(13);return r.getItemById(s)}}}else{var a=t.substr(e+2,n-e-2);if(null!=(r=i.getByName(a))){var h=t.substr(n+1);return r.getItemByName(h)}}return null},i.getBitmapFontByURL=function(t){return i.$bitmapFonts[t]},i.setStringsSource=function(e){i.$stringsSource={},t.utils.XmlParser.tryParse(e).children.forEach(function(t){if("string"==t.nodeName){var e=t.attributes.name,r=e.indexOf("-");if(-1==r)return;var n=t.children.length>0?t.children[0].text:"",o=e.substr(0,r),s=e.substr(r+1),a=i.$stringsSource[o];a||(a={},i.$stringsSource[o]=a),a[s]=n}})},i.normalizeURL=function(t){if(null==t)return null;var e=t.indexOf("//");if(-1==e)return null;var r=t.indexOf("/",e+2);if(-1==r)return t;var n=t.substr(e+2,r-e-2),o=t.substr(r+1);return i.getItemURL(n,o)},i.prototype.create=function(r){var n=this;this.$resKey=r;var o=t.utils.AssetLoader.resourcesPool[this.$resKey];if(o||(o=t.utils.AssetLoader.resourcesPool[this.$resKey+"_fui"]),!o)throw new Error("Resource '"+this.$resKey+'\' not found, please make sure that you use "new fgui.utils.AssetLoader" to load resources instead of " PIXI.loaders.Loader".');if(!(o.data&&o.data instanceof ArrayBuffer))throw new Error("Resource '"+this.$resKey+"' is not a proper binary resource, please load it as binary format by calling yourLoader.add(name, url, { loadType:PIXI.loaders.Resource.LOAD_TYPE.XHR, xhrType: PIXI.loaders.Resource.XHR_RESPONSE_TYPE.BUFFER })");this.decompressPackage(o.data);var s=this.getResDescriptor("sprites.bytes");s&&s.split(i.sep1).forEach(function(t,r){if(r>=1&&t&&t.length){var o=t.split(i.sep2),s=void 0,a=o[0],h=parseInt(o[1]);if(h>=0)s="atlas"+h;else{var l=a.indexOf("_");s=-1==l?"atlas_"+a:"atlas_"+a.substr(0,l)}var u=new e(s);u.frame=new c.Rectangle(parseInt(o[2]),parseInt(o[3]),parseInt(o[4]),parseInt(o[5])),n.$atlasConfigs[a]=u}}),s=this.getResDescriptor("package.xml");var a=t.utils.XmlParser.tryParse(s);this.$id=a.attributes.id,this.$name=a.attributes.name;var h=a.children[0].children;this.$itemsById={},this.$itemsByName={},h.forEach(function(e){var r=new t.PackageItem;if(r.type=t.ParsePackageItemType(e.nodeName),r.id=e.attributes.id,r.name=e.attributes.name,r.file=e.attributes.file,s=e.attributes.size){var o=s.split(i.sep0);r.width=parseInt(o[0]),r.height=parseInt(o[1])}switch(r.type){case 0:if("9grid"==(s=e.attributes.scale)){if(r.scale9Grid=new c.Rectangle,s=e.attributes.scale9grid){o=s.split(i.sep0);r.scale9Grid.x=parseInt(o[0]),r.scale9Grid.y=parseInt(o[1]),r.scale9Grid.width=parseInt(o[2]),r.scale9Grid.height=parseInt(o[3]),(s=e.attributes.gridTile)&&(r.tiledSlices=parseInt(s))}}else"tile"==s&&(r.scaleByTile=!0)}r.owner=n,n.$items.push(r),n.$itemsById[r.id]=r,null!=r.name&&(n.$itemsByName[r.name]=r)},this),this.$items.forEach(function(t){6==t.type&&(n.loadFont(t),i.$bitmapFonts[t.bitmapFont.id]=t.bitmapFont)},this)},i.prototype.decompressPackage=function(e){this.$resData={};for(var i,r,n=new p.RawInflate(e).decompress(),o=t.utils.RawByte.decodeUTF8(n),s=0;;){var a=o.indexOf("|",s);if(-1==a)break;i=o.substring(s,a),s=a+1,a=o.indexOf("|",s),r=parseInt(o.substring(s,a)),s=a+1,this.$resData[i]=o.substr(s,r),s+=r}},i.prototype.dispose=function(){var e=this;this.$items.forEach(function(r){var n=r.texture;null!=n?(n.destroy(),c.Texture.removeFromCache(n)):null!=r.frames?r.frames.forEach(function(t){(n=t.texture)&&(n.destroy(),c.Texture.removeFromCache(n))}):null!=r.bitmapFont&&delete i.$bitmapFonts[r.bitmapFont.id];var o=e.$atlasConfigs[r.id];o&&t.utils.AssetLoader.destroyResource(e.$resKey+"@"+o.atlasName)},this),t.utils.AssetLoader.destroyResource(""+this.$resKey)},Object.defineProperty(i.prototype,"id",{get:function(){return this.$id},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"name",{get:function(){return this.$name},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"customId",{get:function(){return this.$customId},set:function(t){null!=this.$customId&&delete i.$packageInstById[this.$customId],this.$customId=t,null!=this.$customId&&(i.$packageInstById[this.$customId]=this)},enumerable:!0,configurable:!0}),i.prototype.createObject=function(t,e){var i=this.$itemsByName[t];return i?this.internalCreateObject(i,e):null},i.prototype.internalCreateObject=function(e,r){void 0===r&&(r=null);var n=4==e.type&&null!=r?new r:t.UIObjectFactory.newObject(e);return null==n?null:(i.$constructingObjects++,n.packageItem=e,n.constructFromResource(),i.$constructingObjects--,n)},i.prototype.getItemById=function(t){return this.$itemsById[t]},i.prototype.getItemByName=function(t){return this.$itemsByName[t]},i.prototype.getItemAssetByName=function(t){var e=this.$itemsByName[t];if(null==e)throw new Error("Resource '"+t+"' not found");return this.getItemAsset(e)},i.prototype.createSpriteTexture=function(t,e){var i=this.$itemsById[e.atlasName];if(null!=i){var r=this.getItemAsset(i);if(!r||!r.baseTexture)return null;e.texCacheID||(e.texCacheID=this.$resKey+"@"+e.atlasName+"@"+t);var n=c.utils.TextureCache[e.texCacheID];return n||(n=new c.Texture(r.baseTexture,e.frame,e.orig,e.trim,e.rotate),c.Texture.addToCache(n,e.texCacheID)),n}return null},i.prototype.getItemAsset=function(e){switch(e.type){case 0:if(!e.decoded){e.decoded=!0;var i=this.$atlasConfigs[e.id];null!=i&&(e.texture=this.createSpriteTexture(e.id,i))}return e.texture;case 7:if(!e.decoded){e.decoded=!0;var r=null!=e.file&&e.file.length>0?e.file:e.id+".png",n=this.$resKey+"@"+t.utils.StringUtil.getFileName(r),o=t.utils.AssetLoader.resourcesPool[n];if(!o)throw new Error(n+" not found in fgui.utils.AssetLoader.resourcesPool, please use new AssetLoader() to load assets instead of using new PIXI.loaders.Loader(). besides, AssetLoader is a sub-class from PIXI.loaders.Loader so they have the same usage.");e.texture=o.texture,e.texture||(o=t.utils.AssetLoader.resourcesPool[this.$resKey+"@"+r.replace(".","_")],e.texture=o.texture)}return e.texture;case 3:return e.decoded=!1,null;case 6:return e.decoded||(e.decoded=!0,this.loadFont(e)),e.bitmapFont;case 2:return e.decoded||(e.decoded=!0,this.loadMovieClip(e)),e.frames;case 4:if(!e.decoded){e.decoded=!0;var s=this.getResDescriptor(e.id+".xml"),a=t.utils.XmlParser.tryParse(s);e.componentData=a,this.loadComponentChildren(e),this.loadComponentTranslation(e)}return e.componentData;default:return t.utils.AssetLoader.resourcesPool[this.$resKey+"@"+e.id]}},i.prototype.loadComponentChildren=function(e){var r=t.utils.XmlParser.getChildNodes(e.componentData,"displayList");null!=r&&r.length>0?(e.displayList=[],r[0].children.forEach(function(r){var n,o=r.nodeName,s=r.attributes.src;if(s){var a=r.attributes.pkg,h=void 0,l=null!=(h=a&&a!=e.owner.id?i.getById(a):e.owner)?h.getItemById(s):null;n=null!=l?new t.DisplayListItem(l,null):new t.DisplayListItem(null,o)}else n="text"==o&&"true"==r.attributes.input?new t.DisplayListItem(null,"inputtext"):new t.DisplayListItem(null,o);n.desc=r,e.displayList.push(n)})):e.displayList=[]},i.prototype.getResDescriptor=function(t){return this.$resData[t]},i.prototype.loadComponentTranslation=function(e){if(null!=i.$stringsSource){var r,n,o,s,a,h=i.$stringsSource[this.id+e.id];if(null!=h)e.displayList.forEach(function(e){n=e.desc,s=n.nodeName,a=n.attributes.id,n.attributes.tooltips&&null!=(r=h[a+"-tips"])&&(n.attributes.tooltips=r);var i=t.utils.XmlParser.getChildNodes(n,"gearText");if((o=i&&i[0])&&(null!=(r=h[a+"-texts"])&&(o.attributes.values=r),null!=(r=h[a+"-texts_def"])&&(o.attributes.default=r)),"text"==s||"richtext"==s)null!=(r=h[a])&&(n.attributes.text=r),null!=(r=h[a+"-prompt"])&&(n.attributes.prompt=r);else if("list"==s)n.children.forEach(function(t,e){"item"==t.nodeName&&null!=(r=h[a+"-"+e])&&(t.attributes.title=r)});else if("component"==s){if(i=t.utils.XmlParser.getChildNodes(n,"Button"),o=i&&i[0])return null!=(r=h[a])&&(o.attributes.title=r),void(null!=(r=h[a+"-0"])&&(o.attributes.selectedTitle=r));if(i=t.utils.XmlParser.getChildNodes(n,"Label"),o=i&&i[0])return void(null!=(r=h[a])&&(o.attributes.title=r));if(i=t.utils.XmlParser.getChildNodes(n,"ComboBox"),o=i&&i[0])return null!=(r=h[a])&&(o.attributes.title=r),void o.children.forEach(function(t,e){"item"==t.nodeName&&null!=(r=h[a+"-"+e])&&(t.attributes.title=r)})}})}},i.prototype.loadMovieClip=function(e){var r,n=this,o=t.utils.XmlParser.tryParse(this.getResDescriptor(e.id+".xml"));null!=(r=o.attributes.interval)&&(e.interval=parseInt(r)),null!=(r=o.attributes.swing)&&(e.swing="true"==r),null!=(r=o.attributes.repeatDelay)&&(e.repeatDelay=parseInt(r)),e.frames=[],o.children[0].children.forEach(function(o,s){var a=new t.Frame,h=(r=o.attributes.rect).split(i.sep0),l=new c.Rectangle(parseInt(h[0]),parseInt(h[1]),parseInt(h[2]),parseInt(h[3]));if((r=o.attributes.addDelay)&&(a.addDelay=parseInt(r)),e.frames.push(a),!(l.width<=0)){r=(r=o.attributes.sprite)?e.id+"_"+r:e.id+"_"+s;var u=n.$atlasConfigs[r];null!=u&&(u.trim=l,a.texture=n.createSpriteTexture(r,u))}})},i.prototype.loadFont=function(e){var r=this,n=new t.BitmapFont;n.id="ui://"+this.id+e.id;var o,s,a=this.getResDescriptor(e.id+".fnt"),h=a.split(i.sep1),l={},u=!1,d=0,p=0,f=!1,g=!1,y=0,v=0,m=0,b=0;h.forEach(function(h){if(h&&h.length){var $=(a=t.utils.StringUtil.trim(h)).split(i.sep2);if($.forEach(function(t){var e=t.split(i.sep3);l[e[0]]=e[1]}),"char"==(a=$[0])){var w=new t.BMGlyph;w.x=parseInt(l.x)||0,w.y=parseInt(l.y)||0,w.offsetX=parseInt(l.xoffset)||0,w.offsetY=parseInt(l.yoffset)||0,w.width=parseInt(l.width)||0,w.height=parseInt(l.height)||0,b=Math.max(w.height,b),w.advance=parseInt(l.xadvance)||0,null!=l.chnl&&(w.channel=parseInt(l.chnl),15==w.channel?w.channel=4:1==w.channel?w.channel=3:2==w.channel?w.channel=2:w.channel=1),u?null!=s&&(w.texture=new c.Texture(s.baseTexture,new c.Rectangle(w.x+y,w.y+v,w.width,w.height))):l.img&&null!=(o=r.$itemsById[l.img])&&(o.load(),w.width=o.width,w.height=o.height,w.texture=o.texture),u?w.lineHeight=m:(0==w.advance&&(w.advance=0==p?w.offsetX+w.width:p),w.lineHeight=w.offsetY<0?w.height:w.offsetY+w.height,d>0&&w.lineHeight<d&&(w.lineHeight=d)),n.glyphs[String.fromCharCode(0|+l.id)]=w}else if("info"==a){if(u=null!=l.face,l.size&&(d=parseInt(l.size)),f="true"==l.resizable,g="true"==l.colored,u){var x=r.$atlasConfigs[e.id];if(null!=x){y=x.frame.x,v=x.frame.y;var _=r.$itemsById[x.atlasName];null!=_&&(s=r.getItemAsset(_))}}}else"common"==a&&(l.lineHeight&&(m=parseInt(l.lineHeight)),0==d?d=m:0==m&&(m=d),l.xadvance&&(p=parseInt(l.xadvance)))}}),0==d&&b>0&&(d=b),n.ttf=u,n.size=d,n.resizable=f,n.colorable=g,e.bitmapFont=n},i.$constructingObjects=0,i.$packageInstById={},i.$packageInstByName={},i.$bitmapFonts={},i.$stringsSource=null,i.sep0=",",i.sep1="\n",i.sep2=" ",i.sep3="=",i}();t.UIPackage=i}(l||(l={})),function(t){!function(t){var e=function(t){function e(e,i){return t.call(this,e,i)||this}return y(e,t),e.prototype._onComplete=function(){e.addResources(this.resources),t.prototype._onComplete.call(this)},Object.defineProperty(e,"resourcesPool",{get:function(){return e.$resources},enumerable:!0,configurable:!0}),e.destroyResource=function(t){var i=e.$resources[t];i&&(i.isComplete||i.abort(),i.children=null,i.data=null,i.texture&&i.texture.destroy(),i.textures=null,i.xhr=null,e.$resources[t]=null,delete e.$resources[t])},e.addResources=function(t){if(t)for(var i in t)e.$resources[i]=t[i]},e.$resources={},e}(c.loaders.Loader);t.AssetLoader=e}(t.utils||(t.utils={}))}(l||(l={})),function(t){!function(t){var e=function(){function t(){}return t.create=function(t,e){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];return e?function(){var r=arguments.length>0?[].concat(Array.prototype.slice.call(arguments)).concat(i):[].concat(i);t.apply(e,r)}:t},t}();t.Binder=e}(t.utils||(t.utils={}))}(l||(l={})),function(t){!function(t){var e=function(){function t(t,e,i,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),this._raw=[],this.h=0,this.s=0,this.c=0,this.b=0,this.setColor(t,e,i,r)}return Object.defineProperty(t.prototype,"hue",{get:function(){return this.h},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"brightness",{get:function(){return this.b},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contrast",{get:function(){return this.c},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"saturation",{get:function(){return this.s},enumerable:!0,configurable:!0}),t.prototype.setColor=function(t,e,i,r){return this.reset().adjustColor(t,e,i,r)},t.prototype.reset=function(){return this.copy(t.IDENTITY_MATRIX)},t.prototype.adjustColor=function(t,e,i,r){return this.adjustHue(r),this.adjustContrast(e),this.adjustBrightness(t),this.adjustSaturation(i)},t.prototype.adjustBrightness=function(t){return 0==t||isNaN(t)?this:(this.b=t,t=this._cleanValue(t,255),this._multiplyMatrix([1,0,0,0,t,0,1,0,0,t,0,0,1,0,t,0,0,0,1,0,0,0,0,0,1]),this)},t.prototype.adjustContrast=function(e){if(0==e||isNaN(e))return this;var i;this.c=e;return i=(e=this._cleanValue(e,100))<0?1+e/100*1:1*(i=0==(i=e%1)?t.DELTA_INDEX[e]:t.DELTA_INDEX[e<<0]*(1-i)+t.DELTA_INDEX[1+(e<<0)]*i)+1,this._multiplyMatrix([i/1,0,0,0,.5*(1-i),0,i/1,0,0,.5*(1-i),0,0,i/1,0,.5*(1-i),0,0,0,1,0,0,0,0,0,1]),this},t.prototype.adjustSaturation=function(t){if(0==t||isNaN(t))return this;this.s=t;var e=1+((t=this._cleanValue(t,100))>0?3*t/100:t/100);return this._multiplyMatrix([.3086*(1-e)+e,.6094*(1-e),.082*(1-e),0,0,.3086*(1-e),.6094*(1-e)+e,.082*(1-e),0,0,.3086*(1-e),.6094*(1-e),.082*(1-e)+e,0,0,0,0,0,1,0,0,0,0,0,1]),this},t.prototype.adjustHue=function(t){if(0==t||isNaN(t))return this;this.h=t,t=this._cleanValue(t,180)/180*Math.PI;var e=Math.cos(t),i=Math.sin(t);return this._multiplyMatrix([.213+.787*e+-.213*i,.715+-.715*e+-.715*i,.072+-.072*e+.928*i,0,0,.213+-.213*e+.143*i,.715+e*(1-.715)+.14*i,.072+-.072*e+-.283*i,0,0,.213+-.213*e+-.787*i,.715+-.715*e+.715*i,.072+.928*e+.072*i,0,0,0,0,0,1,0,0,0,0,0,1]),this},t.prototype.concat=function(e){return(e=this._fixMatrix(e)).length!=t.LENGTH?this:(this._multiplyMatrix(e),this)},t.prototype.clone=function(){return(new t).copy(this._raw)},t.prototype.toArray=function(){for(var e=[],i=0,r=t.LENGTH;i<r;i++)e[i]=this._raw[i];return e},t.prototype.copy=function(e){for(var i=t.LENGTH,r=0;r<i;r++)this._raw[r]=e[r];return this},t.prototype._multiplyMatrix=function(t){var e,i,r,n=[];for(e=0;e<5;e++){for(i=0;i<5;i++)n[i]=this._raw[i+5*e];for(i=0;i<5;i++){var o=0;for(r=0;r<5;r++)o+=t[i+5*r]*n[r];this._raw[i+5*e]=o}}},t.prototype._cleanValue=function(t,e){return Math.min(e,Math.max(-e,t))},t.prototype._fixMatrix=function(e){return e instanceof t&&(e=e.toArray()),e.length<t.LENGTH?e=e.slice(0,e.length).concat(t.IDENTITY_MATRIX.slice(e.length,t.LENGTH)):e.length>t.LENGTH&&(e=e.slice(0,t.LENGTH)),e},t.DELTA_INDEX=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],t.IDENTITY_MATRIX=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],t.LENGTH=t.IDENTITY_MATRIX.length,t}();t.ColorMatrix=e}(t.utils||(t.utils={}))}(l||(l={})),function(t){!function(e){var i=function(){function e(){this.$agent=new t.GLoader,this.$agent.draggable=!0,this.$agent.touchable=!1,this.$agent.setSize(100,100),this.$agent.setPivot(.5,.5,!0),this.$agent.align="center",this.$agent.verticalAlign=1,this.$agent.sortingOrder=1e6,this.$agent.on("__dragEnd",this.$dragEnd,this)}return Object.defineProperty(e.prototype,"dragAgent",{get:function(){return this.$agent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDragging",{get:function(){return null!=this.$agent.parent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sourceObject",{get:function(){return this.$sourceObject},enumerable:!0,configurable:!0}),e.prototype.startDrag=function(e,i,r,n){if(void 0===n&&(n=-1),!this.isDragging){this.$sourceObject=e,this.$sourceData=r,this.$agent.url=i,t.GRoot.inst.addChild(this.$agent);var o=t.GRoot.inst.globalToLocal(t.GRoot.statusData.mouseX,t.GRoot.statusData.mouseY);this.$agent.setXY(o.x,o.y),this.$agent.startDrag(n)}},e.prototype.cancel=function(){null!=this.$agent.parent&&(this.$agent.stopDrag(),t.GRoot.inst.removeChild(this.$agent),this.$sourceData=null)},e.prototype.$dragEnd=function(e){if(this.isDragging){t.GRoot.inst.removeChild(this.$agent);var i=this.$sourceData;this.$sourceData=null;for(var r=t.GRoot.inst.getObjectUnderPoint(e.data.global.x,e.data.global.y);null!=r;){if(r.hasListener("__dragDrop"))return r.requestFocus(),e.currentTarget=r.displayObject,void r.emit("__dragDrop",e,i);r=r.parent}}},e}();e.DragIndicator=i}(t.utils||(t.utils={}))}(l||(l={})),function(t){!function(e){var i=function(){function e(e){this.$inited=!1,this.$restrictString=null,this.$restrictRegex=null,this.$focused=!1,this.$textField=e,this.$input=new t.InputElement(e)}return e.prototype.initialize=function(){this.$inited||(this.$input.$addToStage(),this.$input.on("updateText",this.updateText,this),this.$input.on("__focusChanged",this.focusHandler,this),this.$textField.on(t.InteractiveEvents.Down,this.textFieldDownHandler,this),this.$inited=!0)},e.prototype.textFieldDownHandler=function(){this.$onFocus()},e.prototype.destroy=function(){this.$inited&&(this.$input.$removeFromStage(),this.$textField.off(t.InteractiveEvents.Down,this.textFieldDownHandler,this),t.GRoot.inst.off(t.InteractiveEvents.Down,this.onStageDown,this),this.$input.off("updateText",this.updateText,this),this.$input.off("__focusChanged",this.focusHandler,this),this.$inited=!1)},Object.defineProperty(e.prototype,"text",{get:function(){return this.$input.text},set:function(t){this.$input.text=t},enumerable:!0,configurable:!0}),e.prototype.setColor=function(t){return this.$input.setColor(t)},e.prototype.updateText=function(){var t=this.$input.text,e=!1;if(null!=this.$restrictRegex){var i=t.match(this.$restrictRegex);t=i?i.join(""):"",e=!0}e&&this.$input.text!=t&&(this.$input.text=t),this.$textField.text=this.$input.text,this.$textField.emit("__textChange",this.$textField)},e.prototype.onStageDown=function(e){t.GObject.castFromNativeObject(e.currentTarget)!=this.$textField&&this.$input.$hide()},e.prototype.focusHandler=function(e){"focus"==e?this.$focused||(this.$focused=!0,this.$textField.$isTyping=!0,this.$textField.alpha=0,this.$textField.emit("__focusChanged","focus",this.$textField)):"blur"==e&&this.$focused&&(this.$focused=!1,t.GRoot.inst.off(t.InteractiveEvents.Down,this.onStageDown,this),this.$textField.$isTyping=!1,this.$textField.alpha=1,this.$input.$onBlur(),this.$textField.emit("__focusChanged","blur",this.$textField))},Object.defineProperty(e.prototype,"isFocused",{get:function(){return this.$focused},enumerable:!0,configurable:!0}),e.prototype.$getProperty=function(t){return this.$inited&&this.$input.getAttribute(t)||null},e.prototype.$setProperty=function(t,e){this.$inited&&this.$input.setAttribute(t,e)},Object.defineProperty(e.prototype,"$restrict",{get:function(){return this.$restrictString},set:function(t){this.$restrictString=t,null!=this.$restrictString&&this.$restrictString.length>0?this.$restrictRegex=new RegExp(this.$restrictString):this.$restrictRegex=null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this.$type},set:function(t){t!=this.$type&&(this.$type=t)},enumerable:!0,configurable:!0}),e.prototype.tryHideInput=function(){!this.$textField.visible&&this.$input&&this.$input.$removeFromStage()},e.prototype.$updateProperties=function(){if(this.isFocused)return this.$input.resetInput(),void this.tryHideInput();this.$input.text=this.$textField.text,this.$input.resetInput(),this.tryHideInput()},e.prototype.$onFocus=function(){var e=this;this.$textField.visible&&!this.$focused&&(t.GRoot.inst.off(t.InteractiveEvents.Down,this.onStageDown,this),t.GTimer.inst.callLater(function(){t.GRoot.inst.on(t.InteractiveEvents.Down,e.onStageDown,e)},this),this.$input.$show())},e}();e.InputDelegate=i}(t.utils||(t.utils={}))}(l||(l={})),function(t){!function(t){var e=function(){function t(){this.left=0,this.right=0,this.top=0,this.bottom=0}return t.prototype.parse=function(t){if(t){var e=t.split(",");if(1==e.length){var i=parseInt(e[0]);this.left=this.right=this.top=this.bottom=i}else this.top=parseInt(e[0]),this.bottom=parseInt(e[1]),this.left=parseInt(e[2]),this.right=parseInt(e[3])}else this.left=this.right=this.top=this.bottom=0},t.prototype.copy=function(t){this.top=t.top,this.bottom=t.bottom,this.left=t.left,this.right=t.right},t}();t.Margin=e}(t.utils||(t.utils={}))}(l||(l={})),function(t){!function(t){var e=function(){function t(){}return t.clamp=function(t,e,i){return t<e?t=e:t>i&&(t=i),t},t.clamp01=function(t){return t>1?t=1:t<0&&(t=0),t},t.isNumber=function(t){return"number"==typeof t&&!isNaN(t)},t.sign=function(t){return 0===(t=Number(t))||isNaN(t)?t:t>0?1:-1},t.angleToRadian=function(e){return e*t.RADIAN},t.RADIAN=Math.PI/180,t}();t.NumberUtil=e}(t.utils||(t.utils={}))}(l||(l={})),function(t){!function(t){var e=function(){function t(){}return t.inRange=function(t,e,i){return e<=t&&t<=i},t.decodeUTF8=function(e){for(var i,r=0,n="",o=0,s=0,a=0,h=0;e.length>r;){var l=e[r++];if(-1==l)i=0!=s?65533:-1;else if(0==s)t.inRange(l,0,127)?i=l:(t.inRange(l,194,223)?(s=1,h=128,o=l-192):t.inRange(l,224,239)?(s=2,h=2048,o=l-224):t.inRange(l,240,244)&&(s=3,h=65536,o=l-240),o*=Math.pow(64,s),i=null);else if(t.inRange(l,128,191))if(a+=1,o+=(l-128)*Math.pow(64,s-a),a!==s)i=null;else{var u=o,c=h;o=0,s=0,a=0,h=0,i=t.inRange(u,c,1114111)&&!this.inRange(u,55296,57343)?u:l}else o=0,s=0,a=0,h=0,r--,i=65533;null!==i&&-1!==i&&(i<=65535?i>0&&(n+=String.fromCharCode(i)):(i-=65536,n+=String.fromCharCode(55296+(i>>10&1023)),n+=String.fromCharCode(56320+(1023&i))))}return n},t}();t.RawByte=e}(t.utils||(t.utils={}))}(l||(l={})),function(t){!function(t){var e=function(){function t(){}return t.encodeHTML=function(t){return t?t.replace("&","&amp;").replace("<","&lt;").replace(">","&gt;").replace("'","&apos;"):""},t.getFileName=function(t){var e=t.lastIndexOf("/");return-1!=e&&(t=t.substr(e+1)),-1!=(e=t.lastIndexOf("\\"))&&(t=t.substr(e+1)),-1!=(e=t.lastIndexOf("."))?t.substring(0,e):t},t.startsWith=function(t,e,i){return void 0===i&&(i=!1),!!t&&(!(t.length<e.length)&&(t=t.substring(0,e.length),i?t.toLowerCase()==e.toLowerCase():t==e))},t.endsWith=function(t,e,i){return void 0===i&&(i=!1),!!t&&(!(t.length<e.length)&&(t=t.substring(t.length-e.length),i?t.toLowerCase()==e.toLowerCase():t==e))},t.trim=function(e){return t.trimLeft(t.trimRight(e))},t.trimLeft=function(t){var e,i="";for(e=0;e<t.length&&(" "==(i=t.charAt(e))||"\n"==i||"\r"==i);e++);return t.substr(e)},t.trimRight=function(t){var e,i="";for(e=t.length-1;e>=0&&(" "==(i=t.charAt(e))||"\n"==i||"\r"==i);e--);return t.substring(0,e+1)},t.convertToHtmlColor=function(t,e){var i;void 0===e&&(e=!1),i=e?(t>>24&255).toString(16):"";var r=(t>>16&255).toString(16),n=(t>>8&255).toString(16),o=(255&t).toString(16);return 1==i.length&&(i="0"+i),1==r.length&&(r="0"+r),1==n.length&&(n="0"+n),1==o.length&&(o="0"+o),"#"+i+r+n+o},t.convertFromHtmlColor=function(t,e){return void 0===e&&(e=!1),t.length<1?0:("#"==t.charAt(0)&&(t=t.substr(1)),8==t.length?(parseInt(t.substr(0,2),16)<<24)+parseInt(t.substr(2),16):e?4278190080+parseInt(t,16):parseInt(t,16))},t}();t.StringUtil=e}(t.utils||(t.utils={}))}(l||(l={})),function(t){!function(t){var e=function(){function t(){this.$readPos=0,this.smallFontSize=12,this.normalFontSize=14,this.largeFontSize=16,this.defaultImgWidth=0,this.defaultImgHeight=0,this.$handlers={url:this.onTag_URL,img:this.onTag_IMG,b:this.onTag_Simple,i:this.onTag_Simple,u:this.onTag_Simple,sup:this.onTag_Simple,sub:this.onTag_Simple,color:this.onTag_COLOR,font:this.onTag_FONT,size:this.onTag_SIZE}}return t.prototype.onTag_URL=function(t,e,i){return e?"</a>":null!=i?'<a href="'+i+'" target="_blank">':'<a href="'+this.getTagText()+'" target="_blank">'},t.prototype.onTag_IMG=function(t,e,i){if(e)return null;var r=this.getTagText(!0);return r?this.defaultImgWidth?'<img src="'+r+'" width="'+this.defaultImgWidth+'" height="'+this.defaultImgHeight+'"/>':'<img src="'+r+'"/>':null},t.prototype.onTag_Simple=function(t,e,i){return e?"</"+t+">":"<"+t+">"},t.prototype.onTag_COLOR=function(t,e,i){return e?"</font>":'<font color="'+i+'">'},t.prototype.onTag_FONT=function(t,e,i){return e?"</font>":'<font face="'+i+'">'},t.prototype.onTag_SIZE=function(t,e,i){return e?"</font>":("normal"==i?i=""+this.normalFontSize:"small"==i?i=""+this.smallFontSize:"large"==i?i=""+this.largeFontSize:i.length&&"+"==i.charAt(0)?i=""+(this.smallFontSize+parseInt(i.substr(1))):i.length&&"-"==i.charAt(0)&&(i=""+(this.smallFontSize-parseInt(i.substr(1)))),'<font size="'+i+'">')},t.prototype.getTagText=function(t){void 0===t&&(t=!1);var e=this.$text.indexOf("[",this.$readPos);if(-1==e)return null;var i=this.$text.substring(this.$readPos,e);return t&&(this.$readPos=e),i},t.prototype.parseStyle=function(t){return[]},t.inst=new t,t}();t.UBBParser=e}(t.utils||(t.utils={}))}(l||(l={})),function(t){!function(t){var e=function(){function t(t){this.nodeName=t.nodeName,this.context=t,this.type=t.nodeType,this.text=this.type==g.COMMENT_NODE||this.type==g.TEXT_NODE?this.context.textContent:null}return Object.defineProperty(t.prototype,"children",{get:function(){return this.$children||(this.$children=i.getChildNodes(this)),this.$children},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){return this.$attributes||(this.$attributes=i.getNodeAttributes(this)),this.$attributes},enumerable:!0,configurable:!0}),t}();t.XmlNode=e;var i=function(){function t(){}return t.tryParse=function(i,r){void 0===r&&(r="application/xml");var n=t.$parser.parseFromString(i,r);return n&&n.childNodes&&n.childNodes.length>=1?new e(n.firstChild):null},t.getXmlRoot=function(t){if(!t||!t.context)throw new Error("Invalid xml node");for(var i=t.context;null!=i.parentNode;)i=i.parentNode;return i==t.context?t:new e(i)},t.getChildNodes=function(t,i){void 0===i&&(i=null);var r=t.context.childNodes,n=[];if(!r||r.length<=0)return n;for(var o=r.length,s=0;s<o;s++){var a=r.item(s);a.nodeType!=g.TEXT_NODE&&((!i||i&&i.length>0&&a.nodeName.toLowerCase()==i.toLowerCase())&&n.push(new e(a)))}return n},t.getNodeAttributes=function(t){var e=t.context.attributes,i={};if(!e||e.length<=0)return i;for(var r=e.length,n=0;n<r;n++){var o=e.item(n);i[o.nodeName]=o.nodeValue}return i},t.$parser=new u,t}();t.XmlParser=i}(t.utils||(t.utils={}))}(l||(l={})),i.d(e,"a",function(){return l}),console.log(l)},function(t,e,i){"use strict";e.__esModule=!0;var r=i(2),n=h(i(3)),o=h(i(8)),s=h(i(53)),a=h(i(32));function h(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(i,o,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return a.uid=(0,r.uid)(),a.touched=0,a.resolution=s||n.default.RESOLUTION,a.width=100,a.height=100,a.realWidth=100,a.realHeight=100,a.scaleMode=void 0!==o?o:n.default.SCALE_MODE,a.hasLoaded=!1,a.isLoading=!1,a.source=null,a.origSource=null,a.imageType=null,a.sourceScale=1,a.premultipliedAlpha=!0,a.imageUrl=null,a.isPowerOfTwo=!1,a.mipmap=n.default.MIPMAP_TEXTURES,a.wrapMode=n.default.WRAP_MODE,a._glTextures={},a._enabled=0,a._virtalBoundId=-1,a._destroyed=!1,a.textureCacheIds=[],i&&a.loadSource(i),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.update=function(){"svg"!==this.imageType&&(this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this._updateDimensions()),this.emit("update",this)},e.prototype._updateDimensions=function(){this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=a.default.isPow2(this.realWidth)&&a.default.isPow2(this.realHeight)},e.prototype.loadSource=function(t){var e=this.isLoading;this.hasLoaded=!1,this.isLoading=!1,e&&this.source&&(this.source.onload=null,this.source.onerror=null);var i=!this.source;if(this.source=t,(t.src&&t.complete||t.getContext)&&t.width&&t.height)this._updateImageType(),"svg"===this.imageType?this._loadSvgSource():this._sourceLoaded(),i&&this.emit("loaded",this);else if(!t.getContext){this.isLoading=!0;var r=this;if(t.onload=function(){r._updateImageType(),t.onload=null,t.onerror=null,r.isLoading&&(r.isLoading=!1,r._sourceLoaded(),"svg"!==r.imageType?r.emit("loaded",r):r._loadSvgSource())},t.onerror=function(){t.onload=null,t.onerror=null,r.isLoading&&(r.isLoading=!1,r.emit("error",r))},t.complete&&t.src){if(t.onload=null,t.onerror=null,"svg"===r.imageType)return void r._loadSvgSource();this.isLoading=!1,t.width&&t.height?(this._sourceLoaded(),e&&this.emit("loaded",this)):e&&this.emit("error",this)}}},e.prototype._updateImageType=function(){if(this.imageUrl){var t=(0,r.decomposeDataUri)(this.imageUrl),e=void 0;if(t&&"image"===t.mediaType){var i=t.subType.split("+")[0];if(!(e=(0,r.getUrlFileExtension)("."+i)))throw new Error("Invalid image type in data URI.")}else(e=(0,r.getUrlFileExtension)(this.imageUrl))||(e="png");this.imageType=e}},e.prototype._loadSvgSource=function(){if("svg"===this.imageType){var t=(0,r.decomposeDataUri)(this.imageUrl);t?this._loadSvgSourceUsingDataUri(t):this._loadSvgSourceUsingXhr()}},e.prototype._loadSvgSourceUsingDataUri=function(t){var e=void 0;if("base64"===t.encoding){if(!atob)throw new Error("Your browser doesn't support base64 conversions.");e=atob(t.data)}else e=t.data;this._loadSvgSourceUsingString(e)},e.prototype._loadSvgSourceUsingXhr=function(){var t=this,e=new XMLHttpRequest;e.onload=function(){if(e.readyState!==e.DONE||200!==e.status)throw new Error("Failed to load SVG using XHR.");t._loadSvgSourceUsingString(e.response)},e.onerror=function(){return t.emit("error",t)},e.open("GET",this.imageUrl,!0),e.send()},e.prototype._loadSvgSourceUsingString=function(t){var i=(0,r.getSvgSize)(t),n=i.width,o=i.height;if(!n||!o)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");this.realWidth=Math.round(n*this.sourceScale),this.realHeight=Math.round(o*this.sourceScale),this._updateDimensions();var s=document.createElement("canvas");s.width=this.realWidth,s.height=this.realHeight,s._pixiId="canvas_"+(0,r.uid)(),s.getContext("2d").drawImage(this.source,0,0,n,o,0,0,this.realWidth,this.realHeight),this.origSource=this.source,this.source=s,e.addToCache(this,s._pixiId),this.isLoading=!1,this._sourceLoaded(),this.emit("loaded",this)},e.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},e.prototype.destroy=function(){this.imageUrl&&(delete r.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")),this.source=null,this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this._destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.updateSourceImage=function(t){this.source.src=t,this.loadSource(this.source)},e.fromImage=function(t,i,n,o){var a=r.BaseTextureCache[t];if(!a){var h=new Image;void 0===i&&0!==t.indexOf("data:")?h.crossOrigin=(0,s.default)(t):i&&(h.crossOrigin="string"==typeof i?i:"anonymous"),(a=new e(h,n)).imageUrl=t,o&&(a.sourceScale=o),a.resolution=(0,r.getResolutionOfUrl)(t),h.src=t,e.addToCache(a,t)}return a},e.fromCanvas=function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";t._pixiId||(t._pixiId=n+"_"+(0,r.uid)());var o=r.BaseTextureCache[t._pixiId];return o||(o=new e(t,i),e.addToCache(o,t._pixiId)),o},e.from=function(t,i,n){if("string"==typeof t)return e.fromImage(t,void 0,i,n);if(t instanceof HTMLImageElement){var o=t.src,s=r.BaseTextureCache[o];return s||((s=new e(t,i)).imageUrl=o,n&&(s.sourceScale=n),s.resolution=(0,r.getResolutionOfUrl)(o),e.addToCache(s,o)),s}return t instanceof HTMLCanvasElement?e.fromCanvas(t,i):t},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),r.BaseTextureCache[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),r.BaseTextureCache[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=r.BaseTextureCache[t];if(e){var i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete r.BaseTextureCache[t],e}}else if(t&&t.textureCacheIds){for(var n=0;n<t.textureCacheIds.length;++n)delete r.BaseTextureCache[t.textureCacheIds[n]];return t.textureCacheIds.length=0,t}return null},e}(o.default);e.default=l},function(t,e,i){"use strict";e.__esModule=!0;var r,n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=i(2),s=i(50);var a=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return i.children=[],i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onChildrenChange=function(){},e.prototype.addChild=function(t){var e=arguments.length;if(e>1)for(var i=0;i<e;i++)this.addChild(arguments[i]);else t.parent&&t.parent.removeChild(t),t.parent=this,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),t.emit("added",this);return t},e.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),t},e.prototype.swapChildren=function(t,e){if(t!==e){var i=this.getChildIndex(t),r=this.getChildIndex(e);this.children[i]=e,this.children[r]=t,this.onChildrenChange(i<r?i:r)}},e.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},e.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var i=this.getChildIndex(t);(0,o.removeItems)(this.children,i,1),this.children.splice(e,0,t),this.onChildrenChange(e)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(t){var e=arguments.length;if(e>1)for(var i=0;i<e;i++)this.removeChild(arguments[i]);else{var r=this.children.indexOf(t);if(-1===r)return null;t.parent=null,t.transform._parentID=-1,(0,o.removeItems)(this.children,r,1),this._boundsID++,this.onChildrenChange(r),t.emit("removed",this)}return t},e.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,(0,o.removeItems)(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),e},e.prototype.removeChildren=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1],i=t,r="number"==typeof e?e:this.children.length,n=r-i,o=void 0;if(n>0&&n<=r){o=this.children.splice(i,n);for(var s=0;s<o.length;++s)o[s].parent=null,o[s].transform&&(o[s].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(var a=0;a<o.length;++a)o[a].emit("removed",this);return o}if(0===n&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var i=this.children[t];i.visible&&i.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];e.visible&&e.renderable&&(e.calculateBounds(),e._mask?(e._mask.calculateBounds(),this._bounds.addBoundsMask(e._bounds,e._mask._bounds)):e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds))}this._lastBoundsID=this._boundsID},e.prototype._calculateBounds=function(){},e.prototype.renderWebGL=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this._filters)this.renderAdvancedWebGL(t);else{this._renderWebGL(t);for(var e=0,i=this.children.length;e<i;++e)this.children[e].renderWebGL(t)}},e.prototype.renderAdvancedWebGL=function(t){t.flush();var e=this._filters,i=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var r=0;r<e.length;r++)e[r].enabled&&this._enabledFilters.push(e[r]);this._enabledFilters.length&&t.filterManager.pushFilter(this,this._enabledFilters)}i&&t.maskManager.pushMask(this,this._mask),this._renderWebGL(t);for(var n=0,o=this.children.length;n<o;n++)this.children[n].renderWebGL(t);t.flush(),i&&t.maskManager.popMask(this,this._mask),e&&this._enabledFilters&&this._enabledFilters.length&&t.filterManager.popFilter()},e.prototype._renderWebGL=function(t){},e.prototype._renderCanvas=function(t){},e.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){this._mask&&t.maskManager.pushMask(this._mask),this._renderCanvas(t);for(var e=0,i=this.children.length;e<i;++e)this.children[e].renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},e.prototype.destroy=function(e){t.prototype.destroy.call(this);var i="boolean"==typeof e?e:e&&e.children,r=this.removeChildren(0,this.children.length);if(i)for(var n=0;n<r.length;++n)r[n].destroy(e)},n(e,[{key:"width",get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t}},{key:"height",get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t}}]),e}(((r=s)&&r.__esModule?r:{default:r}).default);e.default=a,a.prototype.containerUpdateTransform=a.prototype.updateTransform},function(t,e,i){"use strict";e.__esModule=!0;var r=u(i(57)),n=u(i(127)),o=u(i(59)),s=u(i(128)),a=i(2),h=i(0),l=u(i(3));function u(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function e(i,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"Canvas",i,r,o));return a.type=h.RENDERER_TYPE.CANVAS,a.rootContext=a.view.getContext("2d",{alpha:a.transparent}),a.context=a.rootContext,a.refresh=!0,a.maskManager=new n.default(a),a.smoothProperty="imageSmoothingEnabled",a.rootContext.imageSmoothingEnabled||(a.rootContext.webkitImageSmoothingEnabled?a.smoothProperty="webkitImageSmoothingEnabled":a.rootContext.mozImageSmoothingEnabled?a.smoothProperty="mozImageSmoothingEnabled":a.rootContext.oImageSmoothingEnabled?a.smoothProperty="oImageSmoothingEnabled":a.rootContext.msImageSmoothingEnabled&&(a.smoothProperty="msImageSmoothingEnabled")),a.initPlugins(),a.blendModes=(0,s.default)(),a._activeBlendMode=null,a.renderingToScreen=!1,a.resize(a.options.width,a.options.height),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.render=function(t,e,i,r,n){if(this.view){this.renderingToScreen=!e,this.emit("prerender");var s=this.resolution;e?((e=e.baseTexture||e)._canvasRenderTarget||(e._canvasRenderTarget=new o.default(e.width,e.height,e.resolution),e.source=e._canvasRenderTarget.canvas,e.valid=!0),this.context=e._canvasRenderTarget.context,this.resolution=e._canvasRenderTarget.resolution):this.context=this.rootContext;var a=this.context;if(e||(this._lastObjectRendered=t),!n){var l=t.parent,u=this._tempDisplayObjectParent.transform.worldTransform;r?(r.copy(u),this._tempDisplayObjectParent.transform._worldID=-1):u.identity(),t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=l}a.save(),a.setTransform(1,0,0,1,0,0),a.globalAlpha=1,this._activeBlendMode=h.BLEND_MODES.NORMAL,a.globalCompositeOperation=this.blendModes[h.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(a.fillStyle="black",a.clear()),(void 0!==i?i:this.clearBeforeRender)&&this.renderingToScreen&&(this.transparent?a.clearRect(0,0,this.width,this.height):(a.fillStyle=this._backgroundColorString,a.fillRect(0,0,this.width,this.height)));var c=this.context;this.context=a,t.renderCanvas(this),this.context=c,a.restore(),this.resolution=s,this.emit("postrender")}},e.prototype.clear=function(t){var e=this.context;t=t||this._backgroundColorString,!this.transparent&&t?(e.fillStyle=t,e.fillRect(0,0,this.width,this.height)):e.clearRect(0,0,this.width,this.height)},e.prototype.setBlendMode=function(t){this._activeBlendMode!==t&&(this._activeBlendMode=t,this.context.globalCompositeOperation=this.blendModes[t])},e.prototype.destroy=function(e){this.destroyPlugins(),t.prototype.destroy.call(this,e),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},e.prototype.resize=function(e,i){t.prototype.resize.call(this,e,i),this.smoothProperty&&(this.rootContext[this.smoothProperty]=l.default.SCALE_MODE===h.SCALE_MODES.LINEAR)},e.prototype.invalidateBlendMode=function(){this._activeBlendMode=this.blendModes.indexOf(this.context.globalCompositeOperation)},e}(r.default);e.default=c,a.pluginTarget.mixin(c)},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e,this.renderer.on("context",this.onContextChange,this)}return t.prototype.onContextChange=function(){},t.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null},t}();e.default=r},function(t,e,i){"use strict";e.__esModule=!0;var r,n=i(5),o=i(3),s=(r=o)&&r.__esModule?r:{default:r};function a(t,e){if(t instanceof Array){if("precision"!==t[0].substring(0,9)){var i=t.slice(0);return i.unshift("precision "+e+" float;"),i}}else if("precision"!==t.trim().substring(0,9))return"precision "+e+" float;\n"+t;return t}var h=function(t){function e(i,r,n,o,h){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,a(r,h||s.default.PRECISION_VERTEX),a(n,h||s.default.PRECISION_FRAGMENT),void 0,o))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(n.GLShader);e.default=h},function(t,e,i){"use strict";var r=i(181).Loader,n=i(36).Resource,o=i(84),s=i(85);r.Resource=n,r.async=o,r.encodeBinary=s,r.base64=s,t.exports=r,t.exports.Loader=r,t.exports.default=r},function(t,e,i){"use strict";e.__esModule=!0;var r,n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1)),s=i(7),a=(r=s)&&r.__esModule?r:{default:r};var h=new o.Point,l=new o.Polygon,u=function(t){function e(i,r,n,s,h){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var l=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return l._texture=i||a.default.EMPTY,l.uvs=n||new Float32Array([0,0,1,0,1,1,0,1]),l.vertices=r||new Float32Array([0,0,100,0,100,100,0,100]),l.indices=s||new Uint16Array([0,1,3,2]),l.dirty=0,l.indexDirty=0,l.vertexDirty=0,l.autoUpdate=!0,l.blendMode=o.BLEND_MODES.NORMAL,l.canvasPadding=o.settings.MESH_CANVAS_PADDING,l.drawMode=h||e.DRAW_MODES.TRIANGLE_MESH,l.shader=null,l.tintRgb=new Float32Array([1,1,1]),l._glDatas={},l._uvTransform=new o.TextureMatrix(l._texture),l.uploadUvTransform=!1,l.pluginName="mesh",l}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._renderWebGL=function(t){this.refresh(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._renderCanvas=function(t){this.refresh(),t.plugins[this.pluginName].render(this)},e.prototype._onTextureUpdate=function(){this._uvTransform.texture=this._texture,this.refresh()},e.prototype.multiplyUvs=function(){this.uploadUvTransform||this._uvTransform.multiplyUvs(this.uvs)},e.prototype.refresh=function(t){this.autoUpdate&&this.vertexDirty++,this._uvTransform.update(t)&&this._refresh()},e.prototype._refresh=function(){},e.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)},e.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,h);for(var i=this.vertices,r=l.points,n=this.indices,o=this.indices.length,s=this.drawMode===e.DRAW_MODES.TRIANGLES?3:1,a=0;a+2<o;a+=s){var u=2*n[a],c=2*n[a+1],d=2*n[a+2];if(r[0]=i[u],r[1]=i[u+1],r[2]=i[c],r[3]=i[c+1],r[4]=i[d],r[5]=i[d+1],l.contains(h.x,h.y))return!0}return!1},e.prototype.destroy=function(e){for(var i in this._glDatas){var r=this._glDatas[i];r.destroy?r.destroy():(r.vertexBuffer&&(r.vertexBuffer.destroy(),r.vertexBuffer=null),r.indexBuffer&&(r.indexBuffer.destroy(),r.indexBuffer=null),r.uvBuffer&&(r.uvBuffer.destroy(),r.uvBuffer=null),r.vao&&(r.vao.destroy(),r.vao=null))}this._glDatas=null,t.prototype.destroy.call(this,e)},n(e,[{key:"texture",get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}},{key:"tint",get:function(){return o.utils.rgb2hex(this.tintRgb)},set:function(t){this.tintRgb=o.utils.hex2rgb(t,this.tintRgb)}}]),e}(o.Container);e.default=u,u.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},function(t,e,i){"use strict";e.__esModule=!0;var r,n=i(2),o=i(60);var s={getTintedTexture:function(t,e){var i=t._texture,r="#"+("00000"+(0|(e=s.roundColor(e))).toString(16)).substr(-6);i.tintCache=i.tintCache||{};var n=i.tintCache[r],o=void 0;if(n){if(n.tintId===i._updateID)return i.tintCache[r];o=i.tintCache[r]}else o=s.canvas||document.createElement("canvas");if(s.tintMethod(i,e,o),o.tintId=i._updateID,s.convertTintToImage){var a=new Image;a.src=o.toDataURL(),i.tintCache[r]=a}else i.tintCache[r]=o,s.canvas=null;return o},tintWithMultiply:function(t,e,i){var r=i.getContext("2d"),n=t._frame.clone(),o=t.baseTexture.resolution;n.x*=o,n.y*=o,n.width*=o,n.height*=o,i.width=Math.ceil(n.width),i.height=Math.ceil(n.height),r.save(),r.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),r.fillRect(0,0,n.width,n.height),r.globalCompositeOperation="multiply",r.drawImage(t.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height),r.globalCompositeOperation="destination-atop",r.drawImage(t.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height),r.restore()},tintWithOverlay:function(t,e,i){var r=i.getContext("2d"),n=t._frame.clone(),o=t.baseTexture.resolution;n.x*=o,n.y*=o,n.width*=o,n.height*=o,i.width=Math.ceil(n.width),i.height=Math.ceil(n.height),r.save(),r.globalCompositeOperation="copy",r.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),r.fillRect(0,0,n.width,n.height),r.globalCompositeOperation="destination-atop",r.drawImage(t.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height),r.restore()},tintWithPerPixel:function(t,e,i){var r=i.getContext("2d"),o=t._frame.clone(),s=t.baseTexture.resolution;o.x*=s,o.y*=s,o.width*=s,o.height*=s,i.width=Math.ceil(o.width),i.height=Math.ceil(o.height),r.save(),r.globalCompositeOperation="copy",r.drawImage(t.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height),r.restore();for(var a=(0,n.hex2rgb)(e),h=a[0],l=a[1],u=a[2],c=r.getImageData(0,0,o.width,o.height),d=c.data,p=0;p<d.length;p+=4)d[p+0]*=h,d[p+1]*=l,d[p+2]*=u;r.putImageData(c,0,0)},roundColor:function(t){var e=s.cacheStepsPerColorChannel,i=(0,n.hex2rgb)(t);return i[0]=Math.min(255,i[0]/e*e),i[1]=Math.min(255,i[1]/e*e),i[2]=Math.min(255,i[2]/e*e),(0,n.rgb2hex)(i)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:(0,((r=o)&&r.__esModule?r:{default:r}).default)(),tintMethod:0};s.tintMethod=s.canUseMultiply?s.tintWithMultiply:s.tintWithPerPixel,e.default=s},function(t,e,i){"use strict";e.__esModule=!0;var r,n=i(13);var o=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.start=function(){},e.prototype.stop=function(){this.flush()},e.prototype.flush=function(){},e.prototype.render=function(t){},e}(((r=n)&&r.__esModule?r:{default:r}).default);e.default=o},function(t,e,i){"use strict";e.__esModule=!0;var r=m(i(57)),n=m(i(130)),o=m(i(133)),s=m(i(134)),a=m(i(20)),h=m(i(18)),l=m(i(136)),u=m(i(10)),c=m(i(137)),d=m(i(138)),p=m(i(140)),f=m(i(141)),g=i(2),y=m(i(5)),v=i(0);function m(t){return t&&t.__esModule?t:{default:t}}var b=0,$=function(t){function e(i,r,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"WebGL",i,r,s));return a.legacy=a.options.legacy,a.legacy&&(y.default.VertexArrayObject.FORCE_NATIVE=!0),a.type=v.RENDERER_TYPE.WEBGL,a.handleContextLost=a.handleContextLost.bind(a),a.handleContextRestored=a.handleContextRestored.bind(a),a.view.addEventListener("webglcontextlost",a.handleContextLost,!1),a.view.addEventListener("webglcontextrestored",a.handleContextRestored,!1),a._contextOptions={alpha:a.transparent,antialias:a.options.antialias,premultipliedAlpha:a.transparent&&"notMultiplied"!==a.transparent,stencil:!0,preserveDrawingBuffer:a.options.preserveDrawingBuffer,powerPreference:a.options.powerPreference},a._backgroundColorRgba[3]=a.transparent?0:1,a.maskManager=new n.default(a),a.stencilManager=new o.default(a),a.emptyRenderer=new h.default(a),a.currentRenderer=a.emptyRenderer,a.textureManager=null,a.filterManager=null,a.initPlugins(),a.options.context&&(0,f.default)(a.options.context),a.gl=a.options.context||y.default.createContext(a.view,a._contextOptions),a.CONTEXT_UID=b++,a.state=new d.default(a.gl),a.renderingToScreen=!0,a.boundTextures=null,a._activeShader=null,a._activeVao=null,a._activeRenderTarget=null,a._initContext(),a.drawModes=(0,p.default)(a.gl),a._nextTextureLocation=0,a.setBlendMode(0),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._initContext=function(){var t=this.gl;t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext();var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this._activeShader=null,this._activeVao=null,this.boundTextures=new Array(e),this.emptyTextures=new Array(e),this._unknownBoundTextures=!1,this.textureManager=new l.default(this),this.filterManager=new s.default(this),this.textureGC=new c.default(this),this.state.resetToDefault(),this.rootRenderTarget=new a.default(t,this.width,this.height,null,this.resolution,!0),this.rootRenderTarget.clearColor=this._backgroundColorRgba,this.bindRenderTarget(this.rootRenderTarget);var i=new y.default.GLTexture.fromData(t,null,1,1),r={_glTextures:{}};r._glTextures[this.CONTEXT_UID]={};for(var n=0;n<e;n++){var o=new u.default;o._glTextures[this.CONTEXT_UID]=i,this.boundTextures[n]=r,this.emptyTextures[n]=o,this.bindTexture(null,n)}this.emit("context",t),this.resize(this.screen.width,this.screen.height)},e.prototype.render=function(t,e,i,r,n){if(this.renderingToScreen=!e,this.emit("prerender"),this.gl&&!this.gl.isContextLost()){if(this._nextTextureLocation=0,e||(this._lastObjectRendered=t),!n){var o=t.parent;t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=o}this.bindRenderTexture(e,r),this.currentRenderer.start(),(void 0!==i?i:this.clearBeforeRender)&&this._activeRenderTarget.clear(),t.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit("postrender")}},e.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},e.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.resize=function(t,e){r.default.prototype.resize.call(this,t,e),this.rootRenderTarget.resize(t,e),this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))},e.prototype.setBlendMode=function(t){this.state.setBlendMode(t)},e.prototype.clear=function(t){this._activeRenderTarget.clear(t)},e.prototype.setTransform=function(t){this._activeRenderTarget.transform=t},e.prototype.clearRenderTexture=function(t,e){var i=t.baseTexture._glRenderTargets[this.CONTEXT_UID];return i&&i.clear(e),this},e.prototype.bindRenderTexture=function(t,e){var i=void 0;if(t){var r=t.baseTexture;r._glRenderTargets[this.CONTEXT_UID]||this.textureManager.updateTexture(r,0),this.unbindTexture(r),(i=r._glRenderTargets[this.CONTEXT_UID]).setFrame(t.frame)}else i=this.rootRenderTarget;return i.transform=e,this.bindRenderTarget(i),this},e.prototype.bindRenderTarget=function(t){return t!==this._activeRenderTarget&&(this._activeRenderTarget=t,t.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=t.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(t.stencilMaskStack)),this},e.prototype.bindShader=function(t,e){return this._activeShader!==t&&(this._activeShader=t,t.bind(),!1!==e&&(t.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0))),this},e.prototype.bindTexture=function(t,e,i){if((t=(t=t||this.emptyTextures[e]).baseTexture||t).touched=this.textureGC.count,i)e=e||0;else{for(var r=0;r<this.boundTextures.length;r++)if(this.boundTextures[r]===t)return r;void 0===e&&(this._nextTextureLocation++,this._nextTextureLocation%=this.boundTextures.length,e=this.boundTextures.length-this._nextTextureLocation-1)}var n=this.gl,o=t._glTextures[this.CONTEXT_UID];return o?(this.boundTextures[e]=t,n.activeTexture(n.TEXTURE0+e),n.bindTexture(n.TEXTURE_2D,o.texture)):this.textureManager.updateTexture(t,e),e},e.prototype.unbindTexture=function(t){var e=this.gl;if(t=t.baseTexture||t,this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var i=0;i<this.boundTextures.length;i++)this.boundTextures[i]===this.emptyTextures[i]&&(e.activeTexture(e.TEXTURE0+i),e.bindTexture(e.TEXTURE_2D,this.emptyTextures[i]._glTextures[this.CONTEXT_UID].texture))}for(var r=0;r<this.boundTextures.length;r++)this.boundTextures[r]===t&&(this.boundTextures[r]=this.emptyTextures[r],e.activeTexture(e.TEXTURE0+r),e.bindTexture(e.TEXTURE_2D,this.emptyTextures[r]._glTextures[this.CONTEXT_UID].texture));return this},e.prototype.createVao=function(){return new y.default.VertexArrayObject(this.gl,this.state.attribState)},e.prototype.bindVao=function(t){return this._activeVao===t?this:(t?t.bind():this._activeVao&&this._activeVao.unbind(),this._activeVao=t,this)},e.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer),this.bindVao(null),this._activeShader=null,this._activeRenderTarget=this.rootRenderTarget,this._unknownBoundTextures=!0;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.emptyTextures[t];return this.rootRenderTarget.activate(),this.state.resetToDefault(),this},e.prototype.handleContextLost=function(t){t.preventDefault()},e.prototype.handleContextRestored=function(){this.textureManager.removeAll(),this.filterManager.destroy(!0),this._initContext()},e.prototype.destroy=function(e){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),this.textureManager.destroy(),t.prototype.destroy.call(this,e),this.uid=0,this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.maskManager=null,this.filterManager=null,this.textureManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.gl.useProgram(null),this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext(),this.gl=null},e}(r.default);e.default=$,g.pluginTarget.mixin($)},function(t,e,i){"use strict";e.__esModule=!0;var r,n=i(4),o=i(0),s=i(3),a=(r=s)&&r.__esModule?r:{default:r},h=i(5);var l=function(){function t(e,i,r,s,l,u){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gl=e,this.frameBuffer=null,this.texture=null,this.clearColor=[0,0,0,0],this.size=new n.Rectangle(0,0,1,1),this.resolution=l||a.default.RESOLUTION,this.projectionMatrix=new n.Matrix,this.transform=null,this.frame=null,this.defaultFrame=new n.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.stencilBuffer=null,this.stencilMaskStack=[],this.filterData=null,this.filterPoolKey="",this.scaleMode=void 0!==s?s:a.default.SCALE_MODE,this.root=u||!1,this.root?(this.frameBuffer=new h.GLFramebuffer(e,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=h.GLFramebuffer.createRGBA(e,100,100),this.scaleMode===o.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture),this.setFrame(),this.resize(i,r)}return t.prototype.clear=function(t){var e=t||this.clearColor;this.frameBuffer.clear(e[0],e[1],e[2],e[3])},t.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()},t.prototype.setFrame=function(t,e){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||this.destinationFrame},t.prototype.activate=function(){var t=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.transform&&this.projectionMatrix.append(this.transform),this.destinationFrame!==this.sourceFrame?(t.enable(t.SCISSOR_TEST),t.scissor(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)):t.disable(t.SCISSOR_TEST),t.viewport(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)},t.prototype.calculateProjection=function(t,e){var i=this.projectionMatrix;e=e||t,i.identity(),this.root?(i.a=1/t.width*2,i.d=-1/t.height*2,i.tx=-1-e.x*i.a,i.ty=1-e.y*i.d):(i.a=1/t.width*2,i.d=1/t.height*2,i.tx=-1-e.x*i.a,i.ty=-1-e.y*i.d)},t.prototype.resize=function(t,e){if(t|=0,e|=0,this.size.width!==t||this.size.height!==e){this.size.width=t,this.size.height=e,this.defaultFrame.width=t,this.defaultFrame.height=e,this.frameBuffer.resize(t*this.resolution,e*this.resolution);var i=this.frame||this.size;this.calculateProjection(i)}},t.prototype.destroy=function(){this.frameBuffer.stencil&&this.gl.deleteRenderbuffer(this.frameBuffer.stencil),this.frameBuffer.destroy(),this.frameBuffer=null,this.texture=null},t}();e.default=l},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t,e,i){t.nativeLines?function(t,e){var i=0,r=t.points;if(0===r.length)return;var o=e.points,s=r.length/2,a=(0,n.hex2rgb)(t.lineColor),h=t.lineAlpha,l=a[0]*h,u=a[1]*h,c=a[2]*h;for(i=1;i<s;i++){var d=r[2*(i-1)],p=r[2*(i-1)+1],f=r[2*i],g=r[2*i+1];o.push(d,p),o.push(l,u,c,h),o.push(f,g),o.push(l,u,c,h)}}(t,i):function(t,e){var i=t.points;if(0===i.length)return;var o=new r.Point(i[0],i[1]),s=new r.Point(i[i.length-2],i[i.length-1]);if(o.x===s.x&&o.y===s.y){(i=i.slice()).pop(),i.pop();var a=(s=new r.Point(i[i.length-2],i[i.length-1])).x+.5*(o.x-s.x),h=s.y+.5*(o.y-s.y);i.unshift(a,h),i.push(a,h)}var l=e.points,u=e.indices,c=i.length/2,d=i.length,p=l.length/6,f=t.lineWidth/2,g=(0,n.hex2rgb)(t.lineColor),y=t.lineAlpha,v=g[0]*y,m=g[1]*y,b=g[2]*y,$=i[0],w=i[1],x=i[2],_=i[3],T=0,E=0,O=-(w-_),S=$-x,C=0,P=0,I=0,M=0,A=Math.sqrt(O*O+S*S);O/=A,S/=A,O*=f,S*=f;var R=t.lineAlignment,D=2*(1-R),k=2*R;l.push($-O*D,w-S*D,v,m,b,y),l.push($+O*k,w+S*k,v,m,b,y);for(var L=1;L<c-1;++L){$=i[2*(L-1)],w=i[2*(L-1)+1],x=i[2*L],_=i[2*L+1],T=i[2*(L+1)],E=i[2*(L+1)+1],O=-(w-_),S=$-x,A=Math.sqrt(O*O+S*S),O/=A,S/=A,O*=f,S*=f,C=-(_-E),P=x-T,A=Math.sqrt(C*C+P*P),C/=A,P/=A;var j=-S+w-(-S+_),N=-O+x-(-O+$),F=(-O+$)*(-S+_)-(-O+x)*(-S+w),B=-(P*=f)+E-(-P+_),U=-(C*=f)+x-(-C+T),G=(-C+T)*(-P+_)-(-C+x)*(-P+E),H=j*U-B*N;if(Math.abs(H)<.1)H+=10.1,l.push(x-O*D,_-S*D,v,m,b,y),l.push(x+O*k,_+S*k,v,m,b,y);else{var W=(N*G-U*F)/H,X=(B*F-j*G)/H,z=(W-x)*(W-x)+(X-_)*(X-_);z>196*f*f?(I=O-C,M=S-P,A=Math.sqrt(I*I+M*M),I/=A,M/=A,I*=f,M*=f,l.push(x-I*D,_-M*D),l.push(v,m,b,y),l.push(x+I*k,_+M*k),l.push(v,m,b,y),l.push(x-I*k*D,_-M*D),l.push(v,m,b,y),d++):(l.push(x+(W-x)*D,_+(X-_)*D),l.push(v,m,b,y),l.push(x-(W-x)*k,_-(X-_)*k),l.push(v,m,b,y))}}$=i[2*(c-2)],w=i[2*(c-2)+1],x=i[2*(c-1)],_=i[2*(c-1)+1],O=-(w-_),S=$-x,A=Math.sqrt(O*O+S*S),O/=A,S/=A,O*=f,S*=f,l.push(x-O*D,_-S*D),l.push(v,m,b,y),l.push(x+O*k,_+S*k),l.push(v,m,b,y),u.push(p);for(var V=0;V<d;++V)u.push(p++);u.push(p-1)}(t,e)};var r=i(4),n=i(2)},function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=i}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copy=function(t){this.set(t.x,t.y)},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.set=function(t,e){this.x=t||0,this.y=e||(0!==e?this.x:0)},t}();e.default=r},function(t,e,i){"use strict";e.__esModule=!0;var r,n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=i(23),s=(r=o)&&r.__esModule?r:{default:r},a=i(0);var h=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.a=e,this.b=i,this.c=r,this.d=n,this.tx=o,this.ty=s,this.array=null}return t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},t.prototype.set=function(t,e,i,r,n,o){return this.a=t,this.b=e,this.c=i,this.d=r,this.tx=n,this.ty=o,this},t.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},t.prototype.apply=function(t,e){e=e||new s.default;var i=t.x,r=t.y;return e.x=this.a*i+this.c*r+this.tx,e.y=this.b*i+this.d*r+this.ty,e},t.prototype.applyInverse=function(t,e){e=e||new s.default;var i=1/(this.a*this.d+this.c*-this.b),r=t.x,n=t.y;return e.x=this.d*i*r+-this.c*i*n+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*n+-this.b*i*r+(-this.ty*this.a+this.tx*this.b)*i,e},t.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},t.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),r=this.a,n=this.c,o=this.tx;return this.a=r*e-this.b*i,this.b=r*i+this.b*e,this.c=n*e-this.d*i,this.d=n*i+this.d*e,this.tx=o*e-this.ty*i,this.ty=o*i+this.ty*e,this},t.prototype.append=function(t){var e=this.a,i=this.b,r=this.c,n=this.d;return this.a=t.a*e+t.b*r,this.b=t.a*i+t.b*n,this.c=t.c*e+t.d*r,this.d=t.c*i+t.d*n,this.tx=t.tx*e+t.ty*r+this.tx,this.ty=t.tx*i+t.ty*n+this.ty,this},t.prototype.setTransform=function(t,e,i,r,n,o,s,a,h){return this.a=Math.cos(s+h)*n,this.b=Math.sin(s+h)*n,this.c=-Math.sin(s-a)*o,this.d=Math.cos(s-a)*o,this.tx=t-(i*this.a+r*this.c),this.ty=e-(i*this.b+r*this.d),this},t.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var i=this.a,r=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},t.prototype.decompose=function(t){var e=this.a,i=this.b,r=this.c,n=this.d,o=-Math.atan2(-r,n),s=Math.atan2(i,e),h=Math.abs(o+s);return h<1e-5||Math.abs(a.PI_2-h)<1e-5?(t.rotation=s,e<0&&n>=0&&(t.rotation+=t.rotation<=0?Math.PI:-Math.PI),t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=s),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(r*r+n*n),t.position.x=this.tx,t.position.y=this.ty,t},t.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,r=this.d,n=this.tx,o=t*r-e*i;return this.a=r/o,this.b=-e/o,this.c=-i/o,this.d=t/o,this.tx=(i*this.ty-r*n)/o,this.ty=-(t*this.ty-e*n)/o,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copy=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},n(t,null,[{key:"IDENTITY",get:function(){return new t}},{key:"TEMP_MATRIX",get:function(){return new t}}]),t}();e.default=h},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=i(0);var o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=Number(e),this.y=Number(i),this.width=Number(r),this.height=Number(o),this.type=n.SHAPES.RECT}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},t.prototype.pad=function(t,e){t=t||0,e=e||(0!==e?t:0),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e},t.prototype.fit=function(t){var e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),r=Math.max(this.y,t.y),n=Math.min(this.y+this.height,t.y+t.height);this.x=e,this.width=Math.max(i-e,0),this.y=r,this.height=Math.max(n-r,0)},t.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),r=Math.min(this.y,t.y),n=Math.max(this.y+this.height,t.y+t.height);this.x=e,this.width=i-e,this.y=r,this.height=n-r},t.prototype.ceil=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.001,i=Math.ceil((this.x+this.width-e)*t)/t,r=Math.ceil((this.y+this.height-e)*t)/t;this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=r-this.y},r(t,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}}],[{key:"EMPTY",get:function(){return new t(0,0,0,0)}}]),t}();e.default=o},function(t,e){var i=null,r={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};t.exports=function(t,e){if(!i){var n=Object.keys(r);i={};for(var o=0;o<n.length;++o){var s=n[o];i[t[s]]=r[s]}}return i[e]}},function(t,e,i){"use strict";e.__esModule=!0;var r=i(4);var n=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null}return t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},t.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},t.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?r.Rectangle.EMPTY:((t=t||new r.Rectangle(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},t.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},t.prototype.addQuad=function(t){var e=this.minX,i=this.minY,r=this.maxX,n=this.maxY,o=t[0],s=t[1];e=o<e?o:e,i=s<i?s:i,r=o>r?o:r,n=s>n?s:n,e=(o=t[2])<e?o:e,i=(s=t[3])<i?s:i,r=o>r?o:r,n=s>n?s:n,e=(o=t[4])<e?o:e,i=(s=t[5])<i?s:i,r=o>r?o:r,n=s>n?s:n,e=(o=t[6])<e?o:e,i=(s=t[7])<i?s:i,r=o>r?o:r,n=s>n?s:n,this.minX=e,this.minY=i,this.maxX=r,this.maxY=n},t.prototype.addFrame=function(t,e,i,r,n){var o=t.worldTransform,s=o.a,a=o.b,h=o.c,l=o.d,u=o.tx,c=o.ty,d=this.minX,p=this.minY,f=this.maxX,g=this.maxY,y=s*e+h*i+u,v=a*e+l*i+c;d=y<d?y:d,p=v<p?v:p,f=y>f?y:f,g=v>g?v:g,d=(y=s*r+h*i+u)<d?y:d,p=(v=a*r+l*i+c)<p?v:p,f=y>f?y:f,g=v>g?v:g,d=(y=s*e+h*n+u)<d?y:d,p=(v=a*e+l*n+c)<p?v:p,f=y>f?y:f,g=v>g?v:g,d=(y=s*r+h*n+u)<d?y:d,p=(v=a*r+l*n+c)<p?v:p,f=y>f?y:f,g=v>g?v:g,this.minX=d,this.minY=p,this.maxX=f,this.maxY=g},t.prototype.addVertices=function(t,e,i,r){for(var n=t.worldTransform,o=n.a,s=n.b,a=n.c,h=n.d,l=n.tx,u=n.ty,c=this.minX,d=this.minY,p=this.maxX,f=this.maxY,g=i;g<r;g+=2){var y=e[g],v=e[g+1],m=o*y+a*v+l,b=h*v+s*y+u;c=m<c?m:c,d=b<d?b:d,p=m>p?m:p,f=b>f?b:f}this.minX=c,this.minY=d,this.maxX=p,this.maxY=f},t.prototype.addBounds=function(t){var e=this.minX,i=this.minY,r=this.maxX,n=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>r?t.maxX:r,this.maxY=t.maxY>n?t.maxY:n},t.prototype.addBoundsMask=function(t,e){var i=t.minX>e.minX?t.minX:e.minX,r=t.minY>e.minY?t.minY:e.minY,n=t.maxX<e.maxX?t.maxX:e.maxX,o=t.maxY<e.maxY?t.maxY:e.maxY;if(i<=n&&r<=o){var s=this.minX,a=this.minY,h=this.maxX,l=this.maxY;this.minX=i<s?i:s,this.minY=r<a?r:a,this.maxX=n>h?n:h,this.maxY=o>l?o:l}},t.prototype.addBoundsArea=function(t,e){var i=t.minX>e.x?t.minX:e.x,r=t.minY>e.y?t.minY:e.y,n=t.maxX<e.x+e.width?t.maxX:e.x+e.width,o=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(i<=n&&r<=o){var s=this.minX,a=this.minY,h=this.maxX,l=this.maxY;this.minX=i<s?i:s,this.minY=r<a?r:a,this.maxX=n>h?n:h,this.maxY=o>l?o:l}},t}();e.default=n},function(t,e,i){var r,n,o;!function(i){var s=/iPhone/i,a=/iPod/i,h=/iPad/i,l=/\bAndroid(?:.+)Mobile\b/i,u=/Android/i,c=/\bAndroid(?:.+)SD4930UR\b/i,d=/\bAndroid(?:.+)(?:KF[A-Z]{2,4})\b/i,p=/Windows Phone/i,f=/\bWindows(?:.+)ARM\b/i,g=/BlackBerry/i,y=/BB10/i,v=/Opera Mini/i,m=/\b(CriOS|Chrome)(?:.+)Mobile/i,b=/\Mobile(?:.+)Firefox\b/i;function $(t,e){return t.test(e)}function w(t){var e=t||("undefined"!=typeof navigator?navigator.userAgent:""),i=e.split("[FBAN");void 0!==i[1]&&(e=i[0]),void 0!==(i=e.split("Twitter"))[1]&&(e=i[0]);var r={apple:{phone:$(s,e)&&!$(p,e),ipod:$(a,e),tablet:!$(s,e)&&$(h,e)&&!$(p,e),device:($(s,e)||$(a,e)||$(h,e))&&!$(p,e)},amazon:{phone:$(c,e),tablet:!$(c,e)&&$(d,e),device:$(c,e)||$(d,e)},android:{phone:!$(p,e)&&$(c,e)||!$(p,e)&&$(l,e),tablet:!$(p,e)&&!$(c,e)&&!$(l,e)&&($(d,e)||$(u,e)),device:!$(p,e)&&($(c,e)||$(d,e)||$(l,e)||$(u,e))},windows:{phone:$(p,e),tablet:$(f,e),device:$(p,e)||$(f,e)},other:{blackberry:$(g,e),blackberry10:$(y,e),opera:$(v,e),firefox:$(b,e),chrome:$(m,e),device:$(g,e)||$(y,e)||$(v,e)||$(b,e)||$(m,e)}};return r.any=r.apple.device||r.android.device||r.windows.device||r.other.device,r.phone=r.apple.phone||r.android.phone||r.windows.phone,r.tablet=r.apple.tablet||r.android.tablet||r.windows.tablet,r}t.exports&&"undefined"==typeof window?t.exports=w:t.exports&&"undefined"!=typeof window?t.exports=w():(n=[],r=i.isMobile=w(),void 0===(o="function"==typeof r?r.apply(e,n):r)||(t.exports=o))}(this)},function(t,e,i){"use strict";e.__esModule=!0;var r=i(4);var n=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.worldTransform=new r.Matrix,this.localTransform=new r.Matrix,this._worldID=0,this._parentID=0}return t.prototype.updateLocalTransform=function(){},t.prototype.updateTransform=function(t){var e=t.worldTransform,i=this.worldTransform,r=this.localTransform;i.a=r.a*e.a+r.b*e.c,i.b=r.a*e.b+r.b*e.d,i.c=r.c*e.a+r.d*e.c,i.d=r.c*e.b+r.d*e.d,i.tx=r.tx*e.a+r.ty*e.c+e.tx,i.ty=r.tx*e.b+r.ty*e.d+e.ty,this._worldID++},t}();e.default=n,n.prototype.updateWorldTransform=n.prototype.updateTransform,n.IDENTITY=new n},function(t,e,i){"use strict";function r(t,e,i){i=i||2;var r,a,h,l,u,p,g,y=e&&e.length,v=y?e[0]*i:t.length,m=n(t,0,v,i,!0),b=[];if(!m||m.next===m.prev)return b;if(y&&(m=function(t,e,i,r){var s,a,h,l,u,p=[];for(s=0,a=e.length;s<a;s++)h=e[s]*r,l=s<a-1?e[s+1]*r:t.length,(u=n(t,h,l,r,!1))===u.next&&(u.steiner=!0),p.push(f(u));for(p.sort(c),s=0;s<p.length;s++)d(p[s],i),i=o(i,i.next);return i}(t,e,m,i)),t.length>80*i){r=h=t[0],a=l=t[1];for(var $=i;$<v;$+=i)(u=t[$])<r&&(r=u),(p=t[$+1])<a&&(a=p),u>h&&(h=u),p>l&&(l=p);g=0!==(g=Math.max(h-r,l-a))?1/g:0}return s(m,b,i,r,a,g),b}function n(t,e,i,r,n){var o,s;if(n===E(t,e,i,r)>0)for(o=e;o<i;o+=r)s=x(o,t[o],t[o+1],s);else for(o=i-r;o>=e;o-=r)s=x(o,t[o],t[o+1],s);return s&&m(s,s.next)&&(_(s),s=s.next),s}function o(t,e){if(!t)return t;e||(e=t);var i,r=t;do{if(i=!1,r.steiner||!m(r,r.next)&&0!==v(r.prev,r,r.next))r=r.next;else{if(_(r),(r=e=r.prev)===r.next)break;i=!0}}while(i||r!==e);return e}function s(t,e,i,r,n,c,d){if(t){!d&&c&&function(t,e,i,r){var n=t;do{null===n.z&&(n.z=p(n.x,n.y,e,i,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==t);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,i,r,n,o,s,a,h,l=1;do{for(i=t,t=null,o=null,s=0;i;){for(s++,r=i,a=0,e=0;e<l&&(a++,r=r.nextZ);e++);for(h=l;a>0||h>0&&r;)0!==a&&(0===h||!r||i.z<=r.z)?(n=i,i=i.nextZ,a--):(n=r,r=r.nextZ,h--),o?o.nextZ=n:t=n,n.prevZ=o,o=n;i=r}o.nextZ=null,l*=2}while(s>1)}(n)}(t,r,n,c);for(var f,g,y=t;t.prev!==t.next;)if(f=t.prev,g=t.next,c?h(t,r,n,c):a(t))e.push(f.i/i),e.push(t.i/i),e.push(g.i/i),_(t),t=g.next,y=g.next;else if((t=g)===y){d?1===d?s(t=l(t,e,i),e,i,r,n,c,2):2===d&&u(t,e,i,r,n,c):s(o(t),e,i,r,n,c,1);break}}}function a(t){var e=t.prev,i=t,r=t.next;if(v(e,i,r)>=0)return!1;for(var n=t.next.next;n!==t.prev;){if(g(e.x,e.y,i.x,i.y,r.x,r.y,n.x,n.y)&&v(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function h(t,e,i,r){var n=t.prev,o=t,s=t.next;if(v(n,o,s)>=0)return!1;for(var a=n.x<o.x?n.x<s.x?n.x:s.x:o.x<s.x?o.x:s.x,h=n.y<o.y?n.y<s.y?n.y:s.y:o.y<s.y?o.y:s.y,l=n.x>o.x?n.x>s.x?n.x:s.x:o.x>s.x?o.x:s.x,u=n.y>o.y?n.y>s.y?n.y:s.y:o.y>s.y?o.y:s.y,c=p(a,h,e,i,r),d=p(l,u,e,i,r),f=t.prevZ,y=t.nextZ;f&&f.z>=c&&y&&y.z<=d;){if(f!==t.prev&&f!==t.next&&g(n.x,n.y,o.x,o.y,s.x,s.y,f.x,f.y)&&v(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,y!==t.prev&&y!==t.next&&g(n.x,n.y,o.x,o.y,s.x,s.y,y.x,y.y)&&v(y.prev,y,y.next)>=0)return!1;y=y.nextZ}for(;f&&f.z>=c;){if(f!==t.prev&&f!==t.next&&g(n.x,n.y,o.x,o.y,s.x,s.y,f.x,f.y)&&v(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;y&&y.z<=d;){if(y!==t.prev&&y!==t.next&&g(n.x,n.y,o.x,o.y,s.x,s.y,y.x,y.y)&&v(y.prev,y,y.next)>=0)return!1;y=y.nextZ}return!0}function l(t,e,i){var r=t;do{var n=r.prev,o=r.next.next;!m(n,o)&&b(n,r,r.next,o)&&$(n,o)&&$(o,n)&&(e.push(n.i/i),e.push(r.i/i),e.push(o.i/i),_(r),_(r.next),r=t=o),r=r.next}while(r!==t);return r}function u(t,e,i,r,n,a){var h=t;do{for(var l=h.next.next;l!==h.prev;){if(h.i!==l.i&&y(h,l)){var u=w(h,l);return h=o(h,h.next),u=o(u,u.next),s(h,e,i,r,n,a),void s(u,e,i,r,n,a)}l=l.next}h=h.next}while(h!==t)}function c(t,e){return t.x-e.x}function d(t,e){if(e=function(t,e){var i,r=e,n=t.x,o=t.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=n&&a>s){if(s=a,a===n){if(o===r.y)return r;if(o===r.next.y)return r.next}i=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!i)return null;if(n===s)return i.prev;var h,l=i,u=i.x,c=i.y,d=1/0;r=i.next;for(;r!==l;)n>=r.x&&r.x>=u&&n!==r.x&&g(o<c?n:s,o,u,c,o<c?s:n,o,r.x,r.y)&&((h=Math.abs(o-r.y)/(n-r.x))<d||h===d&&r.x>i.x)&&$(r,t)&&(i=r,d=h),r=r.next;return i}(t,e)){var i=w(e,t);o(i,i.next)}}function p(t,e,i,r,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function f(t){var e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function g(t,e,i,r,n,o,s,a){return(n-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(r-a)-(i-s)*(e-a)>=0&&(i-s)*(o-a)-(n-s)*(r-a)>=0}function y(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&b(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&$(t,e)&&$(e,t)&&function(t,e){var i=t,r=!1,n=(t.x+e.x)/2,o=(t.y+e.y)/2;do{i.y>o!=i.next.y>o&&i.next.y!==i.y&&n<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next}while(i!==t);return r}(t,e)}function v(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function m(t,e){return t.x===e.x&&t.y===e.y}function b(t,e,i,r){return!!(m(t,e)&&m(i,r)||m(t,r)&&m(i,e))||v(t,e,i)>0!=v(t,e,r)>0&&v(i,r,t)>0!=v(i,r,e)>0}function $(t,e){return v(t.prev,t,t.next)<0?v(t,e,t.next)>=0&&v(t,t.prev,e)>=0:v(t,e,t.prev)<0||v(t,t.next,e)<0}function w(t,e){var i=new T(t.i,t.x,t.y),r=new T(e.i,e.x,e.y),n=t.next,o=e.prev;return t.next=e,e.prev=t,i.next=n,n.prev=i,r.next=i,i.prev=r,o.next=r,r.prev=o,r}function x(t,e,i,r){var n=new T(t,e,i);return r?(n.next=r.next,n.prev=r,r.next.prev=n,r.next=n):(n.prev=n,n.next=n),n}function _(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function T(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function E(t,e,i,r){for(var n=0,o=e,s=i-r;o<i;o+=r)n+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return n}t.exports=r,t.exports.default=r,r.deviation=function(t,e,i,r){var n=e&&e.length,o=n?e[0]*i:t.length,s=Math.abs(E(t,0,o,i));if(n)for(var a=0,h=e.length;a<h;a++){var l=e[a]*i,u=a<h-1?e[a+1]*i:t.length;s-=Math.abs(E(t,l,u,i))}var c=0;for(a=0;a<r.length;a+=3){var d=r[a]*i,p=r[a+1]*i,f=r[a+2]*i;c+=Math.abs((t[d]-t[f])*(t[p+1]-t[d+1])-(t[d]-t[p])*(t[f+1]-t[d+1]))}return 0===s&&0===c?0:Math.abs((c-s)/s)},r.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},r=0,n=0;n<t.length;n++){for(var o=0;o<t[n].length;o++)for(var s=0;s<e;s++)i.vertices.push(t[n][o][s]);n>0&&(r+=t[n-1].length,i.holes.push(r))}return i}},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=i(4),o=i(2),s=i(0),a=l(i(7)),h=l(i(11));function l(t){return t&&t.__esModule?t:{default:t}}var u=new n.Point,c=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return r._anchor=new n.ObservablePoint(r._onAnchorUpdate,r,i?i.defaultAnchor.x:0,i?i.defaultAnchor.y:0),r._texture=null,r._width=0,r._height=0,r._tint=null,r._tintRGB=null,r.tint=16777215,r.blendMode=s.BLEND_MODES.NORMAL,r.shader=null,r.cachedTint=16777215,r.texture=i||a.default.EMPTY,r.vertexData=new Float32Array(8),r.vertexTrimmedData=null,r._transformID=-1,r._textureID=-1,r._transformTrimmedID=-1,r._textureTrimmedID=-1,r.pluginName="sprite",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this.cachedTint=16777215,this._width&&(this.scale.x=(0,o.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=(0,o.sign)(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID){this._transformID=this.transform._worldID,this._textureID=this._texture._updateID;var t=this._texture,e=this.transform.worldTransform,i=e.a,r=e.b,n=e.c,o=e.d,s=e.tx,a=e.ty,h=this.vertexData,l=t.trim,u=t.orig,c=this._anchor,d=0,p=0,f=0,g=0;l?(d=(p=l.x-c._x*u.width)+l.width,f=(g=l.y-c._y*u.height)+l.height):(d=(p=-c._x*u.width)+u.width,f=(g=-c._y*u.height)+u.height),h[0]=i*p+n*g+s,h[1]=o*g+r*p+a,h[2]=i*d+n*g+s,h[3]=o*g+r*d+a,h[4]=i*d+n*f+s,h[5]=o*f+r*d+a,h[6]=i*p+n*f+s,h[7]=o*f+r*p+a}},e.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,i=t.orig,r=this._anchor,n=this.transform.worldTransform,o=n.a,s=n.b,a=n.c,h=n.d,l=n.tx,u=n.ty,c=-r._x*i.width,d=c+i.width,p=-r._y*i.height,f=p+i.height;e[0]=o*c+a*p+l,e[1]=h*p+s*c+u,e[2]=o*d+a*p+l,e[3]=h*p+s*d+u,e[4]=o*d+a*f+l,e[5]=h*f+s*d+u,e[6]=o*c+a*f+l,e[7]=h*f+s*c+u},e.prototype._renderWebGL=function(t){this.calculateVertices(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._renderCanvas=function(t){t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new n.Rectangle),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,u);var e=this._texture.orig.width,i=this._texture.orig.height,r=-e*this.anchor.x,n=0;return u.x>=r&&u.x<r+e&&(n=-i*this.anchor.y,u.y>=n&&u.y<n+i)},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof e?e:e&&e.texture){var i="boolean"==typeof e?e:e&&e.baseTexture;this._texture.destroy(!!i)}this._texture=null,this.shader=null},e.from=function(t){return new e(a.default.from(t))},e.fromFrame=function(t){var i=o.TextureCache[t];if(!i)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return new e(i)},e.fromImage=function(t,i,r){return new e(a.default.fromImage(t,i,r))},r(e,[{key:"width",get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=(0,o.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}},{key:"height",get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=(0,o.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}},{key:"anchor",get:function(){return this._anchor},set:function(t){this._anchor.copy(t)}},{key:"tint",get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)}},{key:"texture",get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t||a.default.EMPTY,this.cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}]),e}(h.default);e.default=c},function(t,e,i){"use strict";function r(t){var e=32;return(t&=-t)&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}e.INT_BITS=32,e.INT_MAX=2147483647,e.INT_MIN=-1<<31,e.sign=function(t){return(t>0)-(t<0)},e.abs=function(t){var e=t>>31;return(t^e)-e},e.min=function(t,e){return e^(t^e)&-(t<e)},e.max=function(t,e){return t^(t^e)&-(t<e)},e.isPow2=function(t){return!(t&t-1||!t)},e.log2=function(t){var e,i;return e=(t>65535)<<4,e|=i=((t>>>=e)>255)<<3,e|=i=((t>>>=i)>15)<<2,(e|=i=((t>>>=i)>3)<<1)|(t>>>=i)>>1},e.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},e.popCount=function(t){return 16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},e.countTrailingZeros=r,e.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1},e.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},e.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1};var n=new Array(256);!function(t){for(var e=0;e<256;++e){var i=e,r=e,n=7;for(i>>>=1;i;i>>>=1)r<<=1,r|=1&i,--n;t[e]=r<<n&255}}(n),e.reverse=function(t){return n[255&t]<<24|n[t>>>8&255]<<16|n[t>>>16&255]<<8|n[t>>>24&255]},e.interleave2=function(t,e){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))<<1},e.deinterleave2=function(t,e){return(t=65535&((t=16711935&((t=252645135&((t=858993459&((t=t>>>e&1431655765)|t>>>1))|t>>>2))|t>>>4))|t>>>16))<<16>>16},e.interleave3=function(t,e,i){return t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2),(t|=(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<1)|(i=1227133513&((i=3272356035&((i=251719695&((i=4278190335&((i&=1023)|i<<16))|i<<8))|i<<4))|i<<2))<<2},e.deinterleave3=function(t,e){return(t=1023&((t=4278190335&((t=251719695&((t=3272356035&((t=t>>>e&1227133513)|t>>>2))|t>>>4))|t>>>8))|t>>>16))<<22>>22},e.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>r(t)+1}},function(t,e,i){"use strict";e.__esModule=!0,e.Ticker=e.shared=void 0;var r,n=i(124),o=(r=n)&&r.__esModule?r:{default:r};var s=new o.default;s.autoStart=!0,s.destroy=function(){},e.shared=s,e.Ticker=o.default},function(t,e,i){"use strict";e.__esModule=!0;var r=n(i(58));function n(t){return t&&t.__esModule?t:{default:t}}var o=function(t){function e(i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=null;if(!(i instanceof r.default)){var s=arguments[1],a=arguments[2],h=arguments[3],l=arguments[4];console.warn("Please use RenderTexture.create("+s+", "+a+") instead of the ctor directly."),o=arguments[0],n=null,i=new r.default(s,a,h,l)}var u=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,n));return u.legacyRenderer=o,u.valid=!0,u._updateUvs(),u}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.resize=function(t,e,i){t=Math.ceil(t),e=Math.ceil(e),this.valid=t>0&&e>0,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,i||this.baseTexture.resize(t,e),this._updateUvs()},e.create=function(t,i,n,o){return new e(new r.default(t,i,n,o))},e}(n(i(7)).default);e.default=o},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t){for(var e=6*t,i=new Uint16Array(e),r=0,n=0;r<e;r+=6,n+=4)i[r+0]=n+0,i[r+1]=n+1,i[r+2]=n+2,i[r+3]=n+0,i[r+4]=n+2,i[r+5]=n+3;return i}},function(t,e,i){"use strict";e.__esModule=!0,e.Resource=void 0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=s(i(83)),o=s(i(82));function s(t){return t&&t.__esModule?t:{default:t}}var a=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),h=null;function l(){}var u=e.Resource=function(){function t(e,i,r){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),"string"!=typeof e||"string"!=typeof i)throw new Error("Both name and url are required for constructing a resource.");r=r||{},this._flags=0,this._setFlag(t.STATUS_FLAGS.DATA_URL,0===i.indexOf("data:")),this.name=e,this.url=i,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===r.crossOrigin?"anonymous":r.crossOrigin,this.timeout=r.timeout||0,this.loadType=r.loadType||this._determineLoadType(),this.xhrType=r.xhrType,this.metadata=r.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=t.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=l,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new o.default,this.onProgress=new o.default,this.onComplete=new o.default,this.onAfterMiddleware=new o.default}return t.setExtensionLoadType=function(e,i){c(t._loadTypeMap,e,i)},t.setExtensionXhrType=function(e,i){c(t._xhrTypeMap,e,i)},t.prototype.complete=function(){this._clearEvents(),this._finish()},t.prototype.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=t.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},t.prototype.load=function(e){var i=this;if(!this.isLoading)if(this.isComplete)e&&setTimeout(function(){return e(i)},1);else switch(e&&this.onComplete.once(e),this._setFlag(t.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case t.LOAD_TYPE.IMAGE:this.type=t.TYPE.IMAGE,this._loadElement("image");break;case t.LOAD_TYPE.AUDIO:this.type=t.TYPE.AUDIO,this._loadSourceElement("audio");break;case t.LOAD_TYPE.VIDEO:this.type=t.TYPE.VIDEO,this._loadSourceElement("video");break;case t.LOAD_TYPE.XHR:default:a&&this.crossOrigin?this._loadXdr():this._loadXhr()}},t.prototype._hasFlag=function(t){return 0!=(this._flags&t)},t.prototype._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},t.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},t.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(t.STATUS_FLAGS.COMPLETE,!0),this._setFlag(t.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},t.prototype._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t.prototype._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(t),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,i=0;i<this.url.length;++i)this.data.appendChild(this._createSource(t,this.url[i],Array.isArray(e)?e[i]:e));else{var r=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(r)?r[0]:r))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+t)},t.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;e.open("GET",this.url,!0),e.timeout=this.timeout,this.xhrType===t.XHR_RESPONSE_TYPE.JSON||this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=t.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},t.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout(function(){return t.send()},1)},t.prototype._createSource=function(t,e,i){i||(i=t+"/"+this._getExtension(e));var r=document.createElement("source");return r.src=e,r.type=i,r},t.prototype._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},t.prototype._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},t.prototype._onTimeout=function(){this.abort("Load timed out.")},t.prototype._xhrOnError=function(){var t=this.xhr;this.abort(d(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},t.prototype._xhrOnTimeout=function(){var t=this.xhr;this.abort(d(t)+" Request timed out.")},t.prototype._xhrOnAbort=function(){var t=this.xhr;this.abort(d(t)+" Request was aborted by the user.")},t.prototype._xhrOnLoad=function(){var e=this.xhr,i="",r=void 0===e.status?200:e.status;if(""!==e.responseType&&"text"!==e.responseType&&void 0!==e.responseType||(i=e.responseText),0===r&&(i.length>0||e.responseType===t.XHR_RESPONSE_TYPE.BUFFER)?r=200:1223===r&&(r=204),2===(r/100|0)){if(this.xhrType===t.XHR_RESPONSE_TYPE.TEXT)this.data=i,this.type=t.TYPE.TEXT;else if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(i),this.type=t.TYPE.JSON}catch(t){return void this.abort("Error trying to parse loaded json: "+t)}else if(this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var n=new DOMParser;this.data=n.parseFromString(i,"text/xml")}else{var o=document.createElement("div");o.innerHTML=i,this.data=o}this.type=t.TYPE.XML}catch(t){return void this.abort("Error trying to parse loaded xml: "+t)}else this.data=e.response||i;this.complete()}else this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL)},t.prototype._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";if(window.origin!==window.location.origin)return"anonymous";e=e||window.location,h||(h=document.createElement("a")),h.href=t;var i=!(t=(0,n.default)(h.href,{strictMode:!0})).port&&""===e.port||t.port===e.port,r=t.protocol?t.protocol+":":"";return t.host===e.hostname&&i&&r===e.protocol?"":"anonymous"},t.prototype._determineXhrType=function(){return t._xhrTypeMap[this.extension]||t.XHR_RESPONSE_TYPE.TEXT},t.prototype._determineLoadType=function(){return t._loadTypeMap[this.extension]||t.LOAD_TYPE.XHR},t.prototype._getExtension=function(){var t=this.url,e="";if(this.isDataUrl){var i=t.indexOf("/");e=t.substring(i+1,t.indexOf(";",i))}else{var r=t.indexOf("?"),n=t.indexOf("#"),o=Math.min(r>-1?r:t.length,n>-1?n:t.length);e=(t=t.substring(0,o)).substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},t.prototype._getMimeFromXhrType=function(e){switch(e){case t.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case t.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case t.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case t.XHR_RESPONSE_TYPE.JSON:return"application/json";case t.XHR_RESPONSE_TYPE.DEFAULT:case t.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},r(t,[{key:"isDataUrl",get:function(){return this._hasFlag(t.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(t.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(t.STATUS_FLAGS.LOADING)}}]),t}();function c(t,e,i){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=i)}function d(t){return t.toString().replace("object ","")}u.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},u.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},u.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},u.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},u._loadTypeMap={gif:u.LOAD_TYPE.IMAGE,png:u.LOAD_TYPE.IMAGE,bmp:u.LOAD_TYPE.IMAGE,jpg:u.LOAD_TYPE.IMAGE,jpeg:u.LOAD_TYPE.IMAGE,tif:u.LOAD_TYPE.IMAGE,tiff:u.LOAD_TYPE.IMAGE,webp:u.LOAD_TYPE.IMAGE,tga:u.LOAD_TYPE.IMAGE,svg:u.LOAD_TYPE.IMAGE,"svg+xml":u.LOAD_TYPE.IMAGE,mp3:u.LOAD_TYPE.AUDIO,ogg:u.LOAD_TYPE.AUDIO,wav:u.LOAD_TYPE.AUDIO,mp4:u.LOAD_TYPE.VIDEO,webm:u.LOAD_TYPE.VIDEO},u._xhrTypeMap={xhtml:u.XHR_RESPONSE_TYPE.DOCUMENT,html:u.XHR_RESPONSE_TYPE.DOCUMENT,htm:u.XHR_RESPONSE_TYPE.DOCUMENT,xml:u.XHR_RESPONSE_TYPE.DOCUMENT,tmx:u.XHR_RESPONSE_TYPE.DOCUMENT,svg:u.XHR_RESPONSE_TYPE.DOCUMENT,tsx:u.XHR_RESPONSE_TYPE.DOCUMENT,gif:u.XHR_RESPONSE_TYPE.BLOB,png:u.XHR_RESPONSE_TYPE.BLOB,bmp:u.XHR_RESPONSE_TYPE.BLOB,jpg:u.XHR_RESPONSE_TYPE.BLOB,jpeg:u.XHR_RESPONSE_TYPE.BLOB,tif:u.XHR_RESPONSE_TYPE.BLOB,tiff:u.XHR_RESPONSE_TYPE.BLOB,webp:u.XHR_RESPONSE_TYPE.BLOB,tga:u.XHR_RESPONSE_TYPE.BLOB,json:u.XHR_RESPONSE_TYPE.JSON,text:u.XHR_RESPONSE_TYPE.TEXT,txt:u.XHR_RESPONSE_TYPE.TEXT,ttf:u.XHR_RESPONSE_TYPE.BUFFER,otf:u.XHR_RESPONSE_TYPE.BUFFER},u.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",t.exports.default=u},function(t,e,i){"use strict";e.__esModule=!0;var r,n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1)),o=i(89),s=(r=o)&&r.__esModule?r:{default:r};var a=n.ticker.shared;n.settings.UPLOADS_PER_FRAME=4;var h=function(){function t(e){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.limiter=new s.default(n.settings.UPLOADS_PER_FRAME),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){i.queue&&i.prepareItems()},this.registerFindHook(f),this.registerFindHook(g),this.registerFindHook(l),this.registerFindHook(u),this.registerFindHook(c),this.registerUploadHook(d),this.registerUploadHook(p)}return t.prototype.upload=function(t,e){"function"==typeof t&&(e=t,t=null),t&&this.add(t),this.queue.length?(e&&this.completes.push(e),this.ticking||(this.ticking=!0,a.addOnce(this.tick,this,n.UPDATE_PRIORITY.UTILITY))):e&&e()},t.prototype.tick=function(){setTimeout(this.delayedTick,0)},t.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],e=!1;if(t&&!t._destroyed)for(var i=0,r=this.uploadHooks.length;i<r;i++)if(this.uploadHooks[i](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)a.addOnce(this.tick,this,n.UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;var o=this.completes.slice(0);this.completes.length=0;for(var s=0,h=o.length;s<h;s++)o[s]()}},t.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},t.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},t.prototype.add=function(t){for(var e=0,i=this.addHooks.length;e<i&&!this.addHooks[e](t,this.queue);e++);if(t instanceof n.Container)for(var r=t.children.length-1;r>=0;r--)this.add(t.children[r]);return this},t.prototype.destroy=function(){this.ticking&&a.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},t}();function l(t,e){var i=!1;if(t&&t._textures&&t._textures.length)for(var r=0;r<t._textures.length;r++)if(t._textures[r]instanceof n.Texture){var o=t._textures[r].baseTexture;-1===e.indexOf(o)&&(e.push(o),i=!0)}return i}function u(t,e){return t instanceof n.BaseTexture&&(-1===e.indexOf(t)&&e.push(t),!0)}function c(t,e){if(t._texture&&t._texture instanceof n.Texture){var i=t._texture.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function d(t,e){return e instanceof n.Text&&(e.updateText(!0),!0)}function p(t,e){if(e instanceof n.TextStyle){var i=e.toFontString();return n.TextMetrics.measureFont(i),!0}return!1}function f(t,e){if(t instanceof n.Text){-1===e.indexOf(t.style)&&e.push(t.style),-1===e.indexOf(t)&&e.push(t);var i=t._texture.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function g(t,e){return t instanceof n.TextStyle&&(-1===e.indexOf(t)&&e.push(t),!0)}e.default=h},function(t,e,i){"use strict";(function(t){e.__esModule=!0,e.loader=e.prepare=e.particles=e.mesh=e.loaders=e.interaction=e.filters=e.extras=e.extract=e.accessibility=void 0;var r=i(96);Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}})});var n=i(1);Object.keys(n).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})});var o,s=i(158),a=(o=s)&&o.__esModule?o:{default:o},h=v(i(159)),l=v(i(161)),u=v(i(71)),c=v(i(171)),d=v(i(178)),p=v(i(180)),f=v(i(184)),g=v(i(189)),y=v(i(194));function v(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}n.utils.mixins.performMixins();var m=p.shared||null;e.accessibility=h,e.extract=l,e.extras=u,e.filters=c,e.interaction=d,e.loaders=p,e.mesh=f,e.particles=g,e.prepare=y,e.loader=m,"function"==typeof a.default&&(0,a.default)(e),t.PIXI=e}).call(this,i(22))},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}();var n=function(){function t(e,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._x=r,this._y=n,this.cb=e,this.scope=i}return t.prototype.clone=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new t(e||this.cb,i||this.scope,this._x,this._y)},t.prototype.set=function(t,e){var i=t||0,r=e||(0!==e?i:0);this._x===i&&this._y===r||(this._x=i,this._y=r,this.cb.call(this.scope))},t.prototype.copy=function(t){this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope))},t.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},r(t,[{key:"x",get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}},{key:"y",get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}]),t}();e.default=n},function(t,e,i){"use strict";e.__esModule=!0;var r,n=i(24),o=(r=n)&&r.__esModule?r:{default:r};var s=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],a=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],h=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],l=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],u=[],c=[];function d(t){return t<0?-1:t>0?1:0}!function(){for(var t=0;t<16;t++){var e=[];c.push(e);for(var i=0;i<16;i++)for(var r=d(s[t]*s[i]+h[t]*a[i]),n=d(a[t]*s[i]+l[t]*a[i]),p=d(s[t]*h[i]+h[t]*l[i]),f=d(a[t]*h[i]+l[t]*l[i]),g=0;g<16;g++)if(s[g]===r&&a[g]===n&&h[g]===p&&l[g]===f){e.push(g);break}}for(var y=0;y<16;y++){var v=new o.default;v.set(s[y],a[y],h[y],l[y],0,0),u.push(v)}}();var p={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(t){return s[t]},uY:function(t){return a[t]},vX:function(t){return h[t]},vY:function(t){return l[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return c[t][e]},sub:function(t,e){return c[t][p.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?p.S:p.N:2*Math.abs(e)<=Math.abs(t)?t>0?p.E:p.W:e>0?t>0?p.SE:p.SW:t>0?p.NE:p.NW},matrixAppendRotationInv:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=u[p.inv(e)];n.tx=i,n.ty=r,t.append(n)}};e.default=p},function(t,e){t.exports=function(t,e,i){var r;if(i){var n=i.tempAttribState,o=i.attribState;for(r=0;r<n.length;r++)n[r]=!1;for(r=0;r<e.length;r++)n[e[r].attribute.location]=!0;for(r=0;r<o.length;r++)o[r]!==n[r]&&(o[r]=n[r],i.attribState[r]?t.enableVertexAttribArray(r):t.disableVertexAttribArray(r))}else for(r=0;r<e.length;r++){var s=e[r];t.enableVertexAttribArray(s.attribute.location)}}},function(t,e){var i=function(t,e,i,r,n){this.gl=t,this.texture=t.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=e||-1,this.height=i||-1,this.format=r||t.RGBA,this.type=n||t.UNSIGNED_BYTE};i.prototype.upload=function(t){this.bind();var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var i=t.videoWidth||t.width,r=t.videoHeight||t.height;r!==this.height||i!==this.width?e.texImage2D(e.TEXTURE_2D,0,this.format,this.format,this.type,t):e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.format,this.type,t),this.width=i,this.height=r};var r=!1;i.prototype.uploadData=function(t,e,i){this.bind();var n=this.gl;if(t instanceof Float32Array){if(!r){if(!n.getExtension("OES_texture_float"))throw new Error("floating point textures not available");r=!0}this.type=n.FLOAT}else this.type=this.type||n.UNSIGNED_BYTE;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),e!==this.width||i!==this.height?n.texImage2D(n.TEXTURE_2D,0,this.format,e,i,0,this.format,this.type,t||null):n.texSubImage2D(n.TEXTURE_2D,0,0,0,e,i,this.format,this.type,t||null),this.width=e,this.height=i},i.prototype.bind=function(t){var e=this.gl;void 0!==t&&e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,this.texture)},i.prototype.unbind=function(){var t=this.gl;t.bindTexture(t.TEXTURE_2D,null)},i.prototype.minFilter=function(t){var e=this.gl;this.bind(),this.mipmap?e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR_MIPMAP_LINEAR:e.NEAREST_MIPMAP_NEAREST):e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR:e.NEAREST)},i.prototype.magFilter=function(t){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t?e.LINEAR:e.NEAREST)},i.prototype.enableMipmap=function(){var t=this.gl;this.bind(),this.mipmap=!0,t.generateMipmap(t.TEXTURE_2D)},i.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)},i.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)},i.prototype.enableWrapClamp=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)},i.prototype.enableWrapRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)},i.prototype.enableWrapMirrorRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.MIRRORED_REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.MIRRORED_REPEAT)},i.prototype.destroy=function(){this.gl.deleteTexture(this.texture)},i.fromSource=function(t,e,r){var n=new i(t);return n.premultiplyAlpha=r||!1,n.upload(e),n},i.fromData=function(t,e,r,n){var o=new i(t);return o.uploadData(e,r,n),o},t.exports=i},function(t,e){var i=function(t,e,i){var r=t.createShader(e);return t.shaderSource(r,i),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)?r:(console.log(t.getShaderInfoLog(r)),null)};t.exports=function(t,e,r,n){var o=i(t,t.VERTEX_SHADER,e),s=i(t,t.FRAGMENT_SHADER,r),a=t.createProgram();if(t.attachShader(a,o),t.attachShader(a,s),n)for(var h in n)t.bindAttribLocation(a,n[h],h);return t.linkProgram(a),t.getProgramParameter(a,t.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(a,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(a)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(a)),t.deleteProgram(a),a=null),t.deleteShader(o),t.deleteShader(s),a}},function(t,e,i){var r=i(26),n=i(45),o=function(t,e,i,r){gl.vertexAttribPointer(this.location,this.size,t||gl.FLOAT,e||!1,i||0,r||0)};t.exports=function(t,e){for(var i={},s=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),a=0;a<s;a++){var h=t.getActiveAttrib(e,a),l=r(t,h.type);i[h.name]={type:l,size:n(l),location:t.getAttribLocation(e,h.name),pointer:o}}return i}},function(t,e){var i={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};t.exports=function(t){return i[t]}},function(t,e,i){var r=i(26),n=i(47);t.exports=function(t,e){for(var i={},o=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),s=0;s<o;s++){var a=t.getActiveUniform(e,s),h=a.name.replace(/\[.*?\]/,""),l=r(t,a.type);i[h]={type:l,size:a.size,location:t.getUniformLocation(e,h),value:n(l,a.size)}}return i}},function(t,e){var i=function(t){for(var e=new Array(t),i=0;i<e.length;i++)e[i]=!1;return e};t.exports=function(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"sampler2D":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"bool":return!1;case"bvec2":return i(2*e);case"bvec3":return i(3*e);case"bvec4":return i(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}}},function(t,e){t.exports=function(t,e){return"precision"!==t.substring(0,9)?"precision "+e+" float;\n"+t:t}},function(t,e){var i=function(t){return function(){return this.data[t].value}},r={float:function(t,e,i){t.uniform1f(e,i)},vec2:function(t,e,i){t.uniform2f(e,i[0],i[1])},vec3:function(t,e,i){t.uniform3f(e,i[0],i[1],i[2])},vec4:function(t,e,i){t.uniform4f(e,i[0],i[1],i[2],i[3])},int:function(t,e,i){t.uniform1i(e,i)},ivec2:function(t,e,i){t.uniform2i(e,i[0],i[1])},ivec3:function(t,e,i){t.uniform3i(e,i[0],i[1],i[2])},ivec4:function(t,e,i){t.uniform4i(e,i[0],i[1],i[2],i[3])},bool:function(t,e,i){t.uniform1i(e,i)},bvec2:function(t,e,i){t.uniform2i(e,i[0],i[1])},bvec3:function(t,e,i){t.uniform3i(e,i[0],i[1],i[2])},bvec4:function(t,e,i){t.uniform4i(e,i[0],i[1],i[2],i[3])},mat2:function(t,e,i){t.uniformMatrix2fv(e,!1,i)},mat3:function(t,e,i){t.uniformMatrix3fv(e,!1,i)},mat4:function(t,e,i){t.uniformMatrix4fv(e,!1,i)},sampler2D:function(t,e,i){t.uniform1i(e,i)}},n={float:function(t,e,i){t.uniform1fv(e,i)},vec2:function(t,e,i){t.uniform2fv(e,i)},vec3:function(t,e,i){t.uniform3fv(e,i)},vec4:function(t,e,i){t.uniform4fv(e,i)},int:function(t,e,i){t.uniform1iv(e,i)},ivec2:function(t,e,i){t.uniform2iv(e,i)},ivec3:function(t,e,i){t.uniform3iv(e,i)},ivec4:function(t,e,i){t.uniform4iv(e,i)},bool:function(t,e,i){t.uniform1iv(e,i)},bvec2:function(t,e,i){t.uniform2iv(e,i)},bvec3:function(t,e,i){t.uniform3iv(e,i)},bvec4:function(t,e,i){t.uniform4iv(e,i)},sampler2D:function(t,e,i){t.uniform1iv(e,i)}};function o(t,e){return function(i){this.data[t].value=i;var o=this.data[t].location;1===e.size?r[e.type](this.gl,o,i):n[e.type](this.gl,o,i)}}function s(t,e){for(var i=e,r=0;r<t.length-1;r++){var n=i[t[r]]||{data:{}};i[t[r]]=n,i=n}return i}t.exports=function(t,e){var r={data:{}};r.gl=t;for(var n=Object.keys(e),a=0;a<n.length;a++){var h=n[a],l=h.split("."),u=l[l.length-1],c=s(l,r),d=e[h];c.data[u]=d,c.gl=t,Object.defineProperty(c,u,{get:i(u),set:o(u,d)})}return r}},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=c(i(8)),o=i(0),s=c(i(3)),a=c(i(51)),h=c(i(52)),l=c(i(27)),u=i(4);function c(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this)),r=s.default.TRANSFORM_MODE===o.TRANSFORM_MODE.STATIC?a.default:h.default;return i.tempDisplayObjectParent=null,i.transform=new r,i.alpha=1,i.visible=!0,i.renderable=!0,i.parent=null,i.worldAlpha=1,i.filterArea=null,i._filters=null,i._enabledFilters=null,i._bounds=new l.default,i._boundsID=0,i._lastBoundsID=-1,i._boundsRect=null,i._localBoundsRect=null,i._mask=null,i._destroyed=!1,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&this.calculateBounds(),e||(this._boundsRect||(this._boundsRect=new u.Rectangle),e=this._boundsRect),this._bounds.getRectangle(e)},e.prototype.getLocalBounds=function(t){var e=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,t||(this._localBoundsRect||(this._localBoundsRect=new u.Rectangle),t=this._localBoundsRect);var r=this.getBounds(!1,t);return this.parent=i,this.transform=e,r},e.prototype.toGlobal=function(t,e){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},e.prototype.toLocal=function(t,e,i,r){return e&&(t=e.toGlobal(t,i,r)),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,i)},e.prototype.renderWebGL=function(t){},e.prototype.renderCanvas=function(t){},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;return this.position.x=t,this.position.y=e,this.scale.x=i||1,this.scale.y=r||1,this.rotation=n,this.skew.x=o,this.skew.y=s,this.pivot.x=a,this.pivot.y=h,this},e.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},r(e,[{key:"_tempDisplayObjectParent",get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new e),this.tempDisplayObjectParent}},{key:"x",get:function(){return this.position.x},set:function(t){this.transform.position.x=t}},{key:"y",get:function(){return this.position.y},set:function(t){this.transform.position.y=t}},{key:"worldTransform",get:function(){return this.transform.worldTransform}},{key:"localTransform",get:function(){return this.transform.localTransform}},{key:"position",get:function(){return this.transform.position},set:function(t){this.transform.position.copy(t)}},{key:"scale",get:function(){return this.transform.scale},set:function(t){this.transform.scale.copy(t)}},{key:"pivot",get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copy(t)}},{key:"skew",get:function(){return this.transform.skew},set:function(t){this.transform.skew.copy(t)}},{key:"rotation",get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t}},{key:"worldVisible",get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}},{key:"mask",get:function(){return this._mask},set:function(t){this._mask&&(this._mask.renderable=!0,this._mask.isMask=!1),this._mask=t,this._mask&&(this._mask.renderable=!1,this._mask.isMask=!0)}},{key:"filters",get:function(){return this._filters&&this._filters.slice()},set:function(t){this._filters=t&&t.slice()}}]),e}(n.default);e.default=d,d.prototype.displayObjectUpdateTransform=d.prototype.updateTransform},function(t,e,i){"use strict";e.__esModule=!0;var r,n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=i(4),s=i(29);var a=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return i.position=new o.ObservablePoint(i.onChange,i,0,0),i.scale=new o.ObservablePoint(i.onChange,i,1,1),i.pivot=new o.ObservablePoint(i.onChange,i,0,0),i.skew=new o.ObservablePoint(i.updateSkew,i,0,0),i._rotation=0,i._cx=1,i._sx=0,i._cy=0,i._sy=1,i._localID=0,i._currentLocalID=0,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onChange=function(){this._localID++},e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x),this._localID++},e.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale._x,t.b=this._sx*this.scale._x,t.c=this._cy*this.scale._y,t.d=this._sy*this.scale._y,t.tx=this.position._x-(this.pivot._x*t.a+this.pivot._y*t.c),t.ty=this.position._y-(this.pivot._x*t.b+this.pivot._y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},e.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale._x,e.b=this._sx*this.scale._x,e.c=this._cy*this.scale._y,e.d=this._sy*this.scale._y,e.tx=this.position._x-(this.pivot._x*e.a+this.pivot._y*e.c),e.ty=this.position._y-(this.pivot._x*e.b+this.pivot._y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var i=t.worldTransform,r=this.worldTransform;r.a=e.a*i.a+e.b*i.c,r.b=e.a*i.b+e.b*i.d,r.c=e.c*i.a+e.d*i.c,r.d=e.c*i.b+e.d*i.d,r.tx=e.tx*i.a+e.ty*i.c+i.tx,r.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++}},e.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},n(e,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())}}]),e}(((r=s)&&r.__esModule?r:{default:r}).default);e.default=a},function(t,e,i){"use strict";e.__esModule=!0;var r,n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=i(4),s=i(29);var a=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return i.position=new o.Point(0,0),i.scale=new o.Point(1,1),i.skew=new o.ObservablePoint(i.updateSkew,i,0,0),i.pivot=new o.Point(0,0),i._rotation=0,i._cx=1,i._sx=0,i._cy=0,i._sy=1,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x)},e.prototype.updateLocalTransform=function(){var t=this.localTransform;t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d)},e.prototype.updateTransform=function(t){var e=this.localTransform;e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d);var i=t.worldTransform,r=this.worldTransform;r.a=e.a*i.a+e.b*i.c,r.b=e.a*i.b+e.b*i.d,r.c=e.c*i.a+e.d*i.c,r.d=e.c*i.b+e.d*i.d,r.tx=e.tx*i.a+e.ty*i.c+i.tx,r.ty=e.tx*i.b+e.ty*i.d+i.ty,this._worldID++},e.prototype.setFromMatrix=function(t){t.decompose(this)},n(e,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t,this.updateSkew()}}]),e}(((r=s)&&r.__esModule?r:{default:r}).default);e.default=a},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location;if(0===t.indexOf("data:"))return"";e=e||window.location,s||(s=document.createElement("a"));s.href=t;var i=!(t=o.default.parse(s.href)).port&&""===e.port||t.port===e.port;if(t.hostname!==e.hostname||!i||t.protocol!==e.protocol)return"anonymous";return""};var r,n=i(54),o=(r=n)&&r.__esModule?r:{default:r};var s=void 0},function(t,e,i){"use strict";var r=i(118),n=i(120);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=b,e.resolve=function(t,e){return b(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?b(t,!1,!0).resolveObject(e):e},e.format=function(t){n.isString(t)&&(t=b(t));return t instanceof o?t.format():o.prototype.format.call(t)},e.Url=o;var s=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,h=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),u=["'"].concat(l),c=["%","/","?",";","#"].concat(u),d=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},y={javascript:!0,"javascript:":!0},v={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},m=i(121);function b(t,e,i){if(t&&n.isObject(t)&&t instanceof o)return t;var r=new o;return r.parse(t,e,i),r}o.prototype.parse=function(t,e,i){if(!n.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),a=-1!==o&&o<t.indexOf("#")?"?":"#",l=t.split(a);l[0]=l[0].replace(/\\/g,"/");var b=t=l.join(a);if(b=b.trim(),!i&&1===t.split("#").length){var $=h.exec(b);if($)return this.path=b,this.href=b,this.pathname=$[1],$[2]?(this.search=$[2],this.query=e?m.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var w=s.exec(b);if(w){var x=(w=w[0]).toLowerCase();this.protocol=x,b=b.substr(w.length)}if(i||w||b.match(/^\/\/[^@\/]+@[^@\/]+/)){var _="//"===b.substr(0,2);!_||w&&y[w]||(b=b.substr(2),this.slashes=!0)}if(!y[w]&&(_||w&&!v[w])){for(var T,E,O=-1,S=0;S<d.length;S++){-1!==(C=b.indexOf(d[S]))&&(-1===O||C<O)&&(O=C)}-1!==(E=-1===O?b.lastIndexOf("@"):b.lastIndexOf("@",O))&&(T=b.slice(0,E),b=b.slice(E+1),this.auth=decodeURIComponent(T)),O=-1;for(S=0;S<c.length;S++){var C;-1!==(C=b.indexOf(c[S]))&&(-1===O||C<O)&&(O=C)}-1===O&&(O=b.length),this.host=b.slice(0,O),b=b.slice(O),this.parseHost(),this.hostname=this.hostname||"";var P="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!P)for(var I=this.hostname.split(/\./),M=(S=0,I.length);S<M;S++){var A=I[S];if(A&&!A.match(p)){for(var R="",D=0,k=A.length;D<k;D++)A.charCodeAt(D)>127?R+="x":R+=A[D];if(!R.match(p)){var L=I.slice(0,S),j=I.slice(S+1),N=A.match(f);N&&(L.push(N[1]),j.unshift(N[2])),j.length&&(b="/"+j.join(".")+b),this.hostname=L.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),P||(this.hostname=r.toASCII(this.hostname));var F=this.port?":"+this.port:"",B=this.hostname||"";this.host=B+F,this.href+=this.host,P&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!g[x])for(S=0,M=u.length;S<M;S++){var U=u[S];if(-1!==b.indexOf(U)){var G=encodeURIComponent(U);G===U&&(G=escape(U)),b=b.split(U).join(G)}}var H=b.indexOf("#");-1!==H&&(this.hash=b.substr(H),b=b.slice(0,H));var W=b.indexOf("?");if(-1!==W?(this.search=b.substr(W),this.query=b.substr(W+1),e&&(this.query=m.parse(this.query)),b=b.slice(0,W)):e&&(this.search="",this.query={}),b&&(this.pathname=b),v[x]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){F=this.pathname||"";var X=this.search||"";this.path=F+X}return this.href=this.format(),this},o.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",i=this.pathname||"",r=this.hash||"",o=!1,s="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&n.isObject(this.query)&&Object.keys(this.query).length&&(s=m.stringify(this.query));var a=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||v[e])&&!1!==o?(o="//"+(o||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),e+o+(i=i.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(a=a.replace("#","%23"))+r},o.prototype.resolve=function(t){return this.resolveObject(b(t,!1,!0)).format()},o.prototype.resolveObject=function(t){if(n.isString(t)){var e=new o;e.parse(t,!1,!0),t=e}for(var i=new o,r=Object.keys(this),s=0;s<r.length;s++){var a=r[s];i[a]=this[a]}if(i.hash=t.hash,""===t.href)return i.href=i.format(),i;if(t.slashes&&!t.protocol){for(var h=Object.keys(t),l=0;l<h.length;l++){var u=h[l];"protocol"!==u&&(i[u]=t[u])}return v[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(t.protocol&&t.protocol!==i.protocol){if(!v[t.protocol]){for(var c=Object.keys(t),d=0;d<c.length;d++){var p=c[d];i[p]=t[p]}return i.href=i.format(),i}if(i.protocol=t.protocol,t.host||y[t.protocol])i.pathname=t.pathname;else{for(var f=(t.pathname||"").split("/");f.length&&!(t.host=f.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),i.pathname=f.join("/")}if(i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,i.pathname||i.search){var g=i.pathname||"",m=i.search||"";i.path=g+m}return i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var b=i.pathname&&"/"===i.pathname.charAt(0),$=t.host||t.pathname&&"/"===t.pathname.charAt(0),w=$||b||i.host&&t.pathname,x=w,_=i.pathname&&i.pathname.split("/")||[],T=(f=t.pathname&&t.pathname.split("/")||[],i.protocol&&!v[i.protocol]);if(T&&(i.hostname="",i.port=null,i.host&&(""===_[0]?_[0]=i.host:_.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===f[0]?f[0]=t.host:f.unshift(t.host)),t.host=null),w=w&&(""===f[0]||""===_[0])),$)i.host=t.host||""===t.host?t.host:i.host,i.hostname=t.hostname||""===t.hostname?t.hostname:i.hostname,i.search=t.search,i.query=t.query,_=f;else if(f.length)_||(_=[]),_.pop(),_=_.concat(f),i.search=t.search,i.query=t.query;else if(!n.isNullOrUndefined(t.search)){if(T)i.hostname=i.host=_.shift(),(P=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=P.shift(),i.host=i.hostname=P.shift());return i.search=t.search,i.query=t.query,n.isNull(i.pathname)&&n.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!_.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var E=_.slice(-1)[0],O=(i.host||t.host||_.length>1)&&("."===E||".."===E)||""===E,S=0,C=_.length;C>=0;C--)"."===(E=_[C])?_.splice(C,1):".."===E?(_.splice(C,1),S++):S&&(_.splice(C,1),S--);if(!w&&!x)for(;S--;S)_.unshift("..");!w||""===_[0]||_[0]&&"/"===_[0].charAt(0)||_.unshift(""),O&&"/"!==_.join("/").substr(-1)&&_.push("");var P,I=""===_[0]||_[0]&&"/"===_[0].charAt(0);T&&(i.hostname=i.host=I?"":_.length?_.shift():"",(P=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=P.shift(),i.host=i.hostname=P.shift()));return(w=w||i.host&&_.length)&&!I&&_.unshift(""),_.length?i.pathname=_.join("/"):(i.pathname=null,i.path=null),n.isNull(i.pathname)&&n.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},o.prototype.parseHost=function(){var t=this.host,e=a.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=l(i(10)),o=i(2),s=i(33),a=i(0),h=l(i(53));function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(i,r){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),!i)throw new Error("No video source element specified.");(i.readyState===i.HAVE_ENOUGH_DATA||i.readyState===i.HAVE_FUTURE_DATA)&&i.width&&i.height&&(i.complete=!0);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,r));return o.width=i.videoWidth,o.height=i.videoHeight,o._autoUpdate=!0,o._isAutoUpdating=!1,o.autoPlay=n,o.update=o.update.bind(o),o._onCanPlay=o._onCanPlay.bind(o),i.addEventListener("play",o._onPlayStart.bind(o)),i.addEventListener("pause",o._onPlayStop.bind(o)),o.hasLoaded=!1,o.__loaded=!1,o._isSourceReady()?o._onCanPlay():(i.addEventListener("canplay",o._onCanPlay),i.addEventListener("canplaythrough",o._onCanPlay)),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&!1===t.paused&&!1===t.ended&&t.readyState>2},e.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},e.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(s.shared.add(this.update,this,a.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0)},e.prototype._onPlayStop=function(){this._isAutoUpdating&&(s.shared.remove(this.update,this),this._isAutoUpdating=!1)},e.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.emit("loaded",this)),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.source.play())},e.prototype.destroy=function(){this._isAutoUpdating&&s.shared.remove(this.update,this),this.source&&this.source._pixiId&&(n.default.removeFromCache(this.source._pixiId),delete this.source._pixiId,this.source.pause(),this.source.src="",this.source.load()),t.prototype.destroy.call(this)},e.fromVideo=function(t,i,r){t._pixiId||(t._pixiId="video_"+(0,o.uid)());var s=o.BaseTextureCache[t._pixiId];return s||(s=new e(t,i,r),n.default.addToCache(s,t._pixiId)),s},e.fromUrl=function(t,i,r,n){var o=document.createElement("video");o.setAttribute("webkit-playsinline",""),o.setAttribute("playsinline","");var s=Array.isArray(t)?t[0].src||t[0]:t.src||t;if(void 0===r&&0!==s.indexOf("data:")?o.crossOrigin=(0,h.default)(s):r&&(o.crossOrigin="string"==typeof r?r:"anonymous"),Array.isArray(t))for(var a=0;a<t.length;++a)o.appendChild(c(t[a].src||t[a],t[a].mime));else o.appendChild(c(s,t.mime));return o.load(),e.fromVideo(o,i,n)},r(e,[{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isAutoUpdating?(s.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(s.shared.add(this.update,this,a.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0))}}]),e}(n.default);function c(t,e){if(!e){var i=t.split("?").shift().toLowerCase();e="video/"+i.substr(i.lastIndexOf(".")+1)}var r=document.createElement("source");return r.src=t,r.type=e,r}e.default=u,u.fromUrls=u.fromUrl},function(t,e,i){"use strict";e.__esModule=!0;var r,n=i(40),o=(r=n)&&r.__esModule?r:{default:r};var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsUint32=new Uint32Array(4)}return t.prototype.set=function(t,e,i){var r=e.width,n=e.height;if(i){var s=t.width/2/r,a=t.height/2/n,h=t.x/r+s,l=t.y/n+a;i=o.default.add(i,o.default.NW),this.x0=h+s*o.default.uX(i),this.y0=l+a*o.default.uY(i),i=o.default.add(i,2),this.x1=h+s*o.default.uX(i),this.y1=l+a*o.default.uY(i),i=o.default.add(i,2),this.x2=h+s*o.default.uX(i),this.y2=l+a*o.default.uY(i),i=o.default.add(i,2),this.x3=h+s*o.default.uX(i),this.y3=l+a*o.default.uY(i)}else this.x0=t.x/r,this.y0=t.y/n,this.x1=(t.x+t.width)/r,this.y1=t.y/n,this.x2=(t.x+t.width)/r,this.y2=(t.y+t.height)/n,this.x3=t.x/r,this.y3=(t.y+t.height)/n;this.uvsUint32[0]=(65535&Math.round(65535*this.y0))<<16|65535&Math.round(65535*this.x0),this.uvsUint32[1]=(65535&Math.round(65535*this.y1))<<16|65535&Math.round(65535*this.x1),this.uvsUint32[2]=(65535&Math.round(65535*this.y2))<<16|65535&Math.round(65535*this.x2),this.uvsUint32[3]=(65535&Math.round(65535*this.y3))<<16|65535&Math.round(65535*this.x3)},t}();e.default=s},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=i(2),o=i(4),s=i(0),a=c(i(3)),h=c(i(11)),l=c(i(34)),u=c(i(8));function c(t){return t&&t.__esModule?t:{default:t}}var d=new o.Matrix,p=function(t){function e(i,r,l,u){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var c=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return(0,n.sayHello)(i),"number"==typeof r&&(r=Object.assign({width:r,height:l||a.default.RENDER_OPTIONS.height},u)),r=Object.assign({},a.default.RENDER_OPTIONS,r),c.options=r,c.type=s.RENDERER_TYPE.UNKNOWN,c.screen=new o.Rectangle(0,0,r.width,r.height),c.view=r.view||document.createElement("canvas"),c.resolution=r.resolution||a.default.RESOLUTION,c.transparent=r.transparent,c.autoResize=r.autoResize||!1,c.blendModes=null,c.preserveDrawingBuffer=r.preserveDrawingBuffer,c.clearBeforeRender=r.clearBeforeRender,c.roundPixels=r.roundPixels,c._backgroundColor=0,c._backgroundColorRgba=[0,0,0,0],c._backgroundColorString="#000000",c.backgroundColor=r.backgroundColor||c._backgroundColor,c._tempDisplayObjectParent=new h.default,c._lastObjectRendered=c._tempDisplayObjectParent,c}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoResize&&(this.view.style.width=t+"px",this.view.style.height=e+"px")},e.prototype.generateTexture=function(t,e,i,r){r=r||t.getLocalBounds();var n=l.default.create(0|r.width,0|r.height,e,i);return d.tx=-r.x,d.ty=-r.y,this.render(t,n,!1,d,!!t.parent),n},e.prototype.destroy=function(t){t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=s.RENDERER_TYPE.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.options=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},r(e,[{key:"width",get:function(){return this.view.width}},{key:"height",get:function(){return this.view.height}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=(0,n.hex2string)(t),(0,n.hex2rgb)(t,this._backgroundColorRgba)}}]),e}(u.default);e.default=p},function(t,e,i){"use strict";e.__esModule=!0;var r=o(i(10)),n=o(i(3));function o(t){return t&&t.__esModule?t:{default:t}}var s=function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,o=arguments[2],s=arguments[3];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,null,o));return a.resolution=s||n.default.RESOLUTION,a.width=Math.ceil(i),a.height=Math.ceil(r),a.realWidth=a.width*a.resolution,a.realHeight=a.height*a.resolution,a.scaleMode=void 0!==o?o:n.default.SCALE_MODE,a.hasLoaded=!0,a._glRenderTargets={},a._canvasRenderTarget=null,a.valid=!1,a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),t===this.width&&e===this.height||(this.valid=t>0&&e>0,this.width=t,this.height=e,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.valid&&this.emit("update",this))},e.prototype.destroy=function(){t.prototype.destroy.call(this,!0),this.renderer=null},e}(r.default);e.default=s},function(t,e,i){"use strict";e.__esModule=!0;var r,n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=i(3),s=(r=o)&&r.__esModule?r:{default:r};var a=function(){function t(e,i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||s.default.RESOLUTION,this.resize(e,i)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},t.prototype.destroy=function(){this.context=null,this.canvas=null},n(t,[{key:"width",get:function(){return this.canvas.width},set:function(t){this.canvas.width=t}},{key:"height",get:function(){return this.canvas.height},set:function(t){this.canvas.height=t}}]),t}();e.default=a},function(t,e,i){"use strict";function r(t){var e=document.createElement("canvas");e.width=6,e.height=1;var i=e.getContext("2d");return i.fillStyle=t,i.fillRect(0,0,6,1),e}e.__esModule=!0,e.default=function(){if("undefined"==typeof document)return!1;var t=r("#ff00ff"),e=r("#ffff00"),i=document.createElement("canvas");i.width=6,i.height=1;var n=i.getContext("2d");n.globalCompositeOperation="multiply",n.drawImage(t,0,0),n.drawImage(e,2,0);var o=n.getImageData(2,0,1,1);if(!o)return!1;var s=o.data;return 255===s[0]&&0===s[1]&&0===s[2]}},function(t,e,i){"use strict";e.__esModule=!0;var r=s(i(62)),n=i(4),o=(i(6),s(i(63)));function s(t){return t&&t.__esModule?t:{default:t}}var a=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=new n.Matrix,o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n"));return i.renderable=!1,o.maskSprite=i,o.maskMatrix=r,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.apply=function(t,e,i,r){var n=this.maskSprite,s=this.maskSprite.texture;s.valid&&(s.transform||(s.transform=new o.default(s,0)),s.transform.update(),this.uniforms.mask=s,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n).prepend(s.transform.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=s.transform.uClampFrame,t.applyFilter(this,e,i,r))},e}(r.default);e.default=a},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=h(i(131)),o=i(2),s=i(0),a=h(i(3));function h(t){return t&&t.__esModule?t:{default:t}}var l={},u=function(){function t(e,i,r){for(var h in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=i||t.defaultFragmentSrc,this._blendMode=s.BLEND_MODES.NORMAL,this.uniformData=r||(0,n.default)(this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler"),this.uniforms={},this.uniformData)this.uniforms[h]=this.uniformData[h].value,this.uniformData[h].type&&(this.uniformData[h].type=this.uniformData[h].type.toLowerCase());this.glShaders={},l[this.vertexSrc+this.fragmentSrc]||(l[this.vertexSrc+this.fragmentSrc]=(0,o.uid)()),this.glShaderKey=l[this.vertexSrc+this.fragmentSrc],this.padding=4,this.resolution=a.default.FILTER_RESOLUTION,this.enabled=!0,this.autoFit=!0}return t.prototype.apply=function(t,e,i,r,n){t.applyFilter(this,e,i,r)},r(t,[{key:"blendMode",get:function(){return this._blendMode},set:function(t){this._blendMode=t}}],[{key:"defaultVertexSrc",get:function(){return["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 projectionMatrix;","uniform mat3 filterMatrix;","varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;","   vTextureCoord = aTextureCoord ;","}"].join("\n")}},{key:"defaultFragmentSrc",get:function(){return["varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","uniform sampler2D uSampler;","uniform sampler2D filterSampler;","void main(void){","   vec4 masky = texture2D(filterSampler, vFilterCoord);","   vec4 sample = texture2D(uSampler, vTextureCoord);","   vec4 color;","   if(mod(vFilterCoord.x, 1.0) > 0.5)","   {","     color = vec4(1.0, 0.0, 0.0, 1.0);","   }","   else","   {","     color = vec4(0.0, 1.0, 0.0, 1.0);","   }","   gl_FragColor = mix(sample, masky, 0.5);","   gl_FragColor *= sample.a;","}"].join("\n")}}]),t}();e.default=u},function(t,e,i){"use strict";e.__esModule=!0;var r,n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=i(24),s=(r=o)&&r.__esModule?r:{default:r};var a=new s.default,h=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._texture=e,this.mapCoord=new s.default,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._lastTextureID=-1,this.clampOffset=0,this.clampMargin=void 0===i?.5:i}return t.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var i=this.mapCoord,r=0;r<t.length;r+=2){var n=t[r],o=t[r+1];e[r]=n*i.a+o*i.c+i.tx,e[r+1]=n*i.b+o*i.d+i.ty}return e},t.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._lastTextureID===e._updateID)return!1;this._lastTextureID=e._updateID;var i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var r=e.orig,n=e.trim;n&&(a.set(r.width/n.width,0,0,r.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(a));var o=e.baseTexture,s=this.uClampFrame,h=this.clampMargin/o.resolution,l=this.clampOffset;return s[0]=(e._frame.x+h+l)/o.width,s[1]=(e._frame.y+h+l)/o.height,s[2]=(e._frame.x+e._frame.width-h+l)/o.width,s[3]=(e._frame.y+e._frame.height-h+l)/o.height,this.uClampOffset[0]=l/o.realWidth,this.uClampOffset[1]=l/o.realHeight,!0},n(t,[{key:"texture",get:function(){return this._texture},set:function(t){this._texture=t,this._lastTextureID=-1}}]),t}();e.default=h},function(t,e,i){"use strict";e.__esModule=!0;var r=o(i(5)),n=o(i(35));function o(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gl=e,this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.interleaved=new Float32Array(16);for(var o=0;o<4;o++)this.interleaved[4*o]=this.vertices[2*o],this.interleaved[4*o+1]=this.vertices[2*o+1],this.interleaved[4*o+2]=this.uvs[2*o],this.interleaved[4*o+3]=this.uvs[2*o+1];this.indices=(0,n.default)(1),this.vertexBuffer=r.default.GLBuffer.createVertexBuffer(e,this.interleaved,e.STATIC_DRAW),this.indexBuffer=r.default.GLBuffer.createIndexBuffer(e,this.indices,e.STATIC_DRAW),this.vao=new r.default.VertexArrayObject(e,i)}return t.prototype.initVao=function(t){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,t.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,t.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)},t.prototype.map=function(t,e){var i=0,r=0;return this.uvs[0]=i,this.uvs[1]=r,this.uvs[2]=i+e.width/t.width,this.uvs[3]=r,this.uvs[4]=i+e.width/t.width,this.uvs[5]=r+e.height/t.height,this.uvs[6]=i,this.uvs[7]=r+e.height/t.height,i=e.x,r=e.y,this.vertices[0]=i,this.vertices[1]=r,this.vertices[2]=i+e.width,this.vertices[3]=r,this.vertices[4]=i+e.width,this.vertices[5]=r+e.height,this.vertices[6]=i,this.vertices[7]=r+e.height,this},t.prototype.upload=function(){for(var t=0;t<4;t++)this.interleaved[4*t]=this.vertices[2*t],this.interleaved[4*t+1]=this.vertices[2*t+1],this.interleaved[4*t+2]=this.uvs[2*t],this.interleaved[4*t+3]=this.uvs[2*t+1];return this.vertexBuffer.upload(this.interleaved),this},t.prototype.destroy=function(){var t=this.gl;t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer)},t}();e.default=s},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=i(0),o=i(2);var s={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:n.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},a=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],h=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.styleID=0,this.reset(),c(this,e,e)}return t.prototype.clone=function(){var e={};return c(e,this,s),new t(e)},t.prototype.reset=function(){c(this,s,s)},t.prototype.toFontString=function(){var t="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var i=e.length-1;i>=0;i--){var r=e[i].trim();!/([\"\'])[^\'\"]+\1/.test(r)&&a.indexOf(r)<0&&(r='"'+r+'"'),e[i]=r}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},r(t,[{key:"align",get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)}},{key:"breakWords",get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)}},{key:"dropShadow",get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)}},{key:"dropShadowAlpha",get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)}},{key:"dropShadowAngle",get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)}},{key:"dropShadowBlur",get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)}},{key:"dropShadowColor",get:function(){return this._dropShadowColor},set:function(t){var e=u(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)}},{key:"dropShadowDistance",get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)}},{key:"fill",get:function(){return this._fill},set:function(t){var e=u(t);this._fill!==e&&(this._fill=e,this.styleID++)}},{key:"fillGradientType",get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)}},{key:"fillGradientStops",get:function(){return this._fillGradientStops},set:function(t){(function(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(var i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0})(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)}},{key:"fontSize",get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)}},{key:"fontStyle",get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)}},{key:"fontVariant",get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)}},{key:"leading",get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)}},{key:"lineJoin",get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)}},{key:"miterLimit",get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)}},{key:"padding",get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)}},{key:"stroke",get:function(){return this._stroke},set:function(t){var e=u(t);this._stroke!==e&&(this._stroke=e,this.styleID++)}},{key:"strokeThickness",get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)}},{key:"trim",get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)}},{key:"whiteSpace",get:function(){return this._whiteSpace},set:function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)}},{key:"wordWrap",get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)}},{key:"wordWrapWidth",get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)}}]),t}();function l(t){return"number"==typeof t?(0,o.hex2string)(t):("string"==typeof t&&0===t.indexOf("0x")&&(t=t.replace("0x","#")),t)}function u(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=l(t[e]);return t}return l(t)}function c(t,e,i){for(var r in i)Array.isArray(e[r])?t[r]=e[r].slice():t[r]=e[r]}e.default=h},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(e,i,r,n,o,s,a,h,l){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.text=e,this.style=i,this.width=r,this.height=n,this.lines=o,this.lineWidths=s,this.lineHeight=a,this.maxLineWidth=h,this.fontProperties=l}return t.measureText=function(e,i,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t._canvas;r=null==r?i.wordWrap:r;var o=i.toFontString(),s=t.measureFont(o),a=n.getContext("2d");a.font=o;for(var h=(r?t.wordWrap(e,i,n):e).split(/(?:\r\n|\r|\n)/),l=new Array(h.length),u=0,c=0;c<h.length;c++){var d=a.measureText(h[c]).width+(h[c].length-1)*i.letterSpacing;l[c]=d,u=Math.max(u,d)}var p=u+i.strokeThickness;i.dropShadow&&(p+=i.dropShadowDistance);var f=i.lineHeight||s.fontSize+i.strokeThickness,g=Math.max(f,s.fontSize+i.strokeThickness)+(h.length-1)*(f+i.leading);return i.dropShadow&&(g+=i.dropShadowDistance),new t(e,i,p,g,h,l,f+i.leading,u,s)},t.wordWrap=function(e,i){for(var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:t._canvas).getContext("2d"),n=0,o="",s="",a={},h=i.letterSpacing,l=i.whiteSpace,u=t.collapseSpaces(l),c=t.collapseNewlines(l),d=!u,p=i.wordWrapWidth+h,f=t.tokenize(e),g=0;g<f.length;g++){var y=f[g];if(t.isNewline(y)){if(!c){s+=t.addLine(o),d=!u,o="",n=0;continue}y=" "}if(u){var v=t.isBreakingSpace(y),m=t.isBreakingSpace(o[o.length-1]);if(v&&m)continue}var b=t.getFromCache(y,h,a,r);if(b>p)if(""!==o&&(s+=t.addLine(o),o="",n=0),t.canBreakWords(y,i.breakWords))for(var $=y.split(""),w=0;w<$.length;w++){for(var x=$[w],_=1;$[w+_];){var T=$[w+_],E=x[x.length-1];if(t.canBreakChars(E,T,y,w,i.breakWords))break;x+=T,_++}w+=x.length-1;var O=t.getFromCache(x,h,a,r);O+n>p&&(s+=t.addLine(o),d=!1,o="",n=0),o+=x,n+=O}else{o.length>0&&(s+=t.addLine(o),o="",n=0);var S=g===f.length-1;s+=t.addLine(y,!S),d=!1,o="",n=0}else b+n>p&&(d=!1,s+=t.addLine(o),o="",n=0),(o.length>0||!t.isBreakingSpace(y)||d)&&(o+=y,n+=b)}return s+=t.addLine(o,!1)},t.addLine=function(e){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e=t.trimRight(e),e=i?e+"\n":e},t.getFromCache=function(t,e,i,r){var n=i[t];if(void 0===n){var o=t.length*e;n=r.measureText(t).width+o,i[t]=n}return n},t.collapseSpaces=function(t){return"normal"===t||"pre-line"===t},t.collapseNewlines=function(t){return"normal"===t},t.trimRight=function(e){if("string"!=typeof e)return"";for(var i=e.length-1;i>=0;i--){var r=e[i];if(!t.isBreakingSpace(r))break;e=e.slice(0,-1)}return e},t.isNewline=function(e){return"string"==typeof e&&t._newlines.indexOf(e.charCodeAt(0))>=0},t.isBreakingSpace=function(e){return"string"==typeof e&&t._breakingSpaces.indexOf(e.charCodeAt(0))>=0},t.tokenize=function(e){var i=[],r="";if("string"!=typeof e)return i;for(var n=0;n<e.length;n++){var o=e[n];t.isBreakingSpace(o)||t.isNewline(o)?(""!==r&&(i.push(r),r=""),i.push(o)):r+=o}return""!==r&&i.push(r),i},t.canBreakWords=function(t,e){return e},t.canBreakChars=function(t,e,i,r,n){return!0},t.measureFont=function(e){if(t._fonts[e])return t._fonts[e];var i={},r=t._canvas,n=t._context;n.font=e;var o=t.METRICS_STRING+t.BASELINE_SYMBOL,s=Math.ceil(n.measureText(o).width),a=Math.ceil(n.measureText(t.BASELINE_SYMBOL).width),h=2*a;a=a*t.BASELINE_MULTIPLIER|0,r.width=s,r.height=h,n.fillStyle="#f00",n.fillRect(0,0,s,h),n.font=e,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(o,0,a);var l=n.getImageData(0,0,s,h).data,u=l.length,c=4*s,d=0,p=0,f=!1;for(d=0;d<a;++d){for(var g=0;g<c;g+=4)if(255!==l[p+g]){f=!0;break}if(f)break;p+=c}for(i.ascent=a-d,p=u-c,f=!1,d=h;d>a;--d){for(var y=0;y<c;y+=4)if(255!==l[p+y]){f=!0;break}if(f)break;p-=c}return i.descent=d-a,i.fontSize=i.ascent+i.descent,t._fonts[e]=i,i},t.clearMetrics=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e?delete t._fonts[e]:t._fonts={}},t}();e.default=r;var n=document.createElement("canvas");n.width=n.height=10,r._canvas=n,r._context=n.getContext("2d"),r._fonts={},r.METRICS_STRING="|Éq",r.BASELINE_SYMBOL="M",r.BASELINE_MULTIPLIER=1.4,r._newlines=[10,13],r._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(e,i,r,n,o,s,a,h,l){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.lineWidth=e,this.lineAlignment=l,this.nativeLines=a,this.lineColor=i,this.lineAlpha=r,this._lineTint=i,this.fillColor=n,this.fillAlpha=o,this._fillTint=n,this.fill=s,this.holes=[],this.shape=h,this.type=h.type}return t.prototype.clone=function(){return new t(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.nativeLines,this.shape,this.lineAlignment)},t.prototype.addHole=function(t){this.holes.push(t)},t.prototype.destroy=function(){this.shape=null,this.holes=null},t}();e.default=r},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=i(69),o=l(i(11)),s=i(33),a=l(i(3)),h=i(0);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e,i,r,h,l){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),"number"==typeof e&&(e=Object.assign({width:e,height:i||a.default.RENDER_OPTIONS.height,forceCanvas:!!h,sharedTicker:!!l},r)),this._options=e=Object.assign({autoStart:!0,sharedTicker:!1,forceCanvas:!1,sharedLoader:!1},e),this.renderer=(0,n.autoDetectRenderer)(e),this.stage=new o.default,this._ticker=null,this.ticker=e.sharedTicker?s.shared:new s.Ticker,e.autoStart&&this.start()}return t.prototype.render=function(){this.renderer.render(this.stage)},t.prototype.stop=function(){this._ticker.stop()},t.prototype.start=function(){this._ticker.start()},t.prototype.destroy=function(t,e){if(this._ticker){var i=this._ticker;this.ticker=null,i.destroy()}this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null,this._options=null},r(t,[{key:"ticker",set:function(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,h.UPDATE_PRIORITY.LOW)},get:function(){return this._ticker}},{key:"view",get:function(){return this.renderer.view}},{key:"screen",get:function(){return this.renderer.screen}}]),t}();e.default=u},function(t,e,i){"use strict";e.__esModule=!0,e.autoDetectRenderer=function(t,e,i,s){var a=t&&t.forceCanvas;void 0!==s&&(a=s);if(!a&&r.isWebGLSupported())return new o.default(t,e,i);return new n.default(t,e,i)};var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(2)),n=s(i(12)),o=s(i(19));function s(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";e.__esModule=!0,e.default={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1}},function(t,e,i){"use strict";e.__esModule=!0,e.BitmapText=e.TilingSpriteRenderer=e.TilingSprite=e.AnimatedSprite=void 0;var r=i(164);Object.defineProperty(e,"AnimatedSprite",{enumerable:!0,get:function(){return a(r).default}});var n=i(165);Object.defineProperty(e,"TilingSprite",{enumerable:!0,get:function(){return a(n).default}});var o=i(166);Object.defineProperty(e,"TilingSpriteRenderer",{enumerable:!0,get:function(){return a(o).default}});var s=i(167);function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"BitmapText",{enumerable:!0,get:function(){return a(s).default}}),i(168),i(169),i(170)},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1)),o=h(i(73)),s=h(i(74)),a=h(i(75));function h(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(i,r,a,h){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),h=h||5;var l=(0,o.default)(h,!0),u=(0,s.default)(h),c=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,l,u));return c.resolution=a||n.settings.RESOLUTION,c._quality=0,c.quality=r||4,c.strength=i||8,c.firstRun=!0,c}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.apply=function(t,e,i,r){if(this.firstRun){var n=t.renderer.gl,h=(0,a.default)(n);this.vertexSrc=(0,o.default)(h,!0),this.fragmentSrc=(0,s.default)(h),this.firstRun=!1}if(this.uniforms.strength=1/i.size.width*(i.size.width/e.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,i,r);else{for(var l=t.getRenderTarget(!0),u=e,c=l,d=0;d<this.passes-1;d++){t.applyFilter(this,u,c,!0);var p=c;c=u,u=p}t.applyFilter(this,u,i,r),t.returnRenderTarget(l)}},r(e,[{key:"blur",get:function(){return this.strength},set:function(t){this.padding=2*Math.abs(t),this.strength=t}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}]),e}(n.Filter);e.default=l},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t,e){var i=Math.ceil(t/2),n=r,o="",s=void 0;s=e?"vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);";for(var a=0;a<t;a++){var h=s.replace("%index%",a);h=h.replace("%sampleIndex%",a-(i-1)+".0"),o+=h,o+="\n"}return n=(n=n.replace("%blur%",o)).replace("%size%",t)};var r=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float strength;","uniform mat3 projectionMatrix;","varying vec2 vBlurTexCoords[%size%];","void main(void)","{","gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);","%blur%","}"].join("\n")},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t){for(var e=r[t],i=e.length,o=n,s="",a=void 0,h=0;h<t;h++){var l="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",h);a=h,h>=i&&(a=t-h-1),l=l.replace("%value%",e[a]),s+=l,s+="\n"}return o=(o=o.replace("%blur%",s)).replace("%size%",t)};var r={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},n=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n")},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t){var e=t.getParameter(t.MAX_VARYING_VECTORS),i=15;for(;i>e;)i-=2;return i}},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1)),o=h(i(73)),s=h(i(74)),a=h(i(75));function h(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(i,r,a,h){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),h=h||5;var l=(0,o.default)(h,!1),u=(0,s.default)(h),c=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,l,u));return c.resolution=a||n.settings.RESOLUTION,c._quality=0,c.quality=r||4,c.strength=i||8,c.firstRun=!0,c}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.apply=function(t,e,i,r){if(this.firstRun){var n=t.renderer.gl,h=(0,a.default)(n);this.vertexSrc=(0,o.default)(h,!1),this.fragmentSrc=(0,s.default)(h),this.firstRun=!1}if(this.uniforms.strength=1/i.size.height*(i.size.height/e.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,i,r);else{for(var l=t.getRenderTarget(!0),u=e,c=l,d=0;d<this.passes-1;d++){t.applyFilter(this,u,c,!0);var p=c;c=u,u=p}t.applyFilter(this,u,i,r),t.returnRenderTarget(l)}},r(e,[{key:"blur",get:function(){return this.strength},set:function(t){this.padding=2*Math.abs(t),this.strength=t}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}]),e}(n.Filter);e.default=l},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1));var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.global=new n.Point,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return t.prototype.getLocalPosition=function(t,e,i){return t.worldTransform.applyInverse(i||this.global,e)},t.prototype.copyEvent=function(t){t.isPrimary&&(this.isPrimary=!0),this.button=t.button,this.buttons=Number.isInteger(t.buttons)?t.buttons:t.which,this.width=t.width,this.height=t.height,this.tiltX=t.tiltX,this.tiltY=t.tiltY,this.pointerType=t.pointerType,this.pressure=t.pressure,this.rotationAngle=t.rotationAngle,this.twist=t.twist||0,this.tangentialPressure=t.tangentialPressure||0},t.prototype.reset=function(){this.isPrimary=!1},r(t,[{key:"pointerId",get:function(){return this.identifier}}]),t}();e.default=o},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.stopped=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return t.prototype.stopPropagation=function(){this.stopped=!0},t.prototype.reset=function(){this.stopped=!1,this.currentTarget=null,this.target=null},t}();e.default=r},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}();var n=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._pointerId=e,this._flags=t.FLAGS.NONE}return t.prototype._doSet=function(t,e){this._flags=e?this._flags|t:this._flags&~t},r(t,[{key:"pointerId",get:function(){return this._pointerId}},{key:"flags",get:function(){return this._flags},set:function(t){this._flags=t}},{key:"none",get:function(){return this._flags===this.constructor.FLAGS.NONE}},{key:"over",get:function(){return 0!=(this._flags&this.constructor.FLAGS.OVER)},set:function(t){this._doSet(this.constructor.FLAGS.OVER,t)}},{key:"rightDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.RIGHT_DOWN)},set:function(t){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,t)}},{key:"leftDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.LEFT_DOWN)},set:function(t){this._doSet(this.constructor.FLAGS.LEFT_DOWN,t)}}]),t}();e.default=n,n.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4})},function(t,e,i){"use strict";e.__esModule=!0,e.default={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0}},function(t,e,i){"use strict";e.__esModule=!0,e.parse=s,e.default=function(){return function(t,e){if(t.data&&t.type===n.Resource.TYPE.XML)if(0!==t.data.getElementsByTagName("page").length&&0!==t.data.getElementsByTagName("info").length&&null!==t.data.getElementsByTagName("info")[0].getAttribute("face")){var i=t.isDataUrl?"":r.dirname(t.url);t.isDataUrl&&("."===i&&(i=""),this.baseUrl&&i&&"/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(i+="/")),(i=i.replace(this.baseUrl,""))&&"/"!==i.charAt(i.length-1)&&(i+="/");for(var o=t.data.getElementsByTagName("page"),a={},h=function(i){a[i.metadata.pageFile]=i.texture,Object.keys(a).length===o.length&&(s(t,a),e())},l=0;l<o.length;++l){var u=o[l].getAttribute("file"),c=i+u,d=!1;for(var p in this.resources){var f=this.resources[p];if(f.url===c){f.metadata.pageFile=u,f.texture?h(f):f.onAfterMiddleware.add(h),d=!0;break}}if(!d){var g={crossOrigin:t.crossOrigin,loadType:n.Resource.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:u},t.metadata.imageMetadata),parentResource:t};this.add(c,g,h)}}}else e();else e()}};var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(6)),n=i(15),o=i(71);function s(t,e){t.bitmapFont=o.BitmapText.registerFont(t.data,e)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}();function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(e,i,r){void 0===i&&(i=!1),n(this,t),this._fn=e,this._once=i,this._thisArg=r,this._next=this._prev=this._owner=null}return r(t,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),t}();function s(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}var a=function(){function t(){n(this,t),this._head=this._tail=void 0}return r(t,[{key:"handlers",value:function(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],e=this._head;if(t)return!!e;for(var i=[];e;)i.push(e),e=e._next;return i}},{key:"has",value:function(t){if(!(t instanceof o))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return t._owner===this}},{key:"dispatch",value:function(){var t=this._head;if(!t)return!1;for(;t;)t._once&&this.detach(t),t._fn.apply(t._thisArg,arguments),t=t._next;return!0}},{key:"add",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return s(this,new o(t,!1,e))}},{key:"once",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return s(this,new o(t,!0,e))}},{key:"detach",value:function(t){if(!(t instanceof o))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return t._owner!==this?this:(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null,this)}},{key:"detachAll",value:function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this}}]),t}();a.MiniSignalBinding=o,e.default=a,t.exports=e.default},function(t,e,i){"use strict";t.exports=function(t,e){e=e||{};for(var i={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},r=i.parser[e.strictMode?"strict":"loose"].exec(t),n={},o=14;o--;)n[i.key[o]]=r[o]||"";return n[i.q.name]={},n[i.key[12]].replace(i.q.parser,function(t,e,r){e&&(n[i.q.name][e]=r)}),n}},function(t,e,i){"use strict";function r(){}function n(t){return function(){if(null===t)throw new Error("Callback was already called.");var e=t;t=null,e.apply(this,arguments)}}e.__esModule=!0,e.eachSeries=function(t,e,i,r){var n=0,o=t.length;!function s(a){a||n===o?i&&i(a):r?setTimeout(function(){e(t[n++],s)},1):e(t[n++],s)}()},e.queue=function(t,e){if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var i=0,o={_tasks:[],concurrency:e,saturated:r,unsaturated:r,buffer:e/4,empty:r,drain:r,error:r,started:!1,paused:!1,push:function(t,e){s(t,!1,e)},kill:function(){i=0,o.drain=r,o.started=!1,o._tasks=[]},unshift:function(t,e){s(t,!0,e)},process:function(){for(;!o.paused&&i<o.concurrency&&o._tasks.length;){var e=o._tasks.shift();0===o._tasks.length&&o.empty(),(i+=1)===o.concurrency&&o.saturated(),t(e.data,n(a(e)))}},length:function(){return o._tasks.length},running:function(){return i},idle:function(){return o._tasks.length+i===0},pause:function(){!0!==o.paused&&(o.paused=!0)},resume:function(){if(!1!==o.paused){o.paused=!1;for(var t=1;t<=o.concurrency;t++)o.process()}}};function s(t,e,i){if(null!=i&&"function"!=typeof i)throw new Error("task callback must be a function");if(o.started=!0,null==t&&o.idle())setTimeout(function(){return o.drain()},1);else{var n={data:t,callback:"function"==typeof i?i:r};e?o._tasks.unshift(n):o._tasks.push(n),setTimeout(function(){return o.process()},1)}}function a(t){return function(){i-=1,t.callback.apply(t,arguments),null!=arguments[0]&&o.error(arguments[0],t.data),i<=o.concurrency-o.buffer&&o.unsaturated(),o.idle()&&o.drain(),o.process()}}return o}},function(t,e,i){"use strict";e.__esModule=!0,e.encodeBinary=n;var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function n(t){for(var e="",i=0;i<t.length;){for(var n=[0,0,0],o=[0,0,0,0],s=0;s<n.length;++s)i<t.length?n[s]=255&t.charCodeAt(i++):n[s]=0;switch(o[0]=n[0]>>2,o[1]=(3&n[0])<<4|n[1]>>4,o[2]=(15&n[1])<<2|n[2]>>6,o[3]=63&n[2],i-(t.length-1)){case 2:o[3]=64,o[2]=64;break;case 1:o[3]=64}for(var a=0;a<o.length;++a)e+=r.charAt(o[a])}return e}t.exports.default=n},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(){return function(t,e){var i=t.name+"_image";if(t.data&&t.type===n.Resource.TYPE.JSON&&t.data.frames&&!this.resources[i]){var r={crossOrigin:t.crossOrigin,metadata:t.metadata.imageMetadata,parentResource:t},o=h(t,this.baseUrl);this.add(i,o,r,function(i){if(i.error)e(i.error);else{var r=new a.Spritesheet(i.texture.baseTexture,t.data,t.url);r.parse(function(){t.spritesheet=r,t.textures=r.textures,e()})}})}else e()}},e.getResourcePath=h;var r,n=i(15),o=i(54),s=(r=o)&&r.__esModule?r:{default:r},a=i(1);function h(t,e){return t.isDataUrl?t.data.meta.image:s.default.resolve(t.url.replace(e,""),t.data.meta.image)}},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(){return function(t,e){t.data&&t.type===n.Resource.TYPE.IMAGE&&(t.texture=s.default.fromLoader(t.data,t.url,t.name)),e()}};var r,n=i(15),o=i(7),s=(r=o)&&r.__esModule?r:{default:r}},function(t,e,i){"use strict";e.__esModule=!0;var r,n=i(16),o=(r=n)&&r.__esModule?r:{default:r};var s=function(t){function e(i,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return s._ready=!0,s.verticesX=r||10,s.verticesY=n||10,s.drawMode=o.default.DRAW_MODES.TRIANGLES,s.refresh(),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._refresh=function(){for(var t=this._texture,e=this.verticesX*this.verticesY,i=[],r=[],n=[],o=this.verticesX-1,s=this.verticesY-1,a=t.width/o,h=t.height/s,l=0;l<e;l++){var u=l%this.verticesX,c=l/this.verticesX|0;i.push(u*a,c*h),r.push(u/o,c/s)}for(var d=o*s,p=0;p<d;p++){var f=p%o,g=p/o|0,y=g*this.verticesX+f,v=g*this.verticesX+f+1,m=(g+1)*this.verticesX+f,b=(g+1)*this.verticesX+f+1;n.push(y,v,m),n.push(v,b,m)}this.vertices=new Float32Array(i),this.uvs=new Float32Array(r),this.colors=new Float32Array([]),this.indices=new Uint16Array(n),this.dirty++,this.indexDirty++,this.multiplyUvs()},e.prototype._onTextureUpdate=function(){o.default.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},e}(o.default);e.default=s},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.maxItemsPerFrame=e,this.itemsLeft=0}return t.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},t.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},t}();e.default=r},function(t,e,i){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){for(var i in t)e[i]=t[i]}function o(t,e){var i=t.prototype;if(Object.create){var r=Object.create(e.prototype);i.__proto__=r}if(!(i instanceof e)){var o=function(){};o.prototype=e.prototype,n(i,o=new o),t.prototype=i=o}i.constructor!=t&&("function"!=typeof t&&console.error("unknow Class:"+t),i.constructor=t)}var s="http://www.w3.org/1999/xhtml",a={},h=a.ELEMENT_NODE=1,l=a.ATTRIBUTE_NODE=2,u=a.TEXT_NODE=3,c=a.CDATA_SECTION_NODE=4,d=a.ENTITY_REFERENCE_NODE=5,p=a.ENTITY_NODE=6,f=a.PROCESSING_INSTRUCTION_NODE=7,g=a.COMMENT_NODE=8,y=a.DOCUMENT_NODE=9,v=a.DOCUMENT_TYPE_NODE=10,m=a.DOCUMENT_FRAGMENT_NODE=11,b=a.NOTATION_NODE=12,$={},w={},x=($.INDEX_SIZE_ERR=(w[1]="Index size error",1),$.DOMSTRING_SIZE_ERR=(w[2]="DOMString size error",2),$.HIERARCHY_REQUEST_ERR=(w[3]="Hierarchy request error",3),$.WRONG_DOCUMENT_ERR=(w[4]="Wrong document",4),$.INVALID_CHARACTER_ERR=(w[5]="Invalid character",5),$.NO_DATA_ALLOWED_ERR=(w[6]="No data allowed",6),$.NO_MODIFICATION_ALLOWED_ERR=(w[7]="No modification allowed",7),$.NOT_FOUND_ERR=(w[8]="Not found",8)),_=($.NOT_SUPPORTED_ERR=(w[9]="Not supported",9),$.INUSE_ATTRIBUTE_ERR=(w[10]="Attribute in use",10));$.INVALID_STATE_ERR=(w[11]="Invalid state",11),$.SYNTAX_ERR=(w[12]="Syntax error",12),$.INVALID_MODIFICATION_ERR=(w[13]="Invalid modification",13),$.NAMESPACE_ERR=(w[14]="Invalid namespace",14),$.INVALID_ACCESS_ERR=(w[15]="Invalid access",15);function T(t,e){if(e instanceof Error)var i=e;else i=this,Error.call(this,w[t]),this.message=w[t],Error.captureStackTrace&&Error.captureStackTrace(this,T);return i.code=t,e&&(this.message=this.message+": "+e),i}function E(){}function O(t,e){this._node=t,this._refresh=e,S(this)}function S(t){var e=t._node._inc||t._node.ownerDocument._inc;if(t._inc!=e){var i=t._refresh(t._node);tt(t,"length",i.length),n(i,t),t._inc=e}}function C(){}function P(t,e){for(var i=t.length;i--;)if(t[i]===e)return i}function I(t,e,i,r){if(r?e[P(e,r)]=i:e[e.length++]=i,t){i.ownerElement=t;var n=t.ownerDocument;n&&(r&&j(n,t,r),function(t,e,i){t&&t._inc++,"http://www.w3.org/2000/xmlns/"==i.namespaceURI&&(e._nsMap[i.prefix?i.localName:""]=i.value)}(n,t,i))}}function M(t,e,i){var r=P(e,i);if(!(r>=0))throw T(x,new Error);for(var n=e.length-1;r<n;)e[r]=e[++r];if(e.length=n,t){var o=t.ownerDocument;o&&(j(o,t,i),i.ownerElement=null)}}function A(t){if(this._features={},t)for(var e in t)this._features=t[e]}function R(){}function D(t){return("<"==t?"&lt;":">"==t&&"&gt;")||"&"==t&&"&amp;"||'"'==t&&"&quot;"||"&#"+t.charCodeAt()+";"}function k(t,e){if(e(t))return!0;if(t=t.firstChild)do{if(k(t,e))return!0}while(t=t.nextSibling)}function L(){}function j(t,e,i,r){t&&t._inc++,"http://www.w3.org/2000/xmlns/"==i.namespaceURI&&delete e._nsMap[i.prefix?i.localName:""]}function N(t,e,i){if(t&&t._inc){t._inc++;var r=e.childNodes;if(i)r[r.length++]=i;else{for(var n=e.firstChild,o=0;n;)r[o++]=n,n=n.nextSibling;r.length=o}}}function F(t,e){var i=e.previousSibling,r=e.nextSibling;return i?i.nextSibling=r:t.firstChild=r,r?r.previousSibling=i:t.lastChild=i,N(t.ownerDocument,t),e}function B(t,e,i){var r=e.parentNode;if(r&&r.removeChild(e),e.nodeType===m){var n=e.firstChild;if(null==n)return e;var o=e.lastChild}else n=o=e;var s=i?i.previousSibling:t.lastChild;n.previousSibling=s,o.nextSibling=i,s?s.nextSibling=n:t.firstChild=n,null==i?t.lastChild=o:i.previousSibling=o;do{n.parentNode=t}while(n!==o&&(n=n.nextSibling));return N(t.ownerDocument||t,t),e.nodeType==m&&(e.firstChild=e.lastChild=null),e}function U(){this._nsMap={}}function G(){}function H(){}function W(){}function X(){}function z(){}function V(){}function Y(){}function q(){}function K(){}function Z(){}function J(){}function Q(){}function tt(t,e,i){t[e]=i}T.prototype=Error.prototype,n($,T),E.prototype={length:0,item:function(t){return this[t]||null}},O.prototype.item=function(t){return S(this),this[t]},o(O,E),C.prototype={length:0,item:E.prototype.item,getNamedItem:function(t){for(var e=this.length;e--;){var i=this[e];if(i.nodeName==t)return i}},setNamedItem:function(t){var e=t.ownerElement;if(e&&e!=this._ownerElement)throw new T(_);var i=this.getNamedItem(t.nodeName);return I(this._ownerElement,this,t,i),i},setNamedItemNS:function(t){var e,i=t.ownerElement;if(i&&i!=this._ownerElement)throw new T(_);return e=this.getNamedItemNS(t.namespaceURI,t.localName),I(this._ownerElement,this,t,e),e},removeNamedItem:function(t){var e=this.getNamedItem(t);return M(this._ownerElement,this,e),e},removeNamedItemNS:function(t,e){var i=this.getNamedItemNS(t,e);return M(this._ownerElement,this,i),i},getNamedItemNS:function(t,e){for(var i=this.length;i--;){var r=this[i];if(r.localName==e&&r.namespaceURI==t)return r}return null}},A.prototype={hasFeature:function(t,e){var i=this._features[t.toLowerCase()];return!(!i||e&&!(e in i))},createDocument:function(t,e,i){var r=new L;if(r.doctype=i,i&&r.appendChild(i),r.implementation=this,r.childNodes=new E,e){var n=r.createElementNS(t,e);r.appendChild(n)}return r},createDocumentType:function(t,e,i){var r=new V;return r.name=t,r.nodeName=t,r.publicId=e,r.systemId=i,r}},R.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(t,e){return B(this,t,e)},replaceChild:function(t,e){this.insertBefore(t,e),e&&this.removeChild(e)},removeChild:function(t){return F(this,t)},appendChild:function(t){return this.insertBefore(t,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(t){return function t(e,i,n){var o=new i.constructor;for(var s in i){var a=i[s];"object"!=r(a)&&a!=o[s]&&(o[s]=a)}i.childNodes&&(o.childNodes=new E);o.ownerDocument=e;switch(o.nodeType){case h:var u=i.attributes,c=o.attributes=new C,d=u.length;c._ownerElement=o;for(var p=0;p<d;p++)o.setAttributeNode(t(e,u.item(p),!0));break;case l:n=!0}if(n)for(var f=i.firstChild;f;)o.appendChild(t(e,f,n)),f=f.nextSibling;return o}(this.ownerDocument||this,this,t)},normalize:function(){for(var t=this.firstChild;t;){var e=t.nextSibling;e&&e.nodeType==u&&t.nodeType==u?(this.removeChild(e),t.appendData(e.data)):(t.normalize(),t=e)}},isSupported:function(t,e){return this.ownerDocument.implementation.hasFeature(t,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(t){for(var e=this;e;){var i=e._nsMap;if(i)for(var r in i)if(i[r]==t)return r;e=2==e.nodeType?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(t){for(var e=this;e;){var i=e._nsMap;if(i&&t in i)return i[t];e=2==e.nodeType?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(t){return null==this.lookupPrefix(t)}},n(a,R),n(a,R.prototype),L.prototype={nodeName:"#document",nodeType:y,doctype:null,documentElement:null,_inc:1,insertBefore:function(t,e){if(t.nodeType==m){for(var i=t.firstChild;i;){var r=i.nextSibling;this.insertBefore(i,e),i=r}return t}return null==this.documentElement&&1==t.nodeType&&(this.documentElement=t),B(this,t,e),t.ownerDocument=this,t},removeChild:function(t){return this.documentElement==t&&(this.documentElement=null),F(this,t)},importNode:function(t,e){return function t(e,i,r){var n;switch(i.nodeType){case h:(n=i.cloneNode(!1)).ownerDocument=e;for(var o=n.attributes,s=o.length,a=0;a<s;a++)n.setAttributeNodeNS(t(e,o.item(a),r));case m:break;case l:r=!0}n||(n=i.cloneNode(!1));n.ownerDocument=e;n.parentNode=null;if(r)for(var u=i.firstChild;u;)n.appendChild(t(e,u,r)),u=u.nextSibling;return n}(this,t,e)},getElementById:function(t){var e=null;return k(this.documentElement,function(i){if(1==i.nodeType&&i.getAttribute("id")==t)return e=i,!0}),e},createElement:function(t){var e=new U;return e.ownerDocument=this,e.nodeName=t,e.tagName=t,e.childNodes=new E,(e.attributes=new C)._ownerElement=e,e},createDocumentFragment:function(){var t=new Z;return t.ownerDocument=this,t.childNodes=new E,t},createTextNode:function(t){var e=new W;return e.ownerDocument=this,e.appendData(t),e},createComment:function(t){var e=new X;return e.ownerDocument=this,e.appendData(t),e},createCDATASection:function(t){var e=new z;return e.ownerDocument=this,e.appendData(t),e},createProcessingInstruction:function(t,e){var i=new J;return i.ownerDocument=this,i.tagName=i.target=t,i.nodeValue=i.data=e,i},createAttribute:function(t){var e=new G;return e.ownerDocument=this,e.name=t,e.nodeName=t,e.localName=t,e.specified=!0,e},createEntityReference:function(t){var e=new K;return e.ownerDocument=this,e.nodeName=t,e},createElementNS:function(t,e){var i=new U,r=e.split(":"),n=i.attributes=new C;return i.childNodes=new E,i.ownerDocument=this,i.nodeName=e,i.tagName=e,i.namespaceURI=t,2==r.length?(i.prefix=r[0],i.localName=r[1]):i.localName=e,n._ownerElement=i,i},createAttributeNS:function(t,e){var i=new G,r=e.split(":");return i.ownerDocument=this,i.nodeName=e,i.name=e,i.namespaceURI=t,i.specified=!0,2==r.length?(i.prefix=r[0],i.localName=r[1]):i.localName=e,i}},o(L,R),U.prototype={nodeType:h,hasAttribute:function(t){return null!=this.getAttributeNode(t)},getAttribute:function(t){var e=this.getAttributeNode(t);return e&&e.value||""},getAttributeNode:function(t){return this.attributes.getNamedItem(t)},setAttribute:function(t,e){var i=this.ownerDocument.createAttribute(t);i.value=i.nodeValue=""+e,this.setAttributeNode(i)},removeAttribute:function(t){var e=this.getAttributeNode(t);e&&this.removeAttributeNode(e)},appendChild:function(t){return t.nodeType===m?this.insertBefore(t,null):function(t,e){var i=e.parentNode;if(i){var r=t.lastChild;i.removeChild(e),r=t.lastChild}return r=t.lastChild,e.parentNode=t,e.previousSibling=r,e.nextSibling=null,r?r.nextSibling=e:t.firstChild=e,t.lastChild=e,N(t.ownerDocument,t,e),e}(this,t)},setAttributeNode:function(t){return this.attributes.setNamedItem(t)},setAttributeNodeNS:function(t){return this.attributes.setNamedItemNS(t)},removeAttributeNode:function(t){return this.attributes.removeNamedItem(t.nodeName)},removeAttributeNS:function(t,e){var i=this.getAttributeNodeNS(t,e);i&&this.removeAttributeNode(i)},hasAttributeNS:function(t,e){return null!=this.getAttributeNodeNS(t,e)},getAttributeNS:function(t,e){var i=this.getAttributeNodeNS(t,e);return i&&i.value||""},setAttributeNS:function(t,e,i){var r=this.ownerDocument.createAttributeNS(t,e);r.value=r.nodeValue=i,this.setAttributeNode(r)},getAttributeNodeNS:function(t,e){return this.attributes.getNamedItemNS(t,e)},getElementsByTagName:function(t){return new O(this,function(e){var i=[];return k(e,function(r){r===e||r.nodeType!=h||"*"!==t&&r.tagName!=t||i.push(r)}),i})},getElementsByTagNameNS:function(t,e){return new O(this,function(i){var r=[];return k(i,function(n){n===i||n.nodeType!==h||n.namespaceURI!==t||"*"!==e&&n.localName!=e||r.push(n)}),r})}},L.prototype.getElementsByTagName=U.prototype.getElementsByTagName,L.prototype.getElementsByTagNameNS=U.prototype.getElementsByTagNameNS,o(U,R),G.prototype.nodeType=l,o(G,R),H.prototype={data:"",substringData:function(t,e){return this.data.substring(t,t+e)},appendData:function(t){t=this.data+t,this.nodeValue=this.data=t,this.length=t.length},insertData:function(t,e){this.replaceData(t,0,e)},appendChild:function(t){throw new Error(w[3])},deleteData:function(t,e){this.replaceData(t,e,"")},replaceData:function(t,e,i){i=this.data.substring(0,t)+i+this.data.substring(t+e),this.nodeValue=this.data=i,this.length=i.length}},o(H,R),W.prototype={nodeName:"#text",nodeType:u,splitText:function(t){var e=this.data,i=e.substring(t);e=e.substring(0,t),this.data=this.nodeValue=e,this.length=e.length;var r=this.ownerDocument.createTextNode(i);return this.parentNode&&this.parentNode.insertBefore(r,this.nextSibling),r}},o(W,H),X.prototype={nodeName:"#comment",nodeType:g},o(X,H),z.prototype={nodeName:"#cdata-section",nodeType:c},o(z,H),V.prototype.nodeType=v,o(V,R),Y.prototype.nodeType=b,o(Y,R),q.prototype.nodeType=p,o(q,R),K.prototype.nodeType=d,o(K,R),Z.prototype.nodeName="#document-fragment",Z.prototype.nodeType=m,o(Z,R),J.prototype.nodeType=f,o(J,R),Q.prototype.serializeToString=function(t){var e=[];return function t(e,i){switch(e.nodeType){case h:var r=e.attributes,n=r.length,o=e.firstChild,a=e.tagName,p=s===e.namespaceURI;i.push("<",a);for(var b=0;b<n;b++)t(r.item(b),i,p);if(o||p&&!/^(?:meta|link|img|br|hr|input)$/i.test(a)){if(i.push(">"),p&&/^script$/i.test(a))o&&i.push(o.data);else for(;o;)t(o,i),o=o.nextSibling;i.push("</",a,">")}else i.push("/>");return;case y:case m:for(var o=e.firstChild;o;)t(o,i),o=o.nextSibling;return;case l:return i.push(" ",e.name,'="',e.value.replace(/[<&"]/g,D),'"');case u:return i.push(e.data.replace(/[<&]/g,D));case c:return i.push("<![CDATA[",e.data,"]]>");case g:return i.push("\x3c!--",e.data,"--\x3e");case v:var $=e.publicId,w=e.systemId;if(i.push("<!DOCTYPE ",e.name),$)i.push(' PUBLIC "',$),w&&"."!=w&&i.push('" "',w),i.push('">');else if(w&&"."!=w)i.push(' SYSTEM "',w,'">');else{var x=e.internalSubset;x&&i.push(" [",x,"]"),i.push(">")}return;case f:return i.push("<?",e.target," ",e.data,"?>");case d:return i.push("&",e.nodeName,";");default:i.push("??",e.nodeName)}}(t,e),e.join("")},R.prototype.toString=function(){return Q.prototype.serializeToString(this)};try{if(Object.defineProperty){Object.defineProperty(O.prototype,"length",{get:function(){return S(this),this.$$length}}),Object.defineProperty(R.prototype,"textContent",{get:function(){return function t(e){switch(e.nodeType){case 1:case 11:var i=[];for(e=e.firstChild;e;)7!==e.nodeType&&8!==e.nodeType&&i.push(t(e)),e=e.nextSibling;return i.join("");default:return e.nodeValue}}(this)},set:function(t){switch(this.nodeType){case 1:case 11:for(;this.firstChild;)this.removeChild(this.firstChild);(t||String(t))&&this.appendChild(this.ownerDocument.createTextNode(t));break;default:this.data=t,this.value=value,this.nodeValue=t}}}),tt=function(t,e,i){t["$$"+e]=i}}}catch(t){}e.DOMImplementation=A,e.XMLSerializer=Q},function(t,e){
/** @license zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License */
(function(){"use strict";var t=void 0,e=this;function i(i,r){var n,o=i.split("."),s=e;!(o[0]in s)&&s.execScript&&s.execScript("var "+o[0]);for(;o.length&&(n=o.shift());)o.length||r===t?s=s[n]?s[n]:s[n]={}:s[n]=r}var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array&&"undefined"!=typeof DataView;function n(t){var e,i,n,o,s,a,h,l,u,c,d=t.length,p=0,f=Number.POSITIVE_INFINITY;for(l=0;l<d;++l)t[l]>p&&(p=t[l]),t[l]<f&&(f=t[l]);for(e=1<<p,i=new(r?Uint32Array:Array)(e),n=1,o=0,s=2;n<=p;){for(l=0;l<d;++l)if(t[l]===n){for(a=0,h=o,u=0;u<n;++u)a=a<<1|1&h,h>>=1;for(c=n<<16|l,u=a;u<e;u+=s)i[u]=c;++o}++n,o<<=1,s<<=1}return[i,p,f]}function o(t,e){switch(this.g=[],this.h=32768,this.c=this.f=this.d=this.k=0,this.input=r?new Uint8Array(t):t,this.l=!1,this.i=a,this.p=!1,!e&&(e={})||(e.index&&(this.d=e.index),e.bufferSize&&(this.h=e.bufferSize),e.bufferType&&(this.i=e.bufferType),e.resize&&(this.p=e.resize)),this.i){case s:this.a=32768,this.b=new(r?Uint8Array:Array)(32768+this.h+258);break;case a:this.a=0,this.b=new(r?Uint8Array:Array)(this.h),this.e=this.u,this.m=this.r,this.j=this.s;break;default:throw Error("invalid inflate mode")}}var s=0,a=1;o.prototype.t=function(){for(;!this.l;){var e=O(this,3);switch(1&e&&(this.l=!0),e>>>=1){case 0:var i=this.input,o=this.d,h=this.b,l=this.a,u=i.length,d=t,p=h.length,f=t;if(this.c=this.f=0,o+1>=u)throw Error("invalid uncompressed block header: LEN");if(d=i[o++]|i[o++]<<8,o+1>=u)throw Error("invalid uncompressed block header: NLEN");if(d===~(i[o++]|i[o++]<<8))throw Error("invalid uncompressed block header: length verify");if(o+d>i.length)throw Error("input buffer is broken");switch(this.i){case s:for(;l+d>h.length;){if(d-=f=p-l,r)h.set(i.subarray(o,o+f),l),l+=f,o+=f;else for(;f--;)h[l++]=i[o++];this.a=l,h=this.e(),l=this.a}break;case a:for(;l+d>h.length;)h=this.e({o:2});break;default:throw Error("invalid inflate mode")}if(r)h.set(i.subarray(o,o+d),l),l+=d,o+=d;else for(;d--;)h[l++]=i[o++];this.d=o,this.a=l,this.b=h;break;case 1:this.j(_,E);break;case 2:var g,y,v,m,b=O(this,5)+257,$=O(this,5)+1,w=O(this,4)+4,x=new(r?Uint8Array:Array)(c.length),T=t,C=t,P=t,I=t,M=t;for(M=0;M<w;++M)x[c[M]]=O(this,3);if(!r)for(M=w,w=x.length;M<w;++M)x[c[M]]=0;for(g=n(x),T=new(r?Uint8Array:Array)(b+$),M=0,m=b+$;M<m;)switch(C=S(this,g)){case 16:for(I=3+O(this,2);I--;)T[M++]=P;break;case 17:for(I=3+O(this,3);I--;)T[M++]=0;P=0;break;case 18:for(I=11+O(this,7);I--;)T[M++]=0;P=0;break;default:P=T[M++]=C}y=n(r?T.subarray(0,b):T.slice(0,b)),v=n(r?T.subarray(b):T.slice(b)),this.j(y,v);break;default:throw Error("unknown BTYPE: "+e)}}return this.m()};var h,l,u=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],c=r?new Uint16Array(u):u,d=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],p=r?new Uint16Array(d):d,f=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],g=r?new Uint8Array(f):f,y=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],v=r?new Uint16Array(y):y,m=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],b=r?new Uint8Array(m):m,$=new(r?Uint8Array:Array)(288);for(h=0,l=$.length;h<l;++h)$[h]=143>=h?8:255>=h?9:279>=h?7:8;var w,x,_=n($),T=new(r?Uint8Array:Array)(30);for(w=0,x=T.length;w<x;++w)T[w]=5;var E=n(T);function O(t,e){for(var i,r=t.f,n=t.c,o=t.input,s=t.d,a=o.length;n<e;){if(s>=a)throw Error("input buffer is broken");r|=o[s++]<<n,n+=8}return i=r&(1<<e)-1,t.f=r>>>e,t.c=n-e,t.d=s,i}function S(t,e){for(var i,r,n=t.f,o=t.c,s=t.input,a=t.d,h=s.length,l=e[0],u=e[1];o<u&&!(a>=h);)n|=s[a++]<<o,o+=8;if((r=(i=l[n&(1<<u)-1])>>>16)>o)throw Error("invalid code length: "+r);return t.f=n>>r,t.c=o-r,t.d=a,65535&i}o.prototype.j=function(t,e){var i=this.b,r=this.a;this.n=t;for(var n,o,s,a,h=i.length-258;256!==(n=S(this,t));)if(256>n)r>=h&&(this.a=r,i=this.e(),r=this.a),i[r++]=n;else for(a=p[o=n-257],0<g[o]&&(a+=O(this,g[o])),n=S(this,e),s=v[n],0<b[n]&&(s+=O(this,b[n])),r>=h&&(this.a=r,i=this.e(),r=this.a);a--;)i[r]=i[r++-s];for(;8<=this.c;)this.c-=8,this.d--;this.a=r},o.prototype.s=function(t,e){var i=this.b,r=this.a;this.n=t;for(var n,o,s,a,h=i.length;256!==(n=S(this,t));)if(256>n)r>=h&&(h=(i=this.e()).length),i[r++]=n;else for(a=p[o=n-257],0<g[o]&&(a+=O(this,g[o])),n=S(this,e),s=v[n],0<b[n]&&(s+=O(this,b[n])),r+a>h&&(h=(i=this.e()).length);a--;)i[r]=i[r++-s];for(;8<=this.c;)this.c-=8,this.d--;this.a=r},o.prototype.e=function(){var t,e,i=new(r?Uint8Array:Array)(this.a-32768),n=this.a-32768,o=this.b;if(r)i.set(o.subarray(32768,i.length));else for(t=0,e=i.length;t<e;++t)i[t]=o[t+32768];if(this.g.push(i),this.k+=i.length,r)o.set(o.subarray(n,n+32768));else for(t=0;32768>t;++t)o[t]=o[n+t];return this.a=32768,o},o.prototype.u=function(t){var e,i,n,o=this.input.length/this.d+1|0,s=this.input,a=this.b;return t&&("number"==typeof t.o&&(o=t.o),"number"==typeof t.q&&(o+=t.q)),2>o?i=(n=(s.length-this.d)/this.n[2]/2*258|0)<a.length?a.length+n:a.length<<1:i=a.length*o,r?(e=new Uint8Array(i)).set(a):e=a,this.b=e},o.prototype.m=function(){var t,e,i,n,o,s=0,a=this.b,h=this.g,l=new(r?Uint8Array:Array)(this.k+(this.a-32768));if(0===h.length)return r?this.b.subarray(32768,this.a):this.b.slice(32768,this.a);for(e=0,i=h.length;e<i;++e)for(n=0,o=(t=h[e]).length;n<o;++n)l[s++]=t[n];for(e=32768,i=this.a;e<i;++e)l[s++]=a[e];return this.g=[],this.buffer=l},o.prototype.r=function(){var t,e=this.a;return r?this.p?(t=new Uint8Array(e)).set(this.b.subarray(0,e)):t=this.b.subarray(0,e):(this.b.length>e&&(this.b.length=e),t=this.b),this.buffer=t},i("Zlib.RawInflate",o),i("Zlib.RawInflate.prototype.decompress",o.prototype.t);var C,P,I,M,A={ADAPTIVE:a,BLOCK:s};if(Object.keys)C=Object.keys(A);else for(P in C=[],I=0,A)C[I++]=P;for(I=0,M=C.length;I<M;++I)i("Zlib.RawInflate.BufferType."+(P=C[I]),A[P])}).call(this)},function(t,e,i){"use strict";function r(t){for(var e=new ArrayBuffer(t.length),i=new Int8Array(e),r=0,n=t.length;r<n;r++)i[r]=t.charCodeAt(r);return e}i.d(e,"a",function(){return r})},function(t,e,i){"use strict";function r(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var n=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._sharedCanvas=e,this._events={},this.addEventListener=this.addEventListener.bind(this),this._sharedCanvas.addEventListener=this.addEventListener,this.removeEventListener=this.removeEventListener.bind(this),this._sharedCanvas.removeEventListener=this.removeEventListener}var e,i,n;return e=t,(i=[{key:"addEventListener",value:function(t,e,i){var r=this._events;r||(r={},this._events={}),r[t]||(r[t]=[]),r[t].push(e)}},{key:"removeEventListener",value:function(t,e){var i=this._events[t];if(i&&i.length>0)for(var r=i.length;r>0;r--)if(i[r]===e){i.splice(r,r);break}}},{key:"dispatchEvents",value:function(t,e){if(e&&e.length){for(var i=[],r=0;r<e.length;r++){var n=e[r],o=this._events[n];if(o&&o.length&&o.length>0)for(var s=0;s<o.length;s++)i.push(o[s])}if(i&&i.length>0)for(var a=0;a<i.length;a++){var h=i[a];h&&h(t)}}}},{key:"createTouchEvent",value:function(t,e){var i=new TouchEvent(e,this._sharedCanvas);return i.touches=i.targetTouches=Array.from(t.touches),i.changedTouches=t.changedTouches,i.timeStamp=t.timeStamp,i}},{key:"_onTouchStart",value:function(t){var e=this.createTouchEvent(t,"touchstart");this.dispatchEvents(e,["pointerdown","touchstart","mousedown"])}},{key:"_onTouchMove",value:function(t){var e=this.createTouchEvent(t,"touchmove");this.dispatchEvents(e,["pointermove","touchmove","mousemove"])}},{key:"_onTouchEnd",value:function(t){var e=this.createTouchEvent(t,"touchend");this.dispatchEvents(e,["pointerup","touchend","mouseout"])}},{key:"_onTouchCancel",value:function(t){var e=this.createTouchEvent(t,"touchcancel");this.dispatchEvents(e,["pointercancel","touchcancel","pointerleave","mouseover"])}},{key:"addEvents",value:function(){this._onTouchStart=this._onTouchStart.bind(this),this._onTouchMove=this._onTouchMove.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onTouchCancel=this._onTouchCancel.bind(this),wx.onTouchStart(this._onTouchStart),wx.onTouchMove(this._onTouchMove),wx.onTouchEnd(this._onTouchEnd),wx.onTouchCancel(this._onTouchCancel)}},{key:"offEvents",value:function(){wx.offTouchStart(this._onTouchStart),wx.offTouchMove(this._onTouchMove),wx.offTouchEnd(this._onTouchEnd),wx.offTouchCancel(this._onTouchCancel)}},{key:"enable",value:function(t){t?this.addEvents():this.offEvents()}}])&&r(e.prototype,i),n&&r(e,n),t}();e.a=n},function(t,e,i){i(200),t.exports=i(95)},function(t,e,i){"use strict";i.r(e),function(t){var e=i(9),r=i(92),n=i(93),o=wx.getSharedCanvas();new n.a(o).enable(!0);var s=wx.getSystemInfoSync(),a=s.pixelRatio,h=s.windowHeight,l=s.windowWidth;t.utils.isWebGLSupported=function(){return!1};var u=new t.Application({view:o,width:l*a,height:h*a,forceCanvas:!0,autoResize:!1,antialias:!1,backgroundColor:1514020});u.renderer.plugins.interaction.mapPositionToPoint=function(t,e,i){t.x=e*a,t.y=i*a},e.a.GRoot.inst.attachTo(u);new e.a.utils.AssetLoader;var c=t.loaders.Resource,d={RES_TYPE:{IMG:1,FUI:2}};wx.onMessage(function(i){console.log(">>>>>开放域接受数据");var n={};for(var o in i){var s=i[o],a=new c(o,"",{});if(s.type==d.RES_TYPE.IMG){var h=wx.createImage();h.src=s.data,a.data=h,a.texture=t.Texture.fromLoader(h)}else s.type==d.RES_TYPE.FUI&&(a.data=Object(r.a)(s.data),console.log(a.data));n[o]=a}e.a.utils.AssetLoader.addResources(n),e.a.UIPackage.addPackage("pixi-rank");var l=e.a.UIPackage.createObject("pixi-rank","rank");e.a.GRoot.inst.addChild(l)})}.call(this,i(38))},function(t,e,i){"use strict";i(97),i(99),i(100),i(101),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array)},function(t,e,i){"use strict";var r,n=i(98),o=(r=n)&&r.__esModule?r:{default:r};Object.assign||(Object.assign=o.default)},function(t,e,i){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var i,s,a=function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),h=1;h<arguments.length;h++){for(var l in i=Object(arguments[h]))n.call(i,l)&&(a[l]=i[l]);if(r){s=r(i);for(var u=0;u<s.length;u++)o.call(i,s[u])&&(a[s[u]]=i[s[u]])}}return a}},function(t,e,i){"use strict";(function(t){if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!t.performance||!t.performance.now){var e=Date.now();t.performance||(t.performance={}),t.performance.now=function(){return Date.now()-e}}for(var i=Date.now(),r=["ms","moz","webkit","o"],n=0;n<r.length&&!t.requestAnimationFrame;++n){var o=r[n];t.requestAnimationFrame=t[o+"RequestAnimationFrame"],t.cancelAnimationFrame=t[o+"CancelAnimationFrame"]||t[o+"CancelRequestAnimationFrame"]}t.requestAnimationFrame||(t.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),r=16+i-e;return r<0&&(r=0),i=e,setTimeout(function(){i=Date.now(),t(performance.now())},r)}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(t){return clearTimeout(t)})}).call(this,i(22))},function(t,e,i){"use strict";Math.sign||(Math.sign=function(t){return 0===(t=Number(t))||isNaN(t)?t:t>0?1:-1})},function(t,e,i){"use strict";Number.isInteger||(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t})},function(t,e,i){"use strict";e.__esModule=!0;var r,n=i(25),o=(r=n)&&r.__esModule?r:{default:r},s=i(0);var a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=i,this.radius=r,this.type=s.SHAPES.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(t,e){if(this.radius<=0)return!1;var i=this.radius*this.radius,r=this.x-t,n=this.y-e;return(r*=r)+(n*=n)<=i},t.prototype.getBounds=function(){return new o.default(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},t}();e.default=a},function(t,e,i){"use strict";e.__esModule=!0;var r,n=i(25),o=(r=n)&&r.__esModule?r:{default:r},s=i(0);var a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=i,this.width=r,this.height=n,this.type=s.SHAPES.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=(t-this.x)/this.width,r=(e-this.y)/this.height;return(i*=i)+(r*=r)<=1},t.prototype.getBounds=function(){return new o.default(this.x-this.width,this.y-this.height,this.width,this.height)},t}();e.default=a},function(t,e,i){"use strict";e.__esModule=!0;var r,n=i(23),o=(r=n)&&r.__esModule?r:{default:r},s=i(0);var a=function(){function t(){for(var e=arguments.length,i=Array(e),r=0;r<e;r++)i[r]=arguments[r];if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Array.isArray(i[0])&&(i=i[0]),i[0]instanceof o.default){for(var n=[],a=0,h=i.length;a<h;a++)n.push(i[a].x,i[a].y);i=n}this.closed=!0,this.points=i,this.type=s.SHAPES.POLY}return t.prototype.clone=function(){return new t(this.points.slice())},t.prototype.close=function(){var t=this.points;t[0]===t[t.length-2]&&t[1]===t[t.length-1]||t.push(t[0],t[1])},t.prototype.contains=function(t,e){for(var i=!1,r=this.points.length/2,n=0,o=r-1;n<r;o=n++){var s=this.points[2*n],a=this.points[2*n+1],h=this.points[2*o],l=this.points[2*o+1];a>e!=l>e&&t<(e-a)/(l-a)*(h-s)+s&&(i=!i)}return i},t}();e.default=a},function(t,e,i){"use strict";e.__esModule=!0;var r=i(0);var n=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=i,this.width=n,this.height=o,this.radius=s,this.type=r.SHAPES.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var i=t-(this.x+this.radius),r=e-(this.y+this.radius),n=this.radius*this.radius;if(i*i+r*r<=n)return!0;if((i=t-(this.x+this.width-this.radius))*i+r*r<=n)return!0;if(i*i+(r=e-(this.y+this.height-this.radius))*r<=n)return!0;if((i=t-(this.x+this.radius))*i+r*r<=n)return!0}return!1},t}();e.default=n},function(t,e){t.exports=function(t,e){var i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e);if(!i)throw new Error("This browser does not support webGL. Try using the canvas renderer");return i}},function(t,e){var i=new ArrayBuffer(0),r=function(t,e,r,n){this.gl=t,this.buffer=t.createBuffer(),this.type=e||t.ARRAY_BUFFER,this.drawType=n||t.STATIC_DRAW,this.data=i,r&&this.upload(r),this._updateID=0};r.prototype.upload=function(t,e,i){i||this.bind();var r=this.gl;t=t||this.data,e=e||0,this.data.byteLength>=t.byteLength?r.bufferSubData(this.type,e,t):r.bufferData(this.type,t,this.drawType),this.data=t},r.prototype.bind=function(){this.gl.bindBuffer(this.type,this.buffer)},r.createVertexBuffer=function(t,e,i){return new r(t,t.ARRAY_BUFFER,e,i)},r.createIndexBuffer=function(t,e,i){return new r(t,t.ELEMENT_ARRAY_BUFFER,e,i)},r.create=function(t,e,i,n){return new r(t,e,i,n)},r.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)},t.exports=r},function(t,e,i){var r=i(42),n=function(t,e,i){this.gl=t,this.framebuffer=t.createFramebuffer(),this.stencil=null,this.texture=null,this.width=e||100,this.height=i||100};n.prototype.enableTexture=function(t){var e=this.gl;this.texture=t||new r(e),this.texture.bind(),this.bind(),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture.texture,0)},n.prototype.enableStencil=function(){if(!this.stencil){var t=this.gl;this.stencil=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.stencil),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,this.stencil),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,this.width,this.height)}},n.prototype.clear=function(t,e,i,r){this.bind();var n=this.gl;n.clearColor(t,e,i,r),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT)},n.prototype.bind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer)},n.prototype.unbind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null)},n.prototype.resize=function(t,e){var i=this.gl;this.width=t,this.height=e,this.texture&&this.texture.uploadData(null,t,e),this.stencil&&(i.bindRenderbuffer(i.RENDERBUFFER,this.stencil),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t,e))},n.prototype.destroy=function(){var t=this.gl;this.texture&&this.texture.destroy(),t.deleteFramebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null},n.createRGBA=function(t,e,i,o){var s=r.fromData(t,null,e,i);s.enableNearestScaling(),s.enableWrapClamp();var a=new n(t,e,i);return a.enableTexture(s),a.unbind(),a},n.createFloat32=function(t,e,i,o){var s=new r.fromData(t,o,e,i);s.enableNearestScaling(),s.enableWrapClamp();var a=new n(t,e,i);return a.enableTexture(s),a.unbind(),a},t.exports=n},function(t,e,i){var r=i(43),n=i(44),o=i(46),s=i(48),a=i(49),h=function(t,e,i,h,l){this.gl=t,h&&(e=s(e,h),i=s(i,h)),this.program=r(t,e,i,l),this.attributes=n(t,this.program),this.uniformData=o(t,this.program),this.uniforms=a(t,this.uniformData)};h.prototype.bind=function(){return this.gl.useProgram(this.program),this},h.prototype.destroy=function(){this.attributes=null,this.uniformData=null,this.uniforms=null,this.gl.deleteProgram(this.program)},t.exports=h},function(t,e,i){var r=i(41);function n(t,e){if(this.nativeVaoExtension=null,n.FORCE_NATIVE||(this.nativeVaoExtension=t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object")),this.nativeState=e,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var i=t.getParameter(t.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:new Array(i),attribState:new Array(i)}}this.gl=t,this.attributes=[],this.indexBuffer=null,this.dirty=!1}n.prototype.constructor=n,t.exports=n,n.FORCE_NATIVE=!1,n.prototype.bind=function(){if(this.nativeVao){if(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty)return this.dirty=!1,this.activate(),this;this.indexBuffer&&this.indexBuffer.bind()}else this.activate();return this},n.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this},n.prototype.activate=function(){for(var t=this.gl,e=null,i=0;i<this.attributes.length;i++){var n=this.attributes[i];e!==n.buffer&&(n.buffer.bind(),e=n.buffer),t.vertexAttribPointer(n.attribute.location,n.attribute.size,n.type||t.FLOAT,n.normalized||!1,n.stride||0,n.start||0)}return r(t,this.attributes,this.nativeState),this.indexBuffer&&this.indexBuffer.bind(),this},n.prototype.addAttribute=function(t,e,i,r,n,o){return this.attributes.push({buffer:t,attribute:e,location:e.location,type:i||this.gl.FLOAT,normalized:r||!1,stride:n||0,start:o||0}),this.dirty=!0,this},n.prototype.addIndex=function(t){return this.indexBuffer=t,this.dirty=!0,this},n.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this},n.prototype.draw=function(t,e,i){var r=this.gl;return this.indexBuffer?r.drawElements(t,e||this.indexBuffer.data.length,r.UNSIGNED_SHORT,2*(i||0)):r.drawArrays(t,i,e||this.getSize()),this},n.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null},n.prototype.getSize=function(){var t=this.attributes[0];return t.buffer.data.length/(t.stride/4||t.attribute.size)}},function(t,e,i){t.exports={compileProgram:i(43),defaultValue:i(47),extractAttributes:i(44),extractUniforms:i(46),generateUniformAccessObject:i(49),setPrecision:i(48),mapSize:i(45),mapType:i(26)}},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t){if(o.default.tablet||o.default.phone)return 4;return t};var r,n=i(28),o=(r=n)&&r.__esModule?r:{default:r}},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(){return!(navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform))}},function(t,e,i){"use strict";e.__esModule=!0,e.default={mixin:function(t){!function(t){t.__plugins={},t.registerPlugin=function(e,i){t.__plugins[e]=i},t.prototype.initPlugins=function(){for(var e in this.plugins=this.plugins||{},t.__plugins)this.plugins[e]=new t.__plugins[e](this)},t.prototype.destroyPlugins=function(){for(var t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null;this.plugins=null}}(t)}}},function(t,e,i){"use strict";function r(t,e){if(t&&e)for(var i=Object.keys(e),r=0;r<i.length;++r){var n=i[r];Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}}e.__esModule=!0,e.mixin=r,e.delayMixin=function(t,e){n.push(t,e)},e.performMixins=function(){for(var t=0;t<n.length;t+=2)r(n[t],n[t+1]);n.length=0};var n=[]},function(t,e,i){"use strict";t.exports=function(t,e,i){var r,n=t.length;if(!(e>=n||0===i)){var o=n-(i=e+i>n?n-e:i);for(r=e;r<o;++r)t[r]=t[r+i];t.length=o}}},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(){for(var t=[],e=[],i=0;i<32;i++)t[i]=i,e[i]=i;t[r.BLEND_MODES.NORMAL_NPM]=r.BLEND_MODES.NORMAL,t[r.BLEND_MODES.ADD_NPM]=r.BLEND_MODES.ADD,t[r.BLEND_MODES.SCREEN_NPM]=r.BLEND_MODES.SCREEN,e[r.BLEND_MODES.NORMAL]=r.BLEND_MODES.NORMAL_NPM,e[r.BLEND_MODES.ADD]=r.BLEND_MODES.ADD_NPM,e[r.BLEND_MODES.SCREEN]=r.BLEND_MODES.SCREEN_NPM;var n=[];return n.push(e),n.push(t),n};var r=i(0)},function(t,e,i){(function(t,r){var n;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(o){e&&e.nodeType,t&&t.nodeType;var s="object"==typeof r&&r;s.global!==s&&s.window!==s&&s.self;var a,h=2147483647,l=36,u=1,c=26,d=38,p=700,f=72,g=128,y="-",v=/^xn--/,m=/[^\x20-\x7E]/,b=/[\x2E\u3002\uFF0E\uFF61]/g,$={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},w=l-u,x=Math.floor,_=String.fromCharCode;function T(t){throw new RangeError($[t])}function E(t,e){for(var i=t.length,r=[];i--;)r[i]=e(t[i]);return r}function O(t,e){var i=t.split("@"),r="";return i.length>1&&(r=i[0]+"@",t=i[1]),r+E((t=t.replace(b,".")).split("."),e).join(".")}function S(t){for(var e,i,r=[],n=0,o=t.length;n<o;)(e=t.charCodeAt(n++))>=55296&&e<=56319&&n<o?56320==(64512&(i=t.charCodeAt(n++)))?r.push(((1023&e)<<10)+(1023&i)+65536):(r.push(e),n--):r.push(e);return r}function C(t){return E(t,function(t){var e="";return t>65535&&(e+=_((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=_(t)}).join("")}function P(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function I(t,e,i){var r=0;for(t=i?x(t/p):t>>1,t+=x(t/e);t>w*c>>1;r+=l)t=x(t/w);return x(r+(w+1)*t/(t+d))}function M(t){var e,i,r,n,o,s,a,d,p,v,m,b=[],$=t.length,w=0,_=g,E=f;for((i=t.lastIndexOf(y))<0&&(i=0),r=0;r<i;++r)t.charCodeAt(r)>=128&&T("not-basic"),b.push(t.charCodeAt(r));for(n=i>0?i+1:0;n<$;){for(o=w,s=1,a=l;n>=$&&T("invalid-input"),((d=(m=t.charCodeAt(n++))-48<10?m-22:m-65<26?m-65:m-97<26?m-97:l)>=l||d>x((h-w)/s))&&T("overflow"),w+=d*s,!(d<(p=a<=E?u:a>=E+c?c:a-E));a+=l)s>x(h/(v=l-p))&&T("overflow"),s*=v;E=I(w-o,e=b.length+1,0==o),x(w/e)>h-_&&T("overflow"),_+=x(w/e),w%=e,b.splice(w++,0,_)}return C(b)}function A(t){var e,i,r,n,o,s,a,d,p,v,m,b,$,w,E,O=[];for(b=(t=S(t)).length,e=g,i=0,o=f,s=0;s<b;++s)(m=t[s])<128&&O.push(_(m));for(r=n=O.length,n&&O.push(y);r<b;){for(a=h,s=0;s<b;++s)(m=t[s])>=e&&m<a&&(a=m);for(a-e>x((h-i)/($=r+1))&&T("overflow"),i+=(a-e)*$,e=a,s=0;s<b;++s)if((m=t[s])<e&&++i>h&&T("overflow"),m==e){for(d=i,p=l;!(d<(v=p<=o?u:p>=o+c?c:p-o));p+=l)E=d-v,w=l-v,O.push(_(P(v+E%w,0))),d=x(E/w);O.push(_(P(d,0))),o=I(i,$,r==n),i=0,++r}++i,++e}return O.join("")}a={version:"1.4.1",ucs2:{decode:S,encode:C},decode:M,encode:A,toASCII:function(t){return O(t,function(t){return m.test(t)?"xn--"+A(t):t})},toUnicode:function(t){return O(t,function(t){return v.test(t)?M(t.slice(4).toLowerCase()):t})}},void 0===(n=function(){return a}.call(e,i,e,t))||(t.exports=n)}()}).call(this,i(119)(t),i(22))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,i){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,i){"use strict";e.decode=e.parse=i(122),e.encode=e.stringify=i(123)},function(t,e,i){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,i,o){e=e||"&",i=i||"=";var s={};if("string"!=typeof t||0===t.length)return s;var a=/\+/g;t=t.split(e);var h=1e3;o&&"number"==typeof o.maxKeys&&(h=o.maxKeys);var l=t.length;h>0&&l>h&&(l=h);for(var u=0;u<l;++u){var c,d,p,f,g=t[u].replace(a,"%20"),y=g.indexOf(i);y>=0?(c=g.substr(0,y),d=g.substr(y+1)):(c=g,d=""),p=decodeURIComponent(c),f=decodeURIComponent(d),r(s,p)?n(s[p])?s[p].push(f):s[p]=[s[p],f]:s[p]=f}return s};var n=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,i){"use strict";var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,i,a){return e=e||"&",i=i||"=",null===t&&(t=void 0),"object"==typeof t?o(s(t),function(s){var a=encodeURIComponent(r(s))+i;return n(t[s])?o(t[s],function(t){return a+encodeURIComponent(r(t))}).join(e):a+encodeURIComponent(r(t[s]))}).join(e):a?encodeURIComponent(r(a))+i+encodeURIComponent(r(t)):""};var n=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function o(t,e){if(t.map)return t.map(e);for(var i=[],r=0;r<t.length;r++)i.push(e(t[r],r));return i}var s=Object.keys||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return e}},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=a(i(3)),o=i(0),s=a(i(125));function a(t){return t&&t.__esModule?t:{default:t}}var h=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._head=new s.default(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/n.default.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}return t.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.UPDATE_PRIORITY.NORMAL;return this._addListener(new s.default(t,e,i))},t.prototype.addOnce=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.UPDATE_PRIORITY.NORMAL;return this._addListener(new s.default(t,e,i,!0))},t.prototype._addListener=function(t){var e=this._head.next,i=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}else t.connect(i);return this._startIfPossible(),this},t.prototype.remove=function(t,e){for(var i=this._head.next;i;)i=i.match(t,e)?i.destroy():i.next;return this._head.next||this._cancelIfNeeded(),this},t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null},t.prototype.update=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:performance.now(),e=void 0;if(t>this.lastTime){(e=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(e=this._maxElapsedMS),this.deltaTime=e*n.default.TARGET_FPMS*this.speed;for(var i=this._head,r=i.next;r;)r=r.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.elapsedMS=0;this.lastTime=t},r(t,[{key:"FPS",get:function(){return 1e3/this.elapsedMS}},{key:"minFPS",get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(Math.max(0,t)/1e3,n.default.TARGET_FPMS);this._maxElapsedMS=1/e}}]),t}();e.default=h},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.fn=e,this.context=i,this.priority=r,this.once=n,this.next=null,this.previous=null,this._destroyed=!1}return t.prototype.match=function(t,e){return e=e||null,this.fn===t&&this.context===e},t.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},t.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},t.prototype.destroy=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},t}();e.default=r},function(t,e,i){"use strict";e.__esModule=!0;var r=a(i(12)),n=i(0),o=i(4),s=a(i(17));function a(t){return t&&t.__esModule?t:{default:t}}var h=new o.Matrix,l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e}return t.prototype.render=function(t){var e=t._texture,i=this.renderer,r=e._frame.width,a=e._frame.height,l=t.transform.worldTransform,u=0,c=0;if(!(e.orig.width<=0||e.orig.height<=0)&&e.baseTexture.source&&(i.setBlendMode(t.blendMode),e.valid)){i.context.globalAlpha=t.worldAlpha;var d=e.baseTexture.scaleMode===n.SCALE_MODES.LINEAR;i.smoothProperty&&i.context[i.smoothProperty]!==d&&(i.context[i.smoothProperty]=d),e.trim?(u=e.trim.width/2+e.trim.x-t.anchor.x*e.orig.width,c=e.trim.height/2+e.trim.y-t.anchor.y*e.orig.height):(u=(.5-t.anchor.x)*e.orig.width,c=(.5-t.anchor.y)*e.orig.height),e.rotate&&(l.copy(h),l=h,o.GroupD8.matrixAppendRotationInv(l,e.rotate,u,c),u=0,c=0),u-=r/2,c-=a/2,i.roundPixels?(i.context.setTransform(l.a,l.b,l.c,l.d,l.tx*i.resolution|0,l.ty*i.resolution|0),u|=0,c|=0):i.context.setTransform(l.a,l.b,l.c,l.d,l.tx*i.resolution,l.ty*i.resolution);var p=e.baseTexture.resolution;16777215!==t.tint?(t.cachedTint===t.tint&&t.tintedTexture.tintId===t._texture._updateID||(t.cachedTint=t.tint,t.tintedTexture=s.default.getTintedTexture(t,t.tint)),i.context.drawImage(t.tintedTexture,0,0,r*p,a*p,u*i.resolution,c*i.resolution,r*i.resolution,a*i.resolution)):i.context.drawImage(e.baseTexture.source,e._frame.x*p,e._frame.y*p,r*p,a*p,u*i.resolution,c*i.resolution,r*i.resolution,a*i.resolution)}},t.prototype.destroy=function(){this.renderer=null},t}();e.default=l,r.default.registerPlugin("sprite",l)},function(t,e,i){"use strict";e.__esModule=!0;var r=i(0);var n=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e}return t.prototype.pushMask=function(t){var e=this.renderer;e.context.save();var i=t.alpha,r=t.transform.worldTransform,n=e.resolution;e.context.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*n,r.ty*n),t._texture||(this.renderGraphicsShape(t),e.context.clip()),t.worldAlpha=i},t.prototype.renderGraphicsShape=function(t){var e=this.renderer.context,i=t.graphicsData.length;if(0!==i){e.beginPath();for(var n=0;n<i;n++){var o=t.graphicsData[n],s=o.shape;if(o.type===r.SHAPES.POLY){var a=s.points,h=o.holes,l=void 0,u=void 0;e.moveTo(a[0],a[1]);for(var c=2;c<a.length;c+=2)e.lineTo(a[c],a[c+1]);if(a[0]===a[a.length-2]&&a[1]===a[a.length-1]&&e.closePath(),h.length>0){l=0;for(var d=0;d<a.length;d+=2)l+=a[d]*a[d+3]-a[d+1]*a[d+2];for(var p=0;p<h.length;p++){a=h[p].points,u=0;for(var f=0;f<a.length;f+=2)u+=a[f]*a[f+3]-a[f+1]*a[f+2];if(e.moveTo(a[0],a[1]),u*l<0)for(var g=2;g<a.length;g+=2)e.lineTo(a[g],a[g+1]);else for(var y=a.length-2;y>=2;y-=2)e.lineTo(a[y],a[y+1])}}}else if(o.type===r.SHAPES.RECT)e.rect(s.x,s.y,s.width,s.height),e.closePath();else if(o.type===r.SHAPES.CIRC)e.arc(s.x,s.y,s.radius,0,2*Math.PI),e.closePath();else if(o.type===r.SHAPES.ELIP){var v=2*s.width,m=2*s.height,b=s.x-v/2,$=s.y-m/2,w=v/2*.5522848,x=m/2*.5522848,_=b+v,T=$+m,E=b+v/2,O=$+m/2;e.moveTo(b,O),e.bezierCurveTo(b,O-x,E-w,$,E,$),e.bezierCurveTo(E+w,$,_,O-x,_,O),e.bezierCurveTo(_,O+x,E+w,T,E,T),e.bezierCurveTo(E-w,T,b,O+x,b,O),e.closePath()}else if(o.type===r.SHAPES.RREC){var S=s.x,C=s.y,P=s.width,I=s.height,M=s.radius,A=Math.min(P,I)/2|0;M=M>A?A:M,e.moveTo(S,C+M),e.lineTo(S,C+I-M),e.quadraticCurveTo(S,C+I,S+M,C+I),e.lineTo(S+P-M,C+I),e.quadraticCurveTo(S+P,C+I,S+P,C+I-M),e.lineTo(S+P,C+M),e.quadraticCurveTo(S+P,C,S+P-M,C),e.lineTo(S+M,C),e.quadraticCurveTo(S,C,S,C+M),e.closePath()}}}},t.prototype.popMask=function(t){t.context.restore(),t.invalidateBlendMode()},t.prototype.destroy=function(){},t}();e.default=n},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(0,s.default)()?(t[n.BLEND_MODES.NORMAL]="source-over",t[n.BLEND_MODES.ADD]="lighter",t[n.BLEND_MODES.MULTIPLY]="multiply",t[n.BLEND_MODES.SCREEN]="screen",t[n.BLEND_MODES.OVERLAY]="overlay",t[n.BLEND_MODES.DARKEN]="darken",t[n.BLEND_MODES.LIGHTEN]="lighten",t[n.BLEND_MODES.COLOR_DODGE]="color-dodge",t[n.BLEND_MODES.COLOR_BURN]="color-burn",t[n.BLEND_MODES.HARD_LIGHT]="hard-light",t[n.BLEND_MODES.SOFT_LIGHT]="soft-light",t[n.BLEND_MODES.DIFFERENCE]="difference",t[n.BLEND_MODES.EXCLUSION]="exclusion",t[n.BLEND_MODES.HUE]="hue",t[n.BLEND_MODES.SATURATION]="saturate",t[n.BLEND_MODES.COLOR]="color",t[n.BLEND_MODES.LUMINOSITY]="luminosity"):(t[n.BLEND_MODES.NORMAL]="source-over",t[n.BLEND_MODES.ADD]="lighter",t[n.BLEND_MODES.MULTIPLY]="source-over",t[n.BLEND_MODES.SCREEN]="source-over",t[n.BLEND_MODES.OVERLAY]="source-over",t[n.BLEND_MODES.DARKEN]="source-over",t[n.BLEND_MODES.LIGHTEN]="source-over",t[n.BLEND_MODES.COLOR_DODGE]="source-over",t[n.BLEND_MODES.COLOR_BURN]="source-over",t[n.BLEND_MODES.HARD_LIGHT]="source-over",t[n.BLEND_MODES.SOFT_LIGHT]="source-over",t[n.BLEND_MODES.DIFFERENCE]="source-over",t[n.BLEND_MODES.EXCLUSION]="source-over",t[n.BLEND_MODES.HUE]="source-over",t[n.BLEND_MODES.SATURATION]="source-over",t[n.BLEND_MODES.COLOR]="source-over",t[n.BLEND_MODES.LUMINOSITY]="source-over");return t[n.BLEND_MODES.NORMAL_NPM]=t[n.BLEND_MODES.NORMAL],t[n.BLEND_MODES.ADD_NPM]=t[n.BLEND_MODES.ADD],t[n.BLEND_MODES.SCREEN_NPM]=t[n.BLEND_MODES.SCREEN],t};var r,n=i(0),o=i(60),s=(r=o)&&r.__esModule?r:{default:r}},function(t,e,i){"use strict";e.__esModule=!0;var r=p(i(18)),n=p(i(19)),o=p(i(35)),s=p(i(142)),a=p(i(143)),h=p(i(144)),l=p(i(3)),u=i(2),c=p(i(5)),d=p(i(32));function p(t){return t&&t.__esModule?t:{default:t}}var f=0,g=0,y=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));r.vertSize=5,r.vertByteSize=4*r.vertSize,r.size=l.default.SPRITE_BATCH_SIZE,r.buffers=[];for(var n=1;n<=d.default.nextPow2(r.size);n*=2)r.buffers.push(new h.default(4*n*r.vertByteSize));r.indices=(0,o.default)(r.size),r.shader=null,r.currentIndex=0,r.groups=[];for(var s=0;s<r.size;s++)r.groups[s]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};return r.sprites=[],r.vertexBuffers=[],r.vaos=[],r.vaoMax=2,r.vertexCount=0,r.renderer.on("prerender",r.onPrerender,r),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.renderer.legacy?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),l.default.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=(0,a.default)(this.MAX_TEXTURES,t)),this.shader=(0,s.default)(t,this.MAX_TEXTURES),this.indexBuffer=c.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.renderer.bindVao(null);for(var e=this.shader.attributes,i=0;i<this.vaoMax;i++){var r=this.vertexBuffers[i]=c.default.GLBuffer.createVertexBuffer(t,null,t.STREAM_DRAW),n=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(r,e.aVertexPosition,t.FLOAT,!1,this.vertByteSize,0).addAttribute(r,e.aTextureCoord,t.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(r,e.aColor,t.UNSIGNED_BYTE,!0,this.vertByteSize,12);e.aTextureId&&n.addAttribute(r,e.aTextureId,t.FLOAT,!1,this.vertByteSize,16),this.vaos[i]=n}this.vao=this.vaos[0],this.currentBlendMode=99999,this.boundTextures=new Array(this.MAX_TEXTURES)},e.prototype.onPrerender=function(){this.vertexCount=0},e.prototype.render=function(t){this.currentIndex>=this.size&&this.flush(),t._texture._uvs&&(this.sprites[this.currentIndex++]=t)},e.prototype.flush=function(){if(0!==this.currentIndex){var t=this.renderer.gl,e=this.MAX_TEXTURES,i=d.default.nextPow2(this.currentIndex),r=d.default.log2(i),n=this.buffers[r],o=this.sprites,s=this.groups,a=n.float32View,h=n.uint32View,p=this.boundTextures,y=this.renderer.boundTextures,v=this.renderer.textureGC.count,m=0,b=void 0,$=void 0,w=1,x=0,_=s[0],T=void 0,E=void 0,O=u.premultiplyBlendMode[o[0]._texture.baseTexture.premultipliedAlpha?1:0][o[0].blendMode];_.textureCount=0,_.start=0,_.blend=O,f++;var S=void 0;for(S=0;S<e;++S){var C=y[S];C._enabled!==f?(p[S]=C,C._virtalBoundId=S,C._enabled=f):p[S]=this.renderer.emptyTextures[S]}for(f++,S=0;S<this.currentIndex;++S){var P=o[S];o[S]=null,b=P._texture.baseTexture;var I=u.premultiplyBlendMode[Number(b.premultipliedAlpha)][P.blendMode];if(O!==I&&(O=I,$=null,x=e,f++),$!==b&&($=b,b._enabled!==f)){if(x===e&&(f++,_.size=S-_.start,x=0,(_=s[w++]).blend=O,_.textureCount=0,_.start=S),b.touched=v,-1===b._virtalBoundId)for(var M=0;M<e;++M){var A=(M+g)%e,R=p[A];if(R._enabled!==f){g++,R._virtalBoundId=-1,b._virtalBoundId=A,p[A]=b;break}}b._enabled=f,_.textureCount++,_.ids[x]=b._virtalBoundId,_.textures[x++]=b}if(T=P.vertexData,E=P._texture._uvs.uvsUint32,this.renderer.roundPixels){var D=this.renderer.resolution;a[m]=(T[0]*D|0)/D,a[m+1]=(T[1]*D|0)/D,a[m+5]=(T[2]*D|0)/D,a[m+6]=(T[3]*D|0)/D,a[m+10]=(T[4]*D|0)/D,a[m+11]=(T[5]*D|0)/D,a[m+15]=(T[6]*D|0)/D,a[m+16]=(T[7]*D|0)/D}else a[m]=T[0],a[m+1]=T[1],a[m+5]=T[2],a[m+6]=T[3],a[m+10]=T[4],a[m+11]=T[5],a[m+15]=T[6],a[m+16]=T[7];h[m+2]=E[0],h[m+7]=E[1],h[m+12]=E[2],h[m+17]=E[3];var k=Math.min(P.worldAlpha,1),L=k<1&&b.premultipliedAlpha?(0,u.premultiplyTint)(P._tintRGB,k):P._tintRGB+(255*k<<24);h[m+3]=h[m+8]=h[m+13]=h[m+18]=L,a[m+4]=a[m+9]=a[m+14]=a[m+19]=b._virtalBoundId,m+=20}if(_.size=S-_.start,l.default.CAN_UPLOAD_SAME_BUFFER)this.vertexBuffers[this.vertexCount].upload(n.vertices,0,!0);else{if(this.vaoMax<=this.vertexCount){this.vaoMax++;var j=this.shader.attributes,N=this.vertexBuffers[this.vertexCount]=c.default.GLBuffer.createVertexBuffer(t,null,t.STREAM_DRAW),F=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(N,j.aVertexPosition,t.FLOAT,!1,this.vertByteSize,0).addAttribute(N,j.aTextureCoord,t.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(N,j.aColor,t.UNSIGNED_BYTE,!0,this.vertByteSize,12);j.aTextureId&&F.addAttribute(N,j.aTextureId,t.FLOAT,!1,this.vertByteSize,16),this.vaos[this.vertexCount]=F}this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(n.vertices,0,!1),this.vertexCount++}for(S=0;S<e;++S)y[S]._virtalBoundId=-1;for(S=0;S<w;++S){for(var B=s[S],U=B.textureCount,G=0;G<U;G++)$=B.textures[G],y[B.ids[G]]!==$&&this.renderer.bindTexture($,B.ids[G],!0),$._virtalBoundId=-1;this.renderer.state.setBlendMode(B.blend),t.drawElements(t.TRIANGLES,6*B.size,t.UNSIGNED_SHORT,6*B.start*2)}this.currentIndex=0}},e.prototype.start=function(){this.renderer.bindShader(this.shader),l.default.CAN_UPLOAD_SAME_BUFFER&&(this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var e=0;e<this.vaoMax;e++)this.vertexBuffers[e]&&this.vertexBuffers[e].destroy(),this.vaos[e]&&this.vaos[e].destroy();this.indexBuffer&&this.indexBuffer.destroy(),this.renderer.off("prerender",this.onPrerender,this),t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null;for(var i=0;i<this.buffers.length;++i)this.buffers[i].destroy()},e}(r.default);e.default=y,n.default.registerPlugin("sprite",y)},function(t,e,i){"use strict";e.__esModule=!0;var r=o(i(13)),n=o(i(61));function o(t){return t&&t.__esModule?t:{default:t}}var s=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return r.scissor=!1,r.scissorData=null,r.scissorRenderTarget=null,r.enableScissor=!0,r.alphaMaskPool=[],r.alphaMaskIndex=0,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.pushMask=function(t,e){if(e.texture)this.pushSpriteMask(t,e);else if(this.enableScissor&&!this.scissor&&this.renderer._activeRenderTarget.root&&!this.renderer.stencilManager.stencilMaskStack.length&&e.isFastRect()){var i=e.worldTransform,r=Math.atan2(i.b,i.a);(r=Math.round(r*(180/Math.PI)))%90?this.pushStencilMask(e):this.pushScissorMask(t,e)}else this.pushStencilMask(e)},e.prototype.popMask=function(t,e){e.texture?this.popSpriteMask(t,e):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(t,e):this.popStencilMask(t,e)},e.prototype.pushSpriteMask=function(t,e){var i=this.alphaMaskPool[this.alphaMaskIndex];i||(i=this.alphaMaskPool[this.alphaMaskIndex]=[new n.default(e)]),i[0].resolution=this.renderer.resolution,i[0].maskSprite=e;var r=t.filterArea;t.filterArea=e.getBounds(!0),this.renderer.filterManager.pushFilter(t,i),t.filterArea=r,this.alphaMaskIndex++},e.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter(),this.alphaMaskIndex--},e.prototype.pushStencilMask=function(t){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.pushStencil(t)},e.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.popStencil()},e.prototype.pushScissorMask=function(t,e){e.renderable=!0;var i=this.renderer._activeRenderTarget,r=e.getBounds();r.fit(i.size),e.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var n=this.renderer.resolution;this.renderer.gl.scissor(r.x*n,(i.root?i.size.height-r.y-r.height:r.y)*n,r.width*n,r.height*n),this.scissorRenderTarget=i,this.scissorData=e,this.scissor=!0},e.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var t=this.renderer.gl;t.disable(t.SCISSOR_TEST)},e}(r.default);e.default=s},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t,e,i){var r=s(t),n=s(e);return Object.assign(r,n)};var r,n=i(5);var o=((r=n)&&r.__esModule?r:{default:r}).default.shader.defaultValue;function s(t){for(var e=new RegExp("^(projectionMatrix|uSampler|filterArea|filterClamp)$"),i={},r=void 0,n=t.replace(/\s+/g," ").split(/\s*;\s*/),s=0;s<n.length;s++){var a=n[s].trim();if(a.indexOf("uniform")>-1){var h=a.split(" "),l=h[1],u=h[2],c=1;u.indexOf("[")>-1&&(r=u.split(/\[|]/),u=r[0],c*=Number(r[1])),u.match(e)||(i[u]={value:o(l,c),name:u,type:l})}}return i}},function(t,e){var i,r,n=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(i===setTimeout)return setTimeout(t,0);if((i===o||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:o}catch(t){i=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var h,l=[],u=!1,c=-1;function d(){u&&h&&(u=!1,h.length?l=h.concat(l):c=-1,l.length&&p())}function p(){if(!u){var t=a(d);u=!0;for(var e=l.length;e;){for(h=l,l=[];++c<e;)h&&h[c].run();c=-1,e=l.length}h=null,u=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function g(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];l.push(new f(t,e)),1!==l.length||u||a(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=g,n.addListener=g,n.once=g,n.off=g,n.removeListener=g,n.removeAllListeners=g,n.emit=g,n.prependListener=g,n.prependOnceListener=g,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(t,e,i){"use strict";e.__esModule=!0;var r,n=i(13),o=(r=n)&&r.__esModule?r:{default:r};var s=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return r.stencilMaskStack=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.setMaskStack=function(t){this.stencilMaskStack=t;var e=this.renderer.gl;0===t.length?e.disable(e.STENCIL_TEST):e.enable(e.STENCIL_TEST)},e.prototype.pushStencil=function(t){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.renderer._activeRenderTarget.attachStencilBuffer();var e=this.renderer.gl,i=this.stencilMaskStack.length;0===i&&e.enable(e.STENCIL_TEST),this.stencilMaskStack.push(t),e.colorMask(!1,!1,!1,!1),e.stencilFunc(e.EQUAL,i,this._getBitwiseMask()),e.stencilOp(e.KEEP,e.KEEP,e.INCR),this.renderer.plugins.graphics.render(t),this._useCurrent()},e.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var t=this.renderer.gl,e=this.stencilMaskStack.pop();0===this.stencilMaskStack.length?(t.disable(t.STENCIL_TEST),t.clear(t.STENCIL_BUFFER_BIT),t.clearStencil(0)):(t.colorMask(!1,!1,!1,!1),t.stencilOp(t.KEEP,t.KEEP,t.DECR),this.renderer.plugins.graphics.render(e),this._useCurrent())},e.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.stencilMaskStack.length,this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},e.prototype._getBitwiseMask=function(){return(1<<this.stencilMaskStack.length)-1},e.prototype.destroy=function(){o.default.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},e}(o.default);e.default=s},function(t,e,i){"use strict";e.__esModule=!0;var r=u(i(13)),n=u(i(20)),o=u(i(64)),s=i(4),a=u(i(14)),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(135)),l=u(i(32));function u(t){return t&&t.__esModule?t:{default:t}}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var d=function(){function t(){c(this,t),this.renderTarget=null,this.target=null,this.resolution=1,this.sourceFrame=new s.Rectangle,this.destinationFrame=new s.Rectangle,this.filters=[]}return t.prototype.clear=function(){this.filters=null,this.target=null,this.renderTarget=null},t}(),p=function(t){function e(i){c(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return r.gl=r.renderer.gl,r.quad=new o.default(r.gl,i.state.attribState),r.shaderCache={},r.pool={},r.filterData=null,r.managedFilters=[],r.renderer.on("prerender",r.onPrerender,r),r._screenWidth=i.view.width,r._screenHeight=i.view.height,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.pushFilter=function(t,e){var i=this.renderer,r=this.filterData;if(!r){r=this.renderer._activeRenderTarget.filterStack;var n=new d;n.sourceFrame=n.destinationFrame=this.renderer._activeRenderTarget.size,n.renderTarget=i._activeRenderTarget,this.renderer._activeRenderTarget.filterData=r={index:0,stack:[n]},this.filterData=r}var o=r.stack[++r.index],s=r.stack[0].destinationFrame;o||(o=r.stack[r.index]=new d);var a=t.filterArea&&0===t.filterArea.x&&0===t.filterArea.y&&t.filterArea.width===i.screen.width&&t.filterArea.height===i.screen.height,h=e[0].resolution,l=0|e[0].padding,u=a?i.screen:t.filterArea||t.getBounds(!0),c=o.sourceFrame,p=o.destinationFrame;c.x=(u.x*h|0)/h,c.y=(u.y*h|0)/h,c.width=(u.width*h|0)/h,c.height=(u.height*h|0)/h,a||(r.stack[0].renderTarget.transform||e[0].autoFit&&c.fit(s),c.pad(l)),p.width=c.width,p.height=c.height;var f=this.getPotRenderTarget(i.gl,c.width,c.height,h);o.target=t,o.filters=e,o.resolution=h,o.renderTarget=f,f.setFrame(p,c),i.bindRenderTarget(f),f.clear()},e.prototype.popFilter=function(){var t=this.filterData,e=t.stack[t.index-1],i=t.stack[t.index];this.quad.map(i.renderTarget.size,i.sourceFrame).upload();var r=i.filters;if(1===r.length)r[0].apply(this,i.renderTarget,e.renderTarget,!1,i),this.freePotRenderTarget(i.renderTarget);else{var n=i.renderTarget,o=this.getPotRenderTarget(this.renderer.gl,i.sourceFrame.width,i.sourceFrame.height,i.resolution);o.setFrame(i.destinationFrame,i.sourceFrame),o.clear();var s=0;for(s=0;s<r.length-1;++s){r[s].apply(this,n,o,!0,i);var a=n;n=o,o=a}r[s].apply(this,n,e.renderTarget,!1,i),this.freePotRenderTarget(n),this.freePotRenderTarget(o)}i.clear(),t.index--,0===t.index&&(this.filterData=null)},e.prototype.applyFilter=function(t,e,i,r){var n=this.renderer,o=n.gl,s=t.glShaders[n.CONTEXT_UID];s||(t.glShaderKey?(s=this.shaderCache[t.glShaderKey])||(s=new a.default(this.gl,t.vertexSrc,t.fragmentSrc),t.glShaders[n.CONTEXT_UID]=this.shaderCache[t.glShaderKey]=s,this.managedFilters.push(t)):(s=t.glShaders[n.CONTEXT_UID]=new a.default(this.gl,t.vertexSrc,t.fragmentSrc),this.managedFilters.push(t)),n.bindVao(null),this.quad.initVao(s)),n.bindVao(this.quad.vao),n.bindRenderTarget(i),r&&(o.disable(o.SCISSOR_TEST),n.clear(),o.enable(o.SCISSOR_TEST)),i===n.maskManager.scissorRenderTarget&&n.maskManager.pushScissorMask(null,n.maskManager.scissorData),n.bindShader(s);var h=this.renderer.emptyTextures[0];this.renderer.boundTextures[0]=h,this.syncUniforms(s,t),n.state.setBlendMode(t.blendMode),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,e.texture.texture),this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0),o.bindTexture(o.TEXTURE_2D,h._glTextures[this.renderer.CONTEXT_UID].texture)},e.prototype.syncUniforms=function(t,e){var i=e.uniformData,r=e.uniforms,n=1,o=void 0;if(t.uniforms.filterArea){o=this.filterData.stack[this.filterData.index];var s=t.uniforms.filterArea;s[0]=o.renderTarget.size.width,s[1]=o.renderTarget.size.height,s[2]=o.sourceFrame.x,s[3]=o.sourceFrame.y,t.uniforms.filterArea=s}if(t.uniforms.filterClamp){o=o||this.filterData.stack[this.filterData.index];var a=t.uniforms.filterClamp;a[0]=0,a[1]=0,a[2]=(o.sourceFrame.width-1)/o.renderTarget.size.width,a[3]=(o.sourceFrame.height-1)/o.renderTarget.size.height,t.uniforms.filterClamp=a}for(var h in i)if(t.uniforms.data[h]){var l=i[h].type;if("sampler2d"===l&&0!==r[h]){if(r[h].baseTexture)t.uniforms[h]=this.renderer.bindTexture(r[h].baseTexture,n);else{t.uniforms[h]=n;var u=this.renderer.gl;this.renderer.boundTextures[n]=this.renderer.emptyTextures[n],u.activeTexture(u.TEXTURE0+n),r[h].texture.bind()}n++}else if("mat3"===l)void 0!==r[h].a?t.uniforms[h]=r[h].toArray(!0):t.uniforms[h]=r[h];else if("vec2"===l)if(void 0!==r[h].x){var c=t.uniforms[h]||new Float32Array(2);c[0]=r[h].x,c[1]=r[h].y,t.uniforms[h]=c}else t.uniforms[h]=r[h];else"float"===l?t.uniforms.data[h].value!==i[h]&&(t.uniforms[h]=r[h]):t.uniforms[h]=r[h]}},e.prototype.getRenderTarget=function(t,e){var i=this.filterData.stack[this.filterData.index],r=this.getPotRenderTarget(this.renderer.gl,i.sourceFrame.width,i.sourceFrame.height,e||i.resolution);return r.setFrame(i.destinationFrame,i.sourceFrame),r},e.prototype.returnRenderTarget=function(t){this.freePotRenderTarget(t)},e.prototype.calculateScreenSpaceMatrix=function(t){var e=this.filterData.stack[this.filterData.index];return h.calculateScreenSpaceMatrix(t,e.sourceFrame,e.renderTarget.size)},e.prototype.calculateNormalizedScreenSpaceMatrix=function(t){var e=this.filterData.stack[this.filterData.index];return h.calculateNormalizedScreenSpaceMatrix(t,e.sourceFrame,e.renderTarget.size,e.destinationFrame)},e.prototype.calculateSpriteMatrix=function(t,e){var i=this.filterData.stack[this.filterData.index];return h.calculateSpriteMatrix(t,i.sourceFrame,i.renderTarget.size,e)},e.prototype.destroy=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.renderer,i=this.managedFilters;e.off("prerender",this.onPrerender,this);for(var r=0;r<i.length;r++)t||i[r].glShaders[e.CONTEXT_UID].destroy(),delete i[r].glShaders[e.CONTEXT_UID];this.shaderCache={},t?this.pool={}:this.emptyPool()},e.prototype.getPotRenderTarget=function(t,e,i,r){var o="screen";i*=r,(e*=r)===this._screenWidth&&i===this._screenHeight||(o=(65535&(e=l.default.nextPow2(e)))<<16|65535&(i=l.default.nextPow2(i))),this.pool[o]||(this.pool[o]=[]);var s=this.pool[o].pop();if(!s){var a=this.renderer.boundTextures[0];t.activeTexture(t.TEXTURE0),s=new n.default(t,e,i,null,1),t.bindTexture(t.TEXTURE_2D,a._glTextures[this.renderer.CONTEXT_UID].texture)}return s.resolution=r,s.defaultFrame.width=s.size.width=e/r,s.defaultFrame.height=s.size.height=i/r,s.filterPoolKey=o,s},e.prototype.emptyPool=function(){for(var t in this.pool){var e=this.pool[t];if(e)for(var i=0;i<e.length;i++)e[i].destroy(!0)}this.pool={}},e.prototype.freePotRenderTarget=function(t){this.pool[t.filterPoolKey].push(t)},e.prototype.onPrerender=function(){if(this._screenWidth!==this.renderer.view.width||this._screenHeight!==this.renderer.view.height){this._screenWidth=this.renderer.view.width,this._screenHeight=this.renderer.view.height;var t=this.pool.screen;if(t)for(var e=0;e<t.length;e++)t[e].destroy(!0);this.pool.screen=[]}},e}(r.default);e.default=p},function(t,e,i){"use strict";e.__esModule=!0,e.calculateScreenSpaceMatrix=function(t,e,i){var r=t.identity();return r.translate(e.x/i.width,e.y/i.height),r.scale(i.width,i.height),r},e.calculateNormalizedScreenSpaceMatrix=function(t,e,i){var r=t.identity();r.translate(e.x/i.width,e.y/i.height);var n=i.width/e.width,o=i.height/e.height;return r.scale(n,o),r},e.calculateSpriteMatrix=function(t,e,i,n){var o=n._texture.orig,s=t.set(i.width,0,0,i.height,e.x,e.y),a=n.worldTransform.copy(r.Matrix.TEMP_MATRIX);return a.invert(),s.prepend(a),s.scale(1/o.width,1/o.height),s.translate(n.anchor.x,n.anchor.y),s};var r=i(4)},function(t,e,i){"use strict";e.__esModule=!0;var r,n=i(5),o=i(0),s=i(20),a=(r=s)&&r.__esModule?r:{default:r},h=i(2);var l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e,this.gl=e.gl,this._managedTextures=[]}return t.prototype.bindTexture=function(){},t.prototype.getTexture=function(){},t.prototype.updateTexture=function(t,e){var i=this.gl,r=!!t._glRenderTargets;if(!t.hasLoaded)return null;var s=this.renderer.boundTextures;if(void 0===e){e=0;for(var h=0;h<s.length;++h)if(s[h]===t){e=h;break}}s[e]=t,i.activeTexture(i.TEXTURE0+e);var l=t._glTextures[this.renderer.CONTEXT_UID];if(l)r?t._glRenderTargets[this.renderer.CONTEXT_UID].resize(t.width,t.height):l.upload(t.source);else{if(r){var u=new a.default(this.gl,t.width,t.height,t.scaleMode,t.resolution);u.resize(t.width,t.height),t._glRenderTargets[this.renderer.CONTEXT_UID]=u,l=u.texture,this.renderer._activeRenderTarget.root||this.renderer._activeRenderTarget.frameBuffer.bind()}else(l=new n.GLTexture(this.gl,null,null,null,null)).bind(e),l.premultiplyAlpha=!0,l.upload(t.source);t._glTextures[this.renderer.CONTEXT_UID]=l,t.on("update",this.updateTexture,this),t.on("dispose",this.destroyTexture,this),this._managedTextures.push(t),t.isPowerOfTwo?(t.mipmap&&l.enableMipmap(),t.wrapMode===o.WRAP_MODES.CLAMP?l.enableWrapClamp():t.wrapMode===o.WRAP_MODES.REPEAT?l.enableWrapRepeat():l.enableWrapMirrorRepeat()):l.enableWrapClamp(),t.scaleMode===o.SCALE_MODES.NEAREST?l.enableNearestScaling():l.enableLinearScaling()}return l},t.prototype.destroyTexture=function(t,e){if((t=t.baseTexture||t).hasLoaded){var i=this.renderer,r=i.CONTEXT_UID,n=t._glTextures,o=t._glRenderTargets;if(n[r]&&(i.unbindTexture(t),n[r].destroy(),t.off("update",this.updateTexture,this),t.off("dispose",this.destroyTexture,this),delete n[r],!e)){var s=this._managedTextures.indexOf(t);-1!==s&&(0,h.removeItems)(this._managedTextures,s,1)}o&&o[r]&&(i._activeRenderTarget===o[r]&&i.bindRenderTarget(i.rootRenderTarget),o[r].destroy(),delete o[r])}},t.prototype.removeAll=function(){for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];e._glTextures[this.renderer.CONTEXT_UID]&&delete e._glTextures[this.renderer.CONTEXT_UID]}},t.prototype.destroy=function(){for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];this.destroyTexture(e,!0),e.off("update",this.updateTexture,this),e.off("dispose",this.destroyTexture,this)}this._managedTextures=null},t}();e.default=l},function(t,e,i){"use strict";e.__esModule=!0;var r,n=i(0),o=i(3),s=(r=o)&&r.__esModule?r:{default:r};var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=s.default.GC_MAX_IDLE,this.checkCountMax=s.default.GC_MAX_CHECK_COUNT,this.mode=s.default.GC_MODE}return t.prototype.update=function(){this.count++,this.mode!==n.GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run()))},t.prototype.run=function(){for(var t=this.renderer.textureManager,e=t._managedTextures,i=!1,r=0;r<e.length;r++){var n=e[r];!n._glRenderTargets&&this.count-n.touched>this.maxIdle&&(t.destroyTexture(n,!0),e[r]=null,i=!0)}if(i){for(var o=0,s=0;s<e.length;s++)null!==e[s]&&(e[o++]=e[s]);e.length=o}},t.prototype.unload=function(t){var e=this.renderer.textureManager;t._texture&&t._texture._glRenderTargets&&e.destroyTexture(t._texture,!0);for(var i=t.children.length-1;i>=0;i--)this.unload(t.children[i])},t}();e.default=a},function(t,e,i){"use strict";e.__esModule=!0;var r,n=i(139),o=(r=n)&&r.__esModule?r:{default:r};var s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.defaultState[0]=1,this.stackIndex=0,this.stack=[],this.gl=e,this.maxAttribs=e.getParameter(e.MAX_VERTEX_ATTRIBS),this.attribState={tempAttribState:new Array(this.maxAttribs),attribState:new Array(this.maxAttribs)},this.blendModes=(0,o.default)(e),this.nativeVaoExtension=e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object")}return t.prototype.push=function(){var t=this.stack[this.stackIndex];t||(t=this.stack[this.stackIndex]=new Uint8Array(16)),++this.stackIndex;for(var e=0;e<this.activeState.length;e++)t[e]=this.activeState[e]},t.prototype.pop=function(){var t=this.stack[--this.stackIndex];this.setState(t)},t.prototype.setState=function(t){this.setBlend(t[0]),this.setDepthTest(t[1]),this.setFrontFace(t[2]),this.setCullFace(t[3]),this.setBlendMode(t[4])},t.prototype.setBlend=function(t){t=t?1:0,this.activeState[0]!==t&&(this.activeState[0]=t,this.gl[t?"enable":"disable"](this.gl.BLEND))},t.prototype.setBlendMode=function(t){if(t!==this.activeState[4]){this.activeState[4]=t;var e=this.blendModes[t];2===e.length?this.gl.blendFunc(e[0],e[1]):this.gl.blendFuncSeparate(e[0],e[1],e[2],e[3])}},t.prototype.setDepthTest=function(t){t=t?1:0,this.activeState[1]!==t&&(this.activeState[1]=t,this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST))},t.prototype.setCullFace=function(t){t=t?1:0,this.activeState[3]!==t&&(this.activeState[3]=t,this.gl[t?"enable":"disable"](this.gl.CULL_FACE))},t.prototype.setFrontFace=function(t){t=t?1:0,this.activeState[2]!==t&&(this.activeState[2]=t,this.gl.frontFace(this.gl[t?"CW":"CCW"]))},t.prototype.resetAttributes=function(){for(var t=0;t<this.attribState.tempAttribState.length;t++)this.attribState.tempAttribState[t]=0;for(var e=0;e<this.attribState.attribState.length;e++)this.attribState.attribState[e]=0;for(var i=1;i<this.maxAttribs;i++)this.gl.disableVertexAttribArray(i)},t.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null),this.resetAttributes();for(var t=0;t<this.activeState.length;++t)this.activeState[t]=32;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.setState(this.defaultState)},t}();e.default=s},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e[r.BLEND_MODES.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.ADD]=[t.ONE,t.DST_ALPHA],e[r.BLEND_MODES.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR],e[r.BLEND_MODES.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.ADD_NPM]=[t.SRC_ALPHA,t.DST_ALPHA,t.ONE,t.DST_ALPHA],e[r.BLEND_MODES.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_COLOR],e};var r=i(0)},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e[r.DRAW_MODES.POINTS]=t.POINTS,e[r.DRAW_MODES.LINES]=t.LINES,e[r.DRAW_MODES.LINE_LOOP]=t.LINE_LOOP,e[r.DRAW_MODES.LINE_STRIP]=t.LINE_STRIP,e[r.DRAW_MODES.TRIANGLES]=t.TRIANGLES,e[r.DRAW_MODES.TRIANGLE_STRIP]=t.TRIANGLE_STRIP,e[r.DRAW_MODES.TRIANGLE_FAN]=t.TRIANGLE_FAN,e};var r=i(0)},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t){t.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")}},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t,e){var i=s;i=(i=i.replace(/%count%/gi,e)).replace(/%forloop%/gi,function(t){var e="";e+="\n",e+="\n";for(var i=0;i<t;i++)i>0&&(e+="\nelse "),i<t-1&&(e+="if(textureId == "+i+".0)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+i+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"}(e));for(var r=new o.default(t,"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor;\n}\n",i),n=[],a=0;a<e;a++)n[a]=a;return r.bind(),r.uniforms.uSamplers=n,r};var r,n=i(14),o=(r=n)&&r.__esModule?r:{default:r};i(6);var s=["varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureId;","uniform sampler2D uSamplers[%count%];","void main(void){","vec4 color;","float textureId = floor(vTextureId+0.5);","%forloop%","gl_FragColor = color * vColor;","}"].join("\n")},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t,e){var i=!e;if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");if(i){var r=document.createElement("canvas");r.width=1,r.height=1,e=o.default.createContext(r)}var n=e.createShader(e.FRAGMENT_SHADER);for(;;){var h=s.replace(/%forloop%/gi,a(t));if(e.shaderSource(n,h),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS))break;t=t/2|0}i&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").loseContext();return t};var r,n=i(5),o=(r=n)&&r.__esModule?r:{default:r};var s=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function a(t){for(var e="",i=0;i<t;++i)i>0&&(e+="\nelse "),i<t-1&&(e+="if(test == "+i+".0){}");return e}},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.vertices=new ArrayBuffer(e),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)}return t.prototype.destroy=function(){this.vertices=null,this.positions=null,this.uvs=null,this.colors=null},t}();e.default=r},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=p(i(31)),o=p(i(7)),s=i(4),a=i(2),h=i(0),l=p(i(3)),u=p(i(65)),c=p(i(66)),d=p(i(146));function p(t){return t&&t.__esModule?t:{default:t}}var f={texture:!0,children:!1,baseTexture:!0},g=function(t){function e(i,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=n||document.createElement("canvas")).width=3,n.height=3;var a=o.default.fromCanvas(n,l.default.SCALE_MODE,"text");a.orig=new s.Rectangle,a.trim=new s.Rectangle;var h=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,a));return o.default.addToCache(h._texture,h._texture.baseTexture.textureCacheIds[0]),h.canvas=n,h.context=h.canvas.getContext("2d"),h.resolution=l.default.RESOLUTION,h._text=null,h._style=null,h._styleListener=null,h._font="",h.text=i,h.style=r,h.localStyleID=-1,h}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.updateText=function(t){var e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),this.dirty||!t){this._font=this._style.toFontString();var i=this.context,r=c.default.measureText(this._text,this._style,this._style.wordWrap,this.canvas),n=r.width,o=r.height,s=r.lines,a=r.lineHeight,h=r.lineWidths,l=r.maxLineWidth,u=r.fontProperties;this.canvas.width=Math.ceil((Math.max(1,n)+2*e.padding)*this.resolution),this.canvas.height=Math.ceil((Math.max(1,o)+2*e.padding)*this.resolution),i.scale(this.resolution,this.resolution),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.font=this._font,i.strokeStyle=e.stroke,i.lineWidth=e.strokeThickness,i.textBaseline=e.textBaseline,i.lineJoin=e.lineJoin,i.miterLimit=e.miterLimit;var d=void 0,p=void 0;if(e.dropShadow){i.fillStyle=e.dropShadowColor,i.globalAlpha=e.dropShadowAlpha,i.shadowBlur=e.dropShadowBlur,e.dropShadowBlur>0&&(i.shadowColor=e.dropShadowColor);for(var f=Math.cos(e.dropShadowAngle)*e.dropShadowDistance,g=Math.sin(e.dropShadowAngle)*e.dropShadowDistance,y=0;y<s.length;y++)d=e.strokeThickness/2,p=e.strokeThickness/2+y*a+u.ascent,"right"===e.align?d+=l-h[y]:"center"===e.align&&(d+=(l-h[y])/2),e.fill&&(this.drawLetterSpacing(s[y],d+f+e.padding,p+g+e.padding),e.stroke&&e.strokeThickness&&(i.strokeStyle=e.dropShadowColor,this.drawLetterSpacing(s[y],d+f+e.padding,p+g+e.padding,!0),i.strokeStyle=e.stroke))}i.shadowBlur=0,i.globalAlpha=1,i.fillStyle=this._generateFillStyle(e,s);for(var v=0;v<s.length;v++)d=e.strokeThickness/2,p=e.strokeThickness/2+v*a+u.ascent,"right"===e.align?d+=l-h[v]:"center"===e.align&&(d+=(l-h[v])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(s[v],d+e.padding,p+e.padding,!0),e.fill&&this.drawLetterSpacing(s[v],d+e.padding,p+e.padding);this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,e,i){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=this._style.letterSpacing;if(0!==n)for(var o=String.prototype.split.call(t,""),s=e,a=0,h="";a<t.length;)h=o[a++],r?this.context.strokeText(h,s,i):this.context.fillText(h,s,i),s+=this.context.measureText(h).width+n;else r?this.context.strokeText(t,e,i):this.context.fillText(t,e,i)},e.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var e=(0,d.default)(t);e.data&&(t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0))}var i=this._texture,r=this._style,n=r.trim?0:r.padding,o=i.baseTexture;o.hasLoaded=!0,o.resolution=this.resolution,o.realWidth=t.width,o.realHeight=t.height,o.width=t.width/this.resolution,o.height=t.height/this.resolution,i.trim.width=i._frame.width=t.width/this.resolution,i.trim.height=i._frame.height=t.height/this.resolution,i.trim.x=-n,i.trim.y=-n,i.orig.width=i._frame.width-2*n,i.orig.height=i._frame.height-2*n,this._onTextureUpdate(),o.emit("update",o),this.dirty=!1},e.prototype.renderWebGL=function(e){this.resolution!==e.resolution&&(this.resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype.renderWebGL.call(this,e)},e.prototype._renderCanvas=function(e){this.resolution!==e.resolution&&(this.resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype._renderCanvas.call(this,e)},e.prototype.getLocalBounds=function(e){return this.updateText(!0),t.prototype.getLocalBounds.call(this,e)},e.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._onStyleChange=function(){this.dirty=!0},e.prototype._generateFillStyle=function(t,e){if(!Array.isArray(t.fill))return t.fill;if(navigator.isCocoonJS)return t.fill[0];var i=void 0,r=void 0,n=void 0,o=void 0,s=this.canvas.width/this.resolution,a=this.canvas.height/this.resolution,l=t.fill.slice(),u=t.fillGradientStops.slice();if(!u.length)for(var c=l.length+1,d=1;d<c;++d)u.push(d/c);if(l.unshift(t.fill[0]),u.unshift(0),l.push(t.fill[t.fill.length-1]),u.push(1),t.fillGradientType===h.TEXT_GRADIENT.LINEAR_VERTICAL){i=this.context.createLinearGradient(s/2,0,s/2,a),r=(l.length+1)*e.length,n=0;for(var p=0;p<e.length;p++){n+=1;for(var f=0;f<l.length;f++)o="number"==typeof u[f]?u[f]/e.length+p/e.length:n/r,i.addColorStop(o,l[f]),n++}}else{i=this.context.createLinearGradient(0,a/2,s,a/2),r=l.length+1,n=1;for(var g=0;g<l.length;g++)o="number"==typeof u[g]?u[g]:n/r,i.addColorStop(o,l[g]),n++}return i},e.prototype.destroy=function(e){"boolean"==typeof e&&(e={children:e}),e=Object.assign({},f,e),t.prototype.destroy.call(this,e),this.context=null,this.canvas=null,this._style=null},r(e,[{key:"width",get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var e=(0,a.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}},{key:"height",get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var e=(0,a.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}},{key:"style",get:function(){return this._style},set:function(t){(t=t||{})instanceof u.default?this._style=t:this._style=new u.default(t),this.localStyleID=-1,this.dirty=!0}},{key:"text",get:function(){return this._text},set:function(t){t=String(""===t||null==t?" ":t),this._text!==t&&(this._text=t,this.dirty=!0)}}]),e}(n.default);e.default=g},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t){var e=t.width,i=t.height,r=t.getContext("2d"),n=r.getImageData(0,0,e,i).data,o=n.length,s={top:null,left:null,right:null,bottom:null},a=null,h=void 0,l=void 0,u=void 0;for(h=0;h<o;h+=4)0!==n[h+3]&&(l=h/4%e,u=~~(h/4/e),null===s.top&&(s.top=u),null===s.left?s.left=l:l<s.left&&(s.left=l),null===s.right?s.right=l+1:s.right<l&&(s.right=l+1),null===s.bottom?s.bottom=u:s.bottom<u&&(s.bottom=u));null!==s.top&&(e=s.right-s.left,i=s.bottom-s.top+1,a=r.getImageData(s.left,s.top,e,i));return{height:i,width:e,data:a}}},function(t,e,i){"use strict";e.__esModule=!0;var r=f(i(11)),n=f(i(34)),o=f(i(7)),s=f(i(67)),a=f(i(31)),h=i(4),l=i(2),u=i(0),c=f(i(27)),d=f(i(148)),p=f(i(12));function f(t){return t&&t.__esModule?t:{default:t}}var g=void 0,y=new h.Matrix,v=new h.Point,m=new Float32Array(4),b=new Float32Array(4),$=function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return r.fillAlpha=1,r.lineWidth=0,r.nativeLines=i,r.lineColor=0,r.lineAlignment=.5,r.graphicsData=[],r.tint=16777215,r._prevTint=16777215,r.blendMode=u.BLEND_MODES.NORMAL,r.currentPath=null,r._webGL={},r.isMask=!1,r.boundsPadding=0,r._localBounds=new c.default,r.dirty=0,r.fastRectDirty=-1,r.clearDirty=0,r.boundsDirty=-1,r.cachedSpriteDirty=!1,r._spriteRect=null,r._fastRect=!1,r._prevRectTint=null,r._prevRectFillColor=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.clone=function(){var t=new e;t.renderable=this.renderable,t.fillAlpha=this.fillAlpha,t.lineWidth=this.lineWidth,t.lineColor=this.lineColor,t.lineAlignment=this.lineAlignment,t.tint=this.tint,t.blendMode=this.blendMode,t.isMask=this.isMask,t.boundsPadding=this.boundsPadding,t.dirty=0,t.cachedSpriteDirty=this.cachedSpriteDirty;for(var i=0;i<this.graphicsData.length;++i)t.graphicsData.push(this.graphicsData[i].clone());return t.currentPath=t.graphicsData[t.graphicsData.length-1],t.updateLocalBounds(),t},e.prototype._quadraticCurveLength=function(t,e,i,r,n,o){var s=t-2*i+n,a=e-2*r+o,h=2*i-2*t,l=2*r-2*e,u=4*(s*s+a*a),c=4*(s*h+a*l),d=h*h+l*l,p=2*Math.sqrt(u+c+d),f=Math.sqrt(u),g=2*u*f,y=2*Math.sqrt(d),v=c/f;return(g*p+f*c*(p-y)+(4*d*u-c*c)*Math.log((2*f+v+p)/(v+y)))/(4*g)},e.prototype._bezierCurveLength=function(t,e,i,r,n,o,s,a){for(var h=0,l=0,u=0,c=0,d=0,p=0,f=0,g=0,y=0,v=0,m=0,b=t,$=e,w=1;w<=10;++w)v=b-(g=(f=(p=(d=1-(l=w/10))*d)*d)*t+3*p*l*i+3*d*(u=l*l)*n+(c=u*l)*s),m=$-(y=f*e+3*p*l*r+3*d*u*o+c*a),b=g,$=y,h+=Math.sqrt(v*v+m*m);return h},e.prototype._segmentsCount=function(t){var i=Math.ceil(t/e.CURVES.maxLength);return i<e.CURVES.minSegments?i=e.CURVES.minSegments:i>e.CURVES.maxSegments&&(i=e.CURVES.maxSegments),i},e.prototype.lineStyle=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;if(this.lineWidth=t,this.lineColor=e,this.lineAlpha=i,this.lineAlignment=r,this.currentPath)if(this.currentPath.shape.points.length){var n=new h.Polygon(this.currentPath.shape.points.slice(-2));n.closed=!1,this.drawShape(n)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha,this.currentPath.lineAlignment=this.lineAlignment;return this},e.prototype.moveTo=function(t,e){var i=new h.Polygon([t,e]);return i.closed=!1,this.drawShape(i),this},e.prototype.lineTo=function(t,e){var i=this.currentPath.shape.points,r=i[i.length-2],n=i[i.length-1];return r===t&&n===e||(i.push(t,e),this.dirty++),this},e.prototype.quadraticCurveTo=function(t,i,r,n){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var o=this.currentPath.shape.points,s=0,a=0;0===o.length&&this.moveTo(0,0);for(var h=o[o.length-2],l=o[o.length-1],u=e.CURVES.adaptive?this._segmentsCount(this._quadraticCurveLength(h,l,t,i,r,n)):20,c=1;c<=u;++c){var d=c/u;s=h+(t-h)*d,a=l+(i-l)*d,o.push(s+(t+(r-t)*d-s)*d,a+(i+(n-i)*d-a)*d)}return this.dirty++,this},e.prototype.bezierCurveTo=function(t,i,r,n,o,s){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var a=this.currentPath.shape.points,h=a[a.length-2],l=a[a.length-1];a.length-=2;var u=e.CURVES.adaptive?this._segmentsCount(this._bezierCurveLength(h,l,t,i,r,n,o,s)):20;return(0,d.default)(h,l,t,i,r,n,o,s,u,a),this.dirty++,this},e.prototype.arcTo=function(t,e,i,r,n){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(t,e):this.moveTo(t,e);var o=this.currentPath.shape.points,s=o[o.length-2],a=o[o.length-1]-e,h=s-t,l=r-e,u=i-t,c=Math.abs(a*u-h*l);if(c<1e-8||0===n)o[o.length-2]===t&&o[o.length-1]===e||o.push(t,e);else{var d=a*a+h*h,p=l*l+u*u,f=a*l+h*u,g=n*Math.sqrt(d)/c,y=n*Math.sqrt(p)/c,v=g*f/d,m=y*f/p,b=g*u+y*h,$=g*l+y*a,w=h*(y+v),x=a*(y+v),_=u*(g+m),T=l*(g+m),E=Math.atan2(x-$,w-b),O=Math.atan2(T-$,_-b);this.arc(b+t,$+e,n,E,O,h*l>u*a)}return this.dirty++,this},e.prototype.arc=function(t,i,r,n,o){var s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(n===o)return this;!s&&o<=n?o+=u.PI_2:s&&n<=o&&(n+=u.PI_2);var a=o-n,h=e.CURVES.adaptive?this._segmentsCount(Math.abs(a)*r):40*Math.ceil(Math.abs(a)/u.PI_2);if(0===a)return this;var l=t+Math.cos(n)*r,c=i+Math.sin(n)*r,d=this.currentPath?this.currentPath.shape.points:null;if(d){var p=Math.abs(d[d.length-2]-l),f=Math.abs(d[d.length-1]-c);p<.001&&f<.001||d.push(l,c)}else this.moveTo(l,c),d=this.currentPath.shape.points;for(var g=a/(2*h),y=2*g,v=Math.cos(g),m=Math.sin(g),b=h-1,$=b%1/b,w=0;w<=b;++w){var x=g+n+y*(w+$*w),_=Math.cos(x),T=-Math.sin(x);d.push((v*_+m*T)*r+t,(v*-T+m*_)*r+i)}return this.dirty++,this},e.prototype.beginFill=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.filling=!0,this.fillColor=t,this.fillAlpha=e,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},e.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},e.prototype.drawRect=function(t,e,i,r){return this.drawShape(new h.Rectangle(t,e,i,r)),this},e.prototype.drawRoundedRect=function(t,e,i,r,n){return this.drawShape(new h.RoundedRectangle(t,e,i,r,n)),this},e.prototype.drawCircle=function(t,e,i){return this.drawShape(new h.Circle(t,e,i)),this},e.prototype.drawEllipse=function(t,e,i,r){return this.drawShape(new h.Ellipse(t,e,i,r)),this},e.prototype.drawPolygon=function(t){var e=t,i=!0;if(e instanceof h.Polygon&&(i=e.closed,e=e.points),!Array.isArray(e)){e=new Array(arguments.length);for(var r=0;r<e.length;++r)e[r]=arguments[r]}var n=new h.Polygon(e);return n.closed=i,this.drawShape(n),this},e.prototype.drawStar=function(t,e,i,r,n){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;n=n||r/2;for(var s=-1*Math.PI/2+o,a=2*i,h=u.PI_2/a,l=[],c=0;c<a;c++){var d=c%2?n:r,p=c*h+s;l.push(t+d*Math.cos(p),e+d*Math.sin(p))}return this.drawPolygon(l)},e.prototype.clear=function(){return(this.lineWidth||this.filling||this.graphicsData.length>0)&&(this.lineWidth=0,this.lineAlignment=.5,this.filling=!1,this.boundsDirty=-1,this.canvasTintDirty=-1,this.dirty++,this.clearDirty++,this.graphicsData.length=0),this.currentPath=null,this._spriteRect=null,this},e.prototype.isFastRect=function(){return 1===this.graphicsData.length&&this.graphicsData[0].shape.type===u.SHAPES.RECT&&!this.graphicsData[0].lineWidth},e.prototype._renderWebGL=function(t){this.dirty!==this.fastRectDirty&&(this.fastRectDirty=this.dirty,this._fastRect=this.isFastRect()),this._fastRect?this._renderSpriteRect(t):(t.setObjectRenderer(t.plugins.graphics),t.plugins.graphics.render(this))},e.prototype._renderSpriteRect=function(t){var e=this.graphicsData[0].shape;this._spriteRect||(this._spriteRect=new a.default(new o.default(o.default.WHITE)));var i=this._spriteRect,r=this.graphicsData[0].fillColor;if(16777215===this.tint)i.tint=r;else if(this.tint!==this._prevRectTint||r!==this._prevRectFillColor){var n=m,s=b;(0,l.hex2rgb)(r,n),(0,l.hex2rgb)(this.tint,s),n[0]*=s[0],n[1]*=s[1],n[2]*=s[2],i.tint=(0,l.rgb2hex)(n),this._prevRectTint=this.tint,this._prevRectFillColor=r}i.alpha=this.graphicsData[0].fillAlpha,i.worldAlpha=this.worldAlpha*i.alpha,i.blendMode=this.blendMode,i._texture._frame.width=e.width,i._texture._frame.height=e.height,i.transform.worldTransform=this.transform.worldTransform,i.anchor.set(-e.x/e.width,-e.y/e.height),i._onAnchorUpdate(),i._renderWebGL(t)},e.prototype._renderCanvas=function(t){!0!==this.isMask&&t.plugins.graphics.render(this)},e.prototype._calculateBounds=function(){this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.updateLocalBounds(),this.cachedSpriteDirty=!0);var t=this._localBounds;this._bounds.addFrame(this.transform,t.minX,t.minY,t.maxX,t.maxY)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,v);for(var e=this.graphicsData,i=0;i<e.length;++i){var r=e[i];if(r.fill&&(r.shape&&r.shape.contains(v.x,v.y))){if(r.holes)for(var n=0;n<r.holes.length;n++){if(r.holes[n].contains(v.x,v.y))return!1}return!0}}return!1},e.prototype.updateLocalBounds=function(){var t=1/0,e=-1/0,i=1/0,r=-1/0;if(this.graphicsData.length)for(var n=0,o=0,s=0,a=0,h=0,l=0;l<this.graphicsData.length;l++){var c=this.graphicsData[l],d=c.type,p=c.lineWidth*c.lineAlignment;if(n=c.shape,d===u.SHAPES.RECT||d===u.SHAPES.RREC)o=n.x-p,s=n.y-p,t=o<t?o:t,e=o+(a=n.width+2*p)>e?o+a:e,i=s<i?s:i,r=s+(h=n.height+2*p)>r?s+h:r;else if(d===u.SHAPES.CIRC)o=n.x,s=n.y,t=o-(a=n.radius+p)<t?o-a:t,e=o+a>e?o+a:e,i=s-(h=n.radius+p)<i?s-h:i,r=s+h>r?s+h:r;else if(d===u.SHAPES.ELIP)o=n.x,s=n.y,t=o-(a=n.width+p)<t?o-a:t,e=o+a>e?o+a:e,i=s-(h=n.height+p)<i?s-h:i,r=s+h>r?s+h:r;else for(var f=n.points,g=0,y=0,v=0,m=0,b=0,$=0,w=0,x=0,_=0;_+2<f.length;_+=2)o=f[_],s=f[_+1],g=f[_+2],y=f[_+3],v=Math.abs(g-o),m=Math.abs(y-s),h=2*p,(a=Math.sqrt(v*v+m*m))<1e-9||(t=(w=(g+o)/2)-(b=(h/a*m+v)/2)<t?w-b:t,e=w+b>e?w+b:e,i=(x=(y+s)/2)-($=(h/a*v+m)/2)<i?x-$:i,r=x+$>r?x+$:r)}else t=0,e=0,i=0,r=0;var T=this.boundsPadding;this._localBounds.minX=t-T,this._localBounds.maxX=e+T,this._localBounds.minY=i-T,this._localBounds.maxY=r+T},e.prototype.drawShape=function(t){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var e=new s.default(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,this.nativeLines,t,this.lineAlignment);return this.graphicsData.push(e),e.type===u.SHAPES.POLY&&(e.shape.closed=e.shape.closed,this.currentPath=e),this.dirty++,e},e.prototype.generateCanvasTexture=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=this.getLocalBounds(),r=n.default.create(i.width,i.height,t,e);g||(g=new p.default),this.transform.updateLocalTransform(),this.transform.localTransform.copy(y),y.invert(),y.tx-=i.x,y.ty-=i.y,g.render(this,r,!0,y);var s=o.default.fromCanvas(r.baseTexture._canvasRenderTarget.canvas,t,"graphics");return s.baseTexture.resolution=e,s.baseTexture.update(),s},e.prototype.closePath=function(){var t=this.currentPath;return t&&t.shape&&t.shape.close(),this},e.prototype.addHole=function(){var t=this.graphicsData.pop();return this.currentPath=this.graphicsData[this.graphicsData.length-1],this.currentPath.addHole(t.shape),this.currentPath=null,this},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e);for(var i=0;i<this.graphicsData.length;++i)this.graphicsData[i].destroy();for(var r in this._webGL)for(var n=0;n<this._webGL[r].data.length;++n)this._webGL[r].data[n].destroy();this._spriteRect&&this._spriteRect.destroy(),this.graphicsData=null,this.currentPath=null,this._webGL=null,this._localBounds=null},e}(r.default);e.default=$,$._SPRITE_TEXTURE=null,$.CURVES={adaptive:!1,maxLength:10,minSegments:8,maxSegments:2048}},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t,e,i,r,n,o,s,a,h){var l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[],u=0,c=0,d=0,p=0,f=0;l.push(t,e);for(var g=1,y=0;g<=h;++g)d=(c=(u=1-(y=g/h))*u)*u,f=(p=y*y)*y,l.push(d*t+3*c*y*i+3*u*p*n+f*s,d*e+3*c*y*r+3*u*p*o+f*a);return l}},function(t,e,i){"use strict";e.__esModule=!0;var r=i(2),n=i(0),o=p(i(18)),s=p(i(19)),a=p(i(150)),h=p(i(151)),l=p(i(152)),u=p(i(153)),c=p(i(154)),d=p(i(155));function p(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return r.graphicsDataPool=[],r.primitiveShader=null,r.gl=i.gl,r.CONTEXT_UID=0,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onContextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.primitiveShader=new h.default(this.gl)},e.prototype.destroy=function(){o.default.prototype.destroy.call(this);for(var t=0;t<this.graphicsDataPool.length;++t)this.graphicsDataPool[t].destroy();this.graphicsDataPool=null},e.prototype.render=function(t){var e=this.renderer,i=e.gl,n=void 0,o=t._webGL[this.CONTEXT_UID];o&&t.dirty===o.dirty||(this.updateGraphics(t),o=t._webGL[this.CONTEXT_UID]);var s=this.primitiveShader;e.bindShader(s),e.state.setBlendMode(t.blendMode);for(var a=0,h=o.data.length;a<h;a++){var l=(n=o.data[a]).shader;e.bindShader(l),l.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),l.uniforms.tint=(0,r.hex2rgb)(t.tint),l.uniforms.alpha=t.worldAlpha,e.bindVao(n.vao),n.nativeLines?i.drawArrays(i.LINES,0,n.points.length/6):n.vao.draw(i.TRIANGLE_STRIP,n.indices.length)}},e.prototype.updateGraphics=function(t){var e=this.renderer.gl,i=t._webGL[this.CONTEXT_UID];if(i||(i=t._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:e,clearDirty:-1,dirty:-1}),i.dirty=t.dirty,t.clearDirty!==i.clearDirty){i.clearDirty=t.clearDirty;for(var r=0;r<i.data.length;r++)this.graphicsDataPool.push(i.data[r]);i.data.length=0,i.lastIndex=0}for(var o=void 0,s=void 0,a=i.lastIndex;a<t.graphicsData.length;a++){var h=t.graphicsData[a];o=this.getWebGLData(i,0),h.nativeLines&&h.lineWidth&&(s=this.getWebGLData(i,0,!0),i.lastIndex++),h.type===n.SHAPES.POLY&&(0,l.default)(h,o,s),h.type===n.SHAPES.RECT?(0,u.default)(h,o,s):h.type===n.SHAPES.CIRC||h.type===n.SHAPES.ELIP?(0,d.default)(h,o,s):h.type===n.SHAPES.RREC&&(0,c.default)(h,o,s),i.lastIndex++}this.renderer.bindVao(null);for(var p=0;p<i.data.length;p++)(o=i.data[p]).dirty&&o.upload()},e.prototype.getWebGLData=function(t,e,i){var r=t.data[t.data.length-1];return(!r||r.nativeLines!==i||r.points.length>32e4)&&((r=this.graphicsDataPool.pop()||new a.default(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState)).nativeLines=i,r.reset(e),t.data.push(r)),r.dirty=!0,r},e}(o.default);e.default=f,s.default.registerPlugin("graphics",f)},function(t,e,i){"use strict";e.__esModule=!0;var r,n=i(5),o=(r=n)&&r.__esModule?r:{default:r};var s=function(){function t(e,i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gl=e,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=o.default.GLBuffer.createVertexBuffer(e),this.indexBuffer=o.default.GLBuffer.createIndexBuffer(e),this.dirty=!0,this.nativeLines=!1,this.glPoints=null,this.glIndices=null,this.shader=i,this.vao=new o.default.VertexArrayObject(e,r).addIndex(this.indexBuffer).addAttribute(this.buffer,i.attributes.aVertexPosition,e.FLOAT,!1,24,0).addAttribute(this.buffer,i.attributes.aColor,e.FLOAT,!1,24,8)}return t.prototype.reset=function(){this.points.length=0,this.indices.length=0},t.prototype.upload=function(){this.glPoints=new Float32Array(this.points),this.buffer.upload(this.glPoints),this.glIndices=new Uint16Array(this.indices),this.indexBuffer.upload(this.glIndices),this.dirty=!1},t.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.vao.destroy(),this.buffer.destroy(),this.indexBuffer.destroy(),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null},t}();e.default=s},function(t,e,i){"use strict";e.__esModule=!0;var r,n=i(14);var o=function(t){function e(i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n")))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(((r=n)&&r.__esModule?r:{default:r}).default);e.default=o},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t,e,i){t.points=t.shape.points.slice();var s=t.points;if(t.fill&&s.length>=6){for(var a=[],h=t.holes,l=0;l<h.length;l++){var u=h[l];a.push(s.length/2),s=s.concat(u.points)}var c=e.points,d=e.indices,p=s.length/2,f=(0,n.hex2rgb)(t.fillColor),g=t.fillAlpha,y=f[0]*g,v=f[1]*g,m=f[2]*g,b=(0,o.default)(s,a,2);if(!b)return;for(var $=c.length/6,w=0;w<b.length;w+=3)d.push(b[w]+$),d.push(b[w]+$),d.push(b[w+1]+$),d.push(b[w+2]+$),d.push(b[w+2]+$);for(var x=0;x<p;x++)c.push(s[2*x],s[2*x+1],y,v,m,g)}t.lineWidth>0&&(0,r.default)(t,e,i)};var r=s(i(21)),n=i(2),o=s(i(30));function s(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t,e,i){var r=t.shape,n=r.x,a=r.y,h=r.width,l=r.height;if(t.fill){var u=(0,s.hex2rgb)(t.fillColor),c=t.fillAlpha,d=u[0]*c,p=u[1]*c,f=u[2]*c,g=e.points,y=e.indices,v=g.length/6;g.push(n,a),g.push(d,p,f,c),g.push(n+h,a),g.push(d,p,f,c),g.push(n,a+l),g.push(d,p,f,c),g.push(n+h,a+l),g.push(d,p,f,c),y.push(v,v,v+1,v+2,v+3,v+3)}if(t.lineWidth){var m=t.points;t.points=[n,a,n+h,a,n+h,a+l,n,a+l,n,a],(0,o.default)(t,e,i),t.points=m}};var r,n=i(21),o=(r=n)&&r.__esModule?r:{default:r},s=i(2)},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t,e,i){var s=t.shape,a=s.x,l=s.y,u=s.width,c=s.height,d=s.radius,p=[];if(p.push(a+d,l),h(a+u-d,l,a+u,l,a+u,l+d,p),h(a+u,l+c-d,a+u,l+c,a+u-d,l+c,p),h(a+d,l+c,a,l+c,a,l+c-d,p),h(a,l+d,a,l,a+d+1e-10,l,p),t.fill){for(var f=(0,o.hex2rgb)(t.fillColor),g=t.fillAlpha,y=f[0]*g,v=f[1]*g,m=f[2]*g,b=e.points,$=e.indices,w=b.length/6,x=(0,r.default)(p,null,2),_=0,T=x.length;_<T;_+=3)$.push(x[_]+w),$.push(x[_]+w),$.push(x[_+1]+w),$.push(x[_+2]+w),$.push(x[_+2]+w);for(var E=0,O=p.length;E<O;E++)b.push(p[E],p[++E],y,v,m,g)}if(t.lineWidth){var S=t.points;t.points=p,(0,n.default)(t,e,i),t.points=S}};var r=s(i(30)),n=s(i(21)),o=i(2);function s(t){return t&&t.__esModule?t:{default:t}}function a(t,e,i){return t+(e-t)*i}function h(t,e,i,r,n,o){for(var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],h=0,l=0,u=0,c=0,d=0,p=0,f=0,g=0;f<=20;++f)h=a(t,i,g=f/20),l=a(e,r,g),u=a(i,n,g),c=a(r,o,g),d=a(h,u,g),p=a(l,c,g),s.push(d,p);return s}},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t,e,i){var r=t.shape,n=r.x,h=r.y,l=void 0,u=void 0;t.type===s.SHAPES.CIRC?(l=r.radius,u=r.radius):(l=r.width,u=r.height);if(0===l||0===u)return;var c=Math.floor(30*Math.sqrt(r.radius))||Math.floor(15*Math.sqrt(r.width+r.height)),d=2*Math.PI/c;if(t.fill){var p=(0,a.hex2rgb)(t.fillColor),f=t.fillAlpha,g=p[0]*f,y=p[1]*f,v=p[2]*f,m=e.points,b=e.indices,$=m.length/6;b.push($);for(var w=0;w<c+1;w++)m.push(n,h,g,y,v,f),m.push(n+Math.sin(d*w)*l,h+Math.cos(d*w)*u,g,y,v,f),b.push($++,$++);b.push($-1)}if(t.lineWidth){var x=t.points;t.points=[];for(var _=0;_<c;_++)t.points.push(n+Math.sin(d*-_)*l,h+Math.cos(d*-_)*u);t.points.push(t.points[0],t.points[1]),(0,o.default)(t,e,i),t.points=x}};var r,n=i(21),o=(r=n)&&r.__esModule?r:{default:r},s=i(0),a=i(2)},function(t,e,i){"use strict";e.__esModule=!0;var r,n=i(12),o=(r=n)&&r.__esModule?r:{default:r},s=i(0);var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e}return t.prototype.render=function(t){var e=this.renderer,i=e.context,r=t.worldAlpha,n=t.transform.worldTransform,o=e.resolution;i.setTransform(n.a*o,n.b*o,n.c*o,n.d*o,n.tx*o,n.ty*o),t.canvasTintDirty===t.dirty&&t._prevTint===t.tint||this.updateGraphicsTint(t),e.setBlendMode(t.blendMode);for(var a=0;a<t.graphicsData.length;a++){var h=t.graphicsData[a],l=h.shape,u=h._fillTint,c=h._lineTint;if(i.lineWidth=h.lineWidth,h.type===s.SHAPES.POLY){i.beginPath();var d=l.points,p=h.holes,f=void 0,g=void 0;i.moveTo(d[0],d[1]);for(var y=2;y<d.length;y+=2)i.lineTo(d[y],d[y+1]);if(l.closed&&i.closePath(),p.length>0){f=0;for(var v=0;v<d.length;v+=2)f+=d[v]*d[v+3]-d[v+1]*d[v+2];for(var m=0;m<p.length;m++){d=p[m].points,g=0;for(var b=0;b<d.length;b+=2)g+=d[b]*d[b+3]-d[b+1]*d[b+2];if(i.moveTo(d[0],d[1]),g*f<0)for(var $=2;$<d.length;$+=2)i.lineTo(d[$],d[$+1]);else for(var w=d.length-2;w>=2;w-=2)i.lineTo(d[w],d[w+1]);p[m].closed&&i.closePath()}}h.fill&&(i.globalAlpha=h.fillAlpha*r,i.fillStyle="#"+("00000"+(0|u).toString(16)).substr(-6),i.fill()),h.lineWidth&&(i.globalAlpha=h.lineAlpha*r,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.stroke())}else if(h.type===s.SHAPES.RECT)(h.fillColor||0===h.fillColor)&&(i.globalAlpha=h.fillAlpha*r,i.fillStyle="#"+("00000"+(0|u).toString(16)).substr(-6),i.fillRect(l.x,l.y,l.width,l.height)),h.lineWidth&&(i.globalAlpha=h.lineAlpha*r,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.strokeRect(l.x,l.y,l.width,l.height));else if(h.type===s.SHAPES.CIRC)i.beginPath(),i.arc(l.x,l.y,l.radius,0,2*Math.PI),i.closePath(),h.fill&&(i.globalAlpha=h.fillAlpha*r,i.fillStyle="#"+("00000"+(0|u).toString(16)).substr(-6),i.fill()),h.lineWidth&&(i.globalAlpha=h.lineAlpha*r,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.stroke());else if(h.type===s.SHAPES.ELIP){var x=2*l.width,_=2*l.height,T=l.x-x/2,E=l.y-_/2;i.beginPath();var O=x/2*.5522848,S=_/2*.5522848,C=T+x,P=E+_,I=T+x/2,M=E+_/2;i.moveTo(T,M),i.bezierCurveTo(T,M-S,I-O,E,I,E),i.bezierCurveTo(I+O,E,C,M-S,C,M),i.bezierCurveTo(C,M+S,I+O,P,I,P),i.bezierCurveTo(I-O,P,T,M+S,T,M),i.closePath(),h.fill&&(i.globalAlpha=h.fillAlpha*r,i.fillStyle="#"+("00000"+(0|u).toString(16)).substr(-6),i.fill()),h.lineWidth&&(i.globalAlpha=h.lineAlpha*r,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.stroke())}else if(h.type===s.SHAPES.RREC){var A=l.x,R=l.y,D=l.width,k=l.height,L=l.radius,j=Math.min(D,k)/2|0;L=L>j?j:L,i.beginPath(),i.moveTo(A,R+L),i.lineTo(A,R+k-L),i.quadraticCurveTo(A,R+k,A+L,R+k),i.lineTo(A+D-L,R+k),i.quadraticCurveTo(A+D,R+k,A+D,R+k-L),i.lineTo(A+D,R+L),i.quadraticCurveTo(A+D,R,A+D-L,R),i.lineTo(A+L,R),i.quadraticCurveTo(A,R,A,R+L),i.closePath(),(h.fillColor||0===h.fillColor)&&(i.globalAlpha=h.fillAlpha*r,i.fillStyle="#"+("00000"+(0|u).toString(16)).substr(-6),i.fill()),h.lineWidth&&(i.globalAlpha=h.lineAlpha*r,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.stroke())}}},t.prototype.updateGraphicsTint=function(t){t._prevTint=t.tint,t.canvasTintDirty=t.dirty;for(var e=(t.tint>>16&255)/255,i=(t.tint>>8&255)/255,r=(255&t.tint)/255,n=0;n<t.graphicsData.length;++n){var o=t.graphicsData[n],s=0|o.fillColor,a=0|o.lineColor;o._fillTint=((s>>16&255)/255*e*255<<16)+((s>>8&255)/255*i*255<<8)+(255&s)/255*r*255,o._lineTint=((a>>16&255)/255*e*255<<16)+((a>>8&255)/255*i*255<<8)+(255&a)/255*r*255}},t.prototype.renderPolygon=function(t,e,i){i.moveTo(t[0],t[1]);for(var r=1;r<t.length/2;++r)i.lineTo(t[2*r],t[2*r+1]);e&&i.closePath()},t.prototype.destroy=function(){this.renderer=null},t}();e.default=a,o.default.registerPlugin("graphics",a)},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=i(1),o=i(2);var s=function(){function t(e,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.baseTexture=e,this.textures={},this.animations={},this.data=i,this.resolution=this._updateResolution(r||this.baseTexture.imageUrl),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return r(t,null,[{key:"BATCH_SIZE",get:function(){return 1e3}}]),t.prototype._updateResolution=function(t){var e=this.data.meta.scale,i=(0,o.getResolutionOfUrl)(t,null);return null===i&&(i=void 0!==e?parseFloat(e):1),1!==i&&(this.baseTexture.resolution=i,this.baseTexture.update()),i},t.prototype.parse=function(e){this._batchIndex=0,this._callback=e,this._frameKeys.length<=t.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},t.prototype._processFrames=function(e){for(var i=e,r=t.BATCH_SIZE,o=this.baseTexture.sourceScale;i-e<r&&i<this._frameKeys.length;){var s=this._frameKeys[i],a=this._frames[s],h=a.frame;if(h){var l=null,u=null,c=!1!==a.trimmed&&a.sourceSize?a.sourceSize:a.frame,d=new n.Rectangle(0,0,Math.floor(c.w*o)/this.resolution,Math.floor(c.h*o)/this.resolution);l=a.rotated?new n.Rectangle(Math.floor(h.x*o)/this.resolution,Math.floor(h.y*o)/this.resolution,Math.floor(h.h*o)/this.resolution,Math.floor(h.w*o)/this.resolution):new n.Rectangle(Math.floor(h.x*o)/this.resolution,Math.floor(h.y*o)/this.resolution,Math.floor(h.w*o)/this.resolution,Math.floor(h.h*o)/this.resolution),!1!==a.trimmed&&a.spriteSourceSize&&(u=new n.Rectangle(Math.floor(a.spriteSourceSize.x*o)/this.resolution,Math.floor(a.spriteSourceSize.y*o)/this.resolution,Math.floor(h.w*o)/this.resolution,Math.floor(h.h*o)/this.resolution)),this.textures[s]=new n.Texture(this.baseTexture,l,d,u,a.rotated?2:0,a.anchor),n.Texture.addToCache(this.textures[s],s)}i++}},t.prototype._processAnimations=function(){var t=this.data.animations||{};for(var e in t){this.animations[e]=[];var i=t[e],r=Array.isArray(i),n=0;for(i=r?i:i[Symbol.iterator]();;){var o;if(r){if(n>=i.length)break;o=i[n++]}else{if((n=i.next()).done)break;o=n.value}var s=o;this.animations[e].push(this.textures[s])}}},t.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},t.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout(function(){e._batchIndex*t.BATCH_SIZE<e._frameKeys.length?e._nextBatch():(e._processAnimations(),e._parseComplete())},0)},t.prototype.destroy=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(var e in this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&this.baseTexture.destroy(),this.baseTexture=null},t}();e.default=s},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t){var e=t.mesh,i=t.particles,r=t.extras,o=t.filters,s=t.prepare,a=t.loaders,h=t.interaction;Object.defineProperties(t,{SpriteBatch:{get:function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")}},AssetLoader:{get:function(){throw new ReferenceError("The loader system was overhauled in PixiJS v3, please see the new PIXI.loaders.Loader class.")}},Stage:{get:function(){return n("You do not need to use a PIXI Stage any more, you can simply render any container."),t.Container}},DisplayObjectContainer:{get:function(){return n("DisplayObjectContainer has been shortened to Container, please use Container from now on."),t.Container}},Strip:{get:function(){return n("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),e.Mesh}},Rope:{get:function(){return n("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),e.Rope}},ParticleContainer:{get:function(){return n("The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on."),i.ParticleContainer}},MovieClip:{get:function(){return n("The MovieClip class has been moved to extras.AnimatedSprite, please use extras.AnimatedSprite."),r.AnimatedSprite}},TilingSprite:{get:function(){return n("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),r.TilingSprite}},BitmapText:{get:function(){return n("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),r.BitmapText}},blendModes:{get:function(){return n("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),t.BLEND_MODES}},scaleModes:{get:function(){return n("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),t.SCALE_MODES}},BaseTextureCache:{get:function(){return n("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),t.utils.BaseTextureCache}},TextureCache:{get:function(){return n("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),t.utils.TextureCache}},math:{get:function(){return n("The math namespace is deprecated, please access members already accessible on PIXI."),t}},AbstractFilter:{get:function(){return n("AstractFilter has been renamed to Filter, please use PIXI.Filter"),t.Filter}},TransformManual:{get:function(){return n("TransformManual has been renamed to TransformBase, please update your pixi-spine"),t.TransformBase}},TARGET_FPMS:{get:function(){return n("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),t.settings.TARGET_FPMS},set:function(e){n("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),t.settings.TARGET_FPMS=e}},FILTER_RESOLUTION:{get:function(){return n("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),t.settings.FILTER_RESOLUTION},set:function(e){n("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),t.settings.FILTER_RESOLUTION=e}},RESOLUTION:{get:function(){return n("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),t.settings.RESOLUTION},set:function(e){n("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),t.settings.RESOLUTION=e}},MIPMAP_TEXTURES:{get:function(){return n("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),t.settings.MIPMAP_TEXTURES},set:function(e){n("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),t.settings.MIPMAP_TEXTURES=e}},SPRITE_BATCH_SIZE:{get:function(){return n("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),t.settings.SPRITE_BATCH_SIZE},set:function(e){n("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),t.settings.SPRITE_BATCH_SIZE=e}},SPRITE_MAX_TEXTURES:{get:function(){return n("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),t.settings.SPRITE_MAX_TEXTURES},set:function(e){n("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),t.settings.SPRITE_MAX_TEXTURES=e}},RETINA_PREFIX:{get:function(){return n("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),t.settings.RETINA_PREFIX},set:function(e){n("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),t.settings.RETINA_PREFIX=e}},DEFAULT_RENDER_OPTIONS:{get:function(){return n("PIXI.DEFAULT_RENDER_OPTIONS has been deprecated, please use PIXI.settings.DEFAULT_RENDER_OPTIONS"),t.settings.RENDER_OPTIONS}}});for(var l=[{parent:"TRANSFORM_MODE",target:"TRANSFORM_MODE"},{parent:"GC_MODES",target:"GC_MODE"},{parent:"WRAP_MODES",target:"WRAP_MODE"},{parent:"SCALE_MODES",target:"SCALE_MODE"},{parent:"PRECISION",target:"PRECISION_FRAGMENT"}],u=function(e){var i=l[e];Object.defineProperty(t[i.parent],"DEFAULT",{get:function(){return n("PIXI."+i.parent+".DEFAULT has been deprecated, please use PIXI.settings."+i.target),t.settings[i.target]},set:function(e){n("PIXI."+i.parent+".DEFAULT has been deprecated, please use PIXI.settings."+i.target),t.settings[i.target]=e}})},c=0;c<l.length;c++)u(c);Object.defineProperties(t.settings,{PRECISION:{get:function(){return n("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),t.settings.PRECISION_FRAGMENT},set:function(e){n("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),t.settings.PRECISION_FRAGMENT=e}}}),r.AnimatedSprite&&Object.defineProperties(r,{MovieClip:{get:function(){return n("The MovieClip class has been renamed to AnimatedSprite, please use AnimatedSprite from now on."),r.AnimatedSprite}}});r&&Object.defineProperties(r,{TextureTransform:{get:function(){return n("The TextureTransform class has been renamed to TextureMatrix, please use PIXI.TextureMatrix from now on."),t.TextureMatrix}}});t.DisplayObject.prototype.generateTexture=function(t,e,i){return n("generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)"),t.generateTexture(this,e,i)},t.Graphics.prototype.generateTexture=function(t,e){return n("graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture"),this.generateCanvasTexture(t,e)},t.GroupD8.isSwapWidthHeight=function(e){return n("GroupD8.isSwapWidthHeight was renamed to GroupD8.isVertical"),t.GroupD8.isVertical(e)},t.RenderTexture.prototype.render=function(t,e,i,r){this.legacyRenderer.render(t,this,i,e,!r),n("RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)")},t.RenderTexture.prototype.getImage=function(t){return n("RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)"),this.legacyRenderer.extract.image(t)},t.RenderTexture.prototype.getBase64=function(t){return n("RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)"),this.legacyRenderer.extract.base64(t)},t.RenderTexture.prototype.getCanvas=function(t){return n("RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)"),this.legacyRenderer.extract.canvas(t)},t.RenderTexture.prototype.getPixels=function(t){return n("RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)"),this.legacyRenderer.pixels(t)},t.Sprite.prototype.setTexture=function(t){this.texture=t,n("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")},r.BitmapText&&(r.BitmapText.prototype.setText=function(t){this.text=t,n("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")});t.Text.prototype.setText=function(t){this.text=t,n("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")},t.Text.calculateFontProperties=function(e){return n("Text.calculateFontProperties is now deprecated, please use the TextMetrics.measureFont"),t.TextMetrics.measureFont(e)},Object.defineProperties(t.Text,{fontPropertiesCache:{get:function(){return n("Text.fontPropertiesCache is deprecated"),t.TextMetrics._fonts}},fontPropertiesCanvas:{get:function(){return n("Text.fontPropertiesCanvas is deprecated"),t.TextMetrics._canvas}},fontPropertiesContext:{get:function(){return n("Text.fontPropertiesContext is deprecated"),t.TextMetrics._context}}}),t.Text.prototype.setStyle=function(t){this.style=t,n("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")},t.Text.prototype.determineFontProperties=function(e){return n("determineFontProperties is now deprecated, please use TextMetrics.measureFont method"),t.TextMetrics.measureFont(e)},t.Text.getFontStyle=function(e){return n("getFontStyle is now deprecated, please use TextStyle.toFontString() instead"),(e=e||{})instanceof t.TextStyle||(e=new t.TextStyle(e)),e.toFontString()},Object.defineProperties(t.TextStyle.prototype,{font:{get:function(){n("text style property 'font' is now deprecated, please use the 'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on");var t="number"==typeof this._fontSize?this._fontSize+"px":this._fontSize;return this._fontStyle+" "+this._fontVariant+" "+this._fontWeight+" "+t+" "+this._fontFamily},set:function(t){n("text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on"),t.indexOf("italic")>1?this._fontStyle="italic":t.indexOf("oblique")>-1?this._fontStyle="oblique":this._fontStyle="normal",t.indexOf("small-caps")>-1?this._fontVariant="small-caps":this._fontVariant="normal";var e=t.split(" "),i=-1;this._fontSize=26;for(var r=0;r<e.length;++r)if(e[r].match(/(px|pt|em|%)/)){i=r,this._fontSize=e[r];break}this._fontWeight="normal";for(var o=0;o<i;++o)if(e[o].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=e[o];break}if(i>-1&&i<e.length-1){this._fontFamily="";for(var s=i+1;s<e.length;++s)this._fontFamily+=e[s]+" ";this._fontFamily=this._fontFamily.slice(0,-1)}else this._fontFamily="Arial";this.styleID++}}}),t.Texture.prototype.setFrame=function(t){this.frame=t,n("setFrame is now deprecated, please use the frame property, e.g: myTexture.frame = frame;")},t.Texture.addTextureToCache=function(e,i){t.Texture.addToCache(e,i),n("Texture.addTextureToCache is deprecated, please use Texture.addToCache from now on.")},t.Texture.removeTextureFromCache=function(e){return n("Texture.removeTextureFromCache is deprecated, please use Texture.removeFromCache from now on. Be aware that Texture.removeFromCache does not automatically its BaseTexture from the BaseTextureCache. For that, use BaseTexture.removeFromCache"),t.BaseTexture.removeFromCache(e),t.Texture.removeFromCache(e)},Object.defineProperties(o,{AbstractFilter:{get:function(){return n("AstractFilter has been renamed to Filter, please use PIXI.Filter"),t.AbstractFilter}},SpriteMaskFilter:{get:function(){return n("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."),t.SpriteMaskFilter}},VoidFilter:{get:function(){return n("VoidFilter has been renamed to AlphaFilter, please use PIXI.filters.AlphaFilter"),o.AlphaFilter}}}),t.utils.uuid=function(){return n("utils.uuid() is deprecated, please use utils.uid() from now on."),t.utils.uid()},t.utils.canUseNewCanvasBlendModes=function(){return n("utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on"),t.CanvasTinter.canUseMultiply};var d=!0;Object.defineProperty(t.utils,"_saidHello",{set:function(t){t&&(n("PIXI.utils._saidHello is deprecated, please use PIXI.utils.skipHello()"),this.skipHello()),d=t},get:function(){return d}}),s.BasePrepare&&(s.BasePrepare.prototype.register=function(t,e){return n("renderer.plugins.prepare.register is now deprecated, please use renderer.plugins.prepare.registerFindHook & renderer.plugins.prepare.registerUploadHook"),t&&this.registerFindHook(t),e&&this.registerUploadHook(e),this});s.canvas&&Object.defineProperty(s.canvas,"UPLOADS_PER_FRAME",{set:function(){n("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return n("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}});s.webgl&&Object.defineProperty(s.webgl,"UPLOADS_PER_FRAME",{set:function(){n("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return n("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}});if(a.Loader){var p=a.Resource,f=a.Loader;Object.defineProperties(p.prototype,{isJson:{get:function(){return n("The isJson property is deprecated, please use `resource.type === Resource.TYPE.JSON`."),this.type===p.TYPE.JSON}},isXml:{get:function(){return n("The isXml property is deprecated, please use `resource.type === Resource.TYPE.XML`."),this.type===p.TYPE.XML}},isImage:{get:function(){return n("The isImage property is deprecated, please use `resource.type === Resource.TYPE.IMAGE`."),this.type===p.TYPE.IMAGE}},isAudio:{get:function(){return n("The isAudio property is deprecated, please use `resource.type === Resource.TYPE.AUDIO`."),this.type===p.TYPE.AUDIO}},isVideo:{get:function(){return n("The isVideo property is deprecated, please use `resource.type === Resource.TYPE.VIDEO`."),this.type===p.TYPE.VIDEO}}}),Object.defineProperties(f.prototype,{before:{get:function(){return n("The before() method is deprecated, please use pre()."),this.pre}},after:{get:function(){return n("The after() method is deprecated, please use use()."),this.use}}})}h.interactiveTarget&&Object.defineProperty(h.interactiveTarget,"defaultCursor",{set:function(t){n("Property defaultCursor has been replaced with 'cursor'. "),this.cursor=t},get:function(){return n("Property defaultCursor has been replaced with 'cursor'. "),this.cursor}});h.InteractionManager&&(Object.defineProperty(h.InteractionManager,"defaultCursorStyle",{set:function(t){n("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default=t},get:function(){return n("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default}}),Object.defineProperty(h.InteractionManager,"currentCursorStyle",{set:function(t){n("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode=t},get:function(){return n("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode}}))};var r={};function n(t){if(!r[t]){var e=(new Error).stack;void 0===e?console.warn("Deprecation Warning: ",t):(e=e.split("\n").splice(3).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cDeprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",t),console.warn(e),console.groupEnd()):(console.warn("Deprecation Warning: ",t),console.warn(e))),r[t]=!0}}},function(t,e,i){"use strict";e.__esModule=!0;var r=i(70);Object.defineProperty(e,"accessibleTarget",{enumerable:!0,get:function(){return o(r).default}});var n=i(160);function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"AccessibilityManager",{enumerable:!0,get:function(){return o(n).default}})},function(t,e,i){"use strict";e.__esModule=!0;var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1)),n=s(i(28)),o=s(i(70));function s(t){return t&&t.__esModule?t:{default:t}}r.utils.mixins.delayMixin(r.DisplayObject.prototype,o.default);var a=100,h=0,l=0,u=2,c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!n.default.tablet&&!n.default.phone||navigator.isCocoonJS||this.createTouchHook();var i=document.createElement("div");i.style.width=a+"px",i.style.height=a+"px",i.style.position="absolute",i.style.top=h+"px",i.style.left=l+"px",i.style.zIndex=u,this.div=i,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=e,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessabillity=!1,window.addEventListener("keydown",this._onKeyDown,!1)}return t.prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2,e.style.backgroundColor="#FF0000",e.title="HOOK DIV",e.addEventListener("focus",function(){t.isMobileAccessabillity=!0,t.activate(),document.body.removeChild(e)}),document.body.appendChild(e)},t.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},t.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessabillity&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},t.prototype.updateAccessibleObjects=function(t){if(t.visible){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);for(var e=t.children,i=0;i<e.length;i++)this.updateAccessibleObjects(e[i])}},t.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),e=t.width/this.renderer.width,i=t.height/this.renderer.height,n=this.div;n.style.left=t.left+"px",n.style.top=t.top+"px",n.style.width=this.renderer.width+"px",n.style.height=this.renderer.height+"px";for(var o=0;o<this.children.length;o++){var s=this.children[o];if(s.renderId!==this.renderId)s._accessibleActive=!1,r.utils.removeItems(this.children,o,1),this.div.removeChild(s._accessibleDiv),this.pool.push(s._accessibleDiv),s._accessibleDiv=null,o--,0===this.children.length&&this.deactivate();else{n=s._accessibleDiv;var a=s.hitArea,h=s.worldTransform;s.hitArea?(n.style.left=(h.tx+a.x*h.a)*e+"px",n.style.top=(h.ty+a.y*h.d)*i+"px",n.style.width=a.width*h.a*e+"px",n.style.height=a.height*h.d*i+"px"):(a=s.getBounds(),this.capHitArea(a),n.style.left=a.x*e+"px",n.style.top=a.y*i+"px",n.style.width=a.width*e+"px",n.style.height=a.height*i+"px",n.title!==s.accessibleTitle&&null!==s.accessibleTitle&&(n.title=s.accessibleTitle),n.getAttribute("aria-label")!==s.accessibleHint&&null!==s.accessibleHint&&n.setAttribute("aria-label",s.accessibleHint))}}this.renderId++}},t.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.renderer.width&&(t.width=this.renderer.width-t.x),t.y+t.height>this.renderer.height&&(t.height=this.renderer.height-t.y)},t.prototype.addChild=function(t){var e=this.pool.pop();e||((e=document.createElement("button")).style.width=a+"px",e.style.height=a+"px",e.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=u,e.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),t.accessibleTitle&&null!==t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleHint&&null!==t.accessibleHint||(e.title="displayObject "+t.tabIndex),t.accessibleHint&&null!==t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},t.prototype._onClick=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"click",e.eventData)},t.prototype._onFocus=function(t){t.target.getAttribute("aria-live","off")||t.target.setAttribute("aria-live","assertive");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseover",e.eventData)},t.prototype._onFocusOut=function(t){t.target.getAttribute("aria-live","off")||t.target.setAttribute("aria-live","polite");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseout",e.eventData)},t.prototype._onKeyDown=function(t){9===t.keyCode&&this.activate()},t.prototype._onMouseMove=function(t){0===t.movementX&&0===t.movementY||this.deactivate()},t.prototype.destroy=function(){this.div=null;for(var t=0;t<this.children.length;t++)this.children[t].div=null;window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},t}();e.default=c,r.WebGLRenderer.registerPlugin("accessibility",c),r.CanvasRenderer.registerPlugin("accessibility",c)},function(t,e,i){"use strict";e.__esModule=!0;var r=i(162);Object.defineProperty(e,"webgl",{enumerable:!0,get:function(){return o(r).default}});var n=i(163);function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"canvas",{enumerable:!0,get:function(){return o(n).default}})},function(t,e,i){"use strict";e.__esModule=!0;var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1));var n=new r.Rectangle,o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e,e.extract=this}return t.prototype.image=function(t){var e=new Image;return e.src=this.base64(t),e},t.prototype.base64=function(t){return this.canvas(t).toDataURL()},t.prototype.canvas=function(t){var e=this.renderer,i=void 0,o=void 0,s=void 0,a=!1,h=void 0,l=!1;t&&(t instanceof r.RenderTexture?h=t:(h=this.renderer.generateTexture(t),l=!0)),h?(o=(i=h.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID]).resolution,s=h.frame,a=!1):(o=(i=this.renderer.rootRenderTarget).resolution,a=!0,(s=n).width=i.size.width,s.height=i.size.height);var u=s.width*o,c=s.height*o,d=new r.CanvasRenderTarget(u,c,1);if(i){e.bindRenderTarget(i);var p=new Uint8Array(4*u*c),f=e.gl;f.readPixels(s.x*o,s.y*o,u,c,f.RGBA,f.UNSIGNED_BYTE,p);var g=d.context.getImageData(0,0,u,c);g.data.set(p),d.context.putImageData(g,0,0),a&&(d.context.scale(1,-1),d.context.drawImage(d.canvas,0,-c))}return l&&h.destroy(!0),d.canvas},t.prototype.pixels=function(t){var e=this.renderer,i=void 0,o=void 0,s=void 0,a=void 0,h=!1;t&&(t instanceof r.RenderTexture?a=t:(a=this.renderer.generateTexture(t),h=!0)),a?(o=(i=a.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID]).resolution,s=a.frame):(o=(i=this.renderer.rootRenderTarget).resolution,(s=n).width=i.size.width,s.height=i.size.height);var l=s.width*o,u=s.height*o,c=new Uint8Array(4*l*u);if(i){e.bindRenderTarget(i);var d=e.gl;d.readPixels(s.x*o,s.y*o,l,u,d.RGBA,d.UNSIGNED_BYTE,c)}return h&&a.destroy(!0),c},t.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},t}();e.default=o,r.WebGLRenderer.registerPlugin("extract",o)},function(t,e,i){"use strict";e.__esModule=!0;var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1));var n=new r.Rectangle,o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e,e.extract=this}return t.prototype.image=function(t){var e=new Image;return e.src=this.base64(t),e},t.prototype.base64=function(t){return this.canvas(t).toDataURL()},t.prototype.canvas=function(t){var e=this.renderer,i=void 0,o=void 0,s=void 0,a=void 0;t&&(a=t instanceof r.RenderTexture?t:e.generateTexture(t)),a?(i=a.baseTexture._canvasRenderTarget.context,o=a.baseTexture._canvasRenderTarget.resolution,s=a.frame):(i=e.rootContext,o=e.resolution,(s=n).width=this.renderer.width,s.height=this.renderer.height);var h=s.width*o,l=s.height*o,u=new r.CanvasRenderTarget(h,l,1),c=i.getImageData(s.x*o,s.y*o,h,l);return u.context.putImageData(c,0,0),u.canvas},t.prototype.pixels=function(t){var e=this.renderer,i=void 0,o=void 0,s=void 0,a=void 0;return t&&(a=t instanceof r.RenderTexture?t:e.generateTexture(t)),a?(i=a.baseTexture._canvasRenderTarget.context,o=a.baseTexture._canvasRenderTarget.resolution,s=a.frame):(i=e.rootContext,(s=n).width=e.width,s.height=e.height),i.getImageData(0,0,s.width*o,s.height*o).data},t.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},t}();e.default=o,r.CanvasRenderer.registerPlugin("extract",o)},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1));var o=function(t){function e(i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i[0]instanceof n.Texture?i[0]:i[0].texture));return o._textures=null,o._durations=null,o.textures=i,o._autoUpdate=!1!==r,o.animationSpeed=1,o.loop=!0,o.updateAnchor=!1,o.onComplete=null,o.onFrameChange=null,o.onLoop=null,o._currentTime=0,o.playing=!1,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.stop=function(){this.playing&&(this.playing=!1,this._autoUpdate&&n.ticker.shared.remove(this.update,this))},e.prototype.play=function(){this.playing||(this.playing=!0,this._autoUpdate&&n.ticker.shared.add(this.update,this,n.UPDATE_PRIORITY.HIGH))},e.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(t){var e=this.animationSpeed*t,i=this.currentFrame;if(null!==this._durations){var r=this._currentTime%1*this._durations[this.currentFrame];for(r+=e/60*1e3;r<0;)this._currentTime--,r+=this._durations[this.currentFrame];var n=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);r>=this._durations[this.currentFrame];)r-=this._durations[this.currentFrame]*n,this._currentTime+=n;this._currentTime+=r/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):i!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<i?this.onLoop():this.animationSpeed<0&&this.currentFrame>i&&this.onLoop()),this.updateTexture())},e.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame],this._textureID=-1,this.cachedTint=16777215,this.updateAnchor&&this._anchor.copy(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame)},e.prototype.destroy=function(e){this.stop(),t.prototype.destroy.call(this,e)},e.fromFrames=function(t){for(var i=[],r=0;r<t.length;++r)i.push(n.Texture.fromFrame(t[r]));return new e(i)},e.fromImages=function(t){for(var i=[],r=0;r<t.length;++r)i.push(n.Texture.fromImage(t[r]));return new e(i)},r(e,[{key:"totalFrames",get:function(){return this._textures.length}},{key:"textures",get:function(){return this._textures},set:function(t){if(t[0]instanceof n.Texture)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this.gotoAndStop(0),this.updateTexture()}},{key:"currentFrame",get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t}}]),e}(n.Sprite);e.default=o},function(t,e,i){"use strict";e.__esModule=!0;var r,n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1)),s=i(17),a=(r=s)&&r.__esModule?r:{default:r};var h=new o.Point,l=function(t){function e(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return s.tileTransform=new o.TransformStatic,s._width=r,s._height=n,s._canvasPattern=null,s.uvTransform=i.transform||new o.TextureMatrix(i),s.pluginName="tilingSprite",s.uvRespectAnchor=!1,s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._onTextureUpdate=function(){this.uvTransform&&(this.uvTransform.texture=this._texture),this.cachedTint=16777215},e.prototype._renderWebGL=function(t){var e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvTransform.update(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},e.prototype._renderCanvas=function(t){var e=this._texture;if(e.baseTexture.hasLoaded){var i=t.context,r=this.worldTransform,n=t.resolution,s=2===e.rotate,h=e.baseTexture,l=h.resolution,u=this.tilePosition.x/this.tileScale.x%e.orig.width*l,c=this.tilePosition.y/this.tileScale.y%e.orig.height*l;if(this._textureID!==this._texture._updateID||this.cachedTint!==this.tint){this._textureID=this._texture._updateID;var d=new o.CanvasRenderTarget(e.orig.width,e.orig.height,l);if(16777215!==this.tint)this.tintedTexture=a.default.getTintedTexture(this,this.tint),d.context.drawImage(this.tintedTexture,0,0);else{var p=e._frame.x*l,f=e._frame.y*l,g=e._frame.width*l,y=e._frame.height*l,v=(e.trim?e.trim.width:e.orig.width)*l,m=(e.trim?e.trim.height:e.orig.height)*l,b=(e.trim?e.trim.x:0)*l,$=(e.trim?e.trim.y:0)*l;s?(d.context.rotate(-Math.PI/2),d.context.translate(-m,0),d.context.drawImage(h.source,p,f,g,y,-$,b,m,v)):d.context.drawImage(h.source,p,f,g,y,b,$,v,m)}this.cachedTint=this.tint,this._canvasPattern=d.context.createPattern(d.canvas,"repeat")}i.globalAlpha=this.worldAlpha,i.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*n,r.ty*n),t.setBlendMode(this.blendMode),i.fillStyle=this._canvasPattern,i.scale(this.tileScale.x/l,this.tileScale.y/l);var w=this.anchor.x*-this._width*l,x=this.anchor.y*-this._height*l;this.uvRespectAnchor?(i.translate(u,c),i.fillRect(-u+w,-c+x,this._width/this.tileScale.x*l,this._height/this.tileScale.y*l)):(i.translate(u+w,c+x),i.fillRect(-u,-c,this._width/this.tileScale.x*l,this._height/this.tileScale.y*l))}},e.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,i=this._width*(1-this._anchor._x),r=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,i,r)},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new o.Rectangle),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,h);var e=this._width,i=this._height,r=-e*this.anchor._x;if(h.x>=r&&h.x<r+e){var n=-i*this.anchor._y;if(h.y>=n&&h.y<n+i)return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.tileTransform=null,this.uvTransform=null},e.from=function(t,i,r){return new e(o.Texture.from(t),i,r)},e.fromFrame=function(t,i,r){var n=o.utils.TextureCache[t];if(!n)throw new Error('The frameId "'+t+'" does not exist in the texture cache '+this);return new e(n,i,r)},e.fromImage=function(t,i,r,n,s){return new e(o.Texture.fromImage(t,n,s),i,r)},n(e,[{key:"clampMargin",get:function(){return this.uvTransform.clampMargin},set:function(t){this.uvTransform.clampMargin=t,this.uvTransform.update(!0)}},{key:"tileScale",get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copy(t)}},{key:"tilePosition",get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copy(t)}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",get:function(){return this._height},set:function(t){this._height=t}}]),e}(o.Sprite);e.default=l},function(t,e,i){"use strict";e.__esModule=!0;var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1)),n=i(0);i(6);var o=new r.Matrix,s=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return r.shader=null,r.simpleShader=null,r.quad=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new r.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    gl_FragColor = sample * uColor;\n}\n"),this.simpleShader=new r.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n"),this.renderer.bindVao(null),this.quad=new r.Quad(t,this.renderer.state.attribState),this.quad.initVao(this.shader)},e.prototype.render=function(t){var e=this.renderer,i=this.quad;e.bindVao(i.vao);var s=i.vertices;s[0]=s[6]=t._width*-t.anchor.x,s[1]=s[3]=t._height*-t.anchor.y,s[2]=s[4]=t._width*(1-t.anchor.x),s[5]=s[7]=t._height*(1-t.anchor.y),t.uvRespectAnchor&&((s=i.uvs)[0]=s[6]=-t.anchor.x,s[1]=s[3]=-t.anchor.y,s[2]=s[4]=1-t.anchor.x,s[5]=s[7]=1-t.anchor.y),i.upload();var a=t._texture,h=a.baseTexture,l=t.tileTransform.localTransform,u=t.uvTransform,c=h.isPowerOfTwo&&a.frame.width===h.width&&a.frame.height===h.height;c&&(h._glTextures[e.CONTEXT_UID]?c=h.wrapMode!==n.WRAP_MODES.CLAMP:h.wrapMode===n.WRAP_MODES.CLAMP&&(h.wrapMode=n.WRAP_MODES.REPEAT));var d=c?this.simpleShader:this.shader;e.bindShader(d);var p=a.width,f=a.height,g=t._width,y=t._height;o.set(l.a*p/g,l.b*p/y,l.c*f/g,l.d*f/y,l.tx/g,l.ty/y),o.invert(),c?o.prepend(u.mapCoord):(d.uniforms.uMapCoord=u.mapCoord.toArray(!0),d.uniforms.uClampFrame=u.uClampFrame,d.uniforms.uClampOffset=u.uClampOffset),d.uniforms.uTransform=o.toArray(!0),d.uniforms.uColor=r.utils.premultiplyTintToRgba(t.tint,t.worldAlpha,d.uniforms.uColor,h.premultipliedAlpha),d.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),d.uniforms.uSampler=e.bindTexture(a),e.setBlendMode(r.utils.correctBlendMode(t.blendMode,h.premultipliedAlpha)),i.vao.draw(this.renderer.gl.TRIANGLES,6,0)},e}(r.ObjectRenderer);e.default=s,r.WebGLRenderer.registerPlugin("tilingSprite",s)},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1)),o=h(i(39)),s=i(2),a=h(i(3));function h(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return n._textWidth=0,n._textHeight=0,n._glyphs=[],n._font={tint:void 0!==r.tint?r.tint:16777215,align:r.align||"left",name:null,size:0},n.font=r.font,n._text=i,n._maxWidth=0,n._maxLineHeight=0,n._letterSpacing=0,n._anchor=new o.default(function(){n.dirty=!0},n,0,0),n.dirty=!1,n.updateText(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.updateText=function(){for(var t=e.fonts[this._font.name],i=this._font.size/t.size,r=new n.Point,o=[],s=[],a=this.text.replace(/(?:\r\n|\r)/g,"\n"),h=a.length,l=this._maxWidth*t.size/this._font.size,u=null,c=0,d=0,p=0,f=-1,g=0,y=0,v=0,m=0;m<h;m++){var b=a.charCodeAt(m),$=a.charAt(m);if(/(?:\s)/.test($)&&(f=m,g=c),"\r"!==$&&"\n"!==$){var w=t.chars[b];w&&(u&&w.kerning[u]&&(r.x+=w.kerning[u]),o.push({texture:w.texture,line:p,charCode:b,position:new n.Point(r.x+w.xOffset+this._letterSpacing/2,r.y+w.yOffset)}),r.x+=w.xAdvance+this._letterSpacing,c=r.x,v=Math.max(v,w.yOffset+w.texture.height),u=b,-1!==f&&l>0&&r.x>l&&(++y,n.utils.removeItems(o,1+f-y,1+m-f),m=f,f=-1,s.push(g),d=Math.max(d,g),p++,r.x=0,r.y+=t.lineHeight,u=null))}else s.push(c),d=Math.max(d,c),++p,++y,r.x=0,r.y+=t.lineHeight,u=null}var x=a.charAt(a.length-1);"\r"!==x&&"\n"!==x&&(/(?:\s)/.test(x)&&(c=g),s.push(c),d=Math.max(d,c));for(var _=[],T=0;T<=p;T++){var E=0;"right"===this._font.align?E=d-s[T]:"center"===this._font.align&&(E=(d-s[T])/2),_.push(E)}for(var O=o.length,S=this.tint,C=0;C<O;C++){var P=this._glyphs[C];P?P.texture=o[C].texture:(P=new n.Sprite(o[C].texture),this._glyphs.push(P)),P.position.x=(o[C].position.x+_[o[C].line])*i,P.position.y=o[C].position.y*i,P.scale.x=P.scale.y=i,P.tint=S,P.parent||this.addChild(P)}for(var I=O;I<this._glyphs.length;++I)this.removeChild(this._glyphs[I]);if(this._textWidth=d*i,this._textHeight=(r.y+t.lineHeight)*i,0!==this.anchor.x||0!==this.anchor.y)for(var M=0;M<O;M++)this._glyphs[M].x-=this._textWidth*this.anchor.x,this._glyphs[M].y-=this._textHeight*this.anchor.y;this._maxLineHeight=v*i},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},e.registerFont=function(t,i){var r={},o=t.getElementsByTagName("info")[0],h=t.getElementsByTagName("common")[0],l=t.getElementsByTagName("page"),u=(0,s.getResolutionOfUrl)(l[0].getAttribute("file"),a.default.RESOLUTION),c={};r.font=o.getAttribute("face"),r.size=parseInt(o.getAttribute("size"),10),r.lineHeight=parseInt(h.getAttribute("lineHeight"),10)/u,r.chars={},i instanceof n.Texture&&(i=[i]);for(var d=0;d<l.length;d++){var p=l[d].getAttribute("id"),f=l[d].getAttribute("file");c[p]=i instanceof Array?i[d]:i[f]}for(var g=t.getElementsByTagName("char"),y=0;y<g.length;y++){var v=g[y],m=parseInt(v.getAttribute("id"),10),b=v.getAttribute("page")||0,$=new n.Rectangle(parseInt(v.getAttribute("x"),10)/u+c[b].frame.x/u,parseInt(v.getAttribute("y"),10)/u+c[b].frame.y/u,parseInt(v.getAttribute("width"),10)/u,parseInt(v.getAttribute("height"),10)/u);r.chars[m]={xOffset:parseInt(v.getAttribute("xoffset"),10)/u,yOffset:parseInt(v.getAttribute("yoffset"),10)/u,xAdvance:parseInt(v.getAttribute("xadvance"),10)/u,kerning:{},texture:new n.Texture(c[b].baseTexture,$),page:b}}for(var w=t.getElementsByTagName("kerning"),x=0;x<w.length;x++){var _=w[x],T=parseInt(_.getAttribute("first"),10)/u,E=parseInt(_.getAttribute("second"),10)/u,O=parseInt(_.getAttribute("amount"),10)/u;r.chars[E]&&(r.chars[E].kerning[T]=O)}return e.fonts[r.font]=r,r},r(e,[{key:"tint",get:function(){return this._font.tint},set:function(t){this._font.tint="number"==typeof t&&t>=0?t:16777215,this.dirty=!0}},{key:"align",get:function(){return this._font.align},set:function(t){this._font.align=t||"left",this.dirty=!0}},{key:"anchor",get:function(){return this._anchor},set:function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copy(t)}},{key:"font",get:function(){return this._font},set:function(t){t&&("string"==typeof t?(t=t.split(" "),this._font.name=1===t.length?t[0]:t.slice(1).join(" "),this._font.size=t.length>=2?parseInt(t[0],10):e.fonts[this._font.name].size):(this._font.name=t.name,this._font.size="number"==typeof t.size?t.size:parseInt(t.size,10)),this.dirty=!0)}},{key:"text",get:function(){return this._text},set:function(t){t=t.toString()||" ",this._text!==t&&(this._text=t,this.dirty=!0)}},{key:"maxWidth",get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)}},{key:"maxLineHeight",get:function(){return this.validate(),this._maxLineHeight}},{key:"textWidth",get:function(){return this.validate(),this._textWidth}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)}},{key:"textHeight",get:function(){return this.validate(),this._textHeight}}]),e}(n.Container);e.default=l,l.fonts={}},function(t,e,i){"use strict";var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1)),n=a(i(7)),o=a(i(10)),s=i(2);function a(t){return t&&t.__esModule?t:{default:t}}var h=r.DisplayObject,l=new r.Matrix;h.prototype._cacheAsBitmap=!1,h.prototype._cacheData=!1;var u=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.textureCacheId=null,this.originalRenderWebGL=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null};Object.defineProperties(h.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){if(this._cacheAsBitmap!==t){this._cacheAsBitmap=t;var e=void 0;t?(this._cacheData||(this._cacheData=new u),(e=this._cacheData).originalRenderWebGL=this.renderWebGL,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((e=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=e.originalRenderWebGL,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}}}),h.prototype._renderCachedWebGL=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(t))},h.prototype._initCachedDisplayObject=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.alpha;this.alpha=1,t.currentRenderer.flush();var i=this.getLocalBounds().clone();if(this._filters&&this._filters.length){var a=this._filters[0].padding;i.pad(a)}i.ceil(r.settings.RESOLUTION);var h=t._activeRenderTarget,u=t.filterManager.filterStack,c=r.RenderTexture.create(i.width,i.height),d="cacheAsBitmap_"+(0,s.uid)();this._cacheData.textureCacheId=d,o.default.addToCache(c.baseTexture,d),n.default.addToCache(c,d);var p=l;p.tx=-i.x,p.ty=-i.y,this.transform.worldTransform.identity(),this.renderWebGL=this._cacheData.originalRenderWebGL,t.render(this,c,!0,p,!0),t.bindRenderTarget(h),t.filterManager.filterStack=u,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var f=new r.Sprite(c);f.transform.worldTransform=this.transform.worldTransform,f.anchor.x=-i.x/i.width,f.anchor.y=-i.y/i.height,f.alpha=e,f._bounds=this._bounds,this._cacheData.sprite=f,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=f.containsPoint.bind(f)}},h.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))},h.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(),i=this.alpha;this.alpha=1;var a=t.context;e.ceil(r.settings.RESOLUTION);var h=r.RenderTexture.create(e.width,e.height),u="cacheAsBitmap_"+(0,s.uid)();this._cacheData.textureCacheId=u,o.default.addToCache(h.baseTexture,u),n.default.addToCache(h,u);var c=l;this.transform.localTransform.copy(c),c.invert(),c.tx-=e.x,c.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,h,!0,c,!1),t.context=a,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var d=new r.Sprite(h);d.transform.worldTransform=this.transform.worldTransform,d.anchor.x=-e.x/e.width,d.anchor.y=-e.y/e.height,d.alpha=i,d._bounds=this._bounds,this._cacheData.sprite=d,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=d.containsPoint.bind(d)}},h.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._lastBoundsID=this._boundsID},h.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},h.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,o.default.removeFromCache(this._cacheData.textureCacheId),n.default.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},h.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)}},function(t,e,i){"use strict";var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1));r.DisplayObject.prototype.name=null,r.Container.prototype.getChildByName=function(t){for(var e=0;e<this.children.length;e++)if(this.children[e].name===t)return this.children[e];return null}},function(t,e,i){"use strict";var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1));r.DisplayObject.prototype.getGlobalPosition=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new r.Point,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t}},function(t,e,i){"use strict";e.__esModule=!0;var r=i(172);Object.defineProperty(e,"FXAAFilter",{enumerable:!0,get:function(){return c(r).default}});var n=i(173);Object.defineProperty(e,"NoiseFilter",{enumerable:!0,get:function(){return c(n).default}});var o=i(174);Object.defineProperty(e,"DisplacementFilter",{enumerable:!0,get:function(){return c(o).default}});var s=i(175);Object.defineProperty(e,"BlurFilter",{enumerable:!0,get:function(){return c(s).default}});var a=i(72);Object.defineProperty(e,"BlurXFilter",{enumerable:!0,get:function(){return c(a).default}});var h=i(76);Object.defineProperty(e,"BlurYFilter",{enumerable:!0,get:function(){return c(h).default}});var l=i(176);Object.defineProperty(e,"ColorMatrixFilter",{enumerable:!0,get:function(){return c(l).default}});var u=i(177);function c(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"AlphaFilter",{enumerable:!0,get:function(){return c(u).default}})},function(t,e,i){"use strict";e.__esModule=!0;var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1));i(6);var n=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n      vec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n'))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(r.Filter);e.default=n},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1));i(6);var o=function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random();!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n"));return n.noise=i,n.seed=r,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"noise",get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t}},{key:"seed",get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t}}]),e}(n.Filter);e.default=o},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1));i(6);var o=function(t){function e(i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=new n.Matrix;i.renderable=!1;var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy *= scale / filterArea.xy;\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n"));return s.maskSprite=i,s.maskMatrix=o,s.uniforms.mapSampler=i._texture,s.uniforms.filterMatrix=o,s.uniforms.scale={x:1,y:1},null==r&&(r=20),s.scale=new n.Point(r,r),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.apply=function(t,e,i){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y,t.applyFilter(this,e,i)},r(e,[{key:"map",get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t}}]),e}(n.Filter);e.default=o},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1)),o=a(i(72)),s=a(i(76));function a(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(i,r,a,h){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var l=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return l.blurXFilter=new o.default(i,r,a,h),l.blurYFilter=new s.default(i,r,a,h),l.padding=0,l.resolution=a||n.settings.RESOLUTION,l.quality=r||4,l.blur=i||8,l}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.apply=function(t,e,i){var r=t.getRenderTarget(!0);this.blurXFilter.apply(t,e,r,!0),this.blurYFilter.apply(t,r,i,!1),t.returnRenderTarget(r)},r(e,[{key:"blur",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"quality",get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blendMode",get:function(){return this.blurYFilter._blendMode},set:function(t){this.blurYFilter._blendMode=t}}]),e}(n.Filter);e.default=h},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1));i(6);var o=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n"));return i.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],i.alpha=1,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._loadMatrix=function(t){var e=t;arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(this._multiply(e,this.uniforms.m,t),e=this._colorMatrix(e)),this.uniforms.m=e},e.prototype._multiply=function(t,e,i){return t[0]=e[0]*i[0]+e[1]*i[5]+e[2]*i[10]+e[3]*i[15],t[1]=e[0]*i[1]+e[1]*i[6]+e[2]*i[11]+e[3]*i[16],t[2]=e[0]*i[2]+e[1]*i[7]+e[2]*i[12]+e[3]*i[17],t[3]=e[0]*i[3]+e[1]*i[8]+e[2]*i[13]+e[3]*i[18],t[4]=e[0]*i[4]+e[1]*i[9]+e[2]*i[14]+e[3]*i[19]+e[4],t[5]=e[5]*i[0]+e[6]*i[5]+e[7]*i[10]+e[8]*i[15],t[6]=e[5]*i[1]+e[6]*i[6]+e[7]*i[11]+e[8]*i[16],t[7]=e[5]*i[2]+e[6]*i[7]+e[7]*i[12]+e[8]*i[17],t[8]=e[5]*i[3]+e[6]*i[8]+e[7]*i[13]+e[8]*i[18],t[9]=e[5]*i[4]+e[6]*i[9]+e[7]*i[14]+e[8]*i[19]+e[9],t[10]=e[10]*i[0]+e[11]*i[5]+e[12]*i[10]+e[13]*i[15],t[11]=e[10]*i[1]+e[11]*i[6]+e[12]*i[11]+e[13]*i[16],t[12]=e[10]*i[2]+e[11]*i[7]+e[12]*i[12]+e[13]*i[17],t[13]=e[10]*i[3]+e[11]*i[8]+e[12]*i[13]+e[13]*i[18],t[14]=e[10]*i[4]+e[11]*i[9]+e[12]*i[14]+e[13]*i[19]+e[14],t[15]=e[15]*i[0]+e[16]*i[5]+e[17]*i[10]+e[18]*i[15],t[16]=e[15]*i[1]+e[16]*i[6]+e[17]*i[11]+e[18]*i[16],t[17]=e[15]*i[2]+e[16]*i[7]+e[17]*i[12]+e[18]*i[17],t[18]=e[15]*i[3]+e[16]*i[8]+e[17]*i[13]+e[18]*i[18],t[19]=e[15]*i[4]+e[16]*i[9]+e[17]*i[14]+e[18]*i[19]+e[19],t},e.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},e.prototype.brightness=function(t,e){var i=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.greyscale=function(t,e){var i=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.blackAndWhite=function(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},e.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var i=Math.cos(t),r=Math.sin(t),n=1/3,o=(0,Math.sqrt)(n),s=[i+(1-i)*n,n*(1-i)-o*r,n*(1-i)+o*r,0,0,n*(1-i)+o*r,i+n*(1-i),n*(1-i)-o*r,0,0,n*(1-i)-o*r,n*(1-i)+o*r,i+n*(1-i),0,0,0,0,0,1,0];this._loadMatrix(s,e)},e.prototype.contrast=function(t,e){var i=(t||0)+1,r=-.5*(i-1),n=[i,0,0,0,r,0,i,0,0,r,0,0,i,0,r,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.saturate=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1],i=2*t/3+1,r=-.5*(i-1),n=[i,r,r,0,0,r,i,r,0,0,r,r,i,0,0,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},e.prototype.sepia=function(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},e.prototype.technicolor=function(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},e.prototype.polaroid=function(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},e.prototype.toBGR=function(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},e.prototype.kodachrome=function(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},e.prototype.browni=function(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},e.prototype.vintage=function(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},e.prototype.colorTone=function(t,e,i,r,n){var o=((i=i||16770432)>>16&255)/255,s=(i>>8&255)/255,a=(255&i)/255,h=((r=r||3375104)>>16&255)/255,l=(r>>8&255)/255,u=(255&r)/255,c=[.3,.59,.11,0,0,o,s,a,t=t||.2,0,h,l,u,e=e||.15,0,o-h,s-l,a-u,0,0];this._loadMatrix(c,n)},e.prototype.night=function(t,e){var i=[-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.predator=function(t,e){var i=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.lsd=function(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},e.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},r(e,[{key:"matrix",get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t}},{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t}}]),e}(n.Filter);e.default=o,o.prototype.grayscale=o.prototype.greyscale},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1));i(6);var o=function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n"));return r.alpha=i,r.glShaderKey="alpha",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t}}]),e}(n.Filter);e.default=o},function(t,e,i){"use strict";e.__esModule=!0;var r=i(77);Object.defineProperty(e,"InteractionData",{enumerable:!0,get:function(){return h(r).default}});var n=i(179);Object.defineProperty(e,"InteractionManager",{enumerable:!0,get:function(){return h(n).default}});var o=i(80);Object.defineProperty(e,"interactiveTarget",{enumerable:!0,get:function(){return h(o).default}});var s=i(79);Object.defineProperty(e,"InteractionTrackingData",{enumerable:!0,get:function(){return h(s).default}});var a=i(78);function h(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"InteractionEvent",{enumerable:!0,get:function(){return h(a).default}})},function(t,e,i){"use strict";e.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1)),o=u(i(77)),s=u(i(78)),a=u(i(79)),h=u(i(8)),l=u(i(80));function u(t){return t&&t.__esModule?t:{default:t}}n.utils.mixins.delayMixin(n.DisplayObject.prototype,l.default);var c=1,d={target:null,data:{global:null}},p=function(t){function e(i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return r=r||{},a.renderer=i,a.autoPreventDefault=void 0===r.autoPreventDefault||r.autoPreventDefault,a.interactionFrequency=r.interactionFrequency||10,a.mouse=new o.default,a.mouse.identifier=c,a.mouse.global.set(-999999),a.activeInteractionData={},a.activeInteractionData[c]=a.mouse,a.interactionDataPool=[],a.eventData=new s.default,a.interactionDOMElement=null,a.moveWhenInside=!1,a.eventsAdded=!1,a.mouseOverRenderer=!1,a.supportsTouchEvents="ontouchstart"in window,a.supportsPointerEvents=!!window.PointerEvent,a.onPointerUp=a.onPointerUp.bind(a),a.processPointerUp=a.processPointerUp.bind(a),a.onPointerCancel=a.onPointerCancel.bind(a),a.processPointerCancel=a.processPointerCancel.bind(a),a.onPointerDown=a.onPointerDown.bind(a),a.processPointerDown=a.processPointerDown.bind(a),a.onPointerMove=a.onPointerMove.bind(a),a.processPointerMove=a.processPointerMove.bind(a),a.onPointerOut=a.onPointerOut.bind(a),a.processPointerOverOut=a.processPointerOverOut.bind(a),a.onPointerOver=a.onPointerOver.bind(a),a.cursorStyles={default:"inherit",pointer:"pointer"},a.currentCursorMode=null,a.cursor=null,a._tempPoint=new n.Point,a.resolution=1,a.setTargetElement(a.renderer.view,a.renderer.resolution),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.hitTest=function(t,e){return d.target=null,d.data.global=t,e||(e=this.renderer._lastObjectRendered),this.processInteractive(d,e,null,!0),d.target},e.prototype.setTargetElement=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents()},e.prototype.addEvents=function(){this.interactionDOMElement&&(n.ticker.shared.add(this.update,this,n.UPDATE_PRIORITY.INTERACTION),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0)},e.prototype.removeEvents=function(){this.interactionDOMElement&&(n.ticker.shared.remove(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)},e.prototype.update=function(t){if(this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement))if(this.didMove)this.didMove=!1;else{for(var e in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(e)){var i=this.activeInteractionData[e];if(i.originalEvent&&"touch"!==i.pointerType){var r=this.configureInteractionEventForDOMEvent(this.eventData,i.originalEvent,i);this.processInteractive(r,this.renderer._lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(t){if(t=t||"default",this.currentCursorMode!==t){this.currentCursorMode=t;var e=this.cursorStyles[t];if(e)switch(void 0===e?"undefined":r(e)){case"string":this.interactionDOMElement.style.cursor=e;break;case"function":e(t);break;case"object":Object.assign(this.interactionDOMElement.style,e)}else"string"!=typeof t||Object.prototype.hasOwnProperty.call(this.cursorStyles,t)||(this.interactionDOMElement.style.cursor=t)}},e.prototype.dispatchEvent=function(t,e,i){i.stopped||(i.currentTarget=t,i.type=e,t.emit(e,i),t[e]&&t[e](i))},e.prototype.mapPositionToPoint=function(t,e,i){var r=void 0;r=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var n=navigator.isCocoonJS?this.resolution:1/this.resolution;t.x=(e-r.left)*(this.interactionDOMElement.width/r.width)*n,t.y=(i-r.top)*(this.interactionDOMElement.height/r.height)*n},e.prototype.processInteractive=function(t,e,i,r,n){if(!e||!e.visible)return!1;var o=t.data.global,s=!1,a=n=e.interactive||n,h=!0;if(e.hitArea?(r&&(e.worldTransform.applyInverse(o,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?s=!0:(r=!1,h=!1)),a=!1):e._mask&&r&&(e._mask.containsPoint(o)||(r=!1,h=!1)),h&&e.interactiveChildren&&e.children)for(var l=e.children,u=l.length-1;u>=0;u--){var c=l[u],d=this.processInteractive(t,c,i,r,a);if(d){if(!c.parent)continue;a=!1,d&&(t.target&&(r=!1),s=!0)}}return n&&(r&&!t.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(o)&&(s=!0),e.interactive&&(s&&!t.target&&(t.target=e),i&&i(t,e,!!s))),s},e.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&t.preventDefault();for(var i=e.length,r=0;r<i;r++){var n=e[r],o=this.getInteractionDataForPointerId(n),s=this.configureInteractionEventForDOMEvent(this.eventData,n,o);if(s.data.originalEvent=t,this.processInteractive(s,this.renderer._lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",s),"touch"===n.pointerType)this.emit("touchstart",s);else if("mouse"===n.pointerType||"pen"===n.pointerType){var a=2===n.button;this.emit(a?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(t,e,i){var r=t.data,n=t.data.identifier;if(i)if(e.trackedPointers[n]||(e.trackedPointers[n]=new a.default(n)),this.dispatchEvent(e,"pointerdown",t),"touch"===r.pointerType)this.dispatchEvent(e,"touchstart",t);else if("mouse"===r.pointerType||"pen"===r.pointerType){var o=2===r.button;o?e.trackedPointers[n].rightDown=!0:e.trackedPointers[n].leftDown=!0,this.dispatchEvent(e,o?"rightdown":"mousedown",t)}},e.prototype.onPointerComplete=function(t,e,i){for(var r=this.normalizeToPointerData(t),n=r.length,o=t.target!==this.interactionDOMElement?"outside":"",s=0;s<n;s++){var a=r[s],h=this.getInteractionDataForPointerId(a),l=this.configureInteractionEventForDOMEvent(this.eventData,a,h);if(l.data.originalEvent=t,this.processInteractive(l,this.renderer._lastObjectRendered,i,e||!o),this.emit(e?"pointercancel":"pointerup"+o,l),"mouse"===a.pointerType||"pen"===a.pointerType){var u=2===a.button;this.emit(u?"rightup"+o:"mouseup"+o,l)}else"touch"===a.pointerType&&(this.emit(e?"touchcancel":"touchend"+o,l),this.releaseInteractionDataForPointerId(a.pointerId,h))}},e.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(t,e){var i=t.data,r=t.data.identifier;void 0!==e.trackedPointers[r]&&(delete e.trackedPointers[r],this.dispatchEvent(e,"pointercancel",t),"touch"===i.pointerType&&this.dispatchEvent(e,"touchcancel",t))},e.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(t,e,i){var r=t.data,n=t.data.identifier,o=e.trackedPointers[n],s="touch"===r.pointerType,h="mouse"===r.pointerType||"pen"===r.pointerType,l=!1;if(h){var u=2===r.button,c=a.default.FLAGS,d=u?c.RIGHT_DOWN:c.LEFT_DOWN,p=void 0!==o&&o.flags&d;i?(this.dispatchEvent(e,u?"rightup":"mouseup",t),p&&(this.dispatchEvent(e,u?"rightclick":"click",t),l=!0)):p&&this.dispatchEvent(e,u?"rightupoutside":"mouseupoutside",t),o&&(u?o.rightDown=!1:o.leftDown=!1)}i?(this.dispatchEvent(e,"pointerup",t),s&&this.dispatchEvent(e,"touchend",t),o&&(h&&!l||this.dispatchEvent(e,"pointertap",t),s&&(this.dispatchEvent(e,"tap",t),o.over=!1))):o&&(this.dispatchEvent(e,"pointerupoutside",t),s&&this.dispatchEvent(e,"touchendoutside",t)),o&&o.none&&delete e.trackedPointers[n]},e.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);"mouse"!==e[0].pointerType&&"pen"!==e[0].pointerType||(this.didMove=!0,this.cursor=null);for(var i=e.length,r=0;r<i;r++){var n=e[r],o=this.getInteractionDataForPointerId(n),s=this.configureInteractionEventForDOMEvent(this.eventData,n,o);s.data.originalEvent=t;var a="touch"!==n.pointerType||this.moveWhenInside;this.processInteractive(s,this.renderer._lastObjectRendered,this.processPointerMove,a),this.emit("pointermove",s),"touch"===n.pointerType&&this.emit("touchmove",s),"mouse"!==n.pointerType&&"pen"!==n.pointerType||this.emit("mousemove",s)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(t,e,i){var r=t.data,n="touch"===r.pointerType,o="mouse"===r.pointerType||"pen"===r.pointerType;o&&this.processPointerOverOut(t,e,i),this.moveWhenInside&&!i||(this.dispatchEvent(e,"pointermove",t),n&&this.dispatchEvent(e,"touchmove",t),o&&this.dispatchEvent(e,"mousemove",t))},e.prototype.onPointerOut=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t)[0];"mouse"===e.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var i=this.getInteractionDataForPointerId(e),r=this.configureInteractionEventForDOMEvent(this.eventData,e,i);r.data.originalEvent=e,this.processInteractive(r,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",r),"mouse"===e.pointerType||"pen"===e.pointerType?this.emit("mouseout",r):this.releaseInteractionDataForPointerId(i.identifier)}},e.prototype.processPointerOverOut=function(t,e,i){var r=t.data,n=t.data.identifier,o="mouse"===r.pointerType||"pen"===r.pointerType,s=e.trackedPointers[n];i&&!s&&(s=e.trackedPointers[n]=new a.default(n)),void 0!==s&&(i&&this.mouseOverRenderer?(s.over||(s.over=!0,this.dispatchEvent(e,"pointerover",t),o&&this.dispatchEvent(e,"mouseover",t)),o&&null===this.cursor&&(this.cursor=e.cursor)):s.over&&(s.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),o&&this.dispatchEvent(e,"mouseout",t),s.none&&delete e.trackedPointers[n]))},e.prototype.onPointerOver=function(t){var e=this.normalizeToPointerData(t)[0],i=this.getInteractionDataForPointerId(e),r=this.configureInteractionEventForDOMEvent(this.eventData,e,i);r.data.originalEvent=e,"mouse"===e.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",r),"mouse"!==e.pointerType&&"pen"!==e.pointerType||this.emit("mouseover",r)},e.prototype.getInteractionDataForPointerId=function(t){var e=t.pointerId,i=void 0;return e===c||"mouse"===t.pointerType?i=this.mouse:this.activeInteractionData[e]?i=this.activeInteractionData[e]:((i=this.interactionDataPool.pop()||new o.default).identifier=e,this.activeInteractionData[e]=i),i.copyEvent(t),i},e.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],e.reset(),this.interactionDataPool.push(e))},e.prototype.configureInteractionEventForDOMEvent=function(t,e,i){return t.data=i,this.mapPositionToPoint(i.global,e.clientX,e.clientY),navigator.isCocoonJS&&"touch"===e.pointerType&&(i.global.x=i.global.x/this.resolution,i.global.y=i.global.y/this.resolution),"touch"===e.pointerType&&(e.globalX=i.global.x,e.globalY=i.global.y),i.originalEvent=e,t.reset(),t},e.prototype.normalizeToPointerData=function(t){var e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var i=0,r=t.changedTouches.length;i<r;i++){var n=t.changedTouches[i];void 0===n.button&&(n.button=t.touches.length?1:0),void 0===n.buttons&&(n.buttons=t.touches.length?1:0),void 0===n.isPrimary&&(n.isPrimary=1===t.touches.length&&"touchstart"===t.type),void 0===n.width&&(n.width=n.radiusX||1),void 0===n.height&&(n.height=n.radiusY||1),void 0===n.tiltX&&(n.tiltX=0),void 0===n.tiltY&&(n.tiltY=0),void 0===n.pointerType&&(n.pointerType="touch"),void 0===n.pointerId&&(n.pointerId=n.identifier||0),void 0===n.pressure&&(n.pressure=n.force||.5),void 0===n.twist&&(n.twist=0),void 0===n.tangentialPressure&&(n.tangentialPressure=0),void 0===n.layerX&&(n.layerX=n.offsetX=n.clientX),void 0===n.layerY&&(n.layerY=n.offsetY=n.clientY),n.isNormalized=!0,e.push(n)}else!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof window.PointerEvent?e.push(t):(void 0===t.isPrimary&&(t.isPrimary=!0),void 0===t.width&&(t.width=1),void 0===t.height&&(t.height=1),void 0===t.tiltX&&(t.tiltX=0),void 0===t.tiltY&&(t.tiltY=0),void 0===t.pointerType&&(t.pointerType="mouse"),void 0===t.pointerId&&(t.pointerId=c),void 0===t.pressure&&(t.pressure=.5),void 0===t.twist&&(t.twist=0),void 0===t.tangentialPressure&&(t.tangentialPressure=0),t.isNormalized=!0,e.push(t));return e},e.prototype.destroy=function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this._tempPoint=null},e}(h.default);e.default=p,n.WebGLRenderer.registerPlugin("interaction",p),n.CanvasRenderer.registerPlugin("interaction",p)},function(t,e,i){"use strict";e.__esModule=!0,e.shared=e.Resource=e.textureParser=e.getResourcePath=e.spritesheetParser=e.parseBitmapFontData=e.bitmapFontParser=e.Loader=void 0;var r=i(81);Object.defineProperty(e,"bitmapFontParser",{enumerable:!0,get:function(){return l(r).default}}),Object.defineProperty(e,"parseBitmapFontData",{enumerable:!0,get:function(){return r.parse}});var n=i(86);Object.defineProperty(e,"spritesheetParser",{enumerable:!0,get:function(){return l(n).default}}),Object.defineProperty(e,"getResourcePath",{enumerable:!0,get:function(){return n.getResourcePath}});var o=i(87);Object.defineProperty(e,"textureParser",{enumerable:!0,get:function(){return l(o).default}});var s=i(15);Object.defineProperty(e,"Resource",{enumerable:!0,get:function(){return s.Resource}});var a=l(i(68)),h=l(i(182));function l(t){return t&&t.__esModule?t:{default:t}}e.Loader=h.default;var u=new h.default;u.destroy=function(){},e.shared=u;var c=a.default.prototype;c._loader=null,Object.defineProperty(c,"loader",{get:function(){if(!this._loader){var t=this._options.sharedLoader;this._loader=t?u:new h.default}return this._loader}}),c._parentDestroy=c.destroy,c.destroy=function(t,e){this._loader&&(this._loader.destroy(),this._loader=null),this._parentDestroy(t,e)}},function(t,e,i){"use strict";e.__esModule=!0,e.Loader=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=l(i(82)),s=l(i(83)),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(84)),h=i(36);function l(t){return t&&t.__esModule?t:{default:t}}var u=/(#[\w-]+)?$/,c=e.Loader=function(){function t(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.baseUrl=i,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,i){return e._loadResource(t,i)},this._queue=a.queue(this._boundLoadResource,r),this._queue.pause(),this.resources={},this.onProgress=new o.default,this.onError=new o.default,this.onLoad=new o.default,this.onStart=new o.default,this.onComplete=new o.default;for(var n=0;n<t._defaultBeforeMiddleware.length;++n)this.pre(t._defaultBeforeMiddleware[n]);for(var s=0;s<t._defaultAfterMiddleware.length;++s)this.use(t._defaultAfterMiddleware[s])}return t.prototype.add=function(t,e,i,n){if(Array.isArray(t)){for(var o=0;o<t.length;++o)this.add(t[o]);return this}if("object"===(void 0===t?"undefined":r(t))&&(n=e||t.callback||t.onComplete,i=t,e=t.url,t=t.name||t.key||t.url),"string"!=typeof e&&(n=i,i=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof i&&(n=i,i=null),this.loading&&(!i||!i.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new h.Resource(t,e,i),"function"==typeof n&&this.resources[t].onAfterMiddleware.once(n),this.loading){for(var s=i.parentResource,a=[],l=0;l<s.children.length;++l)s.children[l].isComplete||a.push(s.children[l]);var u=s.progressChunk*(a.length+1)/(a.length+2);s.children.push(this.resources[t]),s.progressChunk=u;for(var c=0;c<a.length;++c)a[c].progressChunk=u;this.resources[t].progressChunk=u}return this._queue.push(this.resources[t]),this},t.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},t.prototype.use=function(t){return this._afterMiddleware.push(t),this},t.prototype.reset=function(){for(var t in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var e=this.resources[t];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort()}return this.resources={},this},t.prototype.load=function(t){if("function"==typeof t&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=100/this._queue._tasks.length,i=0;i<this._queue._tasks.length;++i)this._queue._tasks[i].data.progressChunk=e;this._onStart(),this._queue.resume()}return this},t.prototype._prepareUrl=function(t){var e=(0,s.default)(t,{strictMode:!0}),i=void 0;if(i=e.protocol||!e.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString){var r=u.exec(i)[0];-1!==(i=i.substr(0,i.length-r.length)).indexOf("?")?i+="&"+this.defaultQueryString:i+="?"+this.defaultQueryString,i+=r}return i},t.prototype._loadResource=function(t,e){var i=this;t._dequeue=e,a.eachSeries(this._beforeMiddleware,function(e,r){e.call(i,t,function(){r(t.isComplete?{}:null)})},function(){t.isComplete?i._onLoad(t):(t._onLoadBinding=t.onComplete.once(i._onLoad,i),t.load())},!0)},t.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},t.prototype._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},t.prototype._onLoad=function(t){var e=this;t._onLoadBinding=null,this._resourcesParsing.push(t),t._dequeue(),a.eachSeries(this._afterMiddleware,function(i,r){i.call(e,t,r)},function(){t.onAfterMiddleware.dispatch(t),e.progress=Math.min(100,e.progress+t.progressChunk),e.onProgress.dispatch(e,t),t.error?e.onError.dispatch(t.error,e,t):e.onLoad.dispatch(e,t),e._resourcesParsing.splice(e._resourcesParsing.indexOf(t),1),e._queue.idle()&&0===e._resourcesParsing.length&&e._onComplete()},!0)},n(t,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t}}]),t}();c._defaultBeforeMiddleware=[],c._defaultAfterMiddleware=[],c.pre=function(t){return c._defaultBeforeMiddleware.push(t),c},c.use=function(t){return c._defaultAfterMiddleware.push(t),c}},function(t,e,i){"use strict";e.__esModule=!0;var r=l(i(15)),n=i(183),o=l(i(8)),s=l(i(87)),a=l(i(86)),h=l(i(81));function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,r));o.default.call(n);for(var s=0;s<e._pixiMiddleware.length;++s)n.use(e._pixiMiddleware[s]());return n.onStart.add(function(t){return n.emit("start",t)}),n.onProgress.add(function(t,e){return n.emit("progress",t,e)}),n.onError.add(function(t,e,i){return n.emit("error",t,e,i)}),n.onLoad.add(function(t,e){return n.emit("load",t,e)}),n.onComplete.add(function(t,e){return n.emit("complete",t,e)}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.addPixiMiddleware=function(t){e._pixiMiddleware.push(t)},e.prototype.destroy=function(){this.removeAllListeners(),this.reset()},e}(r.default);for(var c in e.default=u,o.default.prototype)u.prototype[c]=o.default.prototype[c];u._pixiMiddleware=[n.blobMiddlewareFactory,s.default,a.default,h.default];var d=r.default.Resource;d.setExtensionXhrType("fnt",d.XHR_RESPONSE_TYPE.DOCUMENT)},function(t,e,i){"use strict";e.__esModule=!0,e.blobMiddlewareFactory=function(){return function(t,e){if(t.data){if(t.xhr&&t.xhrType===r.Resource.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var i=o.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=i,t.type=r.Resource.TYPE.IMAGE,void(t.data.onload=function(){o.revokeObjectURL(i),t.data.onload=null,e()})}}else{var s=t.xhr.getResponseHeader("content-type");if(s&&0===s.indexOf("image"))return t.data=new Image,t.data.src="data:"+s+";base64,"+(0,n.encodeBinary)(t.xhr.responseText),t.type=r.Resource.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}e()}else e()}};var r=i(36),n=i(85),o=window.URL||window.webkitURL},function(t,e,i){"use strict";e.__esModule=!0;var r=i(16);Object.defineProperty(e,"Mesh",{enumerable:!0,get:function(){return l(r).default}});var n=i(185);Object.defineProperty(e,"MeshRenderer",{enumerable:!0,get:function(){return l(n).default}});var o=i(186);Object.defineProperty(e,"CanvasMeshRenderer",{enumerable:!0,get:function(){return l(o).default}});var s=i(88);Object.defineProperty(e,"Plane",{enumerable:!0,get:function(){return l(s).default}});var a=i(187);Object.defineProperty(e,"NineSlicePlane",{enumerable:!0,get:function(){return l(a).default}});var h=i(188);function l(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"Rope",{enumerable:!0,get:function(){return l(h).default}})},function(t,e,i){"use strict";e.__esModule=!0;var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1)),n=s(i(5)),o=s(i(16));i(6);function s(t){return t&&t.__esModule?t:{default:t}}var a=r.Matrix.IDENTITY,h=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return r.shader=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new r.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n")},e.prototype.render=function(t){var e=this.renderer,i=e.gl,s=t._texture;if(s.valid){var h=t._glDatas[e.CONTEXT_UID];h||(e.bindVao(null),(h={shader:this.shader,vertexBuffer:n.default.GLBuffer.createVertexBuffer(i,t.vertices,i.STREAM_DRAW),uvBuffer:n.default.GLBuffer.createVertexBuffer(i,t.uvs,i.STREAM_DRAW),indexBuffer:n.default.GLBuffer.createIndexBuffer(i,t.indices,i.STATIC_DRAW),vao:null,dirty:t.dirty,indexDirty:t.indexDirty,vertexDirty:t.vertexDirty}).vao=new n.default.VertexArrayObject(i).addIndex(h.indexBuffer).addAttribute(h.vertexBuffer,h.shader.attributes.aVertexPosition,i.FLOAT,!1,8,0).addAttribute(h.uvBuffer,h.shader.attributes.aTextureCoord,i.FLOAT,!1,8,0),t._glDatas[e.CONTEXT_UID]=h),e.bindVao(h.vao),t.dirty!==h.dirty&&(h.dirty=t.dirty,h.uvBuffer.upload(t.uvs)),t.indexDirty!==h.indexDirty&&(h.indexDirty=t.indexDirty,h.indexBuffer.upload(t.indices)),t.vertexDirty!==h.vertexDirty&&(h.vertexDirty=t.vertexDirty,h.vertexBuffer.upload(t.vertices)),e.bindShader(h.shader),h.shader.uniforms.uSampler=e.bindTexture(s),e.state.setBlendMode(r.utils.correctBlendMode(t.blendMode,s.baseTexture.premultipliedAlpha)),h.shader.uniforms.uTransform&&(t.uploadUvTransform?h.shader.uniforms.uTransform=t._uvTransform.mapCoord.toArray(!0):h.shader.uniforms.uTransform=a.toArray(!0)),h.shader.uniforms.translationMatrix=t.worldTransform.toArray(!0),h.shader.uniforms.uColor=r.utils.premultiplyRgba(t.tintRgb,t.worldAlpha,h.shader.uniforms.uColor,s.baseTexture.premultipliedAlpha);var l=t.drawMode===o.default.DRAW_MODES.TRIANGLE_MESH?i.TRIANGLE_STRIP:i.TRIANGLES;h.vao.draw(l,t.indices.length,0)}},e}(r.ObjectRenderer);e.default=h,r.WebGLRenderer.registerPlugin("mesh",h)},function(t,e,i){"use strict";e.__esModule=!0;var r,n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1)),o=i(16),s=(r=o)&&r.__esModule?r:{default:r};var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e}return t.prototype.render=function(t){var e=this.renderer,i=e.context,r=t.worldTransform,n=e.resolution;e.roundPixels?i.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*n|0,r.ty*n|0):i.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*n,r.ty*n),e.context.globalAlpha=t.worldAlpha,e.setBlendMode(t.blendMode),t.drawMode===s.default.DRAW_MODES.TRIANGLE_MESH?this._renderTriangleMesh(t):this._renderTriangles(t)},t.prototype._renderTriangleMesh=function(t){for(var e=t.vertices.length/2,i=0;i<e-2;i++){var r=2*i;this._renderDrawTriangle(t,r,r+2,r+4)}},t.prototype._renderTriangles=function(t){for(var e=t.indices,i=e.length,r=0;r<i;r+=3){var n=2*e[r],o=2*e[r+1],s=2*e[r+2];this._renderDrawTriangle(t,n,o,s)}},t.prototype._renderDrawTriangle=function(t,e,i,r){var n=this.renderer.context,o=t.uvs,s=t.vertices,a=t._texture;if(a.valid){var h=a.baseTexture,l=h.source,u=h.width,c=h.height,d=void 0,p=void 0,f=void 0,g=void 0,y=void 0,v=void 0;if(t.uploadUvTransform){var m=t._uvTransform.mapCoord;d=(o[e]*m.a+o[e+1]*m.c+m.tx)*h.width,p=(o[i]*m.a+o[i+1]*m.c+m.tx)*h.width,f=(o[r]*m.a+o[r+1]*m.c+m.tx)*h.width,g=(o[e]*m.b+o[e+1]*m.d+m.ty)*h.height,y=(o[i]*m.b+o[i+1]*m.d+m.ty)*h.height,v=(o[r]*m.b+o[r+1]*m.d+m.ty)*h.height}else d=o[e]*h.width,p=o[i]*h.width,f=o[r]*h.width,g=o[e+1]*h.height,y=o[i+1]*h.height,v=o[r+1]*h.height;var b=s[e],$=s[i],w=s[r],x=s[e+1],_=s[i+1],T=s[r+1],E=t.canvasPadding/this.renderer.resolution;if(E>0){var O=E/Math.abs(t.worldTransform.a),S=E/Math.abs(t.worldTransform.d),C=(b+$+w)/3,P=(x+_+T)/3,I=b-C,M=x-P,A=Math.sqrt(I*I+M*M);b=C+I/A*(A+O),x=P+M/A*(A+S),M=_-P,$=C+(I=$-C)/(A=Math.sqrt(I*I+M*M))*(A+O),_=P+M/A*(A+S),M=T-P,w=C+(I=w-C)/(A=Math.sqrt(I*I+M*M))*(A+O),T=P+M/A*(A+S)}n.save(),n.beginPath(),n.moveTo(b,x),n.lineTo($,_),n.lineTo(w,T),n.closePath(),n.clip();var R=d*y+g*f+p*v-y*f-g*p-d*v,D=b*y+g*w+$*v-y*w-g*$-b*v,k=d*$+b*f+p*w-$*f-b*p-d*w,L=d*y*w+g*$*f+b*p*v-b*y*f-g*p*w-d*$*v,j=x*y+g*T+_*v-y*T-g*_-x*v,N=d*_+x*f+p*T-_*f-x*p-d*T,F=d*y*T+g*_*f+x*p*v-x*y*f-g*p*T-d*_*v;n.transform(D/R,j/R,k/R,N/R,L/R,F/R),n.drawImage(l,0,0,u*h.resolution,c*h.resolution,0,0,u,c),n.restore(),this.renderer.invalidateBlendMode()}},t.prototype.renderMeshFlat=function(t){var e=this.renderer.context,i=t.vertices,r=i.length/2;e.beginPath();for(var n=1;n<r-2;++n){var o=2*n,s=i[o],a=i[o+1],h=i[o+2],l=i[o+3],u=i[o+4],c=i[o+5];e.moveTo(s,a),e.lineTo(h,l),e.lineTo(u,c)}e.fillStyle="#FF0000",e.fill(),e.closePath()},t.prototype.destroy=function(){this.renderer=null},t}();e.default=a,n.CanvasRenderer.registerPlugin("mesh",a)},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=s(i(88)),o=s(i(17));function s(t){return t&&t.__esModule?t:{default:t}}var a=10,h=function(t){function e(i,r,n,o,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var h=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,4,4));return h._origWidth=i.orig.width,h._origHeight=i.orig.height,h._width=h._origWidth,h._height=h._origHeight,h._leftWidth=void 0!==r?r:a,h._rightWidth=void 0!==o?o:a,h._topHeight=void 0!==n?n:a,h._bottomHeight=void 0!==s?s:a,h._cachedTint=16777215,h._tintedTexture=null,h._canvasUvs=null,h.refresh(!0),h}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.updateHorizontalVertices=function(){var t=this.vertices,e=this._topHeight+this._bottomHeight,i=this._height>e?1:this._height/e;t[9]=t[11]=t[13]=t[15]=this._topHeight*i,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*i,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.vertices,e=this._leftWidth+this._rightWidth,i=this._width>e?1:this._width/e;t[2]=t[10]=t[18]=t[26]=this._leftWidth*i,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*i,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._renderCanvas=function(t){var e=t.context,i=this.worldTransform,r=t.resolution,n=16777215!==this.tint,s=this._texture;n&&this._cachedTint!==this.tint&&(this._cachedTint=this.tint,this._tintedTexture=o.default.getTintedTexture(this,this.tint));var a=n?this._tintedTexture:s.baseTexture.source;this._canvasUvs||(this._canvasUvs=[0,0,0,0,0,0,0,0]);var h=this.vertices,l=this._canvasUvs,u=n?0:s.frame.x,c=n?0:s.frame.y,d=u+s.frame.width,p=c+s.frame.height;l[0]=u,l[1]=u+this._leftWidth,l[2]=d-this._rightWidth,l[3]=d,l[4]=c,l[5]=c+this._topHeight,l[6]=p-this._bottomHeight,l[7]=p;for(var f=0;f<8;f++)l[f]*=s.baseTexture.resolution;e.globalAlpha=this.worldAlpha,t.setBlendMode(this.blendMode),t.roundPixels?e.setTransform(i.a*r,i.b*r,i.c*r,i.d*r,i.tx*r|0,i.ty*r|0):e.setTransform(i.a*r,i.b*r,i.c*r,i.d*r,i.tx*r,i.ty*r);for(var g=0;g<3;g++)for(var y=0;y<3;y++){var v=2*y+8*g,m=Math.max(1,l[y+1]-l[y]),b=Math.max(1,l[g+5]-l[g+4]),$=Math.max(1,h[v+10]-h[v]),w=Math.max(1,h[v+11]-h[v+1]);e.drawImage(a,l[y],l[g+4],m,b,h[v],h[v+1],$,w)}},e.prototype._refresh=function(){t.prototype._refresh.call(this);var e=this.uvs,i=this._texture;this._origWidth=i.orig.width,this._origHeight=i.orig.height;var r=1/this._origWidth,n=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=r*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-r*this._rightWidth,e[9]=e[11]=e[13]=e[15]=n*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-n*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.dirty++,this.multiplyUvs()},r(e,[{key:"width",get:function(){return this._width},set:function(t){this._width=t,this._refresh()}},{key:"height",get:function(){return this._height},set:function(t){this._height=t,this._refresh()}},{key:"leftWidth",get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()}},{key:"rightWidth",get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()}},{key:"topHeight",get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()}},{key:"bottomHeight",get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()}}]),e}(n.default);e.default=h},function(t,e,i){"use strict";e.__esModule=!0;var r,n=i(16);var o=function(t){function e(i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return n.points=r,n.vertices=new Float32Array(4*r.length),n.uvs=new Float32Array(4*r.length),n.colors=new Float32Array(2*r.length),n.indices=new Uint16Array(2*r.length),n.autoUpdate=!0,n.refresh(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._refresh=function(){var t=this.points;if(!(t.length<1)&&this._texture._uvs){this.vertices.length/4!==t.length&&(this.vertices=new Float32Array(4*t.length),this.uvs=new Float32Array(4*t.length),this.colors=new Float32Array(2*t.length),this.indices=new Uint16Array(2*t.length));var e=this.uvs,i=this.indices,r=this.colors;e[0]=0,e[1]=0,e[2]=0,e[3]=1,r[0]=1,r[1]=1,i[0]=0,i[1]=1;for(var n=t.length,o=1;o<n;o++){var s=4*o,a=o/(n-1);e[s]=a,e[s+1]=0,e[s+2]=a,e[s+3]=1,r[s=2*o]=1,r[s+1]=1,i[s=2*o]=s,i[s+1]=s+1}this.dirty++,this.indexDirty++,this.multiplyUvs(),this.refreshVertices()}},e.prototype.refreshVertices=function(){var t=this.points;if(!(t.length<1))for(var e=t[0],i=void 0,r=0,n=0,o=this.vertices,s=t.length,a=0;a<s;a++){var h=t[a],l=4*a;n=-((i=a<t.length-1?t[a+1]:h).x-e.x),r=i.y-e.y;var u=10*(1-a/(s-1));u>1&&(u=1);var c=Math.sqrt(r*r+n*n),d=this._texture.height/2;r/=c,n/=c,r*=d,n*=d,o[l]=h.x+r,o[l+1]=h.y+n,o[l+2]=h.x-r,o[l+3]=h.y-n,e=h}},e.prototype.updateTransform=function(){this.autoUpdate&&this.refreshVertices(),this.containerUpdateTransform()},e}(((r=n)&&r.__esModule?r:{default:r}).default);e.default=o},function(t,e,i){"use strict";e.__esModule=!0;var r=i(190);Object.defineProperty(e,"ParticleContainer",{enumerable:!0,get:function(){return o(r).default}});var n=i(191);function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"ParticleRenderer",{enumerable:!0,get:function(){return o(n).default}})},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1)),o=i(2);var s=function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500,r=arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16384,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return o>16384&&(o=16384),o>i&&(o=i),a._properties=[!1,!0,!1,!1,!1],a._maxSize=i,a._batchSize=o,a._glBuffers={},a._bufferUpdateIDs=[],a._updateID=0,a.interactiveChildren=!1,a.blendMode=n.BLEND_MODES.NORMAL,a.autoResize=s,a.roundPixels=!0,a.baseTexture=null,a.setProperties(r),a._tint=0,a.tintRgb=new Float32Array(4),a.tint=16777215,a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},e.prototype.renderWebGL=function(t){var e=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.hasLoaded||this.baseTexture.once("update",function(){return e.onChildrenChange(0)})),t.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},e.prototype.onChildrenChange=function(t){for(var e=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<e;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[e]=++this._updateID},e.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var e=t.context,i=this.worldTransform,r=!0,n=0,o=0,s=0,a=0;t.setBlendMode(this.blendMode),e.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var h=0;h<this.children.length;++h){var l=this.children[h];if(l.visible){var u=l._texture.frame;if(e.globalAlpha=this.worldAlpha*l.alpha,l.rotation%(2*Math.PI)==0)r&&(e.setTransform(i.a,i.b,i.c,i.d,i.tx*t.resolution,i.ty*t.resolution),r=!1),n=l.anchor.x*(-u.width*l.scale.x)+l.position.x+.5,o=l.anchor.y*(-u.height*l.scale.y)+l.position.y+.5,s=u.width*l.scale.x,a=u.height*l.scale.y;else{r||(r=!0),l.displayObjectUpdateTransform();var c=l.worldTransform;t.roundPixels?e.setTransform(c.a,c.b,c.c,c.d,c.tx*t.resolution|0,c.ty*t.resolution|0):e.setTransform(c.a,c.b,c.c,c.d,c.tx*t.resolution,c.ty*t.resolution),n=l.anchor.x*-u.width+.5,o=l.anchor.y*-u.height+.5,s=u.width,a=u.height}var d=l._texture.baseTexture.resolution;e.drawImage(l._texture.baseTexture.source,u.x*d,u.y*d,u.width*d,u.height*d,n*t.resolution,o*t.resolution,s*t.resolution,a*t.resolution)}}}},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._buffers)for(var i=0;i<this._buffers.length;++i)this._buffers[i].destroy();this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},r(e,[{key:"tint",get:function(){return this._tint},set:function(t){this._tint=t,(0,o.hex2rgb)(t,this.tintRgb)}}]),e}(n.Container);e.default=s},function(t,e,i){"use strict";e.__esModule=!0;var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1)),n=a(i(192)),o=a(i(193)),s=i(2);function a(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return n.shader=null,n.indexBuffer=null,n.properties=null,n.tempMatrix=new r.Matrix,n.CONTEXT_UID=0,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.shader=new n.default(t),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,unsignedByte:!0,uploadFunction:this.uploadTint,offset:0}]},e.prototype.start=function(){this.renderer.bindShader(this.shader)},e.prototype.render=function(t){var e=t.children,i=t._maxSize,n=t._batchSize,o=this.renderer,s=e.length;if(0!==s){s>i&&(s=i);var a=t._glBuffers[o.CONTEXT_UID];a||(a=t._glBuffers[o.CONTEXT_UID]=this.generateBuffers(t));var h=e[0]._texture.baseTexture;this.renderer.setBlendMode(r.utils.correctBlendMode(t.blendMode,h.premultipliedAlpha));var l=o.gl,u=t.worldTransform.copy(this.tempMatrix);u.prepend(o._activeRenderTarget.projectionMatrix),this.shader.uniforms.projectionMatrix=u.toArray(!0),this.shader.uniforms.uColor=r.utils.premultiplyRgba(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,h.premultipliedAlpha),this.shader.uniforms.uSampler=o.bindTexture(h);for(var c=!1,d=0,p=0;d<s;d+=n,p+=1){var f=s-d;if(f>n&&(f=n),p>=a.length){if(!t.autoResize)break;a.push(this._generateOneMoreBuffer(t))}var g=a[p];g.uploadDynamic(e,d,f);var y=t._bufferUpdateIDs[p]||0;(c=c||g._updateID<y)&&(g._updateID=t._updateID,g.uploadStatic(e,d,f)),o.bindVao(g.vao),g.vao.draw(l.TRIANGLES,6*f)}}},e.prototype.generateBuffers=function(t){for(var e=this.renderer.gl,i=[],r=t._maxSize,n=t._batchSize,s=t._properties,a=0;a<r;a+=n)i.push(new o.default(e,this.properties,s,n));return i},e.prototype._generateOneMoreBuffer=function(t){var e=this.renderer.gl,i=t._batchSize,r=t._properties;return new o.default(e,this.properties,r,i)},e.prototype.uploadVertices=function(t,e,i,r,n,o){for(var s=0,a=0,h=0,l=0,u=0;u<i;++u){var c=t[e+u],d=c._texture,p=c.scale.x,f=c.scale.y,g=d.trim,y=d.orig;g?(s=(a=g.x-c.anchor.x*y.width)+g.width,h=(l=g.y-c.anchor.y*y.height)+g.height):(s=y.width*(1-c.anchor.x),a=y.width*-c.anchor.x,h=y.height*(1-c.anchor.y),l=y.height*-c.anchor.y),r[o]=a*p,r[o+1]=l*f,r[o+n]=s*p,r[o+n+1]=l*f,r[o+2*n]=s*p,r[o+2*n+1]=h*f,r[o+3*n]=a*p,r[o+3*n+1]=h*f,o+=4*n}},e.prototype.uploadPosition=function(t,e,i,r,n,o){for(var s=0;s<i;s++){var a=t[e+s].position;r[o]=a.x,r[o+1]=a.y,r[o+n]=a.x,r[o+n+1]=a.y,r[o+2*n]=a.x,r[o+2*n+1]=a.y,r[o+3*n]=a.x,r[o+3*n+1]=a.y,o+=4*n}},e.prototype.uploadRotation=function(t,e,i,r,n,o){for(var s=0;s<i;s++){var a=t[e+s].rotation;r[o]=a,r[o+n]=a,r[o+2*n]=a,r[o+3*n]=a,o+=4*n}},e.prototype.uploadUvs=function(t,e,i,r,n,o){for(var s=0;s<i;++s){var a=t[e+s]._texture._uvs;a?(r[o]=a.x0,r[o+1]=a.y0,r[o+n]=a.x1,r[o+n+1]=a.y1,r[o+2*n]=a.x2,r[o+2*n+1]=a.y2,r[o+3*n]=a.x3,r[o+3*n+1]=a.y3,o+=4*n):(r[o]=0,r[o+1]=0,r[o+n]=0,r[o+n+1]=0,r[o+2*n]=0,r[o+2*n+1]=0,r[o+3*n]=0,r[o+3*n+1]=0,o+=4*n)}},e.prototype.uploadTint=function(t,e,i,r,n,o){for(var a=0;a<i;++a){var h=t[e+a],l=h._texture.baseTexture.premultipliedAlpha,u=h.alpha,c=u<1&&l?(0,s.premultiplyTint)(h._tintRGB,u):h._tintRGB+(255*u<<24);r[o]=c,r[o+n]=c,r[o+2*n]=c,r[o+3*n]=c,o+=4*n}},e.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),t.prototype.destroy.call(this),this.shader.destroy(),this.indices=null,this.tempMatrix=null},e}(r.ObjectRenderer);e.default=h,r.WebGLRenderer.registerPlugin("particle",h)},function(t,e,i){"use strict";e.__esModule=!0;var r,n=i(14);var o=function(t){function e(i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","attribute vec2 aPositionCoord;","attribute float aRotation;","uniform mat3 projectionMatrix;","uniform vec4 uColor;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   vec2 v = vec2(x, y);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor * uColor;","}"].join("\n"),["varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor;","  gl_FragColor = color;","}"].join("\n")))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(((r=n)&&r.__esModule?r:{default:r}).default);e.default=o},function(t,e,i){"use strict";e.__esModule=!0;var r=o(i(5)),n=o(i(35));function o(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e,i,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gl=e,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(var o=0;o<i.length;++o){var s=i[o];s={attribute:s.attribute,size:s.size,uploadFunction:s.uploadFunction,unsignedByte:s.unsignedByte,offset:s.offset},r[o]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return t.prototype.initBuffers=function(){var t=this.gl,e=0;this.indices=(0,n.default)(this.size),this.indexBuffer=r.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.dynamicStride=0;for(var i=0;i<this.dynamicProperties.length;++i){var o=this.dynamicProperties[i];o.offset=e,e+=o.size,this.dynamicStride+=o.size}var s=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(s),this.dynamicDataUint32=new Uint32Array(s),this.dynamicBuffer=r.default.GLBuffer.createVertexBuffer(t,s,t.STREAM_DRAW);var a=0;this.staticStride=0;for(var h=0;h<this.staticProperties.length;++h){var l=this.staticProperties[h];l.offset=a,a+=l.size,this.staticStride+=l.size}var u=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(u),this.staticDataUint32=new Uint32Array(u),this.staticBuffer=r.default.GLBuffer.createVertexBuffer(t,u,t.STATIC_DRAW),this.vao=new r.default.VertexArrayObject(t).addIndex(this.indexBuffer);for(var c=0;c<this.dynamicProperties.length;++c){var d=this.dynamicProperties[c];d.unsignedByte?this.vao.addAttribute(this.dynamicBuffer,d.attribute,t.UNSIGNED_BYTE,!0,4*this.dynamicStride,4*d.offset):this.vao.addAttribute(this.dynamicBuffer,d.attribute,t.FLOAT,!1,4*this.dynamicStride,4*d.offset)}for(var p=0;p<this.staticProperties.length;++p){var f=this.staticProperties[p];f.unsignedByte?this.vao.addAttribute(this.staticBuffer,f.attribute,t.UNSIGNED_BYTE,!0,4*this.staticStride,4*f.offset):this.vao.addAttribute(this.staticBuffer,f.attribute,t.FLOAT,!1,4*this.staticStride,4*f.offset)}},t.prototype.uploadDynamic=function(t,e,i){for(var r=0;r<this.dynamicProperties.length;r++){var n=this.dynamicProperties[r];n.uploadFunction(t,e,i,n.unsignedByte?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,n.offset)}this.dynamicBuffer.upload()},t.prototype.uploadStatic=function(t,e,i){for(var r=0;r<this.staticProperties.length;r++){var n=this.staticProperties[r];n.uploadFunction(t,e,i,n.unsignedByte?this.staticDataUint32:this.staticData,this.staticStride,n.offset)}this.staticBuffer.upload()},t.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicBuffer.destroy(),this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer.destroy(),this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null},t}();e.default=s},function(t,e,i){"use strict";e.__esModule=!0;var r=i(195);Object.defineProperty(e,"webgl",{enumerable:!0,get:function(){return h(r).default}});var n=i(196);Object.defineProperty(e,"canvas",{enumerable:!0,get:function(){return h(n).default}});var o=i(37);Object.defineProperty(e,"BasePrepare",{enumerable:!0,get:function(){return h(o).default}});var s=i(89);Object.defineProperty(e,"CountLimiter",{enumerable:!0,get:function(){return h(s).default}});var a=i(197);function h(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"TimeLimiter",{enumerable:!0,get:function(){return h(a).default}})},function(t,e,i){"use strict";e.__esModule=!0;var r,n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1)),o=i(37);var s=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return r.uploadHookHelper=r.renderer,r.registerFindHook(l),r.registerUploadHook(a),r.registerUploadHook(h),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(((r=o)&&r.__esModule?r:{default:r}).default);function a(t,e){return e instanceof n.BaseTexture&&(e._glTextures[t.CONTEXT_UID]||t.textureManager.updateTexture(e),!0)}function h(t,e){return e instanceof n.Graphics&&((e.dirty||e.clearDirty||!e._webGL[t.plugins.graphics.CONTEXT_UID])&&t.plugins.graphics.updateGraphics(e),!0)}function l(t,e){return t instanceof n.Graphics&&(e.push(t),!0)}e.default=s,n.WebGLRenderer.registerPlugin("prepare",s)},function(t,e,i){"use strict";e.__esModule=!0;var r,n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1)),o=i(37),s=(r=o)&&r.__esModule?r:{default:r};var a=16,h=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return r.uploadHookHelper=r,r.canvas=document.createElement("canvas"),r.canvas.width=a,r.canvas.height=a,r.ctx=r.canvas.getContext("2d"),r.registerUploadHook(l),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.ctx=null,this.canvas=null},e}(s.default);function l(t,e){if(e instanceof n.BaseTexture){var i=e.source,r=0===i.width?t.canvas.width:Math.min(t.canvas.width,i.width),o=0===i.height?t.canvas.height:Math.min(t.canvas.height,i.height);return t.ctx.drawImage(i,0,0,r,o,0,0,t.canvas.width,t.canvas.height),!0}return!1}e.default=h,n.CanvasRenderer.registerPlugin("prepare",h)},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.maxMilliseconds=e,this.frameStart=0}return t.prototype.beginFrame=function(){this.frameStart=Date.now()},t.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},t}();e.default=r},function(t,e,i){function r(t){this.options=1!=t&&t||{locator:{}}}function n(){this.cdata=!1}function o(t,e){e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber}function s(t){if(t)return"\n@"+(t.systemId||"")+"#[line:"+t.lineNumber+",col:"+t.columnNumber+"]"}function a(t,e,i){return"string"==typeof t?t.substr(e,i):t.length>=e+i||e?new java.lang.String(t,e,i)+"":t}function h(t,e){t.currentElement?t.currentElement.appendChild(e):t.document.appendChild(e)}r.prototype.parseFromString=function(t,e){var i=new l,r=this.options,o=r.domBuilder||new n,a=r.errorHandler,h=r.locator,u={},c={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return h&&o.setDocumentLocator(h),i.errorHandler=function(t,e,i){if(!t){if(e instanceof n)return e;t=e}var r={},o=t instanceof Function;function a(e){var n=t[e];if(!n)if(o)n=2==t.length?function(i){t(e,i)}:t;else for(var a=arguments.length;--a&&!(n=t[arguments[a]]););r[e]=n&&function(t){n(t+s(i))}||function(){}}return i=i||{},a("warning","warn"),a("error","warn","warning"),a("fatalError","warn","warning","error"),r}(a,o,h),i.domBuilder=r.domBuilder||o,/\/x?html?$/.test(e)&&(c.nbsp=" ",c.copy="©",u[""]="http://www.w3.org/1999/xhtml"),i.parse(t,u,c),o.document},n.prototype={startDocument:function(){this.document=(new u).createDocument(null,null,null),this.locator&&(this.document.documentURI=this.locator.systemId)},startElement:function(t,e,i,r){var n=this.document,s=n.createElementNS(t,i||e),a=r.length;h(this,s),this.currentElement=s,this.locator&&o(this.locator,s);for(var l=0;l<a;l++){t=r.getURI(l);var u=r.getValue(l),c=(i=r.getQName(l),n.createAttributeNS(t,i));c.getOffset&&o(c.getOffset(1),c),c.value=c.nodeValue=u,s.setAttributeNode(c)}},endElement:function(t,e,i){var r=this.currentElement;r.tagName;this.currentElement=r.parentNode},startPrefixMapping:function(t,e){},endPrefixMapping:function(t){},processingInstruction:function(t,e){var i=this.document.createProcessingInstruction(t,e);this.locator&&o(this.locator,i),h(this,i)},ignorableWhitespace:function(t,e,i){},characters:function(t,e,i){if(t=a.apply(this,arguments),this.currentElement&&t){if(this.cdata){var r=this.document.createCDATASection(t);this.currentElement.appendChild(r)}else{r=this.document.createTextNode(t);this.currentElement.appendChild(r)}this.locator&&o(this.locator,r)}},skippedEntity:function(t){},endDocument:function(){this.document.normalize()},setDocumentLocator:function(t){(this.locator=t)&&(t.lineNumber=0)},comment:function(t,e,i){t=a.apply(this,arguments);var r=this.document.createComment(t);this.locator&&o(this.locator,r),h(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(t,e,i){var r=this.document.implementation;if(r&&r.createDocumentType){var n=r.createDocumentType(t,e,i);this.locator&&o(this.locator,n),h(this,n)}},warning:function(t){console.warn(t,s(this.locator))},error:function(t){console.error(t,s(this.locator))},fatalError:function(t){throw console.error(t,s(this.locator)),t}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(t){n.prototype[t]=function(){return null}});var l=i(199).XMLReader,u=e.DOMImplementation=i(90).DOMImplementation;e.XMLSerializer=i(90).XMLSerializer,e.DOMParser=r},function(t,e,i){var r=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,n=new RegExp("[\\-\\.0-9"+r.source.slice(1,-1)+"·̀-ͯ\\ux203F-⁀]"),o=new RegExp("^"+r.source+n.source+"*(?::"+r.source+n.source+"*)?$"),s=0,a=1,h=2,l=3,u=4,c=5,d=6,p=7;function f(){}function g(t,e){return e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber,e}function y(t,e,i,r,n){for(var o,f=++e,g=s;;){var y=t.charAt(f);switch(y){case"=":if(g===a)o=t.slice(e,f),g=l;else{if(g!==h)throw new Error("attribute equal must after attrName");g=l}break;case"'":case'"':if(g===l){if(e=f+1,!((f=t.indexOf(y,e))>0))throw new Error("attribute value no end '"+y+"' match");v=t.slice(e,f).replace(/&#?\w+;/g,r),i.add(o,v,e-1),g=c}else{if(g!=u)throw new Error('attribute value must after "="');v=t.slice(e,f).replace(/&#?\w+;/g,r),i.add(o,v,e),n.warning('attribute "'+o+'" missed start quot('+y+")!!"),e=f+1,g=c}break;case"/":switch(g){case s:i.setTagName(t.slice(e,f));case c:case d:case p:g=p,i.closed=!0;case u:case a:case h:break;default:throw new Error("attribute invalid close char('/')")}break;case">":switch(g){case s:i.setTagName(t.slice(e,f));case c:case d:case p:break;case u:case a:"/"===(v=t.slice(e,f)).slice(-1)&&(i.closed=!0,v=v.slice(0,-1));case h:g===h&&(v=o),g==u?(n.warning('attribute "'+v+'" missed quot(")!!'),i.add(o,v.replace(/&#?\w+;/g,r),e)):(n.warning('attribute "'+v+'" missed value!! "'+v+'" instead!!'),i.add(v,v,e));break;case l:throw new Error("attribute value missed!!")}return f;case"":y=" ";default:if(y<=" ")switch(g){case s:i.setTagName(t.slice(e,f)),g=d;break;case a:o=t.slice(e,f),g=h;break;case u:var v=t.slice(e,f).replace(/&#?\w+;/g,r);n.warning('attribute "'+v+'" missed quot(")!!'),i.add(o,v,e);case c:g=d}else switch(g){case h:n.warning('attribute "'+o+'" missed value!! "'+o+'" instead!!'),i.add(o,o,e),e=f,g=a;break;case c:n.warning('attribute space is required"'+o+'"!!');case d:g=a,e=f;break;case l:g=u,e=f;break;case p:throw new Error("elements closed character '/' and '>' must be connected to")}}f++}}function v(t,e,i){for(var r=t.tagName,n=null,o=i[i.length-1].currentNSMap,s=t.length;s--;){var a=t[s],h=a.qName,l=a.value;if((p=h.indexOf(":"))>0)var u=a.prefix=h.slice(0,p),c=h.slice(p+1),d="xmlns"===u&&c;else c=h,u=null,d="xmlns"===h&&"";a.localName=c,!1!==d&&(null==n&&(n={},$(o,o={})),o[d]=n[d]=l,a.uri="http://www.w3.org/2000/xmlns/",e.startPrefixMapping(d,l))}for(s=t.length;s--;){(u=(a=t[s]).prefix)&&("xml"===u&&(a.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==u&&(a.uri=o[u]))}var p;(p=r.indexOf(":"))>0?(u=t.prefix=r.slice(0,p),c=t.localName=r.slice(p+1)):(u=null,c=t.localName=r);var f=t.uri=o[u||""];if(e.startElement(f,c,r,t),t.closed){if(e.endElement(f,c,r),n)for(u in n)e.endPrefixMapping(u)}else t.currentNSMap=o,t.localNSMap=n,i.push(t)}function m(t,e,i,r,n){if(/^(?:script|textarea)$/i.test(i)){var o=t.indexOf("</"+i+">",e),s=t.substring(e+1,o);if(/[&<]/.test(s))return/^script$/i.test(i)?(n.characters(s,0,s.length),o):(s=s.replace(/&#?\w+;/g,r),n.characters(s,0,s.length),o)}return e+1}function b(t,e,i,r){var n=r[i];return null==n&&(n=r[i]=t.lastIndexOf("</"+i+">")),n<e}function $(t,e){for(var i in t)e[i]=t[i]}function w(t,e,i){switch(t.charAt(e+2)){case"-":if("-"===t.charAt(e+3)){var r=t.indexOf("--\x3e",e+4);return i.comment(t,e+4,r-e-4),r+3}return-1;default:if("CDATA["==t.substr(e+3,6)){r=t.indexOf("]]>",e+9);return i.startCDATA(),i.characters(t,e+9,r-e-9),i.endCDATA(),r+3}var n=function(t,e){var i,r=[],n=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;n.lastIndex=e,n.exec(t);for(;i=n.exec(t);)if(r.push(i),i[1])return r}(t,e),o=n.length;if(o>1&&/!doctype/i.test(n[0][0])){var s=n[1][0],a=o>3&&/^public$/i.test(n[2][0])&&n[3][0],h=o>4&&n[4][0],l=n[o-1];return i.startDTD(s,a,h),i.endDTD(),l.index+l[0].length}}return-1}function x(t,e,i){var r=t.indexOf("?>",e);if(r){var n=t.substring(e,r).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(n){n[0].length;return i.processingInstruction(n[1],n[2]),r+2}return-1}return-1}function _(t){}function T(t,e){return t.__proto__=e,t}f.prototype={parse:function(t,e,i){var r=this.domBuilder;r.startDocument(),$(e,e={}),function(t,e,i,r,n){function o(t){var e=t.slice(1,-1);return e in i?i[e]:"#"===e.charAt(0)?function(t){if(t>65535){var e=55296+((t-=65536)>>10),i=56320+(1023&t);return String.fromCharCode(e,i)}return String.fromCharCode(t)}(parseInt(e.substr(1).replace("x","0x"))):(n.error("entity not found:"+t),t)}function s(e){var i=t.substring(f,e).replace(/&#?\w+;/g,o);c&&a(f),r.characters(i,0,e-f),f=e}function a(e,i){for(;e>=l&&(i=u.exec(t));)h=i.index,l=h+i[0].length,c.lineNumber++;c.columnNumber=e-h+1}var h=0,l=0,u=/.+(?:\r\n?|\n)|.*$/g,c=r.locator,d=[{currentNSMap:e}],p={},f=0;for(;;){var $=t.indexOf("<",f);switch($>f&&s($),t.charAt($+1)){case"/":var T=t.indexOf(">",$+3),E=t.substring($+2,T),O=d.pop(),S=O.localNSMap;if(O.tagName!=E&&n.fatalError("end tag name: "+E+" is not match the current start tagName:"+O.tagName),r.endElement(O.uri,O.localName,E),S)for(var C in S)r.endPrefixMapping(C);T++;break;case"?":c&&a($),T=x(t,$,r);break;case"!":c&&a($),T=w(t,$,r);break;default:if($<0)return void(t.substr(f).match(/^\s*$/)||n.error("source code out of document root"));try{c&&a($);var P=new _,T=y(t,$,P,o,n),I=P.length;if(I&&c){for(var M=g(c,{}),$=0;$<I;$++){var A=P[$];a(A.offset),A.offset=g(c,{})}g(M,c)}P.closed=P.closed||b(t,T,P.tagName,p),v(P,r,d),"http://www.w3.org/1999/xhtml"!==P.uri||P.closed?T++:T=m(t,T,P.tagName,o,r)}catch(t){n.error("element parse error: "+t),T=-1}}T<0?s($+1):f=T}}(t,e,i,r,this.errorHandler),r.endDocument()}},_.prototype={setTagName:function(t){if(!o.test(t))throw new Error("invalid tagName:"+t);this.tagName=t},add:function(t,e,i){if(!o.test(t))throw new Error("invalid attribute:"+t);this[this.length++]={qName:t,value:e,offset:i}},length:0,getLocalName:function(t){return this[t].localName},getOffset:function(t){return this[t].offset},getQName:function(t){return this[t].qName},getURI:function(t){return this[t].uri},getValue:function(t){return this[t].value}},T({},T.prototype)instanceof T||(T=function(t,e){function i(){}for(e in i.prototype=e,i=new i,t)i[e]=t[e];return i}),e.XMLReader=f,e.XMLReader=f},function(t,e,i){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}i.r(e);var u=function(){function t(){var e,i,r;h(this,t),r={cursor:null},(i="style")in(e=this)?Object.defineProperty(e,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[i]=r}var e,i,r;return e=t,(i=[{key:"appendChild",value:function(){}},{key:"addEventListener",value:function(){}},{key:"removeEventListener",value:function(){}}])&&l(e.prototype,i),r&&l(e,r),t}(),c=function(t){function e(){return h(this,e),n(this,o(e).apply(this,arguments))}return s(e,u),e}(),d=function(t){function e(){return h(this,e),n(this,o(e).apply(this,arguments))}return s(e,u),e}(),p=function(t){function e(){return h(this,e),n(this,o(e).apply(this,arguments))}return s(e,u),e}();function f(){var t=wx.createCanvas();return t.__proto__.__proto__=new c,t}var g=new f,y=function(){return wx.createImage()},v={},m={body:new u("body"),addEventListener:function(t,e){v[t]=v[t]||[],v[t].push(e)},removeEventListener:function(t,e){if(v[t]&&v[t].length){var i=v[t].indexOf(e);-1!==i&&v[t].splice(i)}},dispatch:function(t){var e=v[t.type];e&&e.forEach(function(e){return e(t)})},createElement:function(t){switch(t){case"canvas":return new f;case"img":return new y;default:return new u}}};function b(){}function $(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var w=function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),$(this,"preventDefault",b),$(this,"stopPropagation",b),$(this,"target",g),$(this,"currentTarget",g),this.type=e,i&&(this.target=this.currentTarget=i)};function x(t){return function(e){var i=new w(t);i.touches=i.targetTouches=Array.from(e.touches),i.changedTouches=e.changedTouches,i.timeStamp=e.timeStamp,m.dispatch(i)}}wx.onTouchStart(x("touchstart")),wx.onTouchMove(x("touchmove")),wx.onTouchEnd(x("touchend")),wx.onTouchCancel(x("touchcancel"));var _=w,T={getItem:function(t){return wx.getStorageSync(t)},setItem:function(t,e){return wx.setStorageSync(t,e)},clear:function(){wx.clearStorageSync()}};function E(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function O(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var S=new WeakMap,C=new WeakMap,P=new WeakMap,I=new WeakMap,M=new WeakMap;function A(t){if("function"==typeof this["on".concat(t)]){for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];this["on".concat(t)].apply(this,i)}}function R(t){this.readyState=t,A.call(this,"readystatechange")}var D=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),O(this,"onabort",null),O(this,"onerror",null),O(this,"onload",null),O(this,"onloadstart",null),O(this,"onprogress",null),O(this,"ontimeout",null),O(this,"onloadend",null),O(this,"onreadystatechange",null),O(this,"readyState",0),O(this,"response",null),O(this,"responseText",null),O(this,"responseType",""),O(this,"responseXML",null),O(this,"status",0),O(this,"statusText",""),O(this,"upload",{}),O(this,"withCredentials",!1),P.set(this,{"content-type":"application/x-www-form-urlencoded"}),I.set(this,{})}var e,i,r;return e=t,(i=[{key:"abort",value:function(){var t=M.get(this);t&&t.abort()}},{key:"getAllResponseHeaders",value:function(){var t=I.get(this);return Object.keys(t).map(function(e){return"".concat(e,": ").concat(t[e])}).join("\n")}},{key:"getResponseHeader",value:function(t){return I.get(this)[t]}},{key:"open",value:function(e,i){C.set(this,e),S.set(this,i),R.call(this,t.OPENED)}},{key:"overrideMimeType",value:function(){}},{key:"send",value:function(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(this.readyState!==t.OPENED)throw new Error("Failed to execute 'send' on 'XMLHttpRequest': The object's state must be OPENED.");wx.request({data:i,url:S.get(this),method:C.get(this),header:P.get(this),responseType:this.responseType,success:function(i){var r=i.data,n=i.statusCode,o=i.header;if("string"!=typeof r&&!(r instanceof ArrayBuffer))try{r=JSON.stringify(r)}catch(t){r=r}if(e.status=n,I.set(e,o),A.call(e,"loadstart"),R.call(e,t.HEADERS_RECEIVED),R.call(e,t.LOADING),e.response=r,r instanceof ArrayBuffer){e.responseText="";for(var s=new Uint8Array(r),a=s.byteLength,h=0;h<a;h++)e.responseText+=String.fromCharCode(s[h])}else e.responseText=r;R.call(e,t.DONE),A.call(e,"load"),A.call(e,"loadend")},fail:function(t){var i=t.errMsg;-1!==i.indexOf("abort")?A.call(e,"abort"):A.call(e,"error",i),A.call(e,"loadend")}})}},{key:"setRequestHeader",value:function(t,e){var i=P.get(this);i[t]=e,P.set(this,i)}},{key:"addEventListener",value:function(t,e){this["on".concat(t)]=e}}])&&E(e.prototype,i),r&&E(e,r),t}();O(D,"UNSEND",0),O(D,"OPENED",1),O(D,"HEADERS_RECEIVED",2),O(D,"LOADING",3),O(D,"DONE",4);var k=wx.getSystemInfoSync().platform;if(GameGlobal.canvas=g,g.addEventListener=m.addEventListener,g.removeEventListener=m.removeEventListener,"devtools"===k)for(var L in Object.defineProperties(window,{TouchEvent:{value:_},Image:{value:y},ontouchstart:{value:b},addEventListener:{value:b},localStorage:{value:T},HTMLImageElement:{value:d},HTMLCanvasElement:{value:c},HTMLVideoElement:{value:p},XMLHttpRequest:{value:D},Element:{value:u}}),m){var j=Object.getOwnPropertyDescriptor(window.document,L);j&&!j.configurable||Object.defineProperty(window.document,L,{value:m[L]})}else GameGlobal.TouchEvent=_,GameGlobal.Image=y,GameGlobal.ontouchstart=b,GameGlobal.navigator={language:"zh-cn",appVersion:"5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Safari/537.36",userAgent:"Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Safari/537.36",onLine:!0},GameGlobal.document=m,GameGlobal.addEventListener=b,GameGlobal.location={origin:"",href:""},GameGlobal.localStorage=T,GameGlobal.HTMLImageElement=d,GameGlobal.HTMLCanvasElement=c,GameGlobal.HTMLVideoElement=p,GameGlobal.XMLHttpRequest=D,GameGlobal.window=GameGlobal}]);
//# sourceMappingURL=index.js.map